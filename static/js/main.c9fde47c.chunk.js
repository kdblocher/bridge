(this.webpackJsonpbridge=this.webpackJsonpbridge||[]).push([[0],{309:function(t,e,n){var r,i=n(133).wrap,a=n(508);t.exports=function t(){return this instanceof t?i(a()):r||(r=i(a()))}},310:function(t,e,n){var r,i=n(133).wrap,a=n(509);t.exports=function t(){return this instanceof t?i(a()):r||(r=i(a()))}},311:function(t,e,n){var r,i=n(133).wrap,a=n(510);t.exports=function t(){return this instanceof t?i(a()):r||(r=i(a()))}},312:function(t,e,n){var r,i=n(133).wrap,a=n(511);t.exports=function t(){return this instanceof t?i(a()):r||(r=i(a()))}},405:function(t,e,n){},417:function(t,e){},419:function(t,e){},429:function(t,e){},431:function(t,e){},457:function(t,e){},458:function(t,e){},463:function(t,e){},465:function(t,e){},472:function(t,e){},491:function(t,e){},508:function(t,e,n){t.exports=function(){return new Worker(n.p+"18e3c81c2323c8eb46b8.worker.js")}},509:function(t,e,n){t.exports=function(){return new Worker(n.p+"b336ae9de62a3d44248a.worker.js")}},510:function(t,e,n){t.exports=function(){return new Worker(n.p+"7fa07261cb9c405836ae.worker.js")}},511:function(t,e,n){t.exports=function(){return new Worker(n.p+"83ac418f8edce5ce2b6b.worker.js")}},612:function(t,e,n){"use strict";n.r(e);n(405),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r,i=n(13),a=n(17),c=n(0),u=n(2),o=n(11),s=n.n(o),l=n(46),p=n(125),f=function(){return Object(p.b)()},d=p.c,j=function(t){return function(e){return e[t]}},h=n(10),b=n(9),m=function(t){throw new Error("shouldn't get here with ".concat(JSON.stringify(t)))},O=function(t){return Object(u.pipe)(c.i.Ord,c.l.contramap((function(e){return t.indexOf(e)})))},v=Object(u.flow)(O,c.l.reverse),y=n(43),g=n(207),S=["C","D","H","S"],x=c.g.eqStrict,k=v(S),w=(O(S),["2","3","4","5","6","7","8","9","T","J","Q","K","A"]),C=y.b(y.c,(function(t){return t>=2&&t<=14}),"Rank"),A=new y.a("Rank",C.is,C.validate,(function(t){return w[t-2]})),_=c.g.eqStrict,B=c.i.Ord,E=Object(u.pipe)(B,c.l.reverse),P=Object(u.pipe)(w,c.n.mapWithIndex((function(t,e){return Object(u.pipe)(t+2,A.decode,(function(t){return t.right}))}))),R=Object(u.pipe)(P,c.n.takeRight(5)),M=function(t){return Object(u.pipe)(w,c.n.findIndex((function(e){return c.x.Eq.equals(t,e)})),c.j.chain((function(t){return Object(u.pipe)(P,c.n.lookup(t))})))},q=c.g.struct({suit:x,rank:_}),D=c.l.getMonoid().concat(Object(u.pipe)(k,c.l.contramap((function(t){return t.suit}))),Object(u.pipe)(E,c.l.contramap((function(t){return t.rank})))),N=Object(u.pipe)(52,c.p.makeBy((function(t){return{suit:S[Math.floor(t/13)],rank:A.decode(t%13+2).right}}))),I=function(){return c.l.contramap((function(t){var e=Object(i.a)(t,2),n=e[0];e[1];return n}))(k)},F={S:[],H:[],D:[],C:[]},T=function(t){return Object(u.pipe)(t,c.r.toReadonlyArray(D),c.p.fromReadonlyArray,c.j.fold((function(){return F}),Object(u.flow)(c.p.groupBy((function(t){return t.suit})),c.q.map(c.p.map((function(t){return t.rank}))),c.q.union(c.n.getUnionMonoid(_))(F))))},L={engine:g.a.autoSeed()},H=function(){return Object(g.b)(L.engine,Object(b.a)(N))},z=["N","E","S","W"],W=c.x.Eq,U=(O(z),c.x.Eq,O(["NorthSouth","EastWest"]),c.r.getEq(q)),$=c.q.getEq(U),K=[].concat(Object(b.a)(S),["N"]),J=c.g.eqStrict,G=O(K),Q=["C","D"],V=(c.g.struct({dealer:W,deal:$}),function(t){switch(t%16+1){case 1:case 8:case 11:case 14:return"Neither";case 2:case 5:case 12:case 15:return"NorthSouth";case 3:case 6:case 9:case 16:return"EastWest";case 4:case 7:case 10:case 13:return"Both";default:throw Error("Not possible")}}),X=["Pass","Double","Redouble"],Z=c.x.Eq,Y=function(t){return"string"===typeof t&&Object(u.pipe)(X,c.n.elem(c.x.Eq)(t))},tt=c.g.struct({level:c.i.Eq,strain:c.x.Eq}),et=c.l.getMonoid().concat(Object(u.pipe)(c.i.Ord,c.l.contramap((function(t){return t.level}))),Object(u.pipe)(G,c.l.contramap((function(t){return t.strain})))),nt=Object(u.pipe)(c.a.sequenceS(c.n.Apply)({level:c.n.makeBy(7,(function(t){return t+1})),strain:K}),c.n.sort(et)),rt=function(t){return!Y(t)},it=c.g.fromEquals((function(t,e){return Y(t)&&Y(e)&&Z.equals(t,e)||!Y(t)&&!Y(e)&&tt.equals(t,e)})),at=(c.g.struct({level:c.i.Eq,strain:c.x.Eq,modifier:c.x.Eq}),c.p.getEq(it),n(21)),ct=n(308),ut=n.n(ct),ot=n(61),st=y.b(y.c,(function(t){return!0}),"Date"),lt=function(){return Object(u.pipe)((new Date).getTime(),st.decode,(function(t){return t.right}))},pt=(y.e([st,st]),function(t){return t.type.progress}),ft=function(t){return c.j.some({unitsDone:0,updateDate:c.j.none,speed:c.j.none,value:t})},dt=function(t){return function(e){return function(n){return function(r){return Object(u.pipe)(r,c.j.map((function(r){var i=lt(),a=Object(u.pipe)(r.updateDate,c.j.map((function(t){return(i-t)/e})),c.j.filter((function(t){return!isNaN(t)&&isFinite(t)})));return{unitsDone:r.unitsDone+e,updateDate:c.j.some(i),value:t.concat(r.value,n),speed:Object(u.pipe)(c.j.Do,c.j.apS("avg",r.speed),c.j.apS("next",a),c.j.map((function(t){return.9*t.avg+.1*t.next})),c.j.filter((function(t){return!isNaN(t)&&isFinite(t)})),c.j.alt((function(){return a})),c.j.alt((function(){return r.speed})))}})))}}}},jt=y.b(y.d,(function(t){return ot.UuidTool.isUuid(t)}),"GenerationId"),ht=y.b(y.d,(function(t){return ot.UuidTool.isUuid(t)}),"AnalysisId"),bt=function(t){return{id:ht.decode(ot.UuidTool.newUuid()).right,name:"New analysis (".concat(t.length," paths)"),paths:t,generations:[]}},mt=y.b(y.d,(function(t){return!0}),"PathHash"),Ot=function(t){return mt.decode(ut()(t)).right},vt=function(t){switch(t){case"GenerateDeals":return ft(0);case"Satisfies":case"Solve":return ft({});default:return m(t)}},yt=y.b(y.d,(function(t){return ot.UuidTool.isUuid(t)}),"JobId"),gt=n(110),St=n(40),xt=St.f(c.r.toReadonlyArray(D),c.r.fromReadonlyArray(q)),kt=(r=xt,St.f(c.d.map(r.get),c.d.map(r.reverseGet))),wt=(Object(u.flow)(c.d.fromPredicate(ot.UuidTool.isUuid,(function(t){return gt.a(t,"Invalid uuid string")})),c.d.map((function(t){return new ot.Uuid(t)}))),function(t){return Object(u.pipe)(new ot.Uuid(t.id).toBytes(),c.n.takeLeft(13),c.n.chain(Object(u.flow)((function(t){return c.n.unfold([t,4],(function(t){var e=Object(i.a)(t,2),n=e[0],r=e[1];return 0===r?c.j.none:c.j.some([3&n,[n>>2,r-1]])}))}),c.n.reverse)))}),Ct=y.b(y.f({id:y.d}),(function(t){return Object(u.pipe)(t,wt,c.n.reduce(c.b.replicate(4,0),(function(t,e){return t[e]+=1,t})),c.n.every((function(t){return 13===t})))}),"Deal"),At={encode:Object(u.flow)(wt,c.p.zip(Object(u.pipe)(N,c.p.sort(D))),c.p.map((function(t){var e=Object(i.a)(t,2),n=e[0],r=e[1];return[z[n],r]})),c.p.groupBy(c.s.fst),c.q.map(Object(u.flow)(c.p.map(c.s.snd),c.r.fromReadonlyArray(q))))},_t={encode:Object(u.flow)(c.q.foldMapWithIndex(c.l.trivial)(c.n.getMonoid())((function(t,e){return Object(u.pipe)(e,c.r.toReadonlyArray(c.l.trivial),c.n.map((function(e){return[e,z.indexOf(t)]})))})),c.n.sort(c.l.contramap((function(t){return t[0]}))(D)),c.n.map(c.s.snd),c.n.chunksOf(4),c.n.map(c.n.reduce(0,(function(t,e){return(t<<2)+e}))),c.n.concat(c.n.replicate(3,0)),c.n.toArray,(function(t){return Ct.decode({id:new ot.Uuid(t).toString()}).right}))},Bt=St.f(_t.encode,At.encode),Et=St.f((function(t){return Object(h.a)(Object(h.a)({},t),{},{deal:Bt.get(t.deal)})}),(function(t){return Object(h.a)(Object(h.a)({},t),{},{deal:Bt.reverseGet(t.deal)})})),Pt=St.f((function(t){return"".concat(t.level).concat(t.strain)}),(function(t){return{level:parseInt(t.charAt(0)),strain:t.charAt(1)}})),Rt=St.f((function(t){return Y(t)?t:Pt.get(t)}),(function(t){return Y(t)?t:Pt.reverseGet(t)})),Mt=y.b(y.d,(function(t){return Object(u.pipe)(t,c.x.split("."),c.n.every((function(t){return 2===t.length||Y(t)})))}),"BidPath"),qt=St.f(Object(u.flow)(c.n.map(Rt.get),c.n.intersperse("."),c.n.foldMap(c.x.Monoid)(u.identity),(function(t){return Mt.decode(t).right})),Object(u.flow)(c.x.split("."),c.p.map(Rt.reverseGet))),Dt=n(27),Nt=n(35),It=n(42),Ft=n(617),Tt=n(622),Lt=n(163),Ht=n(56),zt=n(6),Wt=n.n(zt),Ut=n(18),$t=n(309),Kt=n.n($t),Jt=n(310),Gt=n.n(Jt),Qt=n(311),Vt=n.n(Qt),Xt=n(312),Zt=n.n(Xt),Yt=n(70),te=n(618),ee=n(39),ne=n(319),re=n(621),ie=n(615),ae=n(616),ce=n(320),ue=function(t,e){return function(n){var r=navigator.hardwareConcurrency?navigator.hardwareConcurrency-1:1;return new ee.a((function(a){var o=new ne.a,s=0,l=0,p=!1,f=c.n.makeBy(r,(function(e){var n=null;return{factory:function(){var r;return null!==(r=n)&&void 0!==r?r:n=t(e)},terminate:function(){this.processing},processing:!1,index:e}})),d=Object(re.a)(o,n).pipe(Object(ie.a)((function(t){var e=Object(i.a)(t,1)[0];l++,e.processing=!0})),Object(ae.a)((function(){o.complete(),p=!0,f.forEach((function(t){return t.terminate()}))})),Object(ce.a)((function(t){var n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(u.pipe)(r.factory(),e,Object(u.apply)(c),Yt.a,Object(ae.a)((function(){s++,r.processing=!1,p?r.terminate():o.next(r),p&&s===l&&a.complete()})))}))).subscribe(a);return f.forEach((function(t){return o.next(t)})),function(){return d.unsubscribe()}}))}},oe=n(209),se=c.z.tryCatch((function(){return Object(oe.a)("bridge")}),(function(){return"DeleteError"})),le=c.z.tryCatch((function(){return Object(oe.b)("bridge",1,{upgrade:function(t){var e=t.createObjectStore("deal");e.createIndex("batch","batchId"),e.createIndex("generation","generationId"),t.createObjectStore("satisfies").createIndex("generation","generationId")}})}),(function(){return"OpenDatabaseFailed"})),pe=function(t){return function(e){return c.z.tryCatchK((function(n){return n.getAllFromIndex("deal",t,e)}),(function(){return"SelectError"}))}},fe=function(t){return Object(u.pipe)(le,c.z.chain(pe("generation")(t)),c.z.map(Object(u.flow)(c.n.map((function(t){return t.batchId})),c.n.uniq(c.x.Eq))))},de=function(t){return Object(u.pipe)(le,c.z.chain((function(t){return c.z.of(t.transaction(["deal","satisfies"],"readwrite"))})),c.z.chainFirst((function(e){return Object(u.pipe)(c.z.tryCatch((function(){return e.objectStore("deal").index("generation").getAllKeys(t)}),(function(){return"SelectError"})),c.z.chain(c.z.traverseArray(c.z.tryCatchK((function(t){return e.objectStore("deal").delete(t)}),(function(){return"DeleteError"})))))})),c.z.chainFirst((function(e){return Object(u.pipe)(c.z.tryCatch((function(){return e.objectStore("satisfies").index("generation").getAllKeys(t)}),(function(){return"SelectError"})),c.z.chain(c.z.traverseArray(c.z.tryCatchK((function(t){return e.objectStore("satisfies").delete(t)}),(function(){return"DeleteError"})))))})),c.z.chain((function(t){return c.z.tryCatch((function(){return t.done}),(function(){return"CommitRejected"}))})))},je=function(t){return Object(u.pipe)(t,c.n.mapWithIndex((function(t,e){return Object(u.pipe)(e,Bt.reverseGet,(n=t,function(t){return{number:n,dealer:z[(n-1)%z.length],deal:t,vulnerability:V(n)}}),Et.get);var n})),ue((function(){return new Kt.a}),(function(t){return function(e){return t.getResult(e)}})),Dt.b.bimap((function(){return""}),(function(t){return Object(at.a)({},t.board.deal.id,t)})))},he=function(t){return Object(u.pipe)(t,ue((function(){return new Vt.a}),(function(t){return function(){var e=Object(Ut.a)(Wt.a.mark((function e(n){return Wt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u.pipe,e.next=3,t.getPathIsSound(n);case 3:return e.t1=e.sent,e.t2=c.d.fold((function(t){return t.length}),(function(){return n.length})),e.t3=function(t){return Object(u.pipe)(n,c.n.mapWithIndex((function(e){return[Object(u.pipe)(n,c.p.map(j("bid")),c.n.takeLeft(e+1)),e<t]})))},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),Dt.a.chain((function(t){return Object(Yt.a)(t)})))},be=Object(Ht.d)({name:"generator",initialState:{jobs:[],completed:[]},reducers:{scheduleJob:function(t,e){var n,r,i;t.jobs.push(Object(Nt.a)((n=e.payload.analysisId,r=e.payload.estimatedUnitsInitial,i={type:e.payload.type,parameter:e.payload.parameter,context:e.payload.context,progress:c.j.none},{id:yt.decode(ot.UuidTool.newUuid()).right,analysisId:n,dependsOn:[],type:i,unitsInitial:r,startDate:c.j.none,completedDate:c.j.none,running:!1,error:c.j.none})))},startJob:function(t,e){var n=t.jobs.find((function(t){return t.id===e.payload.jobId}));n&&(n.type.progress=Object(u.pipe)(e.payload.type,vt,Nt.a),n.startDate=c.j.some(lt()),n.running=!0)},completeJob:{reducer:function(t,e){Object(u.pipe)(t.jobs,c.n.findIndex((function(t){return t.id===e.meta})),c.j.map((function(n){var r=t.jobs[n];return r.completedDate=c.j.some(lt()),r.running=!1,r.error=e.error,t.completed.push(r),t.jobs.splice(n,1),r})))},prepare:function(t,e){return{payload:Object(u.constVoid)(),meta:t,error:e}}},removeJob:function(t,e){Object(u.pipe)(t.jobs,c.n.findIndex((function(t){return t.id===e.payload})),c.j.map((function(e){return t.jobs.splice(e,1)}))),Object(u.pipe)(t.completed,c.n.findIndex((function(t){return t.id===e.payload})),c.j.map((function(e){return t.completed.splice(e,1)})))},reportDeals:function(t,e){var n,r,i=null===(n=t.jobs.find((function(t){return t.id===e.payload.jobId})))||void 0===n?void 0:n.type;i&&(i.progress=Object(u.pipe)(i.progress,(r=e.payload.value,dt(c.i.MonoidSum)(r.length)(r.length))))},reportSatisfies:function(t,e){var n,r,i=null===(n=t.jobs.find((function(t){return t.id===e.payload.jobId})))||void 0===n?void 0:n.type;i&&(i.progress=Object(u.pipe)(i.progress,(r=e.payload.value,dt(c.q.getUnionSemigroup(c.i.MonoidSum))(r.testedCount)(Object(at.a)({},r.path,r.satisfiesCount)))))},reportSolutions:function(t,e){var n,r,i=null===(n=t.jobs.find((function(t){return t.id===e.payload.jobId})))||void 0===n?void 0:n.type;i&&(i.progress=Object(u.pipe)(i.progress,(r=e.payload.value,dt(c.q.getUnionSemigroup(c.u.first()))(Object(u.pipe)(r,c.q.keys,(function(t){return t.length})))(r))))}}}),me=be.actions,Oe=me.scheduleJob,ve=me.startJob,ye=me.completeJob,ge=me.removeJob,Se=me.reportDeals,xe=me.reportSatisfies,ke=me.reportSolutions,we=be.reducer,Ce=(Object(It.a)((function(t){return Object(u.pipe)(t.state.jobs,c.n.findFirst((function(e){return e.id===t.jobId})))})),function(t,e,n){return Object(u.pipe)(function(t){return function(e){return Object(u.pipe)(c.n.replicate(e/500,500),c.n.append(e%500),ue((function(){return new Gt.a}),(function(e){return function(n){return e.genDeals(n,t)}})))}}(e)(n),Dt.b.map((function(e){return Se({jobId:t,value:e})})),Dt.b.getOrElse((function(e){return Object(Ft.a)(ye(t,c.j.some(e)))})),Object(Tt.a)([ye(t,c.j.none)]))}),Ae=function(t,e,n){return Object(u.pipe)(function(t){return function(e){return Object(u.pipe)(t,fe,Dt.b.fromTaskEither,Dt.b.chain((function(t){return Dt.b.fromObservable(Object(Yt.a)(t))})),Dt.b.bindTo("batchId"),Dt.b.bind("path",(function(){return Dt.b.fromObservable(Object(Yt.a)(e))})),Object(te.a)(c.d.isRight),Dt.a.chain((function(e){return e.key?Object(u.pipe)(e,Dt.a.map((function(t){return t.right})),ue((function(){return new Zt.a}),(function(e){return function(n){var r=n.batchId,i=n.path;return Object(u.pipe)((function(){return e.satisfiesBatch(i,r,t)}),c.z.map((function(t){return Object(h.a)(Object(h.a)({},t),{},{path:Object(u.pipe)(i,c.p.map((function(t){return t.bid})),qt.get)})})))()}}))):e})))}}(e)(n),Dt.b.map((function(e){return xe({jobId:t,value:e})})),Dt.b.getOrElse((function(e){return Object(Ft.a)(ye(t,c.j.some(e)))})),Object(Tt.a)([ye(t,c.j.none)]))},_e=function(t){return function(e,n){return e.pipe(Dt.a.filter(ve.match),Dt.a.map((function(t){return t.payload})),Dt.a.filter((function(e){return e.type===t})),Dt.a.map((function(t){return Object(u.pipe)(n.value.generator.jobs,c.n.findFirst((function(e){return e.id===t.jobId})),c.j.map((function(t){return t})))})))}},Be=[Object(u.flow)(_e("GenerateDeals"),Dt.c.fold((function(){return Lt.a}),(function(t){return Ce(t.id,t.type.context.generationId,t.type.parameter)}))),Object(u.flow)(_e("Satisfies"),Dt.c.fold((function(){return Lt.a}),(function(t){return Ae(t.id,t.type.context.generationId,t.type.parameter)}))),Object(u.flow)(_e("Solve"),Dt.c.fold((function(){return Lt.a}),(function(t){return e=t.id,t.type.context.generationId,n=t.type.parameter,Object(u.pipe)(je(n),Dt.b.map((function(t){return ke({jobId:e,value:t})})),Dt.b.getOrElse((function(t){return Object(Ft.a)(ye(e,c.j.some(t)))})),Object(Tt.a)([ye(e,c.j.none)]));var e,n})))],Ee=n(172),Pe=n(121),Re=function(t){return Object(u.pipe)(Q,c.n.elem(J)(t))?20:30},Me=function(t){switch(t){case"Undoubled":return 1;case"Doubled":return 2;case"Redoubled":return 4;default:return m(t)}},qe=function(t){return t-6},De=function(t,e){return Object(u.pipe)(e,qe,c.d.fromPredicate((function(e){return e>=t.level}),(function(e){return t.level-e})))},Ne=Object(u.flow)(De,c.j.fromEither),Ie=function(t){return function(e){return Object(u.pipe)(Ne(e.contract,e.tricks),c.j.fold(Object(u.constant)(0),t))}},Fe=function(t){return Object(u.pipe)(t,Ie((function(){return Me(t.contract.modifier)*(t.contract.level*Re(t.contract.strain)+("N"===t.contract.strain?10:0))})))},Te=function(t){return 50*(t?2:1)},Le=function(t){return"Undoubled"===t?c.j.none:c.j.some(t)},He=[100,200,200].concat(Object(b.a)(c.n.replicate(10,300))),ze=Object(u.flow)(Fe,(function(t){return t>0&&t<=100?50:0})),We={contractPoints:Fe,overtrickPoints:function(t){return Object(u.pipe)((e=t.contract,n=t.tricks,Object(u.pipe)(De(e,n),c.j.fromEither,c.j.map((function(t){return t-e.level})))),c.j.fold(Object(u.constant)(0),(function(e){return Object(u.pipe)((n=t.isVulnerable,r=t.contract.modifier,Object(u.pipe)(r,Le,c.j.map(Me),c.j.map((function(t){return t*Te(n)})))),c.j.getOrElseW((function(){return Re(t.contract.strain)})),(function(t){return e*t}));var n,r})));var e,n},slamPoints:function(t){return Object(u.pipe)(t,Ie((function(e){return(t.isVulnerable?1.5:1)*(6===t.contract.level&&e>=6?500:7===t.contract.level&&e>=7?1e3:0)})))},modifierPoints:function(t){return Object(u.pipe)(t,Ie((function(){switch(t.contract.modifier){case"Undoubled":return 0;case"Doubled":return 50;case"Redoubled":return 100;default:return m(t.contract.modifier)}})))},penaltyPoints:function(t){return Object(u.pipe)((e=t.contract,n=t.tricks,Object(u.pipe)(De(e,n),c.d.swap,c.j.fromEither)),c.j.fold(Object(u.constant)(0),(function(e){return Object(u.pipe)(t.contract.modifier,Le,c.j.fold((function(){return e*Te(t.isVulnerable)}),Object(u.flow)(Me,(function(n){return n/2*Object(u.pipe)(He,c.n.takeLeft(e+(t.isVulnerable?1:0)),c.n.foldMap(c.i.MonoidSum)(u.identity))}))),(function(t){return-t}))})));var e,n},partScorePoints:ze,gamePoints:function(t){return Object(u.pipe)(t,Fe,(function(e){return e>=100?t.isVulnerable?500:300:0}))}},Ue=y.b(y.c,(function(t){return"number"===typeof t}),"Score"),$e=(Ue.decode(0).right,c.i.Eq,Object(u.pipe)(c.i.Ord,c.l.reverse),Object(u.flow)((function(t){return Object(u.pipe)(We,c.q.flap(t),c.q.traverseWithIndex(c.C.getApplicative(c.n.getMonoid()))((function(t,e){return Object(u.pipe)(c.C.tell([[t,e]]),c.C.map(Object(u.constant)(e)))})),c.C.map(Object(u.flow)(c.q.foldMap(c.l.trivial)(c.i.MonoidSum)(u.identity),Ue.decode,(function(t){return t.right}))),c.C.map((function(t){return[t,function(e){return[["TOTAL",t]].concat(Object(b.a)(e))}]})),c.C.pass)}),c.C.evaluate),function(t){return Object(u.pipe)(c.n.Do,c.n.apS("inner",Object(u.pipe)(t,c.q.toReadonlyArray)),c.n.bind("outer",(function(t){var e=t.inner;return Object(u.pipe)(e[1],c.q.toReadonlyArray)})),c.n.map((function(t){var e=t.outer,n=t.inner;return{outerKey:e[0],innerKey:n[0],value:e[1]}})))}),Ke=Object(u.pipe)(nt,c.n.sort(et),c.n.prepend("Pass")),Je=(O(Ke),v(Ke),St.f((function(t){var e=Object(i.a)(t,2);return e[0]+e[1]}),(function(t){return[t.charAt(0),t.charAt(1)]}))),Ge=Object(u.pipe)(Object(Pe.sequenceT)(c.p.Apply)(z,K),c.p.map(Je.get)),Qe=function(t){return function(e){return Object(u.pipe)(Ge,c.p.groupBy((function(t){return t})),c.q.map((function(e){return t(e)})),(function(t){return e.rollup(t)}),(function(t){return t.object()}),c.q.toReadonlyArray,c.n.map(c.s.mapFst(Je.reverseGet)),c.p.fromReadonlyArray,c.j.fold((function(){return{}}),Object(u.flow)(c.p.groupBy((function(t){var e=Object(i.a)(t,2),n=Object(i.a)(e[0],2),r=(n[0],n[1]);e[1];return r})),c.q.map(Object(u.flow)(c.p.groupBy((function(t){var e=Object(i.a)(t,2),n=Object(i.a)(e[0],2),r=n[0];n[1],e[1];return r})),c.q.map(Object(u.flow)(c.p.head,(function(t){var e=Object(i.a)(t,2);e[0];return e[1]}))))))))}},Ve=Object(u.flow)(c.p.map((function(t){return Object(u.pipe)(t,$e,c.n.map((function(t){var e=t.outerKey,n=t.innerKey,r=t.value;return["".concat(e).concat(n),r]})),c.q.fromFoldable(c.u.first(),c.n.Foldable))})),Ee.a,(function(t){return{count:t.totalRows(),average:Object(u.pipe)(t,Qe(Ee.b.mean)),stdev:Object(u.pipe)(t,Qe(Ee.b.stdev))}})),Xe={analyses:{},selectedAnalysis:c.j.none},Ze=Object(Ht.d)({name:"profile",initialState:Xe,reducers:{addAnalysis:function(t,e){var n=Object(u.pipe)(e.payload,bt,Nt.a);t.analyses[n.id]=n},deleteAnalysis:function(t,e){},removeAnalysis:function(t,e){delete t.analyses[e.payload]},selectAnalysis:function(t,e){t.selectedAnalysis=Object(u.pipe)(c.q.has(e.payload,t.analyses)?c.j.some(e.payload):c.j.none)},setAnalysisName:{reducer:function(t,e){t.analyses[e.meta].name=e.payload},prepare:function(t,e){return{payload:e,meta:t}}},addJobToAnalysis:function(t,e){var n=e.payload.type;Object(u.pipe)(t.analyses,c.q.lookup(e.payload.analysisId),c.j.map((function(t){switch(n.type){case"GenerateDeals":return Object(u.pipe)(n.progress,c.j.map((function(e){return t.generations.push(Object(u.pipe)((r=n.context.generationId,i=e.value,{id:r,dealCount:i,satisfies:c.j.none,solutionStats:{}}),Nt.a));var r,i})));case"Satisfies":return Object(u.pipe)(c.j.Do,c.j.apS("progress",n.progress),c.j.apS("generation",Object(u.pipe)(t.generations,c.n.findFirst((function(t){return t.id===n.context.generationId})))),c.j.map((function(t){return t.generation.satisfies=c.j.some(t.progress.value)})));case"Solve":return Object(u.pipe)(c.j.Do,c.j.apS("progress",n.progress),c.j.apS("generation",Object(u.pipe)(t.generations,c.n.findFirst((function(t){return t.id===n.context.generationId})))),c.j.map((function(t){return Object(u.pipe)(t.progress.value,c.q.toReadonlyArray,c.p.fromReadonlyArray,c.j.map(Object(u.flow)(c.p.map(Object(u.flow)(c.s.snd,j("results"))),Ve,(function(e){if(c.q.has(n.context.bidPath,t.generation.solutionStats))throw new Error("Combining stat result sets is not implemented");t.generation.solutionStats[n.context.bidPath]=e}))))})));default:return m(n)}})))}}}),Ye=Ze.actions,tn=Ye.addAnalysis,en=Ye.deleteAnalysis,nn=Ye.selectAnalysis,rn=Ye.setAnalysisName,an=Ye.addJobToAnalysis,cn=Ze.reducer,un=[function(t,e){return t.pipe(Dt.a.filter(ye.match),Dt.a.filter((function(t){return c.j.isNone(t.error)})),Dt.a.chain(Object(u.flow)((function(t){return t.meta}),(function(t){return Object(u.pipe)(e.value.generator.completed,c.n.findFirst((function(e){return e.id===t})),c.j.fold((function(){return Lt.a}),(function(e){return Object(Yt.a)([an(e),ge(t)])})))}))))},function(t,e){return t.pipe(Dt.a.filter(en.match),Dt.a.map((function(t){return t.payload})),Dt.a.chain((function(t){return Object(u.pipe)(e.value.profile.analyses,c.q.lookup(t),c.j.fold((function(){return Lt.a}),(function(t){return Object(u.pipe)(t.generations,c.n.map((function(t){return t.id})),c.z.traverseArray(de),Dt.a.fromTask)})),Dt.b.fold((function(){return Lt.a}),(function(t){return Lt.a})),Object(Tt.a)(Object(Ft.a)(Ze.actions.removeAnalysis(t))))})))}],on=Object(It.a)((function(t){return Object(u.pipe)(t.analyses,c.q.toReadonlyArray,c.n.map(c.s.snd))})),sn=Object(It.a)((function(t){return Object(u.pipe)(t.selectedAnalysis,c.j.chain((function(e){return c.q.lookup(e,t.analyses)})))})),ln=Object(It.a)((function(t){return Object(u.pipe)(t.state.analyses,c.q.lookup(t.analysisId))})),pn=Object(It.a)((function(t){return Object(u.pipe)(ln(t),c.j.chain(Object(u.flow)(j("generations"),c.n.findFirst((function(e){return e.id===t.generationId})))))})),fn=n(623),dn=n(317);var jn,hn,bn,mn,On,vn,yn,gn,Sn,xn,kn,wn,Cn,An,_n,Bn,En,Pn,Rn,Mn,qn,Dn,Nn,In,Fn,Tn,Ln,Hn,zn,Wn,Un,$n,Kn,Jn,Gn,Qn,Vn,Xn,Zn,Yn,tr,er,nr,rr,ir,ar,cr,ur,or,sr,lr,pr,fr,dr=Object(u.flow)(c.q.toReadonlyArray,c.n.map(c.s.snd)),jr=function(t){return Object(u.pipe)(t,c.n.chain(c.B.reduce([],(function(t,e){return Object(u.pipe)(t,c.n.append(e))}))))},hr=function(t){return Object(u.pipe)(t,c.n.map(Object(u.flow)(c.B.map(c.p.of),c.B.fold((function(t,e){return c.B.make(t,Object(u.pipe)(e,c.n.map(c.B.map((function(e){return c.p.concat(e)(t)}))),c.n.toArray))})))))},br=function(t){return Object(u.pipe)(t,c.n.chain(c.B.fold((function(t,e){return Object(u.pipe)(e,c.p.fromReadonlyArray,c.j.fold((function(){return[[t]]}),c.p.foldMap(c.p.getSemigroup())(c.p.map(c.n.prepend(t)))))}))),c.n.filterMap(c.p.fromReadonlyArray))},mr=function t(e){return function(n){return function(r){return c.B.make(Object(h.a)(Object(h.a)({},r.value),{},{siblings:n}),Object(u.pipe)(r.forest,c.n.map((function(n){return Object(u.pipe)(r.forest,c.n.map((function(t){return t.value})),c.n.difference(e)([n.value]),t(e))(n)})),c.n.toArray))}}},Or=function(t){return function(e){return Object(u.pipe)(e,c.n.map((function(n){return Object(u.pipe)(e,c.n.map((function(t){return t.value})),c.n.difference(t)([n.value]),mr(t))(n)})))}},vr=c.n.map(c.B.fold((function(t,e){return 0===e.length||Object(u.pipe)(e,c.n.exists((function(t){return"Pass"===t.value.bid})))?c.B.make(t,e):c.B.make(t,Object(u.pipe)(e,c.n.append(c.B.make({bid:"Pass",syntax:{type:"Otherwise"}})),c.n.toArray))}))),yr=function(t){return Object(u.pipe)(t,c.n.map(c.B.traverse(c.A.getApplicative(c.n.getMonoid()))(c.d.mapLeft(c.n.of))),c.n.sequence(c.A.getApplicative(c.n.getSemigroup())))},gr=function(t){return function(e){return c.A.getChain(c.n.getSemigroup()).chain(e,t)}},Sr=n(63),xr=Object(u.flow)(c.r.toReadonlyArray(D),c.n.foldMap(c.i.MonoidSum)((function(t){return e=t.rank,Math.max(0,e-10);var e}))),kr=[0,0,0,0],wr=function(t){return Object(u.pipe)(t,c.n.sort(c.l.reverse(c.i.Ord)))},Cr=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object(u.pipe)(e,wr)},Ar=c.g.contramap(wr)(c.n.getEq(c.i.Eq)),_r={S:0,H:0,D:0,C:0},Br=function(t){return Object(u.pipe)(t,T,c.q.map((function(t){return t.length})),c.q.union(c.u.first())(_r),(function(t){return t}))},Er=function(t){return Object(u.pipe)(t,Br,c.q.toReadonlyArray,c.n.map(c.s.snd),(function(t){return c.n.mapWithIndex((function(e,n){return Object(u.pipe)(t,c.n.lookup(e),c.j.getOrElse((function(){return 0})))}))(kr)}))},Pr=n(313),Rr=Object(u.constant)({type:"Constant",value:!0}),Mr=(Object(u.constant)({type:"Constant",value:!1}),u.constFalse),qr=(u.constTrue,function(t){return function(e){return c.n.foldMap(e)((function(t){return t}))(t)}}),Dr=function(t){return Object(u.pipe)(t,qr,Object(u.apply)(c.m.getMonoidAny()))},Nr=function(t){return Object(u.pipe)(t,qr,Object(u.apply)(c.m.getMonoidAll()))},Ir=function(t){return c.l.between(c.i.Ord)(t.min,t.max)},Fr=Object(u.flow)(Ir,c.m.contramap(xr)),Tr=function(t){return function(e){return Object(u.flow)(Br,(function(n){return Object(u.pipe)(t,Ir,Object(u.apply)(n[e]))}))}},Lr=function(t){return function(e,n){return Object(u.flow)(Br,(function(r){return function(t){switch(t){case"<":return c.l.lt(c.i.Ord);case"<=":return c.l.leq(c.i.Ord);case"=":return c.i.Eq.equals;case">=":return c.l.geq(c.i.Ord);case">":return c.l.gt(c.i.Ord);default:return m(t)}}(t)(r[e],r[n])}))}},Hr=c.r.fromReadonlyArray(_),zr=["Conjunction","Disjunction","Negation","SuitPrimary","SuitSecondary","SetTrump"],Wr=function(t){return function(t){return c.n.elem(c.x.Eq)(t.type)(zr)}(t)?c.d.left(t):c.d.right(t)},Ur=function(t){switch(t.type){case"Constant":return Object(u.constant)(t.value);case"PointRange":return Fr(t);case"SuitRange":return Tr(t)(t.suit);case"SuitComparison":return Lr(t.op)(t.left,t.right);case"SuitHonors":return r=t,Object(u.flow)(T,c.q.lookup(r.suit),c.j.fold(u.constFalse,(function(t){var e=Object(u.pipe)(t,Hr,c.r.intersection(_)(Hr(R))),n=Object(u.pipe)(r.honors,Hr);return Object(u.pipe)(n,c.r.isSubset(_)(e))})));case"SuitTop":return n=t,Object(u.flow)(T,c.q.lookup(n.suit),c.j.fold(u.constFalse,Object(u.flow)(c.n.filter((function(t){return B.compare(t,n.minRank)>=0})),(function(t){return t.length>=n.count}))));case"AnyShape":return e=t.counts,Object(u.flow)(Er,(function(t){return Ar.equals(e,t)}));case"SpecificShape":return function(t){return Object(u.flow)(Br,(function(e){return c.t.getEq(Pr.eqStrict).equals(e,t)}))}(t.suits);default:return m(t)}var e,n,r},$r=c.l.fromCompare((function(t,e){return rt(t)&&!rt(e)?-1:rt(e)&&!rt(t)?1:rt(t)&&rt(e)?et.compare(t,e):0})),Kr=c.l.contramap((function(t){return t.bid}))($r),Jr=["Me","LHO","Partner","RHO"],Gr=["We"],Qr={primarySuit:c.j.none,secondarySuit:c.j.none},Vr=Sr.b.fromProp(),Xr=Vr("primarySuit"),Zr=Vr("secondarySuit"),Yr={trumpSuit:c.j.none},ti=Sr.b.fromProp()("trumpSuit"),ei=function(t){return function(e){return Object(u.pipe)(c.n.zip(Object(u.pipe)(t,c.n.rotate(1)),t),c.n.map(c.s.mapSnd((function(t){return e[t]}))),c.q.fromFoldable(c.u.first(),c.n.Foldable))}},ni=function(t){var e=Sr.b.fromProp()("players"),n=Sr.b.fromProp()("partnerships");return Object(u.pipe)([e.modify(Object(u.flow)(ei(Jr),ei(Jr))),n.modify(ei(Gr))],c.p.foldMap(c.f.getSemigroup())(u.identity),Object(u.apply)(t))},ri={bid:{},path:[],players:Object(u.pipe)(Jr,c.n.map((function(t){return[t,Qr]})),c.q.fromFoldable(c.u.first(),c.n.Foldable)),partnerships:Object(u.pipe)(Gr,c.n.map((function(t){return[t,Yr]})),c.q.fromFoldable(c.u.first(),c.n.Foldable))},ii=Sr.b.fromProp(),ai=ii("bid"),ci=ii("path"),ui=ii("players"),oi=ii("partnerships"),si=(Sr.c.fromOptionProp(),new Sr.a((function(t){return new Sr.b(Object(u.flow)(ui.get,(function(e){return e[t]})),(function(e){return function(n){return Object(u.pipe)(n,ui.get,c.q.upsertAt(t,e),ui.set,Object(u.apply)(n))}}))}))),li=new Sr.a((function(t){return new Sr.b(Object(u.flow)(oi.get,(function(e){return e[t]})),(function(e){return function(n){return Object(u.pipe)(n,oi.get,c.q.upsertAt(t,e),oi.set,Object(u.apply)(n))}}))})),pi=function(t){return function(e){return Object(u.flow)(c.w.traverseArray(e),c.w.map(t))}},fi=function(t){return c.w.of(t)},di=function(t){return c.w.chain((function(e){switch(e.type){case"Conjunction":return Object(u.pipe)(e.constraints,c.p.map(fi),(r=t,pi(Nr)(r)));case"Disjunction":return Object(u.pipe)(e.constraints,c.p.map(fi),function(t){return pi(Dr)(t)}(t));case"Negation":return Object(u.pipe)(e.constraint,fi,t,c.w.map(c.m.not));case"SuitPrimary":return Object(u.pipe)(c.w.modify(si.at("Me").composeLens(Xr).set(c.j.some(e.suit))),c.w.map((function(){return t=e.suit,Object(u.pipe)(S,c.n.splitAt(S.indexOf(t)),c.s.bimap(Object(u.flow)(c.n.tail,c.j.fold((function(){return[]}),c.n.map((function(e){return Lr("<")(e,t)})))),c.n.map((function(e){return Lr("<=")(e,t)}))),c.n.flatten,c.n.prepend(Tr({min:5,max:13})(t)),Nr);var t})));case"SuitSecondary":return Object(u.pipe)(c.w.modify(si.at("Me").composeLens(Zr).set(c.j.some(e.suit))),c.w.apSecond(c.w.gets(si.at("Me").composeLens(Xr).get)),c.k.map(c.w.Functor)((n=e.suit,function(t){return Object(u.pipe)(c.n.Do,c.n.apS("suit",[n,t]),c.n.apS("otherSuit",Object(u.pipe)(S,c.n.difference(x)([n,t]))),c.n.filter((function(t){var e=t.suit,n=t.otherSuit;return!x.equals(e,n)})),c.n.map((function(t){var e=t.suit,n=t.otherSuit;return Lr(">")(e,n)})),c.n.concat([Tr({min:4,max:13})(n),Lr(">=")(t,n)]),Nr)})),c.w.map(c.j.getOrElse((function(){return Mr}))));case"SetTrump":return Object(u.pipe)(c.w.modify(li.at("We").composeLens(ti).set(c.j.some(e.suit))),c.w.map((function(){return u.constTrue})));default:return m(e)}var n,r}))},ji=function t(e){return Object(u.pipe)(e,c.w.map(Wr),c.w.chain(c.d.fold(Object(u.flow)(c.w.of,di(t)),Object(u.flow)(c.w.flap,(function(t){return t(fi(Ur))})))))},hi=(Object(u.flow)((function(t){return Object(u.pipe)(t,c.w.of,ji)}),c.w.evaluate(ri)),function(t){return c.w.of(t)}),bi=function(t){return Object(u.pipe)(S,c.n.elem(c.x.Eq)(t))},mi=function(t){return{type:"Wrapper",constraint:t}},Oi=Object(u.constant)({type:"Constant",value:!0}),vi=Object(u.constant)({type:"Constant",value:!1}),yi={bid:"Pass",pathReversed:[],siblings:c.n.empty,traversed:c.n.empty,labels:c.o.empty},gi=Sr.b.fromProp(),Si=gi("bid"),xi=gi("pathReversed"),ki=gi("siblings"),wi=gi("traversed"),Ci=gi("labels"),Ai=Object(u.pipe)(it,c.g.contramap((function(t){return t.bid}))),_i=Object(u.pipe)(c.w.gets(Si.get),c.w.chain((function(t){return c.w.gets(Object(u.flow)(wi.get,c.n.rights,c.n.takeLeftWhile((function(e){return!it.equals(e.bid,t)})),c.n.map((function(t){return t.constraint}))))})),c.w.map(Object(u.flow)(c.p.fromReadonlyArray,c.j.fold(Rr,(function(t){return{type:"Negation",constraint:{type:"Conjunction",constraints:t}}})),c.d.left,c.d.right))),Bi=c.p.map((function(t){return mi({type:"AnyShape",counts:t})})),Ei={type:"Disjunction",syntax:Bi([Cr(4,3,3,3),Cr(5,3,3,2),Cr(4,4,3,2)])},Pi={type:"Disjunction",syntax:Bi([Cr(5,4,2,2),Cr(6,3,2,2)])},Ri=function(t){switch(t){case"C":case"D":case"H":case"S":return hi(c.d.right(t));case"Wildcard":return Object(u.pipe)(c.w.gets(Object(u.flow)(Si.get)),c.w.map(Object(u.flow)(c.d.fromPredicate(rt,(function(t){return"WildcardWithoutBid"})),c.d.chain((function(t){return Object(u.pipe)(t.strain,c.d.fromPredicate(bi,(function(t){return"WildcardInNTContext"})))})))));default:return hi(c.d.left("NotImplemented"))}},Mi=function(t){return Object(u.pipe)(t,c.d.right,c.d.right,hi)},qi=function t(e){switch(e.type){case"Wrapper":return hi(c.d.right(c.d.left(e.constraint)));case"Constant":return Mi(mi({type:"Constant",value:e.value}));case"Conjunction":case"Disjunction":return function(t){var e=t.type,n=t.syntax;return Object(u.pipe)(n,c.p.traverse(c.w.Applicative)(qi),c.w.map(Object(u.flow)(c.n.wilt(c.d.Applicative)((function(t){return t})),c.d.map(Object(u.flow)(c.v.bimap(c.p.fromReadonlyArray,c.p.fromReadonlyArray),(function(t){return c.A.fromOptions(t.left,t.right)}),c.j.fold((function(){return c.d.left(Rr())}),c.A.match((function(t){return c.d.left(1===t.length?t[0]:{type:e,constraints:t})}),(function(t){return c.d.right(1===t.length?t[0]:{type:e,syntax:t})}),(function(t,n){return c.d.right({type:e,syntax:[mi({type:e,constraints:t}),{type:e,syntax:n}]})}))))))))}(e);case"Negation":return Object(u.pipe)(e.syntax,t,c.w.map(c.d.map(Object(u.flow)(c.d.bimap((function(t){return{type:"Negation",constraint:t}}),(function(t){return{type:"Negation",syntax:t}}))))));case"OtherBid":return n=e.bid,Object(u.pipe)(c.w.gets(Object(u.flow)(ki.get,c.n.findFirst((function(t){return it.equals(t.bid,n)})),c.j.map((function(t){return t.syntax})))),c.k.alt(c.w.Monad)((function(){return c.w.gets(Object(u.flow)(Ci.get,c.o.lookup(c.x.Eq)(Rt.get(n))))})),c.w.map(Object(u.flow)(c.d.fromOption((function(){return"OtherBidNotFound"})),c.d.map(c.d.right))));case"Otherwise":return _i;case"LabelDef":return function(t){return Object(u.pipe)(c.w.gets(Object(u.flow)(Ci.get,c.o.lookup(c.x.Eq)(t.name))),c.w.chain(c.j.fold((function(){return hi(t.definition)}),(function(e){return hi({type:"Conjunction",syntax:[e,t.definition]})}))),c.w.chainFirst((function(e){return c.w.modify(Ci.modify(c.o.upsertAt(c.x.Eq)(t.name,e)))})),c.w.map(Object(u.flow)(c.d.right,c.d.right)))}(e);case"LabelRef":return function(t){return Object(u.pipe)(c.w.gets(Object(u.flow)(Ci.get,c.o.lookup(c.x.Eq)(t.name))),c.w.map(Object(u.flow)(c.d.fromOption((function(){return"LabelNotFound"})),c.d.map(c.d.right))))}(e);case"Balanced":return Mi(Ei);case"SemiBalanced":return Mi({type:"Disjunction",syntax:[Ei,Pi]});case"Unbalanced":return Mi({type:"Negation",syntax:{type:"Disjunction",syntax:[Ei,Pi]}});case"SuitRange":case"SuitHonors":case"SuitPrimary":case"SuitSecondary":case"SuitTop":case"SetTrump":return Object(u.pipe)(e.suit,Ri,c.e.map(c.w.Functor)((function(t){return c.d.left(Object(h.a)(Object(h.a)({},e),{},{suit:t}))})));case"SuitComparison":return Object(u.pipe)([e.left,e.right],c.w.traverseArray(Ri),c.w.map(c.d.sequenceArray),c.e.map(c.w.Functor)((function(t){return c.d.left(Object(h.a)(Object(h.a)({},e),{},{left:t[0],right:t[1]}))})));default:return m(e)}var n},Di=function t(e){return Object(u.pipe)(e,qi,c.w.chain(Object(u.flow)(c.d.mapLeft(c.d.left),c.d.chain(Object(u.flow)(c.d.mapLeft((function(t){return c.d.right(t)})))),c.d.fold(hi,t))))},Ni=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object(u.pipe)(e,c.w.traverseArray(c.w.modify),c.w.map(u.constVoid))},Ii=c.B.map((function(t){var e=t.bid,n=t.syntax,r=t.siblings;return Object(u.pipe)(Ni(Si.set(e),xi.modify(c.n.prepend(e)),ki.set(r),Ci.modify(c.o.upsertAt(c.x.Eq)(Rt.get(e),n))),c.w.apSecond(Di(n)),c.w.chain((function(t){return Object(u.pipe)(c.w.gets(xi.get),c.w.map((function(e){return Object(u.pipe)(t,c.d.mapLeft((function(t){return{reason:t,path:c.n.reverse(e),syntax:n}})))})))})),c.w.map(c.d.map((function(t){return{bid:e,constraint:t}}))))})),Fi=c.w.chainFirst((function(t){return Ni(wi.modify(c.n.append(t.value)),xi.modify(Object(u.flow)(c.n.tail,c.j.getOrElseW((function(){return c.n.empty})))))})),Ti=c.B.fold((function(t,e){return Object(u.pipe)(t,c.w.bindTo("result"),c.w.apS("context",c.w.get()),c.w.map((function(t){var n=t.result,r=t.context;return c.B.make(n,Object(u.pipe)(e,c.w.traverseArray(Fi),c.w.evaluate(r),c.n.toArray))})))})),Li=function(t){return Object(u.pipe)(t,c.n.zip(c.p.tail(t)),c.n.traverse(c.d.Applicative)((function(e){var n=Object(i.a)(e,2),r=n[0],a=n[1];return c.l.lt(Kr)(r,a)?c.d.right(Object(u.constVoid)()):c.d.left({type:"BidsOutOfOrder",left:r,right:a,path:Object(u.pipe)(t,c.n.map((function(t){return t.bid})))})})),c.d.map(u.constVoid))},Hi=function(t){return Object(u.pipe)(t,br,c.n.traverse(c.d.Applicative)(Li),c.d.map(u.constVoid))},zi=function(t){return Object(u.pipe)([Hi],c.n.traverse(c.d.Applicative)(Object(u.apply)(t)),c.d.map(u.constVoid))},Wi=n(109),Ui=n(80),$i=n(25),Ki=n(5),Ji=n(3);!function(t){t.Start="Start",t.BidSpec="BidSpec",t.BidSpecConstraintList="BidSpecConstraintList",t.Bid_1="Bid_1",t.Bid_2="Bid_2",t.ContractBid="ContractBid",t.StrainSpecifier_1="StrainSpecifier_1",t.StrainSpecifier_2="StrainSpecifier_2",t.StrainSpecifier_3="StrainSpecifier_3",t.StrainSpecifier_4="StrainSpecifier_4",t.Wildcard="Wildcard",t.Major="Major",t.Minor="Minor",t.NonContractBid="NonContractBid",t.Pass="Pass",t.Strain_1="Strain_1",t.Strain_2="Strain_2",t.Suit_1="Suit_1",t.Suit_2="Suit_2",t.Suit_3="Suit_3",t.Suit_4="Suit_4",t.Club="Club",t.Diamond="Diamond",t.Heart="Heart",t.Spade="Spade",t.Notrump="Notrump",t.Honor="Honor",t.ConstraintList="ConstraintList",t.ConstraintListItem="ConstraintListItem",t.Constraint_1="Constraint_1",t.Constraint_2="Constraint_2",t.Constraint_3="Constraint_3",t.Constraint_4="Constraint_4",t.Constraint_5="Constraint_5",t.Constraint_6="Constraint_6",t.Constraint_7="Constraint_7",t.Constraint_8="Constraint_8",t.Constraint_9="Constraint_9",t.Constraint_10="Constraint_10",t.Constraint_11="Constraint_11",t.Constraint_12="Constraint_12",t.Constraint_13="Constraint_13",t.Constraint_14="Constraint_14",t.Constraint_15="Constraint_15",t.Constraint_16="Constraint_16",t.Constraint_17="Constraint_17",t.Constraint_18="Constraint_18",t.Const_1="Const_1",t.Const_2="Const_2",t.True="True",t.False="False",t.Or="Or",t.And="And",t.Not="Not",t.Not_$0_1="Not_$0_1",t.Not_$0_2="Not_$0_2",t.Otherwise="Otherwise",t.PointRange="PointRange",t.PointBound="PointBound",t.SuitRange="SuitRange",t.SuitBound="SuitBound",t.SuitSpecifier_1="SuitSpecifier_1",t.SuitSpecifier_2="SuitSpecifier_2",t.SuitSpecifier_3="SuitSpecifier_3",t.SuitSpecifier_4="SuitSpecifier_4",t.SuitSpecifier_5="SuitSpecifier_5",t.SuitSpecifier_6="SuitSpecifier_6",t.OtherMajor="OtherMajor",t.OtherMinor="OtherMinor",t.SuitComparison="SuitComparison",t.SuitComparisonOperator_1="SuitComparisonOperator_1",t.SuitComparisonOperator_2="SuitComparisonOperator_2",t.SuitComparisonOperator_3="SuitComparisonOperator_3",t.SuitComparisonOperator_4="SuitComparisonOperator_4",t.SuitComparisonOperator_5="SuitComparisonOperator_5",t.SuitHonors="SuitHonors",t.SuitTop="SuitTop",t.BoundQualifier_1="BoundQualifier_1",t.BoundQualifier_2="BoundQualifier_2",t.BoundQualifier_3="BoundQualifier_3",t.Plus="Plus",t.Minus="Minus",t.Equals="Equals",t.OtherBid="OtherBid",t.Distribution_1="Distribution_1",t.Distribution_2="Distribution_2",t.Distribution_3="Distribution_3",t.Distribution_4="Distribution_4",t.Distribution_5="Distribution_5",t.Balanced="Balanced",t.SemiBalanced="SemiBalanced",t.Unbalanced="Unbalanced",t.AnyShape="AnyShape",t.SpecificShape="SpecificShape",t.SuitRank_1="SuitRank_1",t.SuitRank_2="SuitRank_2",t.Primary="Primary",t.Secondary="Secondary",t.SetTrump="SetTrump",t.LabelDef="LabelDef",t.LabelRef="LabelRef",t.Label="Label",t.Digit="Digit",t.Number="Number",t.$EOF="$EOF"}(fr||(fr={}));var Gi=function t(e){Object(Ji.a)(this,t),this.kind=fr.Digit,this.literal=void 0,this.value=void 0,this.literal=e,this.value=parseInt(e)},Qi=function t(e){Object(Ji.a)(this,t),this.kind=fr.Number,this.literal=void 0,this.value=void 0,this.literal=e,this.value=parseInt(e)},Vi=function(){function t(e){Object(Ji.a)(this,t),this.input=void 0,this.pos=void 0,this.negating=!1,this.memoSafe=!0,this.$scope$Constraint$memo=new Map,this.pos={overallPos:0,line:1,offset:0},this.input=e}return Object(Ki.a)(t,[{key:"reset",value:function(t){this.pos=t}},{key:"finished",value:function(){return this.pos.overallPos===this.input.length}},{key:"clearMemos",value:function(){this.$scope$Constraint$memo.clear()}},{key:"matchStart",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchBidSpec(t+1,e))&&null!==n.match$EOF(e)&&(i={kind:fr.Start,spec:r}),i}))}},{key:"matchBidSpec",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchBid(t+1,e))&&(i=n.matchBidSpecConstraintList(t+1,e),1)&&(a={kind:fr.BidSpec,bid:r,constraints:i}),a}))}},{key:"matchBidSpecConstraintList",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(jn||(jn=Object(a.a)(["(?:: )"]))),t+1,e)&&null!==(r=n.matchConstraintList(t+1,e))&&(i={kind:fr.BidSpecConstraintList,constraints:r}),i}))}},{key:"matchBid",value:function(t,e){var n=this;return this.choice([function(){return n.matchBid_1(t+1,e)},function(){return n.matchBid_2(t+1,e)}])}},{key:"matchBid_1",value:function(t,e){return this.matchContractBid(t+1,e)}},{key:"matchBid_2",value:function(t,e){return this.matchNonContractBid(t+1,e)}},{key:"matchContractBid",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchDigit(t+1,e))&&null!==(i=n.matchStrainSpecifier(t+1,e))&&(a={kind:fr.ContractBid,level:r,specifier:i}),a}))}},{key:"matchStrainSpecifier",value:function(t,e){var n=this;return this.choice([function(){return n.matchStrainSpecifier_1(t+1,e)},function(){return n.matchStrainSpecifier_2(t+1,e)},function(){return n.matchStrainSpecifier_3(t+1,e)},function(){return n.matchStrainSpecifier_4(t+1,e)}])}},{key:"matchStrainSpecifier_1",value:function(t,e){return this.matchWildcard(t+1,e)}},{key:"matchStrainSpecifier_2",value:function(t,e){return this.matchMajor(t+1,e)}},{key:"matchStrainSpecifier_3",value:function(t,e){return this.matchMinor(t+1,e)}},{key:"matchStrainSpecifier_4",value:function(t,e){return this.matchStrain(t+1,e)}},{key:"matchWildcard",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(hn||(hn=Object(a.a)(["(?:X)"]))),t+1,e))&&(i={kind:fr.Wildcard,v:r}),i}))}},{key:"matchMajor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(bn||(bn=Object(a.a)(["(?:M)"]))),t+1,e))&&(i={kind:fr.Major,v:r}),i}))}},{key:"matchMinor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(mn||(mn=Object(a.a)(["(?:m)"]))),t+1,e))&&(i={kind:fr.Minor,v:r}),i}))}},{key:"matchNonContractBid",value:function(t,e){return this.matchPass(t+1,e)}},{key:"matchPass",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(On||(On=Object(a.a)(["(?:P)"]))),t+1,e))&&(i={kind:fr.Pass,v:r}),i}))}},{key:"matchStrain",value:function(t,e){var n=this;return this.choice([function(){return n.matchStrain_1(t+1,e)},function(){return n.matchStrain_2(t+1,e)}])}},{key:"matchStrain_1",value:function(t,e){return this.matchSuit(t+1,e)}},{key:"matchStrain_2",value:function(t,e){return this.matchNotrump(t+1,e)}},{key:"matchSuit",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuit_1(t+1,e)},function(){return n.matchSuit_2(t+1,e)},function(){return n.matchSuit_3(t+1,e)},function(){return n.matchSuit_4(t+1,e)}])}},{key:"matchSuit_1",value:function(t,e){return this.matchClub(t+1,e)}},{key:"matchSuit_2",value:function(t,e){return this.matchDiamond(t+1,e)}},{key:"matchSuit_3",value:function(t,e){return this.matchHeart(t+1,e)}},{key:"matchSuit_4",value:function(t,e){return this.matchSpade(t+1,e)}},{key:"matchClub",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(vn||(vn=Object(a.a)(["(?:C)"]))),t+1,e))&&(i={kind:fr.Club,v:r}),i}))}},{key:"matchDiamond",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(yn||(yn=Object(a.a)(["(?:D)"]))),t+1,e))&&(i={kind:fr.Diamond,v:r}),i}))}},{key:"matchHeart",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(gn||(gn=Object(a.a)(["(?:H)"]))),t+1,e))&&(i={kind:fr.Heart,v:r}),i}))}},{key:"matchSpade",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Sn||(Sn=Object(a.a)(["(?:S)"]))),t+1,e))&&(i={kind:fr.Spade,v:r}),i}))}},{key:"matchNotrump",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(xn||(xn=Object(a.a)(["(?:N)"]))),t+1,e))&&(n.regexAccept(String.raw(kn||(kn=Object(a.a)(["(?:T)"]))),t+1,e),1)&&(i={kind:fr.Notrump,v:r}),i}))}},{key:"matchHonor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(wn||(wn=Object(a.a)(["(?:[AKQJT])"]))),t+1,e))&&(i={kind:fr.Honor,v:r}),i}))}},{key:"matchConstraintList",value:function(t,e){var n=this;return this.loop((function(){return n.matchConstraintListItem(t+1,e)}),!1)}},{key:"matchConstraintListItem",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchConstraint(t+1,e))&&(n.regexAccept(String.raw(Cn||(Cn=Object(a.a)(["(?: )"]))),t+1,e),1)&&(i={kind:fr.ConstraintListItem,constraint:r}),i}))}},{key:"matchConstraint",value:function(t,e){var n=this,r=this.mark(),i=this.$scope$Constraint$memo.get(r.overallPos);if(void 0!==i)return this.reset(i[1]),i[0];var a=this.memoSafe;this.memoSafe=!1,this.$scope$Constraint$memo.set(r.overallPos,[null,r]);for(var c=null,u=r;;){this.reset(r);var o=n.choice([function(){return n.matchConstraint_1(t+1,e)},function(){return n.matchConstraint_2(t+1,e)},function(){return n.matchConstraint_3(t+1,e)},function(){return n.matchConstraint_4(t+1,e)},function(){return n.matchConstraint_5(t+1,e)},function(){return n.matchConstraint_6(t+1,e)},function(){return n.matchConstraint_7(t+1,e)},function(){return n.matchConstraint_8(t+1,e)},function(){return n.matchConstraint_9(t+1,e)},function(){return n.matchConstraint_10(t+1,e)},function(){return n.matchConstraint_11(t+1,e)},function(){return n.matchConstraint_12(t+1,e)},function(){return n.matchConstraint_13(t+1,e)},function(){return n.matchConstraint_14(t+1,e)},function(){return n.matchConstraint_15(t+1,e)},function(){return n.matchConstraint_16(t+1,e)},function(){return n.matchConstraint_17(t+1,e)},function(){return n.matchConstraint_18(t+1,e)}]),s=this.mark();if(s.overallPos<=u.overallPos)break;c=o,u=s,this.$scope$Constraint$memo.set(r.overallPos,[c,u])}return this.reset(u),this.memoSafe=a,c}},{key:"matchConstraint_1",value:function(t,e){return this.matchConst(t+1,e)}},{key:"matchConstraint_2",value:function(t,e){return this.matchOr(t+1,e)}},{key:"matchConstraint_3",value:function(t,e){return this.matchAnd(t+1,e)}},{key:"matchConstraint_4",value:function(t,e){return this.matchNot(t+1,e)}},{key:"matchConstraint_5",value:function(t,e){return this.matchOtherwise(t+1,e)}},{key:"matchConstraint_6",value:function(t,e){return this.matchDistribution(t+1,e)}},{key:"matchConstraint_7",value:function(t,e){return this.matchSuitRange(t+1,e)}},{key:"matchConstraint_8",value:function(t,e){return this.matchSuitBound(t+1,e)}},{key:"matchConstraint_9",value:function(t,e){return this.matchSuitComparison(t+1,e)}},{key:"matchConstraint_10",value:function(t,e){return this.matchSuitHonors(t+1,e)}},{key:"matchConstraint_11",value:function(t,e){return this.matchSuitTop(t+1,e)}},{key:"matchConstraint_12",value:function(t,e){return this.matchSuitRank(t+1,e)}},{key:"matchConstraint_13",value:function(t,e){return this.matchSetTrump(t+1,e)}},{key:"matchConstraint_14",value:function(t,e){return this.matchPointRange(t+1,e)}},{key:"matchConstraint_15",value:function(t,e){return this.matchPointBound(t+1,e)}},{key:"matchConstraint_16",value:function(t,e){return this.matchOtherBid(t+1,e)}},{key:"matchConstraint_17",value:function(t,e){return this.matchLabelDef(t+1,e)}},{key:"matchConstraint_18",value:function(t,e){return this.matchLabelRef(t+1,e)}},{key:"matchConst",value:function(t,e){var n=this;return this.choice([function(){return n.matchConst_1(t+1,e)},function(){return n.matchConst_2(t+1,e)}])}},{key:"matchConst_1",value:function(t,e){return this.matchTrue(t+1,e)}},{key:"matchConst_2",value:function(t,e){return this.matchFalse(t+1,e)}},{key:"matchTrue",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(An||(An=Object(a.a)(["(?:true)"]))),t+1,e))&&(i={kind:fr.True,v:r}),i}))}},{key:"matchFalse",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(_n||(_n=Object(a.a)(["(?:false)"]))),t+1,e))&&(i={kind:fr.False,v:r}),i}))}},{key:"matchOr",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c=null;return null!==(r=n.matchConstraint(t+1,e))&&null!==n.regexAccept(String.raw(Bn||(Bn=Object(a.a)(["(?: or )"]))),t+1,e)&&null!==(i=n.matchConstraint(t+1,e))&&(c={kind:fr.Or,left:r,right:i}),c}))}},{key:"matchAnd",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(En||(En=Object(a.a)(["(?:()"],["(?:\\()"]))),t+1,e)&&null!==(r=n.matchConstraintList(t+1,e))&&null!==n.regexAccept(String.raw(Pn||(Pn=Object(a.a)(["(?:))"],["(?:\\))"]))),t+1,e)&&(i={kind:fr.And,constraints:r}),i}))}},{key:"matchNot",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.matchNot_$0(t+1,e)&&(n.regexAccept(String.raw(Rn||(Rn=Object(a.a)(["(?: )"]))),t+1,e),1)&&null!==(r=n.matchConstraint(t+1,e))&&(i={kind:fr.Not,constraint:r}),i}))}},{key:"matchNot_$0",value:function(t,e){var n=this;return this.choice([function(){return n.matchNot_$0_1(t+1,e)},function(){return n.matchNot_$0_2(t+1,e)}])}},{key:"matchNot_$0_1",value:function(t,e){return this.regexAccept(String.raw(Mn||(Mn=Object(a.a)(["(?:not)"]))),t+1,e)}},{key:"matchNot_$0_2",value:function(t,e){return this.regexAccept(String.raw(qn||(qn=Object(a.a)(["(?:!)"]))),t+1,e)}},{key:"matchOtherwise",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Dn||(Dn=Object(a.a)(["(?:else)"]))),t+1,e))&&(i={kind:fr.Otherwise,v:r}),i}))}},{key:"matchPointRange",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c=null;return null!==(r=n.matchNumber(t+1,e))&&null!==n.regexAccept(String.raw(Nn||(Nn=Object(a.a)(["(?:-)"]))),t+1,e)&&null!==(i=n.matchNumber(t+1,e))&&(c={kind:fr.PointRange,lower:r,upper:i}),c}))}},{key:"matchPointBound",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchNumber(t+1,e))&&null!==(i=n.matchBoundQualifier(t+1,e))&&(a={kind:fr.PointBound,value:r,qualifier:i}),a}))}},{key:"matchSuitRange",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c,u=null;return null!==(r=n.matchDigit(t+1,e))&&null!==n.regexAccept(String.raw(In||(In=Object(a.a)(["(?:-)"]))),t+1,e)&&null!==(i=n.matchDigit(t+1,e))&&null!==(c=n.matchSuitSpecifier(t+1,e))&&(u={kind:fr.SuitRange,lower:r,upper:i,suit:c}),u}))}},{key:"matchSuitBound",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c=null;return null!==(r=n.matchNumber(t+1,e))&&null!==(i=n.matchBoundQualifier(t+1,e))&&null!==(a=n.matchSuitSpecifier(t+1,e))&&(c={kind:fr.SuitBound,value:r,qualifier:i,suit:a}),c}))}},{key:"matchSuitSpecifier",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuitSpecifier_1(t+1,e)},function(){return n.matchSuitSpecifier_2(t+1,e)},function(){return n.matchSuitSpecifier_3(t+1,e)},function(){return n.matchSuitSpecifier_4(t+1,e)},function(){return n.matchSuitSpecifier_5(t+1,e)},function(){return n.matchSuitSpecifier_6(t+1,e)}])}},{key:"matchSuitSpecifier_1",value:function(t,e){return this.matchWildcard(t+1,e)}},{key:"matchSuitSpecifier_2",value:function(t,e){return this.matchMajor(t+1,e)}},{key:"matchSuitSpecifier_3",value:function(t,e){return this.matchMinor(t+1,e)}},{key:"matchSuitSpecifier_4",value:function(t,e){return this.matchOtherMajor(t+1,e)}},{key:"matchSuitSpecifier_5",value:function(t,e){return this.matchOtherMinor(t+1,e)}},{key:"matchSuitSpecifier_6",value:function(t,e){return this.matchSuit(t+1,e)}},{key:"matchOtherMajor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Fn||(Fn=Object(a.a)(["(?:oM)"]))),t+1,e))&&(i={kind:fr.OtherMajor,v:r}),i}))}},{key:"matchOtherMinor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Tn||(Tn=Object(a.a)(["(?:om)"]))),t+1,e))&&(i={kind:fr.OtherMinor,v:r}),i}))}},{key:"matchSuitComparison",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==(i=n.matchSuitComparisonOperator(t+1,e))&&null!==(a=n.matchSuitSpecifier(t+1,e))&&(c={kind:fr.SuitComparison,left:r,op:i,right:a}),c}))}},{key:"matchSuitComparisonOperator",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuitComparisonOperator_1(t+1,e)},function(){return n.matchSuitComparisonOperator_2(t+1,e)},function(){return n.matchSuitComparisonOperator_3(t+1,e)},function(){return n.matchSuitComparisonOperator_4(t+1,e)},function(){return n.matchSuitComparisonOperator_5(t+1,e)}])}},{key:"matchSuitComparisonOperator_1",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Ln||(Ln=Object(a.a)(["(?:<=)"]))),t+1,e))&&(i={kind:fr.SuitComparisonOperator_1,v:r}),i}))}},{key:"matchSuitComparisonOperator_2",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Hn||(Hn=Object(a.a)(["(?:>=)"]))),t+1,e))&&(i={kind:fr.SuitComparisonOperator_2,v:r}),i}))}},{key:"matchSuitComparisonOperator_3",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(zn||(zn=Object(a.a)(["(?:=)"]))),t+1,e))&&(i={kind:fr.SuitComparisonOperator_3,v:r}),i}))}},{key:"matchSuitComparisonOperator_4",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Wn||(Wn=Object(a.a)(["(?:<)"]))),t+1,e))&&(i={kind:fr.SuitComparisonOperator_4,v:r}),i}))}},{key:"matchSuitComparisonOperator_5",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Un||(Un=Object(a.a)(["(?:>)"]))),t+1,e))&&(i={kind:fr.SuitComparisonOperator_5,v:r}),i}))}},{key:"matchSuitHonors",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==(i=n.loop((function(){return n.matchHonor(t+1,e)}),!1))&&(a={kind:fr.SuitHonors,suit:r,honors:i}),a}))}},{key:"matchSuitTop",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c,u=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==(i=n.regexAccept(String.raw($n||($n=Object(a.a)(["(?:[0-5])"]))),t+1,e))&&null!==n.regexAccept(String.raw(Kn||(Kn=Object(a.a)(["(?:/)"]))),t+1,e)&&null!==(c=n.regexAccept(String.raw(Jn||(Jn=Object(a.a)(["(?:[1-5])"]))),t+1,e))&&(u={kind:fr.SuitTop,suit:r,x:i,y:c}),u}))}},{key:"matchBoundQualifier",value:function(t,e){var n=this;return this.choice([function(){return n.matchBoundQualifier_1(t+1,e)},function(){return n.matchBoundQualifier_2(t+1,e)},function(){return n.matchBoundQualifier_3(t+1,e)}])}},{key:"matchBoundQualifier_1",value:function(t,e){return this.matchPlus(t+1,e)}},{key:"matchBoundQualifier_2",value:function(t,e){return this.matchMinus(t+1,e)}},{key:"matchBoundQualifier_3",value:function(t,e){return this.matchEquals(t+1,e)}},{key:"matchPlus",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Gn||(Gn=Object(a.a)(["(?:+)"],["(?:\\+)"]))),t+1,e))&&(i={kind:fr.Plus,v:r}),i}))}},{key:"matchMinus",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Qn||(Qn=Object(a.a)(["(?:-)"],["(?:\\-)"]))),t+1,e))&&(i={kind:fr.Minus,v:r}),i}))}},{key:"matchEquals",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Vn||(Vn=Object(a.a)(["(?:=)"]))),t+1,e))&&(i={kind:fr.Equals,v:r}),i}))}},{key:"matchOtherBid",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchNumber(t+1,e))&&null!==(i=n.matchStrain(t+1,e))&&(a={kind:fr.OtherBid,level:r,strain:i}),a}))}},{key:"matchDistribution",value:function(t,e){var n=this;return this.choice([function(){return n.matchDistribution_1(t+1,e)},function(){return n.matchDistribution_2(t+1,e)},function(){return n.matchDistribution_3(t+1,e)},function(){return n.matchDistribution_4(t+1,e)},function(){return n.matchDistribution_5(t+1,e)}])}},{key:"matchDistribution_1",value:function(t,e){return this.matchBalanced(t+1,e)}},{key:"matchDistribution_2",value:function(t,e){return this.matchSemiBalanced(t+1,e)}},{key:"matchDistribution_3",value:function(t,e){return this.matchUnbalanced(t+1,e)}},{key:"matchDistribution_4",value:function(t,e){return this.matchAnyShape(t+1,e)}},{key:"matchDistribution_5",value:function(t,e){return this.matchSpecificShape(t+1,e)}},{key:"matchBalanced",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Xn||(Xn=Object(a.a)(["(?:BAL)"]))),t+1,e))&&(i={kind:fr.Balanced,v:r}),i}))}},{key:"matchSemiBalanced",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Zn||(Zn=Object(a.a)(["(?:semiBAL)"]))),t+1,e))&&(i={kind:fr.SemiBalanced,v:r}),i}))}},{key:"matchUnbalanced",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Yn||(Yn=Object(a.a)(["(?:unBAL)"]))),t+1,e))&&(i={kind:fr.Unbalanced,v:r}),i}))}},{key:"matchAnyShape",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(tr||(tr=Object(a.a)(["(?:[0-9]{4})"]))),t+1,e))&&null!==n.regexAccept(String.raw(er||(er=Object(a.a)(["(?:*)"],["(?:\\*)"]))),t+1,e)&&(i={kind:fr.AnyShape,v:r}),i}))}},{key:"matchSpecificShape",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c,u=null;return null!==(r=n.matchDigit(t+1,e))&&null!==(i=n.matchDigit(t+1,e))&&null!==(a=n.matchDigit(t+1,e))&&null!==(c=n.matchDigit(t+1,e))&&(u={kind:fr.SpecificShape,S:r,H:i,D:a,C:c}),u}))}},{key:"matchSuitRank",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuitRank_1(t+1,e)},function(){return n.matchSuitRank_2(t+1,e)}])}},{key:"matchSuitRank_1",value:function(t,e){return this.matchPrimary(t+1,e)}},{key:"matchSuitRank_2",value:function(t,e){return this.matchSecondary(t+1,e)}},{key:"matchPrimary",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==n.regexAccept(String.raw(nr||(nr=Object(a.a)(["(?:1)"]))),t+1,e)&&(i={kind:fr.Primary,suit:r}),i}))}},{key:"matchSecondary",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==n.regexAccept(String.raw(rr||(rr=Object(a.a)(["(?:2)"]))),t+1,e)&&(i={kind:fr.Secondary,suit:r}),i}))}},{key:"matchSetTrump",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==n.regexAccept(String.raw(ir||(ir=Object(a.a)(["(?:#)"]))),t+1,e)&&(i={kind:fr.SetTrump,suit:r}),i}))}},{key:"matchLabelDef",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c=null;return null!==n.regexAccept(String.raw(ar||(ar=Object(a.a)(["(?:')"],["(?:\\')"]))),t+1,e)&&null!==(r=n.matchLabel(t+1,e))&&null!==n.regexAccept(String.raw(cr||(cr=Object(a.a)(["(?:': )"],["(?:\\': )"]))),t+1,e)&&null!==(i=n.matchConstraintList(t+1,e))&&(c={kind:fr.LabelDef,label:r,constraints:i}),c}))}},{key:"matchLabelRef",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(ur||(ur=Object(a.a)(["(?:')"],["(?:\\')"]))),t+1,e)&&null!==(r=n.matchLabel(t+1,e))&&null!==n.regexAccept(String.raw(or||(or=Object(a.a)(["(?:')"],["(?:\\')"]))),t+1,e)&&(i={kind:fr.LabelRef,label:r}),i}))}},{key:"matchLabel",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(sr||(sr=Object(a.a)(["(?:[0-9a-zA-z-_]+)"]))),t+1,e))&&(i={kind:fr.Label,v:r}),i}))}},{key:"matchDigit",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(lr||(lr=Object(a.a)(["(?:[0-9])"]))),t+1,e))&&(i=new Gi(r)),i}))}},{key:"matchNumber",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(pr||(pr=Object(a.a)(["(?:[0-9]+)"]))),t+1,e))&&(i=new Qi(r)),i}))}},{key:"test",value:function(){var t=this.mark(),e=null!==this.matchStart(0);return this.reset(t),e}},{key:"parse",value:function(){var t=this.mark(),e=this.matchStart(0);if(e)return{ast:e,errs:[]};this.reset(t);var n=new ra;this.clearMemos(),this.matchStart(0,n);var r=n.getErr();return{ast:e,errs:null!==r?[r]:[]}}},{key:"mark",value:function(){return this.pos}},{key:"loop",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mark(),r=[];;){var i=t();if(null===i)break;r.push(i)}return e||r.length>0?r:(this.reset(n),null)}},{key:"run",value:function(t,e){var n=this.mark(),r=e();return null!==r?r:(this.reset(n),null)}},{key:"choice",value:function(t){var e,n=Object($i.a)(t);try{for(n.s();!(e=n.n()).done;){var r=(0,e.value)();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"regexAccept",value:function(t,e,n){var r=this;return this.run(e,(function(){var e=new RegExp(t,"y"),i=r.mark();e.lastIndex=i.overallPos;var a=r.tryConsume(e);return n&&n.record(i,a,{kind:"RegexMatch",literal:t.substring(3,t.length-1),negated:r.negating}),a}))}},{key:"tryConsume",value:function(t){var e=t.exec(this.input);if(e){for(var n=0,r=-1,i=0;i<e[0].length;++i)"\n"===e[0][i]&&(++n,r=i);return this.pos={overallPos:t.lastIndex,line:this.pos.line+n,offset:-1===r?this.pos.offset+e[0].length:e[0].length-r-1},e[0]}return null}},{key:"noConsume",value:function(t){var e=this.mark(),n=t();return this.reset(e),n}},{key:"negate",value:function(t){var e=this.mark(),n=this.negating;this.negating=!n;var r=t();return this.negating=n,this.reset(e),null===r||null}},{key:"memoise",value:function(t,e){var n=this.mark(),r=e.get(n.overallPos);if(this.memoSafe&&void 0!==r)return this.reset(r[1]),r[0];var i=t();return this.memoSafe&&e.set(n.overallPos,[i,this.mark()]),i}},{key:"match$EOF",value:function(t){var e=this.finished()?{kind:fr.$EOF}:null;return t&&t.record(this.mark(),e,{kind:"EOF",negated:this.negating}),e}}]),t}();var Xi,Zi,Yi,ta,ea,na=function(){function t(e,n){Object(Ji.a)(this,t),this.pos=void 0,this.expmatches=void 0,this.pos=e,this.expmatches=Object(b.a)(n)}return Object(Ki.a)(t,[{key:"toString",value:function(){return"Syntax Error at line ".concat(this.pos.line,":").concat(this.pos.offset,". Expected one of ").concat(this.expmatches.map((function(t){return"EOF"===t.kind?" EOF":" ".concat(t.negated?"not ":"","'").concat(t.literal,"'")})))}}]),t}(),ra=function(){function t(){Object(Ji.a)(this,t),this.mxpos={overallPos:-1,line:-1,offset:-1},this.regexset=new Set,this.pmatches=[]}return Object(Ki.a)(t,[{key:"record",value:function(t,e,n){null===e!==n.negated&&(t.overallPos>this.mxpos.overallPos&&(this.mxpos=t,this.pmatches=[],this.regexset.clear()),this.mxpos.overallPos===t.overallPos&&("RegexMatch"===n.kind?(this.regexset.has(n.literal)||this.pmatches.push(n),this.regexset.add(n.literal)):this.pmatches.push(n)))}},{key:"getErr",value:function(){return-1!==this.mxpos.overallPos?new na(this.mxpos,this.pmatches):null}}]),t}(),ia=function(t){return Object(u.pipe)(t,c.p.fromReadonlyArray,c.j.map(Object(u.flow)(c.p.map(pa),c.d.fromPredicate((function(t){return t.length>1}),(function(t){return t[0]})))))},aa=function(t){return Object(u.flow)(ia,c.e.match(c.j.Functor)(u.identity,(function(e){return{type:t,syntax:e}})),c.j.getOrElse("Conjunction"===t?Oi:vi))},ca=function(t){return t.kind===fr.Club?"C":t.kind===fr.Diamond?"D":t.kind===fr.Heart?"H":"S"},ua=function(t){return t.kind===fr.Notrump?"N":ca(t)},oa=function(t){return t.kind===fr.Major?"Major":t.kind===fr.Minor?"Minor":t.kind===fr.OtherMajor?"OtherMajor":t.kind===fr.OtherMinor?"OtherMinor":t.kind===fr.Wildcard?"Wildcard":ca(t)},sa=function(t,e){return function(n){return Object(u.pipe)(e,c.j.of,c.j.filter((function(e){return t.kind===fr.Equals||"min"===n&&t.kind===fr.Plus||"max"===n&&t.kind===fr.Minus})))}},la=function(t){return Object(u.pipe)(t,c.n.map((function(t){return t.constraint})),aa("Conjunction"))},pa=function t(e){switch(e.kind){case fr.True:return Oi();case fr.False:return vi();case fr.And:return Object(u.pipe)(e.constraints,c.n.map((function(t){return t.constraint})),aa("Conjunction"));case fr.Otherwise:return{type:"Otherwise"};case fr.Or:return Object(u.pipe)(function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.kind===fr.Or?t.apply(void 0,[e.left,e.right].concat(r)):Object(u.pipe)(r,c.p.fromReadonlyArray,c.j.fold((function(){return[e]}),(function(n){return[e].concat(Object(b.a)(t.apply(void 0,[n[0]].concat(Object(b.a)(n.slice(1))))))})))}(e.left,e.right),aa("Disjunction"));case fr.Not:return{type:"Negation",syntax:t(e.constraint)};case fr.OtherBid:return{type:"OtherBid",bid:{level:e.level.value,strain:ua(e.strain)}};case fr.PointRange:return mi({type:"PointRange",min:e.lower.value,max:e.upper.value});case fr.PointBound:return mi({type:"PointRange",min:Object(u.pipe)(sa(e.qualifier,e.value.value)("min"),c.j.getOrElse(Object(u.constant)(0))),max:Object(u.pipe)(sa(e.qualifier,e.value.value)("max"),c.j.getOrElse(Object(u.constant)(37)))});case fr.SuitRange:return{type:"SuitRange",min:e.lower.value,max:e.upper.value,suit:oa(e.suit)};case fr.SuitComparison:return{type:"SuitComparison",op:e.op.v,left:oa(e.left),right:oa(e.right)};case fr.Primary:case fr.Secondary:return{type:"Suit".concat(e.kind),suit:oa(e.suit)};case fr.SetTrump:return{type:"SetTrump",suit:oa(e.suit)};case fr.SuitBound:return{type:"SuitRange",min:Object(u.pipe)(sa(e.qualifier,e.value.value)("min"),c.j.getOrElse(Object(u.constant)(0))),max:Object(u.pipe)(sa(e.qualifier,e.value.value)("max"),c.j.getOrElse(Object(u.constant)(13))),suit:oa(e.suit)};case fr.SuitHonors:return{type:"SuitHonors",suit:oa(e.suit),honors:Object(u.pipe)(e.honors,c.n.fromArray,c.n.traverse(c.j.Applicative)(Object(u.flow)((function(t){return t.v}),M)),c.j.getOrElseW((function(){return[]})))};case fr.SuitTop:return{type:"SuitTop",suit:oa(e.suit),count:parseInt(e.x),minRank:P[P.length-parseInt(e.y)]};case fr.AnyShape:return mi({type:"AnyShape",counts:Object(u.pipe)(e.v,c.x.split(""),c.n.map(parseInt))});case fr.SpecificShape:return mi({type:"SpecificShape",suits:Object(u.pipe)(_r,c.q.mapWithIndex((function(t,n){return e[t].value})))});case fr.LabelDef:return{type:"LabelDef",name:e.label.v,definition:la(e.constraints)};case fr.LabelRef:return{type:"LabelRef",name:e.label.v};case fr.Balanced:case fr.SemiBalanced:case fr.Unbalanced:return{type:e.kind};default:return m(e)}},fa=function(t){switch(t.kind){case fr.ContractBid:return{level:t.level.value,strain:ua(t.specifier)};case fr.Pass:return"Pass";default:return m(t)}},da=function(t){return new Vi(t).parse()};!function(t){t.Start="Start",t.Hand="Hand",t.Suit="Suit",t.Card="Card",t.$EOF="$EOF"}(ea||(ea={}));var ja=function t(e){Object(Ji.a)(this,t),this.kind=ea.Card,this.c=void 0,this.rank=void 0,this.c=e,this.rank=["2","3","4","5","6","7","8","9","T","J","Q","K","A"].indexOf(e)+2},ha=function(){function t(e){Object(Ji.a)(this,t),this.input=void 0,this.pos=void 0,this.negating=!1,this.memoSafe=!0,this.pos={overallPos:0,line:1,offset:0},this.input=e}return Object(Ki.a)(t,[{key:"reset",value:function(t){this.pos=t}},{key:"finished",value:function(){return this.pos.overallPos===this.input.length}},{key:"clearMemos",value:function(){}},{key:"matchStart",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchHand(t+1,e))&&null!==n.match$EOF(e)&&(i={kind:ea.Start,hand:r}),i}))}},{key:"matchHand",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c,u,o=null;return null!==(r=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(Xi||(Xi=Object(a.a)(["(?:.)"],["(?:\\.)"]))),t+1,e)&&null!==(i=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(Zi||(Zi=Object(a.a)(["(?:.)"],["(?:\\.)"]))),t+1,e)&&null!==(c=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(Yi||(Yi=Object(a.a)(["(?:.)"],["(?:\\.)"]))),t+1,e)&&null!==(u=n.matchSuit(t+1,e))&&(o={kind:ea.Hand,S:r,H:i,D:c,C:u}),o}))}},{key:"matchSuit",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.loop((function(){return n.matchCard(t+1,e)}),!0))&&(i={kind:ea.Suit,cards:r}),i}))}},{key:"matchCard",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(ta||(ta=Object(a.a)(["(?:[AKQJT2-9])"]))),t+1,e))&&(i=new ja(r)),i}))}},{key:"test",value:function(){var t=this.mark(),e=null!==this.matchStart(0);return this.reset(t),e}},{key:"parse",value:function(){var t=this.mark(),e=this.matchStart(0);if(e)return{ast:e,errs:[]};this.reset(t);var n=new Ca;this.clearMemos(),this.matchStart(0,n);var r=n.getErr();return{ast:e,errs:null!==r?[r]:[]}}},{key:"mark",value:function(){return this.pos}},{key:"loop",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mark(),r=[];;){var i=t();if(null===i)break;r.push(i)}return e||r.length>0?r:(this.reset(n),null)}},{key:"run",value:function(t,e){var n=this.mark(),r=e();return null!==r?r:(this.reset(n),null)}},{key:"choice",value:function(t){var e,n=Object($i.a)(t);try{for(n.s();!(e=n.n()).done;){var r=(0,e.value)();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"regexAccept",value:function(t,e,n){var r=this;return this.run(e,(function(){var e=new RegExp(t,"y"),i=r.mark();e.lastIndex=i.overallPos;var a=r.tryConsume(e);return n&&n.record(i,a,{kind:"RegexMatch",literal:t.substring(3,t.length-1),negated:r.negating}),a}))}},{key:"tryConsume",value:function(t){var e=t.exec(this.input);if(e){for(var n=0,r=-1,i=0;i<e[0].length;++i)"\n"===e[0][i]&&(++n,r=i);return this.pos={overallPos:t.lastIndex,line:this.pos.line+n,offset:-1===r?this.pos.offset+e[0].length:e[0].length-r-1},e[0]}return null}},{key:"noConsume",value:function(t){var e=this.mark(),n=t();return this.reset(e),n}},{key:"negate",value:function(t){var e=this.mark(),n=this.negating;this.negating=!n;var r=t();return this.negating=n,this.reset(e),null===r||null}},{key:"memoise",value:function(t,e){var n=this.mark(),r=e.get(n.overallPos);if(this.memoSafe&&void 0!==r)return this.reset(r[1]),r[0];var i=t();return this.memoSafe&&e.set(n.overallPos,[i,this.mark()]),i}},{key:"match$EOF",value:function(t){var e=this.finished()?{kind:ea.$EOF}:null;return t&&t.record(this.mark(),e,{kind:"EOF",negated:this.negating}),e}}]),t}();var ba,ma,Oa,va,ya,ga,Sa,xa,ka,wa=function(){function t(e,n){Object(Ji.a)(this,t),this.pos=void 0,this.expmatches=void 0,this.pos=e,this.expmatches=Object(b.a)(n)}return Object(Ki.a)(t,[{key:"toString",value:function(){return"Syntax Error at line ".concat(this.pos.line,":").concat(this.pos.offset,". Expected one of ").concat(this.expmatches.map((function(t){return"EOF"===t.kind?" EOF":" ".concat(t.negated?"not ":"","'").concat(t.literal,"'")})))}}]),t}(),Ca=function(){function t(){Object(Ji.a)(this,t),this.mxpos={overallPos:-1,line:-1,offset:-1},this.regexset=new Set,this.pmatches=[]}return Object(Ki.a)(t,[{key:"record",value:function(t,e,n){null===e!==n.negated&&(t.overallPos>this.mxpos.overallPos&&(this.mxpos=t,this.pmatches=[],this.regexset.clear()),this.mxpos.overallPos===t.overallPos&&("RegexMatch"===n.kind?(this.regexset.has(n.literal)||this.pmatches.push(n),this.regexset.add(n.literal)):this.pmatches.push(n)))}},{key:"getErr",value:function(){return-1!==this.mxpos.overallPos?new wa(this.mxpos,this.pmatches):null}}]),t}(),Aa=function(t){return Object(u.pipe)(S,c.n.map(function(t){return function(e){return Object(u.pipe)(t[e].cards,c.n.map((function(t){return{suit:e,rank:A.decode(t.rank).right}})))}}(t)),c.n.flatten,c.r.fromReadonlyArray(q))},_a=function(t){return new ha(t).parse()},Ba={encode:Object(u.flow)(T,c.q.toReadonlyArray,c.n.sort(I()),c.n.map(Object(u.flow)(c.s.snd,c.n.sort(E),c.n.reduce("",(function(t,e){return t+A.encode(e)})))),c.n.intersperse("."),c.n.foldMap(c.x.Monoid)(u.identity))},Ea=function(t){return Object(u.pipe)(t,c.p.fromReadonlyArray,c.j.fold(Object(u.constant)(gt.a(null,"No syntax errors reported")),c.p.foldMap(Ui.getSemigroup())((function(t){var e=Object(i.a)(t,2),n=e[0],r=e[1];return Ui.of(Wi.key(n,"required",Ui.of(Wi.index(r.pos.offset,"required",Object(u.pipe)(r.expmatches,c.p.fromReadonlyArray,c.j.fold(Object(u.constant)(Ui.of(Wi.leaf(n,""))),c.p.foldMapWithIndex(Ui.getSemigroup())((function(t,e){return Ui.of(Wi.leaf(n.substring(r.pos.offset),"EOF"===e.kind?"EOF":"".concat(e.negated?"not ":"","'").concat(e.literal,"'")))}))))))))}))))},Pa=function(t){return c.d.fromNullable(t.errs)(t.ast)},Ra=function(t){return Object(u.pipe)(gt.c,gt.b((function(e){return Object(u.pipe)(e,t,Pa,c.d.mapLeft(Object(u.flow)(c.n.map((function(t){return[e,t]})),Ea)))})))},Ma=Object(u.flow)(Ra(da).decode,c.d.map((function(t){return function(t){var e;return{bid:fa(t.bid),syntax:Object(u.pipe)(null===(e=t.constraints)||void 0===e?void 0:e.constraints,c.j.fromNullable,c.j.fold(vi,la))}}(t.spec)}))),qa=Object(u.flow)(Ra(_a).decode,c.d.map((function(t){return Aa(t.hand)}))),Da=c.x.Eq,Na=Object(Ht.c)(),Ia=Object(Ht.c)(),Fa={system:[],decodedBids:Na.getInitialState(),validatedPaths:Ia.getInitialState()},Ta=Object(Ht.d)({name:"system",initialState:Fa,reducers:{setSystem:function(t,e){t.system=Object(u.pipe)(function(t){var e=c.B.make("ROOT"),n=[e];return t.forEach((function(t){var e=n[t.depth+1]={forest:[],value:t.key};n[t.depth].forest.push(e)})),e.forest}(e.payload),Nt.a)},removeConstraintsByBlockKey:function(t,e){Na.removeMany(t.decodedBids,e.payload),Ia.removeMany(t.validatedPaths,Object(u.pipe)(t.validatedPaths.ids,c.n.filter((function(t){return Object(u.pipe)(e.payload,c.n.exists(Object(u.flow)(c.x.includes,Object(u.apply)(t))))}))))},cacheSystemConstraints:function(t,e){var n=Object(u.pipe)(e.payload,c.p.map((function(t){return{id:t.key,value:Ma(t.text)}})));Na.setMany(t.decodedBids,n)},validateSystem:function(t){},reportValidationResult:function(t,e){Object(u.pipe)(e.payload,c.s.fst,(function(e){return Ga({state:t,path:e})}),c.j.map(Object(u.flow)((function(t){return{id:t,value:Object(u.pipe)(e.payload,c.s.snd,dn.a.replete)}}),(function(e){return Ia.upsertOne(t.validatedPaths,e)}))))}}}),La=Ta.actions,Ha=La.setSystem,za=La.removeConstraintsByBlockKey,Wa=La.cacheSystemConstraints,Ua=La.validateSystem,$a=La.reportValidationResult,Ka=Na.getSelectors(),Ja=function(t){return function(e){return Object(u.pipe)(c.j.fromNullableK(Ka.selectById)(t,e),c.j.map((function(t){return t.value})))}},Ga=function(t){var e=t.state,n=t.path;return Object(u.pipe)(n,c.p.traverse(c.j.Applicative)((function(t){return Object(u.pipe)(e.decodedBids.entities,dr,c.n.filterMap(c.j.fromNullable),c.n.findFirst((function(e){return Object(u.pipe)(e.value,c.j.fromEither,c.j.map(j("bid")),(function(e){return c.j.elem(it)(t,e)}))})),c.j.map(j("id")))})),c.j.map(Object(u.flow)(c.p.intersperse("."),c.p.foldMap(c.x.Semigroup)(u.identity),(function(t){return t}))))},Qa=Object(It.a)((function(t){var e=t.state,n=t.key;return Object(u.pipe)(n,Ja(e.decodedBids),c.j.chain(c.j.fromEither))})),Va=Object(It.a)((function(t){var e,n=t.state,r=t.key;return Object(u.pipe)(n.system,(e=Da,function(t){return c.n.findFirstMap(c.B.fold((function(n,r){return e.equals(n,t)?c.j.some([t]):Object(u.pipe)(r,c.n.findFirstMap(c.j.map(c.n.prepend(n))))})))})(r),c.j.getOrElse((function(){return c.n.zero()})),c.n.filterMap(Ja(n.decodedBids)),c.n.sequence(c.d.Applicative))})),Xa=Object(It.a)((function(t){return Object(u.pipe)(t.system,jr,c.n.filterMap(Ja(t.decodedBids)))})),Za=(Object(It.a)(Object(u.flow)(Xa,c.n.lefts)),Object(It.a)((function(t){var e,n=t.state,r=t.options;return Object(u.pipe)(n.system,(e=n.decodedBids,Object(u.flow)(c.n.filterMap(c.B.traverse(c.j.Applicative)(Ja(e))),yr)),c.A.map((null===r||void 0===r?void 0:r.implicitPass)?vr:u.identity))}))),Ya=Object(It.a)(Object(u.flow)(Za,c.A.mapLeft(c.n.map((function(t){return{type:"Parse",error:t}}))),gr(Object(u.flow)((function(t){return Object(u.pipe)(t,Or(Ai),c.n.map(Object(u.flow)(Ii,Ti)),c.w.traverseArray(Fi),c.w.evaluate(yi),yr)}),c.A.mapLeft(c.n.map((function(t){return{type:"Syntax",error:t}}))))))),tc=Object(It.a)(Object(u.flow)(Ya,gr((function(t){return Object(u.pipe)(t,zi,c.A.bimap((function(t){return c.n.of({type:"Validation",error:t})}),(function(){return t})))})))),ec=Object(It.a)(Object(u.flow)(tc,c.A.map(br))),nc=Object(It.a)(Object(u.flow)(ec,c.A.getRightOnly,c.j.chain(c.p.fromReadonlyArray))),rc=Object(It.a)(Object(u.flow)(ec,c.A.getRight,c.j.chain(c.p.fromReadonlyArray))),ic=Object(It.a)((function(t){return Object(u.pipe)(c.j.Do,c.j.apS("path",c.j.fromEitherK(Va)(t)),c.j.apS("paths",Object(u.pipe)(t,tc,c.A.getRight,c.j.map(br))),c.j.chain((function(t){var e=t.path,n=t.paths;return Object(u.pipe)(n,c.n.findFirst((function(t){return c.n.getEq(Object(u.pipe)(it,c.g.contramap((function(t){return t.bid})))).equals(e,t)})))})))})),ac=Object(u.flow)(ic,c.j.map(c.p.last)),cc=Object(u.pipe)(it,c.n.getEq),uc=Object(It.a)((function(t){return Object(u.pipe)(t,Za,c.A.map(Object(u.flow)(c.n.map(c.B.map((function(t){return t.bid}))),hr,c.n.toArray,(function(e){return Object(u.pipe)(t,tc,c.A.getLeft,c.j.getOrElse((function(){return c.n.zero()})),c.n.filterMap((function(t){return"Parse"!==t.type?c.j.some(t):c.j.none})),(function(t){return Object(u.pipe)(e,c.n.map(c.B.map((function(e){return{bid:Object(u.pipe)(e,c.p.last),path:e,errors:Object(u.pipe)(t,c.n.filter((function(t){return cc.equals(t.error.path,e)})))}}))))}))}))))})),oc=Object(It.a)((function(t){return Object(u.pipe)(c.j.Do,c.j.apS("errors",Object(u.pipe)(t,uc,c.A.getRight)),c.j.apS("sb",Qa(t)),c.j.fold((function(){return c.n.empty}),(function(t){var e=t.sb,n=t.errors;return Object(u.pipe)(n,jr,c.n.filter((function(t){return it.equals(e.bid,t.bid)})))})))})),sc=Ta.reducer,lc=[Object(u.flow)(Dt.a.filter(Ha.match),Object(fn.a)(1e3),Dt.a.map((function(){return Ua()}))),function(t,e){return Object(u.pipe)(t,Dt.a.filter(Ua.match),Dt.a.chain((function(){return Object(u.pipe)({state:e.value.system},Ya,c.A.getRight,c.j.fold((function(){return c.n.empty}),br),c.n.filter(Object(u.flow)(c.p.map(j("bid")),(function(t){return Ga({state:e.value.system,path:t})}),c.j.fold(u.constFalse,(function(t){return!e.value.system.validatedPaths.ids.includes(t)})))),he)})),Dt.a.map($a))}],pc=n(4),fc=l.a.ol(ba||(ba=Object(a.a)(["\n  padding-left: 0;\n"]))),dc=l.a.li(ma||(ma=Object(a.a)(["\n  list-style-type: none;\n  display: inline;\n  float: left;\n"]))),jc=function(t){var e=t.rank;return Object(pc.jsx)(dc,{children:w[e-2]})},hc=l.a.ol(Oa||(Oa=Object(a.a)(["\n  white-space: nowrap;\n  width: 15em;\n  margin: 0;\n  padding-left: 0;\n  list-style: decimal url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) inside;\n"]))),bc=l.a.li(va||(va=Object(a.a)(["\n  display: inline;\n  &::before {\n    display: inline;\n    float: left;\n    margin-left: 5px;\n  }\n  ","\n"])),'\n  &.S::before { content: "\u2660"; color: #0000FF }\n  &.H::before { content: "\u2665"; color: #FF0000 }\n  &.D::before { content: "\u2666"; color: #FFA500 }\n  &.C::before { content: "\u2663"; color: #32CD32 }\n'),mc=function(t){var e=t.suit,n=t.ranks;return Object(pc.jsx)(bc,{className:e,children:Object(pc.jsxs)(fc,{children:[n.map((function(t,e){return Object(pc.jsx)(jc,{rank:t},e)})),0===n.length&&Object(pc.jsx)(dc,{children:"-"})]})})},Oc=function(t){var e=t.hand,n=T(e);return Object(pc.jsx)(hc,{children:Object(u.pipe)(n,c.q.mapWithIndex((function(t,e){return Object(pc.jsx)(mc,{suit:t,ranks:e},t)})),c.q.toReadonlyArray,c.n.sort(I()),c.n.map(c.s.snd))})},vc=l.a.span(ya||(ya=Object(a.a)(["\n  ",'\n  &.N::before { content: "NT"; color: #000000; font-size: 12px; }\n'])),'\n  &.S::before { content: "\u2660"; color: #0000FF }\n  &.H::before { content: "\u2665"; color: #FF0000 }\n  &.D::before { content: "\u2666"; color: #FFA500 }\n  &.C::before { content: "\u2663"; color: #32CD32 }\n'),yc=function(t){var e=t.table;return Object(pc.jsxs)("table",{children:[Object(pc.jsx)("thead",{children:Object(pc.jsxs)("tr",{children:[Object(pc.jsx)("th",{}),K.map((function(t,e){return Object(pc.jsx)("th",{style:{fontWeight:"normal",verticalAlign:"middle"},children:Object(pc.jsx)(vc,{className:t})},e)}))]})}),Object(pc.jsx)("tbody",{children:z.map((function(t,n){return Object(pc.jsxs)("tr",{children:[Object(pc.jsx)("td",{children:t}),K.map((function(n,r){return Object(pc.jsx)("td",{children:Math.round(100*e[n][t])/100},r)}))]},n)}))})]})},gc=function(t){var e=t.result;return Object(pc.jsxs)("table",{children:[Object(pc.jsx)("thead",{children:Object(pc.jsxs)("tr",{children:[Object(pc.jsx)("th",{}),K.map((function(t,e){return Object(pc.jsx)("th",{style:{fontWeight:"normal",verticalAlign:"middle"},children:Object(pc.jsx)(vc,{className:t})},e)}))]})}),Object(pc.jsx)("tbody",{children:z.map((function(t,n){return Object(pc.jsxs)("tr",{children:[Object(pc.jsx)("td",{children:t}),K.map((function(n,r){return Object(pc.jsx)("td",{children:e.results[n][t]},r)})),Object(pc.jsx)("td",{children:Object(pc.jsx)(Oc,{hand:Bt.reverseGet(e.board.deal)[t]})})]},n)}))})]})},Sc=function(t){var e=t.stats;return Object(pc.jsxs)("div",{children:[Object(pc.jsx)("span",{children:null!==e.count&&Object(pc.jsx)(pc.Fragment,{children:e.count.toString()})}),null!==e.average&&Object(pc.jsxs)("section",{children:[Object(pc.jsx)("h4",{children:"Average"}),null!==e.average&&Object(pc.jsx)(yc,{table:e.average})]}),null!==e.stdev&&Object(pc.jsxs)("section",{children:[Object(pc.jsx)("h4",{children:"Std. Dev."}),Object(pc.jsx)(yc,{table:e.stdev})]})]})},xc=l.a.span(ga||(ga=Object(a.a)(['\n  &.S::after { content: "\u2660"; color: #0000FF; }\n  &.H::after { content: "\u2665"; color: #FF0000; }\n  &.D::after { content: "\u2666"; color: #FFA500; }\n  &.C::after { content: "\u2663"; color: #32CD32; }\n  &.N::after { content: "NT" }\n']))),kc=function(t){var e=t.bid;return Object(pc.jsxs)(pc.Fragment,{children:[Object(pc.jsx)("span",{children:e.level}),Object(pc.jsx)(xc,{className:e.strain})]})},wc=function(t){var e=t.bid;return Object(pc.jsx)("span",{children:e})},Cc=function(t){var e=t.bid;return"string"===typeof e?Object(pc.jsx)(wc,{bid:e}):Object(pc.jsx)(kc,{bid:e})},Ac=function(t){var e=t.path;return Object(pc.jsx)("span",{children:e.map((function(t,e){return Object(pc.jsxs)(o.Fragment,{children:["\xa0",Object(pc.jsx)(Cc,{bid:t})]},e)}))})},_c=function(t){var e=t.numerator,n=t.denominator,r=t.decimalPlaces,i=Math.pow(10,null!==r&&void 0!==r?r:0);return Object(pc.jsxs)("span",{children:["1 in ",Math.floor(n/e*i)/i]})},Bc=function(t){var e=t.numerator,n=t.denominator,r=t.decimalPlaces,i=Math.pow(10,null!==r&&void 0!==r?r:0);return Object(pc.jsxs)("span",{children:[Math.floor(e*(100*i)/n)/i,"%"]})},Ec=function(t){var e=t.path,n=t.satisfiesCount,r=t.dealCount;return Object(pc.jsxs)(pc.Fragment,{children:[Object(pc.jsx)(Ac,{path:qt.reverseGet(e)}),Object(pc.jsxs)("span",{children:[n,r&&Object(pc.jsxs)("small",{children:["\xa0(",Object(pc.jsx)(Bc,{numerator:n,denominator:r,decimalPlaces:2}),"\xa0,\xa0or\xa0",Object(pc.jsx)(_c,{numerator:n,denominator:r}),")"]})]})]})},Pc=l.a.ul(Sa||(Sa=Object(a.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  list-style-type: none;\n  padding: 0px;\n  margin: 0px;\n"]))),Rc=l.a.li(xa||(xa=Object(a.a)(["\n  padding: 0px;\n  margin: 5px;\n"]))),Mc=function(t){var e=t.analysisId,n=d((function(t){return Object(u.pipe)(ln({state:t.profile,analysisId:e}),c.j.toNullable)})),r=f(),i=n?Object(u.pipe)(n.generations,c.n.foldMap(c.i.MonoidSum)((function(t){return t.dealCount}))):0,a=Object(o.useCallback)((function(){return r(en(e))}),[e,r]),s=Object(o.useCallback)((function(){return r(nn(e))}),[e,r]),l=Object(o.useCallback)((function(t){return r(rn(e,t))}),[e,r]);return Object(pc.jsx)(pc.Fragment,{children:n&&Object(pc.jsxs)(Rc,{children:[Object(pc.jsx)("input",{type:"text",value:n.name,onChange:function(t){return l(t.target.value)}}),Object(pc.jsxs)("p",{children:["Paths: ",n.paths.length," ",Object(pc.jsx)("br",{}),"Deals: ",i," ",Object(pc.jsxs)("small",{children:["(",n.generations.length," generations)"]}),Object(pc.jsx)("br",{})]}),Object(pc.jsx)("button",{onClick:s,children:"Select"}),Object(pc.jsx)("button",{onClick:a,children:"Remove"})]})})},qc=function(t){var e=t.path,n=t.count,r=t.generationId,a=t.analysisId,s=t.pathHash,l=d((function(t){return Object(u.pipe)(pn({state:t.profile,analysisId:a,generationId:r}),c.j.toNullable)})),p=Object(u.pipe)(l,c.j.fromNullable,c.j.chain(Object(u.flow)(j("solutionStats"),c.q.lookup(e))),c.j.toNullable),h=Object(u.pipe)(p,c.j.fromNullable,c.j.map(j("count")),c.j.chain(c.j.fromPredicate((function(t){return t>0}))),c.j.toNullable),b=Object(o.useState)(!1),m=Object(i.a)(b,2),O=m[0],v=m[1],y=f(),g=Object(o.useCallback)((function(){return Object(u.pipe)(function(t,e){return Object(u.pipe)(le,c.z.chain((function(t){return c.z.of(t.transaction(["deal","satisfies"],"readonly"))})),c.z.bindTo("tran"),c.z.bind("satisfiedDeals",(function(n){var r=n.tran;return Object(u.pipe)(c.z.tryCatch((function(){return r.objectStore("satisfies").get([t,e])}),(function(){return"SelectError"})),c.z.map(Object(u.flow)(c.j.fromNullable,c.j.fold((function(){return[]}),(function(t){return t.deals})))))})),c.z.bind("deals",(function(t){var e=t.tran,n=t.satisfiedDeals;return Object(u.pipe)(n,c.z.traverseArray(c.z.tryCatchK((function(t){return e.objectStore("deal").get(t.id)}),(function(){return"SelectError"}))),c.z.map(Object(u.flow)(c.n.map(c.j.fromNullable),c.n.compact,c.n.foldMap(c.q.getUnionMonoid(c.u.first()))((function(t){return Object(at.a)({},t.deal.id,{deal:t.deal,solution:c.j.fromNullable(t.solution)})})))))})),c.z.chainFirst((function(t){var e=t.tran;return c.z.tryCatch((function(){return e.done}),(function(){return"CommitRejected"}))})),c.z.map((function(t){return t.deals})))}(r,s),c.z.map(Object(u.flow)(c.q.filter((function(t){return c.j.isNone(t.solution)})),c.q.map((function(t){return t.deal})),c.q.toReadonlyArray,c.n.map(c.s.snd),(function(t){return y(Oe({analysisId:a,type:"Solve",parameter:t,context:{generationId:r,bidPath:e},estimatedUnitsInitial:t.length}))}))))()}),[a,y,r,e,s]);return Object(pc.jsx)(pc.Fragment,{children:l&&Object(pc.jsxs)(pc.Fragment,{children:[Object(pc.jsx)(Ec,{path:e,satisfiesCount:n,dealCount:l.dealCount}),Object(pc.jsxs)("span",{children:[Object(pc.jsx)("button",{onClick:g,children:"Solve"}),p&&h&&Object(pc.jsxs)("span",{children:["(",h," so far)",Object(pc.jsxs)("button",{onClick:function(){return v(!O)},children:[O?"Hide":"Show"," Stats"]}),O&&Object(pc.jsx)(Sc,{stats:p})]})]})]})})},Dc=l.a.div(ka||(ka=Object(a.a)(["\n  clear: both;\n  display: inline-grid;\n  grid-column-gap: 5px;\n  grid-template-columns: auto auto auto;\n  width: auto;\n"]))),Nc=function(t){var e=t.analysisId,n=t.generationId,r=d((function(t){return Object(u.pipe)(pn({state:t.profile,analysisId:e,generationId:n}),c.j.toNullable)})),a=Object(o.useMemo)((function(){return Object(u.pipe)(r,c.j.fromNullable,c.j.chain(j("satisfies")),c.j.map(c.q.toReadonlyArray),c.j.toNullable)}),[r]),s=d((function(t){return Object(u.pipe)(ln({state:t.profile,analysisId:e}),c.j.map(j("paths")),c.j.toNullable)})),l=f(),p=Object(o.useCallback)((function(){return r&&s&&l(Oe({analysisId:e,type:"Satisfies",parameter:s,context:{generationId:r.id},estimatedUnitsInitial:s.length*r.dealCount}))}),[e,l,r,s]),h=Object(o.useCallback)((function(t){return Object(u.pipe)(s,c.j.fromNullable,c.j.chain(c.n.findFirst(Object(u.flow)(c.n.map(j("bid")),(function(e){return c.n.getEq(it).equals(e,qt.reverseGet(t))})))),c.j.map(Ot),c.j.toNullable)}),[s]);return Object(pc.jsx)(pc.Fragment,{children:r&&Object(pc.jsxs)(Rc,{children:["Deal Count: ",r.dealCount," ",Object(pc.jsx)("br",{}),null===a&&Object(pc.jsx)("button",{onClick:p,children:"Satisfies"}),null!==a&&Object(pc.jsx)(Dc,{children:a.map((function(t){var r=Object(i.a)(t,2),a=r[0],c=r[1],u=h(a);return Object(pc.jsx)(o.Fragment,{children:u&&Object(pc.jsx)(qc,{path:a,pathHash:u,count:c,generationId:n,analysisId:e},a)},a)}))})]})})},Ic=function(){var t=d((function(t){return Object(u.pipe)(sn(t.profile),c.j.toNullable)})),e=d((function(t){return t.settings.generateCount})),n=f(),r=Object(o.useCallback)((function(e){t&&n(Oe({analysisId:t.id,type:"GenerateDeals",context:{generationId:jt.decode(ot.UuidTool.newUuid()).right},parameter:e,estimatedUnitsInitial:e}))}),[t,n]);return Object(pc.jsx)(pc.Fragment,{children:t&&Object(pc.jsxs)("div",{children:[Object(pc.jsx)("h4",{children:t.name}),Object(pc.jsx)(Pc,{children:t.generations.map((function(e){return Object(pc.jsx)(Nc,{analysisId:t.id,generationId:e.id},e.id)}))}),Object(pc.jsx)("button",{onClick:function(){return r(e)},children:"Generate Deals"})]})})},Fc=function(){var t=d((function(t){return on(t.profile)})),e=f(),n=Object(o.useCallback)((function(t){return e(tn(t))}),[e]),r=d((function(t){return Object(u.pipe)(rc({state:t.system,options:t.settings}),c.j.toNullable)}));return Object(pc.jsxs)("section",{children:[Object(pc.jsx)("h3",{children:"Analyses"}),Object(pc.jsx)(Pc,{children:t.map((function(t){return Object(pc.jsx)(Mc,{analysisId:t.id},t.id)}))}),r&&Object(pc.jsx)("button",{onClick:function(){return n(r)},children:"Create"}),Object(pc.jsx)(Ic,{})]})},Tc=(n(513),n(81)),Lc=n(206),Hc=Wt.a.mark(zc);function zc(t,e){return Wt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,t;case 3:return n.next=5,e;case 5:n.next=0;break;case 7:case"end":return n.stop()}}),Hc)}var Wc=function t(e){return function(n){var r=n.next();return r.done||0===e?[]:[r.value].concat(Object(b.a)(t(e-1)(n)))}};var Uc,$c,Kc,Jc,Gc,Qc=function(t,e){return function(n){return Object(u.pipe)(zc(t,e),Wc(n.length),c.n.zip(n),c.w.traverseArray((function(t){var e=Object(i.a)(t,2),n=e[0],r=e[1];return Object(u.pipe)(fi(r.constraint),c.w.chainFirst((function(){return c.w.modify(ai.set(r.bid))})),ji,c.w.flap(n),c.w.apFirst(c.w.modify(ni)),c.w.apFirst(c.w.modify(ci.modify(c.n.prepend(r.bid)))))})),c.w.map(c.n.foldMap(c.c.MonoidAll)(u.identity)),c.w.evaluate(ri))}},Vc={selectedBlockKey:c.j.none},Xc=function(t){return function(e){var n=Object(i.a)(e,2),r=n[0],a=n[1];t.opener=Object(u.pipe)(r,c.d.right,kt.get,Nt.a),t.responder=Object(u.pipe)(a,c.d.right,kt.get,Nt.a)}},Zc=Object(Ht.b)("abc",(function(t,e){var n=t.opener,r=t.responder,a=e.rejectWithValue;return Object(u.pipe)(function(t,e){return Object(u.pipe)(H(),c.n.difference(q)(Object(u.pipe)(t,c.r.toReadonlyArray(D))),c.n.difference(q)(Object(u.pipe)(e,c.r.toReadonlyArray(D))),c.n.chunksOf(13),c.n.map(c.r.fromReadonlyArray(q)),(function(n){var r=Object(i.a)(n,2),a=r[0],c=r[1];return{dealer:"N",deal:{N:t,S:e,E:a,W:c}}}))}(xt.reverseGet(n),xt.reverseGet(r)).deal,Bt.get,c.n.of,je,Dt.b.map(Object(u.flow)(c.q.toReadonlyArray,c.n.map(c.s.snd),(function(t){return t[0]}))),Dt.a.map(c.d.getOrElseW(a)),Dt.a.toTask)()})),Yc=function(t){return function(e){return Object(Lc.tailRec)(t,(function(t){if(Object(u.pipe)(t,c.j.fold(u.constFalse,(function(t){return 0===t}))))return c.d.right(c.j.none);var n,r=(n=H(),Object(u.pipe)(z,c.p.zip(c.p.chunksOf(13)(n)),c.p.groupBy(c.s.fst),c.q.map(Object(u.flow)(c.p.head,c.s.snd,c.r.fromReadonlyArray(q))),(function(t){return t}))),i=[r.N,r.S];return e(i)?c.d.right(c.j.some(i)):c.d.left(Object(u.pipe)(t,c.j.map((function(t){return t-1}))))}))}},tu=function(t){return function(e){return Yc(c.j.some(1e4))((function(n){return Object(u.pipe)(e,c.n.partition(Qc.apply(void 0,Object(b.a)(n))),c.v.right,(function(e){return t(e.length)}))}))}},eu=Object(Ht.d)({name:"selection",initialState:Vc,reducers:{setSelectedBlockKey:function(t,e){t.selectedBlockKey=e.payload},setHand:{reducer:function(t,e){t[e.meta]=Object(u.pipe)(e.payload,qa,kt.get,Nt.a)},prepare:function(t,e){return{payload:t,meta:e}}},genOnce:function(t){Object(u.pipe)(Yc(c.j.none)(u.constTrue),c.j.map(Xc(t)))},getHandsMatchingPath:function(t,e){Object(u.pipe)(Yc(c.j.some(1e4))((function(t){return Qc.apply(void 0,Object(b.a)(t))(e.payload)})),c.j.map(Xc(t)))},genHandsNotMatchingAnyOf:{reducer:function(t,e){Object(u.pipe)(Yc(c.j.some(1e4))((function(t){return xr(t[0])>=e.meta&&Object(u.pipe)(e.payload,c.n.every(c.m.not(Qc.apply(void 0,Object(b.a)(t)))))})),c.j.map(Xc(t)))},prepare:function(t,e){return{payload:t,meta:e}}},genHandsMatchingExactlyOneOf:function(t,e){Object(u.pipe)(tu((function(t){return 1===t}))(e.payload),c.j.map(Xc(t)))},genHandsMatchingMoreThanOneOf:function(t,e){Object(u.pipe)(tu((function(t){return t>1}))(e.payload),c.j.map(Xc(t)))}},extraReducers:function(t){return t.addCase(Zc.fulfilled,(function(t,e){t.result=Object(u.pipe)(e.payload,Nt.a)}))}}),nu=eu.actions,ru=nu.setSelectedBlockKey,iu=nu.setHand,au=nu.genOnce,cu=nu.getHandsMatchingPath,uu=nu.genHandsNotMatchingAnyOf,ou=nu.genHandsMatchingExactlyOneOf,su=nu.genHandsMatchingMoreThanOneOf,lu=eu.reducer,pu=Object(It.a)((function(t){return Object(u.pipe)(t.selectedBlockKey,c.j.toNullable)})),fu=Object(It.a)((function(t){var e=t.state,n=t.type;return Object(u.pipe)(e[n],c.j.fromNullable,c.j.chain(Object(u.flow)(kt.reverseGet,c.j.fromEither)))})),du=l.a.div(Uc||(Uc=Object(a.a)(["\n  font-family: Cascadia Code, Consolas, monospace;\n  font-size: 1em;\n"]))),ju=function(t){return{key:t.getKey(),text:t.getText(),depth:t.getDepth()}},hu=c.h.concatAll(c.g.getMonoid())([Object(u.pipe)(c.x.Eq,c.g.contramap((function(t){return t.getKey()}))),Object(u.pipe)(c.x.Eq,c.g.contramap((function(t){return t.getText()})))]),bu=function(t){return Object(u.pipe)(t.getCurrentContent().getBlocksAsArray(),c.r.fromReadonlyArray(hu))},mu=function(){var t=Object(o.useState)((function(){return Tc.EditorState.createEmpty()})),e=Object(i.a)(t,2),n=e[0],r=e[1],a=Object(o.useState)((function(){return bu(n)})),s=Object(i.a)(a,2),l=s[0],p=s[1],j=f(),h=d((function(t){return pu(t.selection)})),b=Object(o.useCallback)((function(t){r(t),setTimeout((function(){return localStorage.setItem("editor",JSON.stringify(Object(Tc.convertToRaw)(t.getCurrentContent())))}),0);var e=bu(t),n=c.r.intersection(hu)(l,e),i=c.r.difference(hu)(l,n),a=c.r.difference(hu)(e,n);p(e),c.r.isEmpty(c.h.concatAll(c.r.getUnionMonoid(hu))([i,a]))||(j(Object(u.pipe)(e,c.r.toReadonlyArray(c.l.trivial),c.n.map(ju),Ha)),Object(u.pipe)(i,c.r.toReadonlyArray(c.l.trivial),c.p.fromReadonlyArray,c.j.map(Object(u.flow)(c.p.map((function(t){return t.getKey()})),(function(t){return j(za(t))})))),Object(u.pipe)(a,c.r.toReadonlyArray(c.l.trivial),c.p.fromReadonlyArray,c.j.map(Object(u.flow)(c.p.map(ju),(function(t){return j(Wa(t))})))));var o=t.getSelection().getFocusKey();o!==h&&j(ru(c.j.some(o)))}),[l,j,h]);return Object(o.useEffect)((function(){var t=localStorage.getItem("editor");r(t?function(){return Tc.EditorState.createWithContent(Object(Tc.convertFromRaw)(JSON.parse(t)))}:function(){return Tc.RichUtils.toggleBlockType(n,"unordered-list-item")})}),[]),Object(pc.jsx)(du,{children:Object(pc.jsx)(Tc.Editor,{editorState:n,onChange:b,keyBindingFn:function(t){if(9===t.keyCode){var e=Tc.RichUtils.onTab(t,n,10);return e!==n&&b(e),null}return Object(Tc.getDefaultKeyBinding)(t)}})})},Ou=n(169),vu=l.a.div($c||($c=Object(a.a)(["\n  clear: both;\n  display: inline-grid;\n  grid-template-columns: auto auto;\n  width: auto;\n"]))),yu=function(t){var e=t.error;return Object(pc.jsxs)("span",{children:[e.syntax.type,": ",e.reason]})},gu=function(t){var e=t.error;if("BidsOutOfOrder"===e.type)return Object(pc.jsxs)("span",{children:["Bids ",Object(pc.jsx)(Cc,{bid:e.left.bid})," and ",Object(pc.jsx)(Cc,{bid:e.right.bid})," out of order"]})},Su=function(t){t.bid;var e=t.errors;return Object(pc.jsxs)("div",{children:[e.map((function(t,e){switch(t.type){case"Syntax":return Object(pc.jsx)(yu,{error:t.error},e);case"Validation":return Object(pc.jsx)(gu,{error:t.error},e);default:return m(t)}})),0===e.length&&"none"]})},xu=function(t){var e=t.errors;return Object(pc.jsx)(vu,{children:e.filter((function(t){return t.errors.length>0})).map((function(t){var e=t.bid,n=t.path,r=t.errors;return Object(pc.jsxs)(o.Fragment,{children:[Object(pc.jsx)(Ac,{path:n}),Object(pc.jsx)(Su,{bid:e,errors:r})]},qt.get(n))}))})},ku=function(t){var e=t.forest,n=Object(o.useMemo)((function(){return Object(u.pipe)(e,c.n.chain(c.B.foldMap(c.n.getMonoid())(c.n.of)))}),[e]);return Object(pc.jsx)(xu,{errors:n})},wu=function(){var t=d((function(t){return Object(u.pipe)(nc({state:t.system,options:t.settings}),c.j.isSome)})),e=d((function(t){return uc({state:t.system,options:t.settings})}));return Object(pc.jsxs)("section",{children:[Object(pc.jsx)("h3",{children:"Errors"}),t?"None":Object(pc.jsxs)(pc.Fragment,{children:[c.A.isLeft(e)&&Object(pc.jsxs)("div",{children:[Object(pc.jsx)("h4",{children:"Parse Errors"}),Object(pc.jsx)("ul",{children:e.left.map((function(t,e){return Object(pc.jsx)("li",{children:Object(pc.jsx)("pre",{children:Object(Ou.draw)(t)})},e)}))})]}),c.A.isRight(e)&&Object(pc.jsxs)("div",{children:[Object(pc.jsx)("h4",{children:"Semantic Errors"}),Object(pc.jsx)(ku,{forest:e.right})]})]})]})},Cu=n(318),Au=function(t){var e=t.date,n=e?"number"===typeof e?e:"Some"===e._tag?e.value:null:null;return Object(pc.jsx)(pc.Fragment,{children:n&&Object(pc.jsx)(Cu.a,{date:new Date(n)})})},_u=l.a.ul(Kc||(Kc=Object(a.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  list-style-type: none;\n  padding: 0px;\n  margin: 0px;\n"]))),Bu=l.a.li(Jc||(Jc=Object(a.a)(["\n  padding: 0px;\n  margin: 5px;\n"]))),Eu=function(t){var e=t.progress,n=t.unitsInitial,r=t.start,i=Object(o.useMemo)((function(){return Object(u.pipe)(e,function(t){return function(e){return Object(u.pipe)(e.speed,c.j.map((function(n){return n*(t-e.unitsDone)})))}}(n),c.j.map((function(t){return lt()+t})),c.j.chain(Object(u.flow)(st.decode,c.j.fromEither)),c.j.toNullable)}),[e,n]);return Object(pc.jsxs)("p",{children:["Started: ",Object(pc.jsx)(Au,{date:r}),Object(pc.jsx)("br",{}),"Last Updated: ",Object(pc.jsx)(Au,{date:e.updateDate})," ",Object(pc.jsx)("br",{}),"Progress: ",n-e.unitsDone," units remaining (",Math.floor(100*e.unitsDone/n),"%) ",Object(pc.jsx)("br",{}),"Est. Completion: ",Object(pc.jsx)(Au,{date:i})]})},Pu=function(t){var e=t.job,n=Object(u.pipe)(e,pt,c.j.toNullable),r=Object(u.pipe)(e,j("startDate"),c.j.toNullable),i=f(),a=Object(o.useCallback)((function(){return e&&i(ge(e.id))}),[i,e]),s=Object(o.useCallback)((function(){return e&&i(ve({jobId:e.id,type:e.type.type}))}),[i,e]);return Object(pc.jsx)(pc.Fragment,{children:e&&Object(pc.jsxs)(Bu,{children:[Object(pc.jsx)("h5",{children:e.type.type}),!n&&Object(pc.jsxs)("p",{children:["Estimated Units: ",e.unitsInitial," ",Object(pc.jsx)("br",{}),Object(pc.jsx)("button",{onClick:s,children:"Start"}),Object(pc.jsx)("button",{onClick:a,children:"Remove"})]}),n&&r&&Object(pc.jsx)(Eu,{progress:n,unitsInitial:e.unitsInitial,start:r})]})})},Ru=function(){var t=d((function(t){return t.generator.jobs}));return Object(pc.jsxs)("section",{children:[Object(pc.jsx)("h3",{children:"Jobs"}),Object(pc.jsx)(_u,{children:t.map((function(t){return Object(pc.jsx)(Pu,{job:t},t.id)}))})]})},Mu=n(208),qu=n.n(Mu),Du=function(){var t=d((function(t){return t.selection.selectedBlockKey})),e=d((function(e){return Object(u.pipe)(t,c.j.chain((function(t){return Qa({state:e.system,key:t})})),c.j.toNullable)})),n=d((function(e){return Object(u.pipe)(t,c.j.chain((function(t){return ac({state:e.system,key:t})})),c.j.toNullable)})),r=d((function(e){return Object(u.pipe)(t,c.j.fold((function(){return c.n.empty}),(function(t){return oc({state:e.system,key:t})})))}));return Object(pc.jsx)("section",{children:t&&Object(pc.jsxs)("div",{children:[Object(pc.jsx)("h3",{children:"Selection"}),r&&Object(pc.jsxs)("div",{children:[Object(pc.jsx)("h4",{children:"Errors"}),Object(pc.jsx)(xu,{errors:r})]}),e&&Object(pc.jsxs)("div",{children:[Object(pc.jsx)("h4",{children:"Syntax"}),Object(pc.jsx)(qu.a,{data:e})]}),n&&Object(pc.jsxs)("div",{children:[Object(pc.jsx)("h4",{children:"Constraint"}),Object(pc.jsx)(qu.a,{data:n})]})]})})},Nu=Object(Ht.d)({name:"settings",initialState:{implicitPass:!1,generateCount:1e4},reducers:{setInitial:function(t,e){Object(u.pipe)(Object.keys(e.payload),c.n.map((function(n){return t[n]=e.payload[n]})))},setProperty:{reducer:function(t,e){t[e.meta]=e.payload},prepare:function(t,e){return{payload:e,meta:t}}}}}),Iu=Nu.actions,Fu=Iu.setProperty,Tu=Iu.setInitial,Lu=Nu.reducer,Hu=function(t){var e=t.label,n=t.prop,r=t.parse,i=t.onChanged,a=t.children,c=d((function(t){return t.settings[n]})),s=f(),l=Object(o.useCallback)((function(t){s(Fu(n,t)),i&&i(t)}),[s,i,n]);return Object(pc.jsxs)("p",{children:[Object(pc.jsx)("span",{children:null!==e&&void 0!==e?e:n}),Object(pc.jsx)("span",{children:a?a({value:c,onChange:Object(u.flow)(r,l,u.constVoid)}):Object(pc.jsx)("input",{type:"text",value:c.toString(),onChange:function(t){return Object(u.pipe)(t.target.value,r,l)},style:{width:"100px"}})})]})},zu="settings",Wu=function(){var t=d((function(t){return t.settings})),e=f();Object(o.useEffect)((function(){var t=localStorage.getItem(zu);if(null!==t){var n=JSON.parse(t);e(Tu(n))}}),[e]);var n=Object(o.useCallback)((function(e,n){var r=Object(h.a)(Object(h.a)({},t),{},Object(at.a)({},e,n));localStorage.setItem(zu,JSON.stringify(r))}),[t]),r=Object(o.useCallback)((function(){return Object(u.pipe)(se,c.z.map((function(){return window.location.reload()})))()}),[]);return Object(pc.jsxs)(pc.Fragment,{children:[Object(pc.jsx)("section",{children:Object(pc.jsx)("button",{onClick:r,children:"Reset Analysis DB"})}),Object(pc.jsxs)("section",{children:[Object(pc.jsx)(Hu,{label:"Implicit Pass",prop:"implicitPass",parse:function(t){return"true"===t},onChanged:function(t){return n("implicitPass",t)},children:function(t){var e=t.value,n=t.onChange;return Object(pc.jsx)("input",{type:"checkbox",checked:e,onChange:function(t){return n(t.target.checked.toString())}})}}),Object(pc.jsx)(Hu,{label:"Generate Count",prop:"generateCount",parse:parseInt,onChanged:function(t){return n("generateCount",t)}})]})]})},Uu={system:sc,selection:lu,generator:we,settings:Lu,profile:cn},$u=n(619).a.apply(void 0,Object(b.a)(Be).concat(Object(b.a)(un),Object(b.a)(lc))),Ku=Object(It.a)((function(t){return Object(u.pipe)(c.j.Do,c.j.apS("opener",fu({state:t.selection,type:"opener"})),c.j.apS("responder",fu({state:t.selection,type:"responder"})),c.j.apS("paths",Object(u.pipe)(rc({state:t.system,options:t.settings}))),c.j.map((function(t){return Object(u.pipe)(t.paths,c.n.map((function(e){return{path:e,result:Qc(t.opener,t.responder)(e)}})))})),c.j.toNullable)})),Ju=function(t){var e=t.value,n=t.children,r=t.onNone;return Object(u.pipe)(e,c.j.fold((function(){return r?r():Object(pc.jsx)(pc.Fragment,{})}),n))},Gu=function(){var t=f();return Object(pc.jsx)("button",{type:"button",onClick:function(){return t(au())},children:"Random"})},Qu=function(t){var e=t.bidPaths,n=f(),r=Object(o.useState)(11),a=Object(i.a)(r,2),c=a[0],u=a[1];return Object(pc.jsx)(pc.Fragment,{children:e&&Object(pc.jsxs)("span",{children:[Object(pc.jsx)("button",{type:"button",onClick:function(){return n(uu(e,c))},children:"Zero"}),"Min HCP",Object(pc.jsx)("input",{type:"number",style:{width:50},value:c,onChange:function(t){return u(parseInt(t.target.value))}})]})})},Vu=function(t){var e=t.bidPaths,n=f();return Object(pc.jsx)(pc.Fragment,{children:e&&Object(pc.jsx)("span",{children:Object(pc.jsx)("button",{type:"button",onClick:function(){return n(ou(e))},children:"One"})})})},Xu=function(t){var e=t.bidPaths,n=f();return Object(pc.jsx)(pc.Fragment,{children:e&&Object(pc.jsx)("span",{children:Object(pc.jsx)("button",{type:"button",onClick:function(){return n(su(e))},children:"Many"})})})},Zu=function(){var t=d((function(t){return t.selection.selectedBlockKey})),e=d((function(e){return Object(u.pipe)(t,c.j.chain((function(t){return ic({state:e.system,key:t})})),c.j.toNullable)})),n=f();return Object(pc.jsx)(pc.Fragment,{children:e&&Object(pc.jsx)("button",{type:"button",onClick:function(){return n(cu(e))},children:"Selected"})})},Yu=function(){var t=d((function(t){return Object(u.pipe)(rc({state:t.system,options:t.settings}),c.j.toNullable)}));return Object(pc.jsxs)("section",{children:[Object(pc.jsx)("h4",{children:"Generate Hands"}),Object(pc.jsx)(Gu,{}),Object(pc.jsx)(Zu,{}),Object(pc.jsx)(Qu,{bidPaths:t}),Object(pc.jsx)(Vu,{bidPaths:t}),Object(pc.jsx)(Xu,{bidPaths:t})]})},to=function(t){var e=t.type,n=f(),r=Object(o.useState)(""),a=Object(i.a)(r,2),s=a[0],l=a[1],p="hand.".concat(e),j=d((function(t){return Object(u.pipe)(fu({state:t.selection,type:e}),c.j.map(Ba.encode),c.j.toNullable)})),h=Object(o.useCallback)((function(t){l(t),n(iu(t,e))}),[n,e]);return Object(o.useEffect)((function(){var t=localStorage.getItem(p);t&&h(t)}),[h,p,e]),Object(pc.jsx)("input",{type:"text",placeholder:"AKQJ.T987.654.32",value:null!==j&&void 0!==j?j:s,onChange:function(t){return h(t.target.value)},onBlur:function(){return localStorage.setItem(p,s)}})},eo=l.a.th(Gc||(Gc=Object(a.a)(["\n  width: 15em;\n"]))),no=function(){var t=f(),e=[d((function(t){return fu({state:t.selection,type:"opener"})})),d((function(t){return fu({state:t.selection,type:"responder"})}))],n=e[0],r=e[1],i=Object(o.useCallback)((function(){return Object(u.pipe)(c.j.Do,c.j.apS("opener",n),c.j.apS("responder",r),c.j.map(Object(u.flow)(c.q.map(xt.get),Zc,t)),u.constVoid)}),[t,n,r]),a=d((function(t){return t.selection.result}));return Object(pc.jsxs)(pc.Fragment,{children:[Object(pc.jsxs)("table",{children:[Object(pc.jsx)("thead",{children:Object(pc.jsxs)("tr",{children:[Object(pc.jsx)(eo,{children:"Opener"}),Object(pc.jsx)(eo,{children:"Responder"})]})}),Object(pc.jsxs)("tbody",{children:[Object(pc.jsxs)("tr",{children:[Object(pc.jsx)("td",{children:Object(pc.jsx)(to,{type:"opener"})}),Object(pc.jsx)("td",{children:Object(pc.jsx)(to,{type:"responder"})})]}),Object(pc.jsxs)("tr",{children:[Object(pc.jsx)("td",{children:Object(pc.jsx)(Ju,{value:n,children:function(t){return Object(pc.jsx)(Oc,{hand:t})}})}),Object(pc.jsx)("td",{children:Object(pc.jsx)(Ju,{value:r,children:function(t){return Object(pc.jsx)(Oc,{hand:t})}})})]})]})]}),Object(pc.jsx)(Yu,{}),Object(pc.jsxs)("p",{children:[Object(pc.jsx)("button",{type:"button",onClick:i,children:"Solution"}),a&&Object(pc.jsx)(gc,{result:a})]})]})},ro=function(){var t=d(Ku);return Object(pc.jsxs)("section",{children:[Object(pc.jsx)("h3",{children:"Test Hands"}),Object(pc.jsx)(no,{}),null!==t&&Object(pc.jsxs)("div",{children:[Object(pc.jsx)("h4",{children:"Results"}),Object(pc.jsx)("ul",{children:t.map((function(t,e){return Object(pc.jsxs)("li",{children:[Object(pc.jsx)(Ac,{path:t.path.map((function(t){return t.bid}))}),": \xa0",Object(pc.jsx)("span",{children:t.result.toString()})]},e)}))})]})]})},io=function(){return Object(pc.jsxs)("div",{className:"App",children:[Object(pc.jsxs)("div",{style:{display:"inline-block",width:"50%"},children:[Object(pc.jsx)("div",{style:{float:"left"},children:Object(pc.jsx)(mu,{})}),Object(pc.jsx)("div",{style:{float:"right",width:"300px"},children:Object(pc.jsx)(Wu,{})}),Object(pc.jsxs)("div",{style:{clear:"both"},children:[Object(pc.jsx)(wu,{}),Object(pc.jsx)(Ru,{}),Object(pc.jsx)(Fc,{})]})]}),Object(pc.jsxs)("div",{style:{display:"inline-block",width:"50%",float:"right"},children:[Object(pc.jsxs)("div",{style:{display:"inline-block",float:"right"},children:[Object(pc.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/kdblocher/bridge#documentation",children:"Documentation"}),"\xa0|\xa0",Object(pc.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/kdblocher/bridge/discussions",children:"Share ideas"}),"\xa0|\xa0",Object(pc.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/kdblocher/bridge/issues/new",children:"Report issue"})]}),Object(pc.jsx)(ro,{}),Object(pc.jsx)(Du,{})]})]})},ao=n(120),co=n.n(ao),uo=n(620),oo=Object(uo.a)(),so=Object(Ht.a)({reducer:Uu,middleware:function(t){return[].concat(Object(b.a)(t()),[oo])}});oo.run($u),co.a.render(Object(pc.jsx)(s.a.StrictMode,{children:Object(pc.jsx)(p.a,{store:so,children:Object(pc.jsx)(io,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[612,1,2]]]);
//# sourceMappingURL=main.c9fde47c.chunk.js.map