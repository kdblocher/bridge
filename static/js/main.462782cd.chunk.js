(this.webpackJsonpbridge=this.webpackJsonpbridge||[]).push([[0],{303:function(t,e,n){var r,i=n(296).wrap,c=n(588);t.exports=function t(){return this instanceof t?i(c()):r||(r=i(c()))}},304:function(t,e,n){var r,i=n(296).wrap,c=n(589);t.exports=function t(){return this instanceof t?i(c()):r||(r=i(c()))}},391:function(t,e,n){},497:function(t,e){},499:function(t,e){},509:function(t,e){},511:function(t,e){},537:function(t,e){},538:function(t,e){},543:function(t,e){},545:function(t,e){},552:function(t,e){},571:function(t,e){},588:function(t,e,n){t.exports=function(){return new Worker(n.p+"9d9c6783b7260823ca5e.worker.js")}},589:function(t,e,n){t.exports=function(){return new Worker(n.p+"044157630f2fba7c9ee6.worker.js")}},597:function(t,e,n){"use strict";n.r(e);n(391),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r,i,c=n(12),a=(n(392),n(78)),u=n(0),o=n(2),s=n(14),l=n.n(s),p=n(122),f=function(){return Object(p.b)()},h=p.c,d=n(9),m=n(36),b=n(200),j=n(34),O=n(43),v=n(62),y=n(10),g=function(t){throw new Error("shouldn't get here with ".concat(JSON.stringify(t)))},S=function(t){return t},k=function(t){return Object(o.pipe)(u.h.Ord,u.k.contramap((function(e){return t.indexOf(e)})))},x=Object(o.flow)(k,u.k.reverse),w=n(57),C=n(201),_=["C","D","H","S"],A=u.f.eqStrict,R=x(_),B=(k(_),["2","3","4","5","6","7","8","9","T","J","Q","K","A"]),P=w.b(w.c,(function(t){return t>=2&&t<=14}),"Rank"),E=new w.a("Rank",P.is,P.validate,(function(t){return B[t-2]})),F=u.f.eqStrict,N=u.h.Ord,M=Object(o.pipe)(N,u.k.reverse),q=Object(o.pipe)(B,u.m.mapWithIndex((function(t,e){return Object(o.pipe)(t+2,E.decode,(function(t){return t.right}))}))),D=Object(o.pipe)(q,u.m.takeRight(5)),T=function(t){return Object(o.pipe)(B,u.m.findIndex((function(e){return u.w.Eq.equals(t,e)})),u.i.chain((function(t){return Object(o.pipe)(q,u.m.lookup(t))})))},L=u.f.struct({suit:A,rank:F}),H=u.k.getMonoid().concat(Object(o.pipe)(R,u.k.contramap((function(t){return t.suit}))),Object(o.pipe)(M,u.k.contramap((function(t){return t.rank})))),I=Object(o.pipe)(52,u.o.makeBy((function(t){return{suit:_[Math.floor(t/13)],rank:E.decode(t%13+2).right}}))),$=function(){return u.k.contramap((function(t){var e=Object(c.a)(t,2),n=e[0];e[1];return n}))(R)},W={S:[],H:[],D:[],C:[]},G=function(t){return Object(o.pipe)(t,u.q.toReadonlyArray(H),u.o.fromReadonlyArray,u.i.fold((function(){return W}),Object(o.flow)(u.o.groupBy((function(t){return t.suit})),u.p.map(u.o.map((function(t){return t.rank}))),u.p.union(u.m.getUnionMonoid(F))(W))))},K=function(){return Object(C.b)(C.a,Object(d.a)(I))},U=["N","E","S","W"],V=u.w.Eq,Q=(k(U),u.w.Eq,k(["NorthSouth","EastWest"]),u.q.getEq(L)),z=u.p.getEq(Q),J=[].concat(Object(d.a)(_),["N"]),Z=u.f.eqStrict,X=k(J),Y=["C","D"],tt=(u.f.struct({dealer:V,deal:z}),function(t){switch(t%16+1){case 1:case 8:case 11:case 14:return"Neither";case 2:case 5:case 12:case 15:return"NorthSouth";case 3:case 6:case 9:case 16:return"EastWest";case 4:case 7:case 10:case 13:return"Both";default:throw Error("Not possible")}}),et=["Pass","Double","Redouble"],nt=u.w.Eq,rt=function(t){return"string"===typeof t&&Object(o.pipe)(et,u.m.elem(u.w.Eq)(t))},it=u.f.struct({level:u.h.Eq,strain:u.w.Eq}),ct=u.k.getMonoid().concat(Object(o.pipe)(u.h.Ord,u.k.contramap((function(t){return t.level}))),Object(o.pipe)(X,u.k.contramap((function(t){return t.strain})))),at=Object(o.pipe)(u.a.sequenceS(u.m.Apply)({level:u.m.makeBy(7,(function(t){return t+1})),strain:J}),u.m.sort(ct)),ut=function(t){return!rt(t)},ot=u.f.fromEquals((function(t,e){return rt(t)&&rt(e)&&nt.equals(t,e)||!rt(t)&&!rt(e)&&it.equals(t,e)})),st=(u.f.struct({level:u.h.Eq,strain:u.w.Eq,modifier:u.w.Eq}),u.o.getEq(ot),Object(o.flow)(u.q.toReadonlyArray(H),u.m.foldMap(u.h.MonoidSum)((function(t){return Math.max(0,t.rank-10)})))),lt=[0,0,0,0],pt=function(t){return Object(o.pipe)(t,u.m.sort(u.k.reverse(u.h.Ord)))},ft=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object(o.pipe)(e,pt)},ht=u.f.contramap(pt)(u.m.getEq(u.h.Eq)),dt={S:0,H:0,D:0,C:0},mt=function(t){return Object(o.pipe)(t,u.q.toReadonlyArray(H),u.o.fromReadonlyArray,u.i.fold((function(){return u.p.empty}),Object(o.flow)(u.o.groupBy((function(t){return t.suit})),u.p.mapWithIndex((function(t,e){return e})))))},bt=function(t){return Object(o.pipe)(t,mt,u.p.map((function(t){return t.length})),u.p.union(u.t.first())(dt),(function(t){return t}))},jt=function(t){return Object(o.pipe)(t,bt,u.p.toReadonlyArray,u.m.map(u.r.snd),(function(t){return u.m.mapWithIndex((function(e,n){return Object(o.pipe)(t,u.m.lookup(e),u.i.getOrElse((function(){return 0})))}))(lt)}))},Ot=n(5),vt=n.n(Ot),yt=n(302),gt=n(124),St=function(t){return function(e){return u.m.findFirstMap(u.z.fold((function(n,r){return t.equals(n,e)?u.i.some([e]):Object(o.pipe)(r,u.m.findFirstMap(u.i.map(u.m.prepend(n))))})))}},kt=function(t){return Object(o.pipe)(t,u.m.chain(u.z.reduce([],(function(t,e){return Object(o.pipe)(t,u.m.append(e))}))))},xt=function(t){return Object(o.pipe)(t,u.m.chain(u.z.fold((function(t,e){return Object(o.pipe)(e,u.o.fromReadonlyArray,u.i.fold((function(){return[[t]]}),u.o.foldMap(u.o.getSemigroup())(u.o.map(u.m.prepend(t)))))}))),u.m.filterMap(u.o.fromReadonlyArray))},wt=function t(e){return function(n){return function(r){return u.z.make(Object(y.a)(Object(y.a)({},r.value),{},{siblings:n}),Object(o.pipe)(r.forest,u.m.map((function(n){return Object(o.pipe)(r.forest,u.m.map((function(t){return t.value})),u.m.difference(e)([n.value]),t(e))(n)})),u.m.toArray))}}},Ct=(r=u.f.contramap((function(t){return t.bid}))(ot),function(t){return Object(o.pipe)(t,u.m.map((function(e){return Object(o.pipe)(t,u.m.map((function(t){return t.value})),u.m.difference(r)([e.value]),wt(r))(e)})))}),_t=u.m.map(u.z.fold((function(t,e){return 0===e.length||Object(o.pipe)(e,u.m.exists((function(t){return"Pass"===t.value.bid})))?u.z.make(t,e):u.z.make(t,Object(o.pipe)(e,u.m.append(u.z.make({bid:"Pass",constraint:{type:"Otherwise"}})),u.m.toArray))}))),At=Object(o.constant)({type:"Constant",value:!0}),Rt=Object(o.constant)({type:"Constant",value:!1}),Bt=["Conjunction","Disjunction","Negation","Otherwise","OtherBid","ForceOneRound","ForceGame","ForceSlam","Relay","SuitPrimary","SuitSecondary","LabelDef","LabelRef"],Pt=function(t){return u.m.elem(u.w.Eq)(t.type)(Bt)},Et=function(t){return Pt(t)?u.d.left(t):u.d.right(t)},Ft=u.l.getMonoidAny(),Nt=u.l.getMonoidAll(),Mt=o.constFalse,qt=(o.constTrue,Object(o.pipe)(Ft,u.m.foldMap)),Dt=Object(o.pipe)(Nt,u.m.foldMap),Tt=Object(o.flow)((function(t){return u.k.between(u.h.Ord)(t.min,t.max)}),u.l.contramap(st)),Lt=function(t){var e="Major"===t.suit?["S","H"]:"Minor"===t.suit?["D","C"]:[t.suit];return Object(o.flow)(bt,(function(n){return Object(o.pipe)(e,u.m.exists((function(e){return u.k.between(u.h.Ord)(t.min,t.max)(n[e])})))}))},Ht=function(t){return function(e,n){return Object(o.flow)(bt,(function(r){return function(t){switch(t){case"<":return u.k.lt(u.h.Ord);case"<=":return u.k.leq(u.h.Ord);case"=":return u.h.Eq.equals;case">=":return u.k.geq(u.h.Ord);case">":return u.k.gt(u.h.Ord);default:return g(t)}}(t)(r[e],r[n])}))}},It=u.q.fromReadonlyArray(F),$t=function(t){return Object(o.flow)(jt,(function(e){return ht.equals(t,e)}))},Wt=Object(o.pipe)([ft(4,3,3,3),ft(5,3,3,2),ft(4,4,3,2),ft(5,5,3,2)],qt($t)),Gt=Object(o.pipe)([ft(5,4,2,2),ft(6,3,2,2)],qt($t)),Kt={bid:{},path:[],force:u.i.none,primarySuit:u.i.none,secondarySuit:u.i.none,peers:[],labels:u.n.empty},Ut=gt.a.fromProp(),Vt=Ut("bid"),Qt=Ut("path"),zt=Ut("force"),Jt=Ut("primarySuit"),Zt=Ut("secondarySuit"),Xt=Ut("peers"),Yt=(Object(o.pipe)(Xt,gt.d.composeTraversal(Object(gt.c)(u.m.Traversable)())),Ut("labels")),te=gt.b.fromOptionProp(),ee=te("force"),ne=(te("primarySuit"),te("secondarySuit"),function(t){return function(e){return Object(o.flow)(u.v.traverseArray(e),u.v.map(t))}}),re=ne(qt(o.identity)),ie=ne(Dt(o.identity)),ce=function(t){return function(e){return Object(o.pipe)(u.v.gets(Object(o.flow)(Yt.get,u.n.lookup(u.w.Eq)(e.name))),u.v.chain(u.i.fold((function(){return oe(e.constraint)}),u.v.chain((function(t){return oe({type:"Conjunction",constraints:[t,e.constraint]})})))),u.v.chain((function(n){return Object(o.pipe)(u.v.modify(Yt.modify(u.n.upsertAt(u.w.Eq)(e.name,oe(n)))),u.v.chain((function(){return t(oe(n))})))})))}},ae=function(t){return function(e){return Object(o.pipe)(u.v.gets(Object(o.flow)(Yt.get,u.n.lookup(u.w.Eq)(e.name))),u.j.alt(u.v.Monad)((function(){return Object(o.pipe)(u.v.get(),u.v.map((function(n){return Object(o.pipe)(u.v.gets(Xt.get),S,u.v.chain(u.m.traverse(u.v.Applicative)((function(e){return Object(o.pipe)(e.constraint,oe,t)}))),u.v.chain((function(){return u.v.gets(Object(o.flow)(Yt.get,u.n.lookup(u.w.Eq)(e.name)))})),u.v.evaluate(n))})))})),u.v.chain(u.i.sequence(u.v.Applicative)),u.v.chain(u.i.traverse(u.v.Applicative)((function(e){return t(oe(e))}))))}},ue=function(t){switch(t.type){case"Constant":return Object(o.constant)(t.value);case"PointRange":return Tt(t);case"SuitRange":return Lt(t);case"SuitComparison":return Ht(t.op)(t.left,t.right);case"SuitHonors":return r=t,Object(o.flow)(mt,u.p.lookup(r.suit),u.i.fold(o.constFalse,(function(t){var e=Object(o.pipe)(t,u.m.map((function(t){return t.rank})),It,u.q.intersection(F)(It(D))),n=Object(o.pipe)(r.honors,It);return Object(o.pipe)(n,u.q.isSubset(F)(e))})));case"SuitTop":return n=t,Object(o.flow)(mt,u.p.lookup(n.suit),u.i.fold(o.constFalse,Object(o.flow)(u.m.map((function(t){return t.rank})),u.m.filter((function(t){return N.compare(t,n.minRank)>=0})),(function(t){return t.length>=n.count}))));case"Balanced":return Wt;case"SemiBalanced":return u.l.or(Wt)(Gt);case"Unbalanced":return u.l.not(u.l.or(Wt)(Gt));case"AnyShape":return $t(t.counts);case"SpecificShape":return e=t.suits,Object(o.flow)(bt,(function(t){return u.s.getEq(yt.eqStrict).equals(t,e)}));default:return g(t)}var e,n,r},oe=function(t){return u.v.of(t)},se=function(t){return u.v.chain((function(e){switch(e.type){case"Conjunction":return Object(o.pipe)(e.constraints,u.o.map(oe),ie(t));case"Disjunction":return Object(o.pipe)(e.constraints,u.o.map(oe),re(t));case"Negation":return Object(o.pipe)(e.constraint,oe,t,u.v.map(u.l.not));case"Otherwise":return Object(o.pipe)(u.v.gets((function(t){return Object(o.pipe)(t,Xt.get,u.m.takeLeftWhile((function(e){return!ot.equals(e.bid,t.bid)})))})),u.v.chain(Object(o.flow)(u.m.map((function(t){return Object(o.pipe)(u.v.modify(Vt.set(t.bid)),u.v.map((function(){return t.constraint})))})),ie(Object(o.flow)(t,u.v.map(u.l.not))))));case"OtherBid":return Object(o.pipe)(u.v.gets(Object(o.flow)(Xt.get,u.m.findFirst((function(t){return ot.equals(t.bid,e.bid)})))),u.v.chain(u.i.fold((function(){return oe(Mt)}),(function(e){return Object(o.pipe)(u.v.gets(Vt.get),u.v.chain((function(n){return ot.equals(n,e.bid)?u.v.of(o.constFalse):t(u.v.of(e.constraint))})))}))));case"ForceOneRound":case"ForceGame":case"ForceSlam":case"Relay":return Object(o.pipe)(u.v.modify(zt.set(u.i.some(e))),u.v.map((function(){return o.constTrue})));case"SuitPrimary":return Object(o.pipe)(u.v.modify(Jt.set(u.i.some(e.suit))),u.v.map((function(){return t=e.suit,Object(o.pipe)(_,u.m.splitAt(_.indexOf(t)),u.r.bimap(Object(o.flow)(u.m.tail,u.i.fold((function(){return[]}),u.m.map((function(e){return Ht("<")(e,t)})))),u.m.map((function(e){return Ht("<=")(e,t)}))),u.m.flatten,u.m.prepend(Lt({type:"SuitRange",suit:t,min:5,max:13})),Dt(o.identity));var t})));case"SuitSecondary":return Object(o.pipe)(u.v.modify(Zt.set(u.i.some(e.suit))),u.v.chain((function(){return u.v.gets((function(t){return t.primarySuit}))})),u.j.map(u.v.Functor)((n=e.suit,function(t){return Object(o.pipe)(u.m.Do,u.m.apS("suit",[n,t]),u.m.apS("otherSuit",Object(o.pipe)(_,u.m.difference(A)([n,t]))),u.m.filter((function(t){var e=t.suit,n=t.otherSuit;return!A.equals(e,n)})),u.m.map((function(t){var e=t.suit,n=t.otherSuit;return Ht(">")(e,n)})),u.m.concat([Lt({type:"SuitRange",suit:n,min:4,max:13}),Ht(">=")(t,n)]),Dt(o.identity))})),u.v.map(u.i.getOrElseW((function(){return Mt}))));case"LabelDef":return Object(o.pipe)(e,ce(t));case"LabelRef":return Object(o.pipe)(e,ae(t),u.v.map(u.i.getOrElse((function(){return Mt}))));default:return g(e)}var n}))},le=function t(e){return Object(o.pipe)(e,u.v.map(Et),u.v.chain(u.d.fold(Object(o.flow)(u.v.of,se(t)),(function(t){return Object(o.pipe)(u.v.of(ue),u.v.ap(u.v.of(t)))}))))};Object(o.flow)((function(t){return Object(o.pipe)(t,u.v.of,le)}),u.v.evaluate(Kt));!function(t){var e=vt.a.mark(n);function n(t,n){return vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t;case 3:return e.next=5,n;case 5:e.next=0;break;case 7:case"end":return e.stop()}}),e)}t.alternate=n;var r=t.unfold=function(t){return function(e){var n=e.next();return n.done||0===t?[]:[n.value].concat(Object(d.a)(r(t-1)(e)))}}}(i||(i={}));var pe,fe,he,de,me,be,je,Oe,ve,ye,ge,Se,ke,xe,we,Ce,_e,Ae,Re,Be,Pe,Ee,Fe,Ne,Me,qe,De,Te,Le,He,Ie,$e,We,Ge,Ke,Ue,Ve,Qe,ze,Je,Ze,Xe,Ye,tn,en,nn,rn,cn,an,un,on,sn,ln,pn,fn,hn=function(t){return Object(o.pipe)(u.v.modify(Xt.set(t.siblings)),u.v.chain((function(){return u.v.modify(Vt.set(t.bid))})),u.v.map((function(){return t.constraint})))},dn=function(t){return u.v.chain((function(e){return Object(o.pipe)(u.v.modify(Qt.modify(u.m.prepend(t.bid))),u.v.map((function(){return e})))}))},mn=function(t,e){return function(n){return Object(o.pipe)(i.alternate(t,e),i.unfold(n.length),u.m.zip(n),u.v.traverseArray((function(t){var e,n=Object(c.a)(t,2),r=n[0],i=n[1];return Object(o.pipe)(hn(i),Object(o.flow)((e=i.bid,function(t){return Object(o.pipe)(t,u.v.bindTo("constraint"),u.v.bind("relay",(function(t){var n=t.constraint;return u.v.gets(Object(o.flow)(zt.get,u.i.fold(o.constFalse,(function(t){return"Constant"===n.type&&!n.value&&"Relay"===t.type&&ot.equals(t.bid,e)}))))})),u.v.map((function(t){return t.relay?At():t.constraint})))}),le),u.v.ap(u.v.of(r)),dn(i))})),u.v.map(u.m.foldMap(u.c.MonoidAll)(o.identity)),u.v.evaluate(Kt))}},bn=u.k.fromCompare((function(t,e){return ut(t)&&!ut(e)?-1:ut(e)&&!ut(t)?1:ut(t)&&ut(e)?ct.compare(t,e):0})),jn=u.k.contramap((function(t){return t.bid}))(bn),On=function(t){return Object(o.pipe)(t,u.m.zip(u.o.tail(t)),u.m.traverse(u.d.Applicative)((function(t){var e=Object(c.a)(t,2),n=e[0],r=e[1];return u.k.lt(jn)(n,r)?u.d.right(Object(o.constVoid)()):u.d.left({type:"BidsOutOfOrder",left:n,right:r})})),u.d.map(o.constVoid))},vn=function(t){return Object(o.pipe)(t,xt,u.m.traverse(u.d.Applicative)(On),u.d.map(o.constVoid))},yn=function t(e){return Object(o.pipe)(e,u.v.chain((function(e){if(!Pt(e))return u.v.of(u.d.right(Object(o.constVoid)()));switch(e.type){case"Conjunction":case"Disjunction":return Object(o.pipe)(e.constraints,u.o.map(oe),u.v.traverseArray(t),u.v.map(Object(o.flow)(u.m.sequence(u.d.Applicative),u.d.map(o.constVoid))));case"Negation":return Object(o.pipe)(e.constraint,oe,t);case"Otherwise":return u.v.of(u.d.right(Object(o.constVoid)()));case"OtherBid":return Object(o.pipe)(u.v.gets(Object(o.flow)(Xt.get,u.m.map((function(t){return t.bid})),S,u.d.fromPredicate(u.m.elem(ot)(e.bid),(function(){return{type:"OtherBidNotFound",constraint:e}})),u.d.map(o.constVoid))));case"ForceOneRound":case"ForceGame":case"ForceSlam":case"Relay":return Object(o.pipe)(u.v.modify(zt.set(u.i.some(e))),u.v.map((function(){return u.d.right(Object(o.constVoid)())})));case"SuitPrimary":return Object(o.pipe)(u.v.modify(Jt.set(u.i.some(e.suit))),u.v.map((function(){return u.d.right(Object(o.constVoid)())})));case"SuitSecondary":return Object(o.pipe)(u.v.modify(Zt.set(u.i.some(e.suit))),u.v.chain((function(){return u.v.gets((function(t){return t.primarySuit}))})),u.v.map(Object(o.flow)(u.d.fromOption((function(){return{type:"NoPrimaryBidDefined",constraint:e}})),u.d.map(o.constVoid))));case"LabelDef":return Object(o.pipe)(e,ce(t));case"LabelRef":return Object(o.pipe)(e,ae(t),u.v.map(u.i.getOrElseW((function(){return u.d.left({type:"LabelNotFound",constraint:e})}))));default:return g(e)}})),u.v.chain((function(t){return Object(o.pipe)(u.v.gets(Vt.get),u.v.map((function(e){return Object(o.pipe)(t,u.d.mapLeft((function(t){return Object(y.a)({bid:e},t)})))})))})))},gn=u.v.modify(zt.set(u.i.none)),Sn=u.v.of(Object(o.constVoid)()),kn=function(t){return function(e){switch(e.type){case"ForceOneRound":case"Relay":return gn;case"ForceGame":return function(t){return ut(t)&&u.k.geq(ct)(t,{level:3,strain:"N"})}(t)?gn:Sn;case"ForceSlam":return function(t){return ut(t)&&u.k.gt(ct)(t,{level:5,strain:"N"})}(t)?gn:Sn;default:return g(e)}}},xn=Object(o.flow)(u.v.bindTo("result"),u.v.apS("bid",u.v.gets(Vt.get)),u.v.apS("force",u.v.gets(ee.getOption)),u.v.chain((function(t){var e=t.bid,n=t.force,r=t.result;return Object(o.pipe)(n,u.i.traverse(u.v.Applicative)(kn(e)),u.v.map((function(){return r})))}))),wn=Object(o.flow)(u.v.apS("bid",u.v.gets(Vt.get)),u.v.apS("force",u.v.gets(zt.get)),u.v.map((function(t){var e=t.bid,n=t.force;return Object(o.pipe)(n,u.d.fromPredicate(function(t){return function(e){return!("Pass"===t&&u.i.isSome(e))}}(e),(function(){return{type:"PassWhileForcing",bid:e}})),u.d.map(o.constVoid))}))),Cn=Object(o.pipe)(u.v.gets(ee.getOption),u.v.bindTo("force"),u.v.apS("path",u.v.gets(Qt.get)),u.v.map((function(t){var e=t.force,n=t.path;return Object(o.pipe)(e,u.d.fromPredicate(u.i.isNone,(function(){return{type:"NoBidDefinedButStillForcing",path:n}})),u.d.map(o.constVoid))}))),_n=function(t){return Object(o.pipe)(t,u.v.traverseArray((function(t){return Object(o.pipe)(hn(t),u.v.bindTo("constraint"),u.v.bind("forceCheck",(function(t){var e=t.constraint;return wn(u.v.of(e))})),u.v.chain((function(e){var n=e.constraint,r=e.forceCheck;return Object(o.pipe)(r,u.d.traverse(u.v.Applicative)((function(){return Object(o.pipe)(u.v.of(n),xn,yn,dn(t))})),u.v.map((function(t){return u.d.flatten(t)})))})))})),u.v.bindTo("result"),u.v.apS("finalCheck",Cn),u.v.map((function(t){var e=t.result,n=t.finalCheck;return Object(o.pipe)(e,u.m.prepend(n),u.m.sequence(u.d.Applicative),u.d.map(o.constVoid))})),u.v.evaluate(Kt))},An=n(108),Rn=n(37),Bn=n(94),Pn=Rn.f(u.q.toReadonlyArray(H),u.q.fromReadonlyArray(L)),En=(pe=Pn,Rn.f(u.d.map(pe.get),u.d.map(pe.reverseGet))),Fn=(Object(o.flow)(u.d.fromPredicate(Bn.UuidTool.isUuid,(function(t){return An.a(t,"Invalid uuid string")})),u.d.map((function(t){return new Bn.Uuid(t)}))),function(t){return Object(o.pipe)(new Bn.Uuid(t.id).toBytes(),u.m.takeLeft(13),u.m.chain(Object(o.flow)((function(t){return u.m.unfold([t,4],(function(t){var e=Object(c.a)(t,2),n=e[0],r=e[1];return 0===r?u.i.none:u.i.some([3&n,[n>>2,r-1]])}))}),u.m.reverse)))}),Nn=w.b(w.e({id:w.d}),(function(t){return Object(o.pipe)(t,Fn,u.m.reduce(u.b.replicate(4,0),(function(t,e){return t[e]+=1,t})),u.m.every((function(t){return 13===t})))}),"Deal"),Mn={encode:Object(o.flow)(Fn,u.o.zip(Object(o.pipe)(I,u.o.sort(H))),u.o.map((function(t){var e=Object(c.a)(t,2),n=e[0],r=e[1];return[U[n],r]})),u.o.groupBy(u.r.fst),u.p.map(Object(o.flow)(u.o.map(u.r.snd),u.q.fromReadonlyArray(L))))},qn={encode:Object(o.flow)(u.p.foldMapWithIndex(u.k.trivial)(u.m.getMonoid())((function(t,e){return Object(o.pipe)(e,u.q.toReadonlyArray(u.k.trivial),u.m.map((function(e){return[e,U.indexOf(t)]})))})),u.m.sort(u.k.contramap((function(t){return t[0]}))(H)),u.m.map(u.r.snd),u.m.chunksOf(4),u.m.map(u.m.reduce(0,(function(t,e){return(t<<2)+e}))),u.m.concat(u.m.replicate(3,0)),u.m.toArray,(function(t){return Nn.decode(new Bn.Uuid(t)).right}))},Dn=Rn.f(qn.encode,Mn.encode),Tn=Rn.f((function(t){return Object(y.a)(Object(y.a)({},t),{},{deal:Dn.get(t.deal)})}),(function(t){return Object(y.a)(Object(y.a)({},t),{},{deal:Dn.reverseGet(t.deal)})})),Ln=Rn.f((function(t){return"".concat(t.level).concat(t.strain)}),(function(t){return{level:parseInt(t.charAt(0)),strain:t.charAt(1)}})),Hn=Rn.f((function(t){return rt(t)?t:Ln.get(t)}),(function(t){return rt(t)?t:Ln.reverseGet(t)})),In=w.b(w.d,(function(t){return Object(o.pipe)(t,u.w.split("."),u.m.every((function(t){return 2===t.length||rt(t)})))}),"BidPath"),$n=Rn.f(Object(o.flow)(u.m.map(Hn.get),u.m.intersperse("."),u.m.foldMap(u.w.Monoid)(o.identity),(function(t){return In.decode(t).right})),Object(o.flow)(u.w.split("."),u.o.map(Hn.reverseGet))),Wn=n(107),Gn=n(77),Kn=n(23),Un=n(18),Vn=n(4),Qn=n(3);!function(t){t.Start="Start",t.BidSpec="BidSpec",t.BidSpecConstraintList="BidSpecConstraintList",t.Bid_1="Bid_1",t.Bid_2="Bid_2",t.ContractBid="ContractBid",t.BidSpecifier_1="BidSpecifier_1",t.BidSpecifier_2="BidSpecifier_2",t.Wildcard="Wildcard",t.SuitSpecifier_1="SuitSpecifier_1",t.SuitSpecifier_2="SuitSpecifier_2",t.SuitSpecifier_3="SuitSpecifier_3",t.Major="Major",t.Minor="Minor",t.NonContractBid="NonContractBid",t.Pass="Pass",t.Strain_1="Strain_1",t.Strain_2="Strain_2",t.Suit_1="Suit_1",t.Suit_2="Suit_2",t.Suit_3="Suit_3",t.Suit_4="Suit_4",t.Club="Club",t.Diamond="Diamond",t.Heart="Heart",t.Spade="Spade",t.Notrump="Notrump",t.Honor="Honor",t.ConstraintList="ConstraintList",t.ConstraintListItem="ConstraintListItem",t.Constraint_1="Constraint_1",t.Constraint_2="Constraint_2",t.Constraint_3="Constraint_3",t.Constraint_4="Constraint_4",t.Constraint_5="Constraint_5",t.Constraint_6="Constraint_6",t.Constraint_7="Constraint_7",t.Constraint_8="Constraint_8",t.Constraint_9="Constraint_9",t.Constraint_10="Constraint_10",t.Constraint_11="Constraint_11",t.Constraint_12="Constraint_12",t.Constraint_13="Constraint_13",t.Constraint_14="Constraint_14",t.Constraint_15="Constraint_15",t.Constraint_16="Constraint_16",t.Constraint_17="Constraint_17",t.Constraint_18="Constraint_18",t.Const_1="Const_1",t.Const_2="Const_2",t.True="True",t.False="False",t.Or="Or",t.And="And",t.Not="Not",t.Not_$0_1="Not_$0_1",t.Not_$0_2="Not_$0_2",t.Otherwise="Otherwise",t.PointRange="PointRange",t.PointBound="PointBound",t.SuitRange="SuitRange",t.SuitBound="SuitBound",t.SuitRangeSpecifier="SuitRangeSpecifier",t.SuitComparison="SuitComparison",t.SuitComparisonOperator_1="SuitComparisonOperator_1",t.SuitComparisonOperator_2="SuitComparisonOperator_2",t.SuitComparisonOperator_3="SuitComparisonOperator_3",t.SuitComparisonOperator_4="SuitComparisonOperator_4",t.SuitComparisonOperator_5="SuitComparisonOperator_5",t.SuitHonors="SuitHonors",t.SuitTop="SuitTop",t.BoundQualifier_1="BoundQualifier_1",t.BoundQualifier_2="BoundQualifier_2",t.BoundQualifier_3="BoundQualifier_3",t.Plus="Plus",t.Minus="Minus",t.Equals="Equals",t.OtherBid="OtherBid",t.Distribution_1="Distribution_1",t.Distribution_2="Distribution_2",t.Distribution_3="Distribution_3",t.Distribution_4="Distribution_4",t.Distribution_5="Distribution_5",t.Balanced="Balanced",t.SemiBalanced="SemiBalanced",t.Unbalanced="Unbalanced",t.AnyShape="AnyShape",t.SpecificShape="SpecificShape",t.SuitRank_1="SuitRank_1",t.SuitRank_2="SuitRank_2",t.Primary="Primary",t.Secondary="Secondary",t.Response_1="Response_1",t.Response_2="Response_2",t.Response_3="Response_3",t.Response_4="Response_4",t.ForceOneRound="ForceOneRound",t.ForceGame="ForceGame",t.ForceSlam="ForceSlam",t.Relay="Relay",t.LabelDef="LabelDef",t.LabelRef="LabelRef",t.Label="Label",t.Digit="Digit",t.Number="Number",t.$EOF="$EOF"}(fn||(fn={}));var zn=function t(e){Object(Qn.a)(this,t),this.kind=fn.Digit,this.literal=void 0,this.value=void 0,this.literal=e,this.value=parseInt(e)},Jn=function t(e){Object(Qn.a)(this,t),this.kind=fn.Number,this.literal=void 0,this.value=void 0,this.literal=e,this.value=parseInt(e)},Zn=function(){function t(e){Object(Qn.a)(this,t),this.input=void 0,this.pos=void 0,this.negating=!1,this.memoSafe=!0,this.$scope$Constraint$memo=new Map,this.pos={overallPos:0,line:1,offset:0},this.input=e}return Object(Vn.a)(t,[{key:"reset",value:function(t){this.pos=t}},{key:"finished",value:function(){return this.pos.overallPos===this.input.length}},{key:"clearMemos",value:function(){this.$scope$Constraint$memo.clear()}},{key:"matchStart",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchBidSpec(t+1,e))&&null!==n.match$EOF(e)&&(i={kind:fn.Start,spec:r}),i}))}},{key:"matchBidSpec",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c=null;return null!==(r=n.matchBid(t+1,e))&&(i=n.matchBidSpecConstraintList(t+1,e),1)&&(c={kind:fn.BidSpec,bid:r,constraints:i}),c}))}},{key:"matchBidSpecConstraintList",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(fe||(fe=Object(Un.a)(["(?:: )"]))),t+1,e)&&null!==(r=n.matchConstraintList(t+1,e))&&(i={kind:fn.BidSpecConstraintList,constraints:r}),i}))}},{key:"matchBid",value:function(t,e){var n=this;return this.choice([function(){return n.matchBid_1(t+1,e)},function(){return n.matchBid_2(t+1,e)}])}},{key:"matchBid_1",value:function(t,e){return this.matchContractBid(t+1,e)}},{key:"matchBid_2",value:function(t,e){return this.matchNonContractBid(t+1,e)}},{key:"matchContractBid",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c=null;return null!==(r=n.matchDigit(t+1,e))&&null!==(i=n.matchBidSpecifier(t+1,e))&&(c={kind:fn.ContractBid,level:r,specifier:i}),c}))}},{key:"matchBidSpecifier",value:function(t,e){var n=this;return this.choice([function(){return n.matchBidSpecifier_1(t+1,e)},function(){return n.matchBidSpecifier_2(t+1,e)}])}},{key:"matchBidSpecifier_1",value:function(t,e){return this.matchWildcard(t+1,e)}},{key:"matchBidSpecifier_2",value:function(t,e){return this.matchSuitSpecifier(t+1,e)}},{key:"matchWildcard",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(he||(he=Object(Un.a)(["(?:x)"]))),t+1,e))&&(i={kind:fn.Wildcard,v:r}),i}))}},{key:"matchSuitSpecifier",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuitSpecifier_1(t+1,e)},function(){return n.matchSuitSpecifier_2(t+1,e)},function(){return n.matchSuitSpecifier_3(t+1,e)}])}},{key:"matchSuitSpecifier_1",value:function(t,e){return this.matchMajor(t+1,e)}},{key:"matchSuitSpecifier_2",value:function(t,e){return this.matchMinor(t+1,e)}},{key:"matchSuitSpecifier_3",value:function(t,e){return this.matchStrain(t+1,e)}},{key:"matchMajor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(de||(de=Object(Un.a)(["(?:M)"]))),t+1,e))&&(i={kind:fn.Major,v:r}),i}))}},{key:"matchMinor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(me||(me=Object(Un.a)(["(?:m)"]))),t+1,e))&&(i={kind:fn.Minor,v:r}),i}))}},{key:"matchNonContractBid",value:function(t,e){return this.matchPass(t+1,e)}},{key:"matchPass",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(be||(be=Object(Un.a)(["(?:P)"]))),t+1,e))&&(i={kind:fn.Pass,v:r}),i}))}},{key:"matchStrain",value:function(t,e){var n=this;return this.choice([function(){return n.matchStrain_1(t+1,e)},function(){return n.matchStrain_2(t+1,e)}])}},{key:"matchStrain_1",value:function(t,e){return this.matchSuit(t+1,e)}},{key:"matchStrain_2",value:function(t,e){return this.matchNotrump(t+1,e)}},{key:"matchSuit",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuit_1(t+1,e)},function(){return n.matchSuit_2(t+1,e)},function(){return n.matchSuit_3(t+1,e)},function(){return n.matchSuit_4(t+1,e)}])}},{key:"matchSuit_1",value:function(t,e){return this.matchClub(t+1,e)}},{key:"matchSuit_2",value:function(t,e){return this.matchDiamond(t+1,e)}},{key:"matchSuit_3",value:function(t,e){return this.matchHeart(t+1,e)}},{key:"matchSuit_4",value:function(t,e){return this.matchSpade(t+1,e)}},{key:"matchClub",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(je||(je=Object(Un.a)(["(?:[Cc\u2663\u2667])"]))),t+1,e))&&(i={kind:fn.Club,v:r}),i}))}},{key:"matchDiamond",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Oe||(Oe=Object(Un.a)(["(?:[Dd\u2666\u2662])"]))),t+1,e))&&(i={kind:fn.Diamond,v:r}),i}))}},{key:"matchHeart",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(ve||(ve=Object(Un.a)(["(?:[Hh\u2665\u2661])"]))),t+1,e))&&(i={kind:fn.Heart,v:r}),i}))}},{key:"matchSpade",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(ye||(ye=Object(Un.a)(["(?:[Ss\u2660\u2664])"]))),t+1,e))&&(i={kind:fn.Spade,v:r}),i}))}},{key:"matchNotrump",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(ge||(ge=Object(Un.a)(["(?:[Nn])"]))),t+1,e))&&(n.regexAccept(String.raw(Se||(Se=Object(Un.a)(["(?:[Tt])"]))),t+1,e),1)&&(i={kind:fn.Notrump,v:r}),i}))}},{key:"matchHonor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(ke||(ke=Object(Un.a)(["(?:[AKQJT])"]))),t+1,e))&&(i={kind:fn.Honor,v:r}),i}))}},{key:"matchConstraintList",value:function(t,e){var n=this;return this.loop((function(){return n.matchConstraintListItem(t+1,e)}),!1)}},{key:"matchConstraintListItem",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchConstraint(t+1,e))&&(n.regexAccept(String.raw(xe||(xe=Object(Un.a)(["(?: )"]))),t+1,e),1)&&(i={kind:fn.ConstraintListItem,constraint:r}),i}))}},{key:"matchConstraint",value:function(t,e){var n=this,r=this.mark(),i=this.$scope$Constraint$memo.get(r.overallPos);if(void 0!==i)return this.reset(i[1]),i[0];var c=this.memoSafe;this.memoSafe=!1,this.$scope$Constraint$memo.set(r.overallPos,[null,r]);for(var a=null,u=r;;){this.reset(r);var o=n.choice([function(){return n.matchConstraint_1(t+1,e)},function(){return n.matchConstraint_2(t+1,e)},function(){return n.matchConstraint_3(t+1,e)},function(){return n.matchConstraint_4(t+1,e)},function(){return n.matchConstraint_5(t+1,e)},function(){return n.matchConstraint_6(t+1,e)},function(){return n.matchConstraint_7(t+1,e)},function(){return n.matchConstraint_8(t+1,e)},function(){return n.matchConstraint_9(t+1,e)},function(){return n.matchConstraint_10(t+1,e)},function(){return n.matchConstraint_11(t+1,e)},function(){return n.matchConstraint_12(t+1,e)},function(){return n.matchConstraint_13(t+1,e)},function(){return n.matchConstraint_14(t+1,e)},function(){return n.matchConstraint_15(t+1,e)},function(){return n.matchConstraint_16(t+1,e)},function(){return n.matchConstraint_17(t+1,e)},function(){return n.matchConstraint_18(t+1,e)}]),s=this.mark();if(s.overallPos<=u.overallPos)break;a=o,u=s,this.$scope$Constraint$memo.set(r.overallPos,[a,u])}return this.reset(u),this.memoSafe=c,a}},{key:"matchConstraint_1",value:function(t,e){return this.matchConst(t+1,e)}},{key:"matchConstraint_2",value:function(t,e){return this.matchOr(t+1,e)}},{key:"matchConstraint_3",value:function(t,e){return this.matchAnd(t+1,e)}},{key:"matchConstraint_4",value:function(t,e){return this.matchNot(t+1,e)}},{key:"matchConstraint_5",value:function(t,e){return this.matchOtherwise(t+1,e)}},{key:"matchConstraint_6",value:function(t,e){return this.matchDistribution(t+1,e)}},{key:"matchConstraint_7",value:function(t,e){return this.matchResponse(t+1,e)}},{key:"matchConstraint_8",value:function(t,e){return this.matchSuitRange(t+1,e)}},{key:"matchConstraint_9",value:function(t,e){return this.matchSuitBound(t+1,e)}},{key:"matchConstraint_10",value:function(t,e){return this.matchSuitComparison(t+1,e)}},{key:"matchConstraint_11",value:function(t,e){return this.matchSuitHonors(t+1,e)}},{key:"matchConstraint_12",value:function(t,e){return this.matchSuitTop(t+1,e)}},{key:"matchConstraint_13",value:function(t,e){return this.matchSuitRank(t+1,e)}},{key:"matchConstraint_14",value:function(t,e){return this.matchPointRange(t+1,e)}},{key:"matchConstraint_15",value:function(t,e){return this.matchPointBound(t+1,e)}},{key:"matchConstraint_16",value:function(t,e){return this.matchOtherBid(t+1,e)}},{key:"matchConstraint_17",value:function(t,e){return this.matchLabelDef(t+1,e)}},{key:"matchConstraint_18",value:function(t,e){return this.matchLabelRef(t+1,e)}},{key:"matchConst",value:function(t,e){var n=this;return this.choice([function(){return n.matchConst_1(t+1,e)},function(){return n.matchConst_2(t+1,e)}])}},{key:"matchConst_1",value:function(t,e){return this.matchTrue(t+1,e)}},{key:"matchConst_2",value:function(t,e){return this.matchFalse(t+1,e)}},{key:"matchTrue",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(we||(we=Object(Un.a)(["(?:true)"]))),t+1,e))&&(i={kind:fn.True,v:r}),i}))}},{key:"matchFalse",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Ce||(Ce=Object(Un.a)(["(?:false)"]))),t+1,e))&&(i={kind:fn.False,v:r}),i}))}},{key:"matchOr",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c=null;return null!==(r=n.matchConstraint(t+1,e))&&null!==n.regexAccept(String.raw(_e||(_e=Object(Un.a)(["(?: or )"]))),t+1,e)&&null!==(i=n.matchConstraint(t+1,e))&&(c={kind:fn.Or,left:r,right:i}),c}))}},{key:"matchAnd",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(Ae||(Ae=Object(Un.a)(["(?:()"],["(?:\\()"]))),t+1,e)&&null!==(r=n.matchConstraintList(t+1,e))&&null!==n.regexAccept(String.raw(Re||(Re=Object(Un.a)(["(?:))"],["(?:\\))"]))),t+1,e)&&(i={kind:fn.And,constraints:r}),i}))}},{key:"matchNot",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.matchNot_$0(t+1,e)&&(n.regexAccept(String.raw(Be||(Be=Object(Un.a)(["(?: )"]))),t+1,e),1)&&null!==(r=n.matchConstraint(t+1,e))&&(i={kind:fn.Not,constraint:r}),i}))}},{key:"matchNot_$0",value:function(t,e){var n=this;return this.choice([function(){return n.matchNot_$0_1(t+1,e)},function(){return n.matchNot_$0_2(t+1,e)}])}},{key:"matchNot_$0_1",value:function(t,e){return this.regexAccept(String.raw(Pe||(Pe=Object(Un.a)(["(?:not)"]))),t+1,e)}},{key:"matchNot_$0_2",value:function(t,e){return this.regexAccept(String.raw(Ee||(Ee=Object(Un.a)(["(?:!)"]))),t+1,e)}},{key:"matchOtherwise",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Fe||(Fe=Object(Un.a)(["(?:else)"]))),t+1,e))&&(i={kind:fn.Otherwise,v:r}),i}))}},{key:"matchPointRange",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c=null;return null!==(r=n.matchNumber(t+1,e))&&null!==n.regexAccept(String.raw(Ne||(Ne=Object(Un.a)(["(?:-)"]))),t+1,e)&&null!==(i=n.matchNumber(t+1,e))&&(c={kind:fn.PointRange,lower:r,upper:i}),c}))}},{key:"matchPointBound",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c=null;return null!==(r=n.matchNumber(t+1,e))&&null!==(i=n.matchBoundQualifier(t+1,e))&&(c={kind:fn.PointBound,value:r,qualifier:i}),c}))}},{key:"matchSuitRange",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c,a=null;return null!==(r=n.matchDigit(t+1,e))&&null!==n.regexAccept(String.raw(Me||(Me=Object(Un.a)(["(?:-)"]))),t+1,e)&&null!==(i=n.matchDigit(t+1,e))&&null!==(c=n.matchSuitRangeSpecifier(t+1,e))&&(a={kind:fn.SuitRange,lower:r,upper:i,suit:c}),a}))}},{key:"matchSuitBound",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c,a=null;return null!==(r=n.matchNumber(t+1,e))&&null!==(i=n.matchBoundQualifier(t+1,e))&&null!==(c=n.matchSuitRangeSpecifier(t+1,e))&&(a={kind:fn.SuitBound,value:r,qualifier:i,suit:c}),a}))}},{key:"matchSuitRangeSpecifier",value:function(t,e){return this.matchSuit(t+1,e)}},{key:"matchSuitComparison",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c,a=null;return null!==(r=n.matchSuit(t+1,e))&&null!==(i=n.matchSuitComparisonOperator(t+1,e))&&null!==(c=n.matchSuit(t+1,e))&&(a={kind:fn.SuitComparison,left:r,op:i,right:c}),a}))}},{key:"matchSuitComparisonOperator",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuitComparisonOperator_1(t+1,e)},function(){return n.matchSuitComparisonOperator_2(t+1,e)},function(){return n.matchSuitComparisonOperator_3(t+1,e)},function(){return n.matchSuitComparisonOperator_4(t+1,e)},function(){return n.matchSuitComparisonOperator_5(t+1,e)}])}},{key:"matchSuitComparisonOperator_1",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(qe||(qe=Object(Un.a)(["(?:<)"]))),t+1,e))&&(i={kind:fn.SuitComparisonOperator_1,v:r}),i}))}},{key:"matchSuitComparisonOperator_2",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(De||(De=Object(Un.a)(["(?:<=)"]))),t+1,e))&&(i={kind:fn.SuitComparisonOperator_2,v:r}),i}))}},{key:"matchSuitComparisonOperator_3",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Te||(Te=Object(Un.a)(["(?:=)"]))),t+1,e))&&(i={kind:fn.SuitComparisonOperator_3,v:r}),i}))}},{key:"matchSuitComparisonOperator_4",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Le||(Le=Object(Un.a)(["(?:>=)"]))),t+1,e))&&(i={kind:fn.SuitComparisonOperator_4,v:r}),i}))}},{key:"matchSuitComparisonOperator_5",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(He||(He=Object(Un.a)(["(?:>)"]))),t+1,e))&&(i={kind:fn.SuitComparisonOperator_5,v:r}),i}))}},{key:"matchSuitHonors",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c=null;return null!==(r=n.matchSuit(t+1,e))&&null!==(i=n.loop((function(){return n.matchHonor(t+1,e)}),!1))&&(c={kind:fn.SuitHonors,suit:r,honors:i}),c}))}},{key:"matchSuitTop",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c,a=null;return null!==(r=n.matchSuit(t+1,e))&&null!==(i=n.regexAccept(String.raw(Ie||(Ie=Object(Un.a)(["(?:[0-5])"]))),t+1,e))&&null!==n.regexAccept(String.raw($e||($e=Object(Un.a)(["(?:/)"]))),t+1,e)&&null!==(c=n.regexAccept(String.raw(We||(We=Object(Un.a)(["(?:[1-5])"]))),t+1,e))&&(a={kind:fn.SuitTop,suit:r,x:i,y:c}),a}))}},{key:"matchBoundQualifier",value:function(t,e){var n=this;return this.choice([function(){return n.matchBoundQualifier_1(t+1,e)},function(){return n.matchBoundQualifier_2(t+1,e)},function(){return n.matchBoundQualifier_3(t+1,e)}])}},{key:"matchBoundQualifier_1",value:function(t,e){return this.matchPlus(t+1,e)}},{key:"matchBoundQualifier_2",value:function(t,e){return this.matchMinus(t+1,e)}},{key:"matchBoundQualifier_3",value:function(t,e){return this.matchEquals(t+1,e)}},{key:"matchPlus",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Ge||(Ge=Object(Un.a)(["(?:+)"],["(?:\\+)"]))),t+1,e))&&(i={kind:fn.Plus,v:r}),i}))}},{key:"matchMinus",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Ke||(Ke=Object(Un.a)(["(?:-)"],["(?:\\-)"]))),t+1,e))&&(i={kind:fn.Minus,v:r}),i}))}},{key:"matchEquals",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Ue||(Ue=Object(Un.a)(["(?:=)"]))),t+1,e))&&(i={kind:fn.Equals,v:r}),i}))}},{key:"matchOtherBid",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c=null;return null!==(r=n.matchNumber(t+1,e))&&null!==(i=n.matchStrain(t+1,e))&&(c={kind:fn.OtherBid,level:r,strain:i}),c}))}},{key:"matchDistribution",value:function(t,e){var n=this;return this.choice([function(){return n.matchDistribution_1(t+1,e)},function(){return n.matchDistribution_2(t+1,e)},function(){return n.matchDistribution_3(t+1,e)},function(){return n.matchDistribution_4(t+1,e)},function(){return n.matchDistribution_5(t+1,e)}])}},{key:"matchDistribution_1",value:function(t,e){return this.matchBalanced(t+1,e)}},{key:"matchDistribution_2",value:function(t,e){return this.matchSemiBalanced(t+1,e)}},{key:"matchDistribution_3",value:function(t,e){return this.matchUnbalanced(t+1,e)}},{key:"matchDistribution_4",value:function(t,e){return this.matchAnyShape(t+1,e)}},{key:"matchDistribution_5",value:function(t,e){return this.matchSpecificShape(t+1,e)}},{key:"matchBalanced",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Ve||(Ve=Object(Un.a)(["(?:BAL)"]))),t+1,e))&&(i={kind:fn.Balanced,v:r}),i}))}},{key:"matchSemiBalanced",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Qe||(Qe=Object(Un.a)(["(?:semiBAL)"]))),t+1,e))&&(i={kind:fn.SemiBalanced,v:r}),i}))}},{key:"matchUnbalanced",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(ze||(ze=Object(Un.a)(["(?:unBAL)"]))),t+1,e))&&(i={kind:fn.Unbalanced,v:r}),i}))}},{key:"matchAnyShape",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Je||(Je=Object(Un.a)(["(?:[0-9]{4})"]))),t+1,e))&&null!==n.regexAccept(String.raw(Ze||(Ze=Object(Un.a)(["(?:*)"],["(?:\\*)"]))),t+1,e)&&(i={kind:fn.AnyShape,v:r}),i}))}},{key:"matchSpecificShape",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c,a,u=null;return null!==(r=n.matchDigit(t+1,e))&&null!==(i=n.matchDigit(t+1,e))&&null!==(c=n.matchDigit(t+1,e))&&null!==(a=n.matchDigit(t+1,e))&&(u={kind:fn.SpecificShape,S:r,H:i,D:c,C:a}),u}))}},{key:"matchSuitRank",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuitRank_1(t+1,e)},function(){return n.matchSuitRank_2(t+1,e)}])}},{key:"matchSuitRank_1",value:function(t,e){return this.matchPrimary(t+1,e)}},{key:"matchSuitRank_2",value:function(t,e){return this.matchSecondary(t+1,e)}},{key:"matchPrimary",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(Xe||(Xe=Object(Un.a)(["(?:1)"]))),t+1,e)&&(i={kind:fn.Primary,suit:r}),i}))}},{key:"matchSecondary",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(Ye||(Ye=Object(Un.a)(["(?:2)"]))),t+1,e)&&(i={kind:fn.Secondary,suit:r}),i}))}},{key:"matchResponse",value:function(t,e){var n=this;return this.choice([function(){return n.matchResponse_1(t+1,e)},function(){return n.matchResponse_2(t+1,e)},function(){return n.matchResponse_3(t+1,e)},function(){return n.matchResponse_4(t+1,e)}])}},{key:"matchResponse_1",value:function(t,e){return this.matchForceOneRound(t+1,e)}},{key:"matchResponse_2",value:function(t,e){return this.matchForceGame(t+1,e)}},{key:"matchResponse_3",value:function(t,e){return this.matchForceSlam(t+1,e)}},{key:"matchResponse_4",value:function(t,e){return this.matchRelay(t+1,e)}},{key:"matchForceOneRound",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(tn||(tn=Object(Un.a)(["(?:F1)"]))),t+1,e))&&(i={kind:fn.ForceOneRound,v:r}),i}))}},{key:"matchForceGame",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(en||(en=Object(Un.a)(["(?:FG)"]))),t+1,e))&&(i={kind:fn.ForceGame,v:r}),i}))}},{key:"matchForceSlam",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(nn||(nn=Object(Un.a)(["(?:FS)"]))),t+1,e))&&(i={kind:fn.ForceSlam,v:r}),i}))}},{key:"matchRelay",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(rn||(rn=Object(Un.a)(["(?:->)"]))),t+1,e)&&null!==(r=n.matchOtherBid(t+1,e))&&(i={kind:fn.Relay,bid:r}),i}))}},{key:"matchLabelDef",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c=null;return null!==n.regexAccept(String.raw(cn||(cn=Object(Un.a)(["(?:')"],["(?:\\')"]))),t+1,e)&&null!==(r=n.matchLabel(t+1,e))&&null!==n.regexAccept(String.raw(an||(an=Object(Un.a)(["(?:': )"],["(?:\\': )"]))),t+1,e)&&null!==(i=n.matchConstraintList(t+1,e))&&(c={kind:fn.LabelDef,label:r,constraints:i}),c}))}},{key:"matchLabelRef",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(un||(un=Object(Un.a)(["(?:')"],["(?:\\')"]))),t+1,e)&&null!==(r=n.matchLabel(t+1,e))&&null!==n.regexAccept(String.raw(on||(on=Object(Un.a)(["(?:')"],["(?:\\')"]))),t+1,e)&&(i={kind:fn.LabelRef,label:r}),i}))}},{key:"matchLabel",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(sn||(sn=Object(Un.a)(["(?:[0-9a-zA-z-_]+)"]))),t+1,e))&&(i={kind:fn.Label,v:r}),i}))}},{key:"matchDigit",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(ln||(ln=Object(Un.a)(["(?:[0-9])"]))),t+1,e))&&(i=new zn(r)),i}))}},{key:"matchNumber",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(pn||(pn=Object(Un.a)(["(?:[0-9]+)"]))),t+1,e))&&(i=new Jn(r)),i}))}},{key:"test",value:function(){var t=this.mark(),e=null!==this.matchStart(0);return this.reset(t),e}},{key:"parse",value:function(){var t=this.mark(),e=this.matchStart(0);if(e)return{ast:e,errs:[]};this.reset(t);var n=new ir;this.clearMemos(),this.matchStart(0,n);var r=n.getErr();return{ast:e,errs:null!==r?[r]:[]}}},{key:"mark",value:function(){return this.pos}},{key:"loop",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mark(),r=[];;){var i=t();if(null===i)break;r.push(i)}return e||r.length>0?r:(this.reset(n),null)}},{key:"run",value:function(t,e){var n=this.mark(),r=e();return null!==r?r:(this.reset(n),null)}},{key:"choice",value:function(t){var e,n=Object(Kn.a)(t);try{for(n.s();!(e=n.n()).done;){var r=(0,e.value)();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"regexAccept",value:function(t,e,n){var r=this;return this.run(e,(function(){var e=new RegExp(t,"y"),i=r.mark();e.lastIndex=i.overallPos;var c=r.tryConsume(e);return n&&n.record(i,c,{kind:"RegexMatch",literal:t.substring(3,t.length-1),negated:r.negating}),c}))}},{key:"tryConsume",value:function(t){var e=t.exec(this.input);if(e){for(var n=0,r=-1,i=0;i<e[0].length;++i)"\n"===e[0][i]&&(++n,r=i);return this.pos={overallPos:t.lastIndex,line:this.pos.line+n,offset:-1===r?this.pos.offset+e[0].length:e[0].length-r-1},e[0]}return null}},{key:"noConsume",value:function(t){var e=this.mark(),n=t();return this.reset(e),n}},{key:"negate",value:function(t){var e=this.mark(),n=this.negating;this.negating=!n;var r=t();return this.negating=n,this.reset(e),null===r||null}},{key:"memoise",value:function(t,e){var n=this.mark(),r=e.get(n.overallPos);if(this.memoSafe&&void 0!==r)return this.reset(r[1]),r[0];var i=t();return this.memoSafe&&e.set(n.overallPos,[i,this.mark()]),i}},{key:"match$EOF",value:function(t){var e=this.finished()?{kind:fn.$EOF}:null;return t&&t.record(this.mark(),e,{kind:"EOF",negated:this.negating}),e}}]),t}();var Xn,Yn,tr,er,nr,rr=function(){function t(e,n){Object(Qn.a)(this,t),this.pos=void 0,this.expmatches=void 0,this.pos=e,this.expmatches=Object(d.a)(n)}return Object(Vn.a)(t,[{key:"toString",value:function(){return"Syntax Error at line ".concat(this.pos.line,":").concat(this.pos.offset,". Expected one of ").concat(this.expmatches.map((function(t){return"EOF"===t.kind?" EOF":" ".concat(t.negated?"not ":"","'").concat(t.literal,"'")})))}}]),t}(),ir=function(){function t(){Object(Qn.a)(this,t),this.mxpos={overallPos:-1,line:-1,offset:-1},this.regexset=new Set,this.pmatches=[]}return Object(Vn.a)(t,[{key:"record",value:function(t,e,n){null===e!==n.negated&&(t.overallPos>this.mxpos.overallPos&&(this.mxpos=t,this.pmatches=[],this.regexset.clear()),this.mxpos.overallPos===t.overallPos&&("RegexMatch"===n.kind?(this.regexset.has(n.literal)||this.pmatches.push(n),this.regexset.add(n.literal)):this.pmatches.push(n)))}},{key:"getErr",value:function(){return-1!==this.mxpos.overallPos?new rr(this.mxpos,this.pmatches):null}}]),t}(),cr=function(t){return Object(o.pipe)(t,u.o.fromReadonlyArray,u.i.map(Object(o.flow)(u.o.map(fr),u.d.fromPredicate((function(t){return t.length>1}),(function(t){return t[0]})))))},ar=function(t,e){return Object(o.flow)(cr,u.e.match(u.i.Functor)(o.identity,(function(e){return{type:t,constraints:e}})),u.i.getOrElse(e))},ur=function(t){return t.kind===fn.Club?"C":t.kind===fn.Diamond?"D":t.kind===fn.Heart?"H":"S"},or=function(t){return t.kind===fn.Notrump?"N":ur(t)},sr=function(t){return ur(t)},lr=function(t,e){return function(n){return Object(o.pipe)(e,u.i.of,u.i.filter((function(e){return t.kind===fn.Equals||"min"===n&&t.kind===fn.Plus||"max"===n&&t.kind===fn.Minus})))}},pr=function(t){return Object(o.pipe)(t,u.m.map((function(t){return t.constraint})),ar("Conjunction",Rt))},fr=function t(e){switch(e.kind){case fn.True:return At();case fn.False:return Rt();case fn.And:return Object(o.pipe)(e.constraints,u.m.map((function(t){return t.constraint})),ar("Conjunction",At));case fn.Otherwise:return{type:"Otherwise"};case fn.Or:return Object(o.pipe)(function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.kind===fn.Or?t.apply(void 0,[e.left,e.right].concat(r)):Object(o.pipe)(r,u.o.fromReadonlyArray,u.i.fold((function(){return[e]}),(function(n){return[e].concat(Object(d.a)(t.apply(void 0,[n[0]].concat(Object(d.a)(n.slice(1))))))})))}(e.left,e.right),ar("Disjunction",Rt));case fn.Not:return{type:"Negation",constraint:t(e.constraint)};case fn.OtherBid:return{type:"OtherBid",bid:{level:e.level.value,strain:or(e.strain)}};case fn.PointRange:return{type:"PointRange",min:e.lower.value,max:e.upper.value};case fn.PointBound:return{type:"PointRange",min:Object(o.pipe)(lr(e.qualifier,e.value.value)("min"),u.i.getOrElse(Object(o.constant)(0))),max:Object(o.pipe)(lr(e.qualifier,e.value.value)("max"),u.i.getOrElse(Object(o.constant)(37)))};case fn.SuitRange:return{type:"SuitRange",min:e.lower.value,max:e.upper.value,suit:sr(e.suit)};case fn.SuitComparison:return{type:"SuitComparison",op:e.op.v,left:ur(e.left),right:ur(e.right)};case fn.Primary:case fn.Secondary:return{type:"Suit".concat(e.kind),suit:ur(e.suit)};case fn.SuitBound:return{type:"SuitRange",min:Object(o.pipe)(lr(e.qualifier,e.value.value)("min"),u.i.getOrElse(Object(o.constant)(0))),max:Object(o.pipe)(lr(e.qualifier,e.value.value)("max"),u.i.getOrElse(Object(o.constant)(13))),suit:sr(e.suit)};case fn.SuitHonors:return{type:"SuitHonors",suit:ur(e.suit),honors:Object(o.pipe)(e.honors,u.m.fromArray,u.m.traverse(u.i.Applicative)(Object(o.flow)((function(t){return t.v}),T)),u.i.getOrElseW((function(){return[]})))};case fn.SuitTop:return{type:"SuitTop",suit:ur(e.suit),count:parseInt(e.x),minRank:q[q.length-parseInt(e.y)]};case fn.AnyShape:return{type:"AnyShape",counts:Object(o.pipe)(e.v,u.w.split(""),u.m.map(parseInt))};case fn.SpecificShape:return{type:"SpecificShape",suits:Object(o.pipe)(dt,u.p.mapWithIndex((function(t,n){return e[t].value})))};case fn.Relay:return{type:"Relay",bid:{level:e.bid.level.value,strain:or(e.bid.strain)}};case fn.LabelDef:return{type:"LabelDef",name:e.label.v,constraint:pr(e.constraints)};case fn.LabelRef:return{type:"LabelRef",name:e.label.v};default:return{type:e.kind}}},hr=function(t){switch(t.kind){case fn.ContractBid:return{level:t.level.value,strain:or(t.specifier)};case fn.Pass:return"Pass";default:return g(t)}},dr=function(t){return new Zn(t).parse()};!function(t){t.Start="Start",t.Hand="Hand",t.Suit="Suit",t.Card="Card",t.$EOF="$EOF"}(nr||(nr={}));var mr=function t(e){Object(Qn.a)(this,t),this.kind=nr.Card,this.c=void 0,this.rank=void 0,this.c=e,this.rank=["2","3","4","5","6","7","8","9","T","J","Q","K","A"].indexOf(e)+2},br=function(){function t(e){Object(Qn.a)(this,t),this.input=void 0,this.pos=void 0,this.negating=!1,this.memoSafe=!0,this.pos={overallPos:0,line:1,offset:0},this.input=e}return Object(Vn.a)(t,[{key:"reset",value:function(t){this.pos=t}},{key:"finished",value:function(){return this.pos.overallPos===this.input.length}},{key:"clearMemos",value:function(){}},{key:"matchStart",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchHand(t+1,e))&&null!==n.match$EOF(e)&&(i={kind:nr.Start,hand:r}),i}))}},{key:"matchHand",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,c,a,u=null;return null!==(r=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(Xn||(Xn=Object(Un.a)(["(?:.)"],["(?:\\.)"]))),t+1,e)&&null!==(i=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(Yn||(Yn=Object(Un.a)(["(?:.)"],["(?:\\.)"]))),t+1,e)&&null!==(c=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(tr||(tr=Object(Un.a)(["(?:.)"],["(?:\\.)"]))),t+1,e)&&null!==(a=n.matchSuit(t+1,e))&&(u={kind:nr.Hand,S:r,H:i,D:c,C:a}),u}))}},{key:"matchSuit",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.loop((function(){return n.matchCard(t+1,e)}),!0))&&(i={kind:nr.Suit,cards:r}),i}))}},{key:"matchCard",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(er||(er=Object(Un.a)(["(?:[AKQJT2-9])"]))),t+1,e))&&(i=new mr(r)),i}))}},{key:"test",value:function(){var t=this.mark(),e=null!==this.matchStart(0);return this.reset(t),e}},{key:"parse",value:function(){var t=this.mark(),e=this.matchStart(0);if(e)return{ast:e,errs:[]};this.reset(t);var n=new wr;this.clearMemos(),this.matchStart(0,n);var r=n.getErr();return{ast:e,errs:null!==r?[r]:[]}}},{key:"mark",value:function(){return this.pos}},{key:"loop",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mark(),r=[];;){var i=t();if(null===i)break;r.push(i)}return e||r.length>0?r:(this.reset(n),null)}},{key:"run",value:function(t,e){var n=this.mark(),r=e();return null!==r?r:(this.reset(n),null)}},{key:"choice",value:function(t){var e,n=Object(Kn.a)(t);try{for(n.s();!(e=n.n()).done;){var r=(0,e.value)();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"regexAccept",value:function(t,e,n){var r=this;return this.run(e,(function(){var e=new RegExp(t,"y"),i=r.mark();e.lastIndex=i.overallPos;var c=r.tryConsume(e);return n&&n.record(i,c,{kind:"RegexMatch",literal:t.substring(3,t.length-1),negated:r.negating}),c}))}},{key:"tryConsume",value:function(t){var e=t.exec(this.input);if(e){for(var n=0,r=-1,i=0;i<e[0].length;++i)"\n"===e[0][i]&&(++n,r=i);return this.pos={overallPos:t.lastIndex,line:this.pos.line+n,offset:-1===r?this.pos.offset+e[0].length:e[0].length-r-1},e[0]}return null}},{key:"noConsume",value:function(t){var e=this.mark(),n=t();return this.reset(e),n}},{key:"negate",value:function(t){var e=this.mark(),n=this.negating;this.negating=!n;var r=t();return this.negating=n,this.reset(e),null===r||null}},{key:"memoise",value:function(t,e){var n=this.mark(),r=e.get(n.overallPos);if(this.memoSafe&&void 0!==r)return this.reset(r[1]),r[0];var i=t();return this.memoSafe&&e.set(n.overallPos,[i,this.mark()]),i}},{key:"match$EOF",value:function(t){var e=this.finished()?{kind:nr.$EOF}:null;return t&&t.record(this.mark(),e,{kind:"EOF",negated:this.negating}),e}}]),t}();var jr,Or,vr,yr,gr,Sr,kr,xr=function(){function t(e,n){Object(Qn.a)(this,t),this.pos=void 0,this.expmatches=void 0,this.pos=e,this.expmatches=Object(d.a)(n)}return Object(Vn.a)(t,[{key:"toString",value:function(){return"Syntax Error at line ".concat(this.pos.line,":").concat(this.pos.offset,". Expected one of ").concat(this.expmatches.map((function(t){return"EOF"===t.kind?" EOF":" ".concat(t.negated?"not ":"","'").concat(t.literal,"'")})))}}]),t}(),wr=function(){function t(){Object(Qn.a)(this,t),this.mxpos={overallPos:-1,line:-1,offset:-1},this.regexset=new Set,this.pmatches=[]}return Object(Vn.a)(t,[{key:"record",value:function(t,e,n){null===e!==n.negated&&(t.overallPos>this.mxpos.overallPos&&(this.mxpos=t,this.pmatches=[],this.regexset.clear()),this.mxpos.overallPos===t.overallPos&&("RegexMatch"===n.kind?(this.regexset.has(n.literal)||this.pmatches.push(n),this.regexset.add(n.literal)):this.pmatches.push(n)))}},{key:"getErr",value:function(){return-1!==this.mxpos.overallPos?new xr(this.mxpos,this.pmatches):null}}]),t}(),Cr=function(t){return Object(o.pipe)(_,u.m.map(function(t){return function(e){return Object(o.pipe)(t[e].cards,u.m.map((function(t){return{suit:e,rank:E.decode(t.rank).right}})))}}(t)),u.m.flatten,u.q.fromReadonlyArray(L))},_r=function(t){return new br(t).parse()},Ar={encode:Object(o.flow)(G,u.p.toReadonlyArray,u.m.sort($()),u.m.map(Object(o.flow)(u.r.snd,u.m.sort(M),u.m.reduce("",(function(t,e){return t+E.encode(e)})))),u.m.intersperse("."),u.m.foldMap(u.w.Monoid)(o.identity))},Rr=function(t){return Object(o.pipe)(t,u.o.fromReadonlyArray,u.i.fold(Object(o.constant)(An.a(null,"No syntax errors reported")),u.o.foldMap(Gn.getSemigroup())((function(t){var e=Object(c.a)(t,2),n=e[0],r=e[1];return Gn.of(Wn.key(n,"required",Gn.of(Wn.index(r.pos.offset,"required",Object(o.pipe)(r.expmatches,u.o.fromReadonlyArray,u.i.fold(Object(o.constant)(Gn.of(Wn.leaf(n,""))),u.o.foldMapWithIndex(Gn.getSemigroup())((function(t,e){return Gn.of(Wn.leaf(n.substring(r.pos.offset),"EOF"===e.kind?"EOF":"".concat(e.negated?"not ":"","'").concat(e.literal,"'")))}))))))))}))))},Br=function(t){return u.d.fromNullable(t.errs)(t.ast)},Pr=function(t){return Object(o.pipe)(An.c,An.b((function(e){return Object(o.pipe)(e,t,Br,u.d.mapLeft(Object(o.flow)(u.m.map((function(t){return[e,t]})),Rr)))})))},Er=Object(o.flow)(Pr(dr).decode,u.d.map((function(t){return function(t){var e;return{bid:hr(t.bid),constraint:Object(o.pipe)(null===(e=t.constraints)||void 0===e?void 0:e.constraints,u.i.fromNullable,u.i.fold(Rt,pr))}}(t.spec)}))),Fr=Object(o.flow)(Pr(_r).decode,u.d.map((function(t){return Cr(t.hand)}))),Nr=n(303),Mr=n.n(Nr),qr=n(304),Dr=n.n(qr),Tr=n(600),Lr=n(65),Hr=n(601),Ir=Math.max(window.navigator.hardwareConcurrency-2,1),$r=function(t){return Object(o.pipe)(Ir,t,(function(t){return u.m.makeBy(Ir,t)}),(function(t){return Object(Lr.a)(t)}))},Wr=function(t){return Object(o.pipe)(function(t){var e=new Dr.a;return Object(o.pipe)((function(){return e.genDeals(t)}),m.a.fromTask).pipe(Object(Tr.a)())}(Math.ceil(Math.log(t))),m.a.chain((function(t){return Object(Lr.a)(t)}))).pipe(Object(Hr.a)(t))},Gr=function(t){var e=new Mr.a;return Object(o.pipe)(Object(Lr.a)(t),m.a.chain((function(t){return Object(Lr.a)(e.getResult(t))})))},Kr=function(t){return $r((function(e){var n=Math.floor(t.length/e),r=Math.floor(t.length%e);return function(i){return Gr(i===e-1?Object(o.pipe)(t,u.m.takeRight(n+r)):Object(o.pipe)(t.slice(i*n,(i+1)*n)))}}))},Ur={selectedBlockKey:u.i.none},Vr=function(t){return function(e){var n=Object(c.a)(e,2),r=n[0],i=n[1];t.opener=Object(o.pipe)(r,u.d.right,En.get,j.a),t.responder=Object(o.pipe)(i,u.d.right,En.get,j.a)}},Qr=Object(v.b)("abc",(function(t){var e=t.opener,n=t.responder;return Object(o.pipe)(function(t,e){return Object(o.pipe)(K(),u.m.difference(L)(Object(o.pipe)(t,u.q.toReadonlyArray(H))),u.m.difference(L)(Object(o.pipe)(e,u.q.toReadonlyArray(H))),u.m.chunksOf(13),u.m.map(u.q.fromReadonlyArray(L)),(function(n){var r=Object(c.a)(n,2),i=r[0],a=r[1];return{dealer:"N",deal:{N:t,S:e,E:i,W:a}}}))}(Pn.reverseGet(e),Pn.reverseGet(n)),Tn.get,u.o.of,Gr,m.a.toTask,(function(t){return t()}))})),zr=function(t){return function(e){return Object(b.tailRec)(t,(function(t){if(Object(o.pipe)(t,u.i.fold(o.constFalse,(function(t){return 0===t}))))return u.d.right(u.i.none);var n,r=(n=K(),Object(o.pipe)(U,u.o.zip(u.o.chunksOf(13)(n)),u.o.groupBy(u.r.fst),u.p.map(Object(o.flow)(u.o.head,u.r.snd,u.q.fromReadonlyArray(L))),(function(t){return t}))),i=[r.N,r.S];return e(i)?u.d.right(u.i.some(i)):u.d.left(Object(o.pipe)(t,u.i.map((function(t){return t-1}))))}))}},Jr=function(t){return function(e){return zr(u.i.some(1e4))((function(n){return Object(o.pipe)(e,u.m.partition(mn.apply(void 0,Object(d.a)(n))),u.u.right,(function(e){return t(e.length)}))}))}},Zr=Object(v.d)({name:"selection",initialState:Ur,reducers:{setSelectedBlockKey:function(t,e){t.selectedBlockKey=e.payload},setHand:{reducer:function(t,e){t[e.meta]=Object(o.pipe)(e.payload,Fr,En.get,j.a)},prepare:function(t,e){return{payload:t,meta:e}}},genOnce:function(t){Object(o.pipe)(zr(u.i.none)(o.constTrue),u.i.map(Vr(t)))},getHandsMatchingPath:function(t,e){Object(o.pipe)(zr(u.i.some(1e4))((function(t){return mn.apply(void 0,Object(d.a)(t))(e.payload)})),u.i.map(Vr(t)))},genHandsNotMatchingAnyOf:{reducer:function(t,e){Object(o.pipe)(zr(u.i.some(1e4))((function(t){return st(t[0])>=e.meta&&Object(o.pipe)(e.payload,u.m.every(u.l.not(mn.apply(void 0,Object(d.a)(t)))))})),u.i.map(Vr(t)))},prepare:function(t,e){return{payload:t,meta:e}}},genHandsMatchingExactlyOneOf:function(t,e){Object(o.pipe)(Jr((function(t){return 1===t}))(e.payload),u.i.map(Vr(t)))},genHandsMatchingMoreThanOneOf:function(t,e){Object(o.pipe)(Jr((function(t){return t>1}))(e.payload),u.i.map(Vr(t)))}},extraReducers:function(t){return t.addCase(Qr.fulfilled,(function(t,e){t.result=Object(o.pipe)(e.payload,j.a)}))}}),Xr=Zr.actions,Yr=Xr.setSelectedBlockKey,ti=Xr.setHand,ei=Xr.genOnce,ni=Xr.getHandsMatchingPath,ri=Xr.genHandsNotMatchingAnyOf,ii=Xr.genHandsMatchingExactlyOneOf,ci=Xr.genHandsMatchingMoreThanOneOf,ai=Zr.reducer,ui=Object(O.a)((function(t){return Object(o.pipe)(t.selectedBlockKey,u.i.toNullable)})),oi=Object(O.a)((function(t){var e=t.state,n=t.type;return Object(o.pipe)(e[n],u.i.fromNullable,u.i.chain(Object(o.flow)(En.reverseGet,u.i.fromEither)))})),si=n(305),li=u.w.Eq,pi=Object(v.c)(),fi={system:[],constrainedBids:pi.getInitialState()},hi=Object(v.d)({name:"system",initialState:fi,reducers:{setSystem:function(t,e){t.system=Object(o.pipe)(function(t){var e=u.z.make("ROOT"),n=[e];return t.forEach((function(t){var e=n[t.depth+1]={forest:[],value:t.key};n[t.depth].forest.push(e)})),e.forest}(e.payload),j.a)},removeConstraintsByBlockKey:function(t,e){pi.removeMany(t.constrainedBids,e.payload)},cacheSystemConstraints:function(t,e){pi.setMany(t.constrainedBids,Object(o.pipe)(e.payload,u.o.map((function(t){return{id:t.key,value:Er(t.text)}}))))}}}),di=hi.actions,mi=di.setSystem,bi=di.removeConstraintsByBlockKey,ji=di.cacheSystemConstraints,Oi=pi.getSelectors(),vi=Object(O.a)((function(t){var e=t.state,n=t.key;return Object(o.pipe)(e.system,St(li)(n))})),yi=function(t){return function(e){return Object(o.pipe)(u.i.fromNullableK(Oi.selectById)(t,e),u.i.map((function(t){return t.value})))}},gi=Object(O.a)((function(t){var e=t.state,n=t.key;return Object(o.pipe)(n,yi(e.constrainedBids),u.i.chain(u.i.fromEither))})),Si=Object(O.a)((function(t){var e=t.state,n=t.key;return Object(o.pipe)(e.system,St(li)(n),u.i.getOrElse((function(){return u.m.zero()})),u.m.filterMap(yi(e.constrainedBids)),u.m.sequence(u.d.Applicative))})),ki=Object(O.a)((function(t){return Object(o.pipe)(t.system,kt,u.m.filterMap(yi(t.constrainedBids)))})),xi=Object(O.a)(Object(o.flow)(ki,u.m.lefts)),wi=function(t){return u.m.filterMap(Object(o.flow)(u.z.traverse(u.i.Applicative)(Object(o.flow)(yi(t),u.i.chain(u.i.fromEither)))))},Ci=Object(O.a)((function(t){var e=t.state,n=t.key;return Object(o.pipe)(e.system,St(li)(n),u.i.chain((function(t){return Object(o.pipe)(u.z.unfoldTree(t,(function(t){var e=Object(si.a)(t),n=e[0],r=e.slice(1);return[n,0===r.length?[]:[r]]})),u.m.of,wi(e.constrainedBids),Ct,xt,u.m.head)})))})),_i=Object(O.a)((function(t){var e=t.state,n=t.options;return Object(o.pipe)(e.system,wi(e.constrainedBids),(null===n||void 0===n?void 0:n.implicitPass)?_t:o.identity,Ct)})),Ai=Object(O.a)(Object(o.flow)(_i,xt)),Ri=Object(O.a)(Object(o.flow)(_i,(function(t){return Object(o.pipe)(t,vn,u.d.chain((function(){return function(t){return Object(o.pipe)(t,xt,u.m.traverse(u.d.Applicative)(_n),u.d.map(o.constVoid))}(t)})))}))),Bi=hi.reducer,Pi=n(6),Ei=function(t){return{key:t.getKey(),text:t.getText(),depth:t.getDepth()}},Fi=u.g.concatAll(u.f.getMonoid())([u.f.contramap((function(t){return t.getKey()}))(u.w.Eq),u.f.contramap((function(t){return t.getText()}))(u.w.Eq)]),Ni=function(t){return Object(o.pipe)(t.getCurrentContent().getBlocksAsArray(),u.q.fromReadonlyArray(Fi))},Mi=function(){var t=Object(s.useState)((function(){return a.EditorState.createEmpty()})),e=Object(c.a)(t,2),n=e[0],r=e[1],i=Object(s.useState)((function(){return Ni(n)})),l=Object(c.a)(i,2),p=l[0],d=l[1],m=f(),b=h((function(t){return ui(t.selection)})),j=Object(s.useCallback)((function(t){r(t),setTimeout((function(){return localStorage.setItem("editor",JSON.stringify(Object(a.convertToRaw)(t.getCurrentContent())))}),0);var e=Ni(t),n=u.q.intersection(Fi)(p,e),i=u.q.difference(Fi)(p,n),c=u.q.difference(Fi)(e,n);d(e),u.q.isEmpty(u.g.concatAll(u.q.getUnionMonoid(Fi))([i,c]))||(m(Object(o.pipe)(e,u.q.toReadonlyArray(u.k.trivial),u.m.map(Ei),mi)),Object(o.pipe)(i,u.q.toReadonlyArray(u.k.trivial),u.o.fromReadonlyArray,u.i.map(Object(o.flow)(u.o.map((function(t){return t.getKey()})),(function(t){return m(bi(t))})))),Object(o.pipe)(c,u.q.toReadonlyArray(u.k.trivial),u.o.fromReadonlyArray,u.i.map(Object(o.flow)(u.o.map(Ei),(function(t){return m(ji(t))})))));var s=t.getSelection().getFocusKey();s!==b&&m(Yr(u.i.some(s)))}),[p,m,b]);return Object(s.useEffect)((function(){var t=localStorage.getItem("editor");r(t?function(){return a.EditorState.createWithContent(Object(a.convertFromRaw)(JSON.parse(t)))}:function(){return a.RichUtils.toggleBlockType(n,"unordered-list-item")})}),[]),Object(Pi.jsx)(a.Editor,{editorState:n,onChange:j,keyBindingFn:function(t){if(9===t.keyCode){var e=a.RichUtils.onTab(t,n,10);return e!==n&&j(e),null}return Object(a.getDefaultKeyBinding)(t)}})},qi=n(164),Di=n.n(qi),Ti=n(604),Li=n(19),Hi=n(602),Ii=n(603),$i=n(606),Wi=n(105),Gi=function(t){return Object(o.pipe)(Y,u.m.elem(Z)(t))?20:30},Ki=function(t){switch(t){case"Undoubled":return 1;case"Doubled":return 2;case"Redoubled":return 4;default:return g(t)}},Ui=function(t){return t-6},Vi=function(t,e){return Object(o.pipe)(e,Ui,u.d.fromPredicate((function(e){return e>=t.level}),(function(e){return t.level-e})))},Qi=Object(o.flow)(Vi,u.i.fromEither),zi=function(t){return function(e){return Object(o.pipe)(Qi(e.contract,e.tricks),u.i.fold(Object(o.constant)(0),t))}},Ji=function(t){return Object(o.pipe)(t,zi((function(){return Ki(t.contract.modifier)*(t.contract.level*Gi(t.contract.strain)+("N"===t.contract.strain?10:0))})))},Zi=function(t){return 50*(t?2:1)},Xi=function(t){return"Undoubled"===t?u.i.none:u.i.some(t)},Yi=[100,200,200].concat(Object(d.a)(u.m.replicate(10,300))),tc=Object(o.flow)(Ji,(function(t){return t>0&&t<=100?50:0})),ec={contractPoints:Ji,overtrickPoints:function(t){return Object(o.pipe)((e=t.contract,n=t.tricks,Object(o.pipe)(Vi(e,n),u.i.fromEither,u.i.map((function(t){return t-e.level})))),u.i.fold(Object(o.constant)(0),(function(e){return Object(o.pipe)((n=t.isVulnerable,r=t.contract.modifier,Object(o.pipe)(r,Xi,u.i.map(Ki),u.i.map((function(t){return t*Zi(n)})))),u.i.getOrElseW((function(){return Gi(t.contract.strain)})),(function(t){return e*t}));var n,r})));var e,n},slamPoints:function(t){return Object(o.pipe)(t,zi((function(e){return(t.isVulnerable?1.5:1)*(6===t.contract.level&&e>=6?500:7===t.contract.level&&e>=7?1e3:0)})))},modifierPoints:function(t){return Object(o.pipe)(t,zi((function(){switch(t.contract.modifier){case"Undoubled":return 0;case"Doubled":return 50;case"Redoubled":return 100;default:return g(t.contract.modifier)}})))},penaltyPoints:function(t){return Object(o.pipe)((e=t.contract,n=t.tricks,Object(o.pipe)(Vi(e,n),u.d.swap,u.i.fromEither)),u.i.fold(Object(o.constant)(0),(function(e){return Object(o.pipe)(t.contract.modifier,Xi,u.i.fold((function(){return e*Zi(t.isVulnerable)}),Object(o.flow)(Ki,(function(n){return n/2*Object(o.pipe)(Yi,u.m.takeLeft(e+(t.isVulnerable?1:0)),u.m.foldMap(u.h.MonoidSum)(o.identity))}))),(function(t){return-t}))})));var e,n},partScorePoints:tc,gamePoints:function(t){return Object(o.pipe)(t,Ji,(function(e){return e>=100?t.isVulnerable?500:300:0}))}},nc=w.b(w.c,(function(t){return"number"===typeof t}),"Score"),rc=(nc.decode(0).right,u.h.Eq,Object(o.pipe)(u.h.Ord,u.k.reverse),Object(o.flow)((function(t){return Object(o.pipe)(ec,u.p.flap(t),u.p.traverseWithIndex(u.A.getApplicative(u.m.getMonoid()))((function(t,e){return Object(o.pipe)(u.A.tell([[t,e]]),u.A.map(Object(o.constant)(e)))})),u.A.map(Object(o.flow)(u.p.foldMap(u.k.trivial)(u.h.MonoidSum)(o.identity),nc.decode,(function(t){return t.right}))),u.A.map((function(t){return[t,function(e){return[["TOTAL",t]].concat(Object(d.a)(e))}]})),u.A.pass)}),u.A.evaluate),function(t){return Object(o.pipe)(u.m.Do,u.m.apS("inner",Object(o.pipe)(t,u.p.toReadonlyArray)),u.m.bind("outer",(function(t){var e=t.inner;return Object(o.pipe)(e[1],u.p.toReadonlyArray)})),u.m.map((function(t){var e=t.outer,n=t.inner;return{outerKey:e[0],innerKey:n[0],value:e[1]}})))}),ic=function(t){return Object(o.pipe)(t,rc,u.o.fromReadonlyArray,u.i.fold((function(){return{}}),u.o.groupBy((function(t){return t.outerKey}))),u.p.map(Object(o.flow)(u.o.fromReadonlyArray,u.i.fold((function(){return{}}),u.o.groupBy((function(t){return t.innerKey}))),u.p.map((function(t){return t[0].value})))))},cc=Object(o.pipe)(at,u.m.sort(ct),u.m.prepend("Pass")),ac=(k(cc),x(cc),{encode:Object(o.flow)(u.p.foldMapWithIndex(u.k.trivial)(u.m.getMonoid())((function(t,e){return Object(o.pipe)(e,u.q.toReadonlyArray(u.k.trivial),u.m.map((function(e){return[e,U.indexOf(t)]})))})),u.m.sort(u.k.contramap((function(t){return t[0]}))(H)),u.m.map(u.r.snd),u.m.chunksOf(4),u.m.map(u.m.reduce(0,(function(t,e){return(t<<2)+e}))),u.m.concat(u.m.replicate(3,0)),u.m.toArray,(function(t){return new Bn.Uuid(t)}))}),uc="https://api.contractbridge.app",oc=function(t){return u.y.tryCatchK(t,u.d.toError)()},sc=Object(o.pipe)((function(){return fetch("".concat(uc,"/ping"))}),oc,u.y.chainTaskK((function(t){return function(){return t.text()}})),u.y.filterOrElse((function(t){return"pong"===t}),(function(){return new Error("'pong' was not received")}))),lc=u.m.foldMap(u.p.getUnionMonoid(u.t.first()))((function(t){var e=Object(c.a)(t,2),n=e[0],r=e[1];return Object(Li.a)({},ac.encode(n).toString(),Object(o.pipe)(n,u.p.mapWithIndex((function(t,e){return{hcp:st(e),shape:bt(e),tricks:Object(o.pipe)(r,u.i.map((function(e){return e[t]})),u.i.toUndefined)}}))))})),pc=Object(o.flow)(u.m.map((function(t){return[t,u.i.none]})),lc),fc=function(t){return Object(o.pipe)(t,pc,JSON.stringify,u.x.of,u.x.chain((function(t){return function(){return fetch("".concat(uc,"/deals"),{method:"POST",body:t})}})),oc)},hc=function(t){return Object(o.pipe)(t,lc,JSON.stringify,u.x.of,u.x.chain((function(t){return function(){return fetch("".concat(uc,"/deals"),{method:"PUT",body:t})}})),oc)},dc=function(t){return[t,0]},mc=function(t){return function(e){return function(n){return function(r){return Object(o.pipe)(r,u.r.bimap((function(t){return t-e}),(function(e){return t.concat(e,n)})))}}}},bc={deals:dc([]),results:dc({}),working:!1},jc=Object(v.d)({name:"generator",initialState:bc,reducers:{generate:function(t,e){t.deals=Object(o.pipe)(t.deals,u.r.mapSnd(Object(o.constant)(e.payload)),j.a),t.working=!0},getResults:function(t,e){t.results=Object(o.pipe)(t.results,u.r.mapSnd(Object(o.constant)(e.payload.deals.length)),j.a),t.working=!0},reportDeals:function(t,e){t.deals=Object(o.pipe)(t.deals,mc(u.m.getSemigroup())(e.payload.length)(e.payload),j.a)},reportResults:function(t,e){t.results=Object(o.pipe)(t.results,mc(u.p.getUnionSemigroup(u.o.getSemigroup()))(Object(o.pipe)(e.payload,u.p.toReadonlyArray,u.m.foldMap(u.h.MonoidSum)((function(t){var e=Object(c.a)(t,2);e[0];return e[1].length}))))(e.payload),j.a)},done:function(t){t.working=!1}}}),Oc=jc.actions,vc=Oc.generate,yc=Oc.getResults,gc=Oc.reportDeals,Sc=Oc.reportResults,kc=Oc.done,xc=jc.reducer,wc=Object(O.a)((function(t){return Object(o.pipe)(t.deals,u.r.fst)})),Cc=(Object(O.a)(Object(o.flow)(wc,u.m.map(Object(o.flow)(Dn.reverseGet,(function(t){return[t.N,t.S]}))))),Object(O.a)((function(t){return{deals:t.deals[1],results:t.results[1]}}))),_c=Object(O.a)((function(t){var e=t.state,n=t.path;return Object(o.pipe)(e.results[0],u.p.lookup(n),u.i.toNullable)})),Ac=Object(v.d)({name:"settings",initialState:{implicitPass:!1,generateCount:1e4},reducers:{setInitial:function(t,e){Object(o.pipe)(Object.keys(e.payload),u.m.map((function(n){return t[n]=e.payload[n]})))},setProperty:{reducer:function(t,e){t[e.meta]=e.payload},prepare:function(t,e){return{payload:e,meta:t}}}}}),Rc=Ac.actions,Bc=Rc.setProperty,Pc=Rc.setInitial,Ec={system:Bi,selection:ai,generator:xc,settings:Ac.reducer},Fc=Object(Ti.a)((function(t,e){return t.pipe(Object(Hi.a)(vc.match),m.a.map((function(t){return t.payload})),m.a.chain(Object(o.flow)((function(t){return t>Ir?Object(o.pipe)(function(t){return $r((function(e){var n=Math.floor(t/e),r=Math.floor(t%e);return function(t){return Wr(0===t?n+r:n)}}))}(t),m.a.flatten):Wr(t)}),Object(Ii.a)(1e3),m.a.map(gc),Object($i.a)([kc()]))))}),(function(t,e){return t.pipe(Object(Hi.a)(yc.match),m.a.chain((function(t){return Object(o.pipe)(t.payload.deals,u.m.mapWithIndex((function(t,e){return Object(o.pipe)(e,Dn.reverseGet,(n=t+1,function(t){return{number:n,dealer:U[(n-1)%U.length],deal:t,vulnerability:tt(n)}}),Tn.get);var n})),u.o.fromReadonlyArray,u.i.fold((function(){return Object(Lr.a)([])}),(function(e){return t.payload.deals.length>Ir?Object(o.pipe)(e,Kr,m.a.flatten):Object(o.pipe)(e,Gr)})),Object(Ii.a)(5),m.a.map(Object(o.flow)(u.o.fromReadonlyArray,u.i.fold((function(){return Sc({})}),(function(e){return Object(o.pipe)(t.payload.path,u.o.map((function(t){return t.bid})),$n.get,(function(t){return Sc(Object(Li.a)({},t,e))}))})))),Object($i.a)([kc()]))})))}),(function(t,e){return t.pipe(Object(Hi.a)(gc.match),m.a.map((function(t){return t.payload})),m.b.fromObservable,m.b.chainFirst((function(){return Object(o.pipe)(sc,m.b.fromTaskEither)})),m.b.chainFirst(Object(o.flow)(u.m.map(Dn.reverseGet),fc,m.b.fromTaskEither)),m.a.chain((function(t){return Wi.a})))}),(function(t,e){return t.pipe(Object(Hi.a)(Sc.match),m.a.map((function(t){return t.payload})),m.b.fromObservable,m.b.chainFirst((function(){return Object(o.pipe)(sc,m.b.fromTaskEither)})),m.b.chainFirst(Object(o.flow)(u.p.toReadonlyArray,u.m.chain(u.r.snd),u.m.map((function(t){return[Dn.reverseGet(t.board.deal),Object(o.pipe)(t.results,ic,u.i.some)]})),hc,m.b.fromTaskEither)),m.a.chain((function(t){return Wi.a})))})),Nc=function(t){return Object(o.pipe)(u.i.Do,u.i.apS("key",t.selection.selectedBlockKey),u.i.apS("opener",oi({state:t.selection,type:"opener"})),u.i.apS("responder",oi({state:t.selection,type:"responder"})),u.i.chain((function(e){return Object(o.pipe)(Si({state:t.system,key:e.key}),u.i.fromEither,u.i.chain(u.o.fromReadonlyArray),u.i.map((n=e.opener,r=e.responder,Object(o.flow)(u.o.map((function(t){return Object(y.a)(Object(y.a)({},t),{},{siblings:[]})})),mn(n,r)))));var n,r})),u.i.toNullable)},Mc=Object(O.a)((function(t){return Object(o.pipe)(u.i.Do,u.i.apS("opener",oi({state:t.selection,type:"opener"})),u.i.apS("responder",oi({state:t.selection,type:"responder"})),u.i.map((function(e){return Object(o.pipe)(Ai({state:t.system,options:t.settings}),u.m.map((function(t){return{path:t,result:mn(e.opener,e.responder)(t)}})))})),u.i.toNullable)})),qc=Object(o.pipe)(u.h.Ord,u.k.reverse,u.k.contramap((function(t){return t.count}))),Dc=Object(O.a)((function(t){return Object(o.pipe)(u.m.Do,u.m.apS("deal",wc(t.generator)),u.m.apS("path",Ai({state:t.system,options:t.settings})),u.m.map((function(t){return{deal:t.deal,path:t.path,result:Object(o.pipe)(t.deal,Dn.reverseGet,(function(t){return mn(t.N,t.S)}))(t.path)}})),u.o.fromReadonlyArray,u.i.map(Object(o.flow)(u.o.groupBy((function(t){return Object(o.pipe)(t.path,u.o.map((function(t){return t.bid})),$n.get)})),u.p.filterMap(Object(o.flow)(u.o.filter((function(t){return t.result})),u.i.map((function(t){return{path:t[0].path,count:t.length,deals:Object(o.pipe)(t,u.o.map((function(t){return t.deal})))}})))),u.p.toReadonlyArray,u.m.map(u.r.snd),u.m.sort(qc))),u.i.toNullable)})),Tc=function(){var t=h((function(t){return t.selection.selectedBlockKey})),e=h((function(e){return Object(o.pipe)(t,u.i.chain((function(t){return vi({state:e.system,key:t})})),u.i.toNullable)})),n=h((function(e){return Object(o.pipe)(t,u.i.chain((function(t){return gi({state:e.system,key:t})})),u.i.toNullable)})),r=h(Nc);return Object(Pi.jsxs)("section",{children:[Object(Pi.jsx)("h3",{children:"Selection"}),e&&Object(Pi.jsxs)("div",{children:[Object(Pi.jsx)("h4",{children:"Selected Path"}),e.map((function(t){return t})).join(" > ")]}),n&&Object(Pi.jsxs)("div",{children:[Object(Pi.jsx)("h4",{children:"Selected Bid"}),Object(Pi.jsx)(Di.a,{data:n}),null!==r&&Object(Pi.jsxs)("div",{children:[Object(Pi.jsx)("h4",{children:"Satisfies"}),r.toString()]})]})]})},Lc=function(t){var e=t.label,n=t.prop,r=t.parse,i=t.onChanged,c=t.children,a=h((function(t){return t.settings[n]})),u=f(),l=Object(s.useCallback)((function(t){u(Bc(n,t)),i&&i(t)}),[u,i,n]);return Object(Pi.jsxs)("p",{children:[Object(Pi.jsx)("span",{children:null!==e&&void 0!==e?e:n}),Object(Pi.jsx)("span",{children:c?c({value:a,onChange:Object(o.flow)(r,l,o.constVoid)}):Object(Pi.jsx)("input",{type:"text",value:a.toString(),onChange:function(t){return Object(o.pipe)(t.target.value,r,l)},style:{width:"100px"}})})]})},Hc="settings",Ic=function(){var t=h((function(t){return t.settings})),e=f();Object(s.useEffect)((function(){var t=localStorage.getItem(Hc);if(null!==t){var n=JSON.parse(t);e(Pc(n))}}),[e]);var n=Object(s.useCallback)((function(e,n){var r=Object(y.a)(Object(y.a)({},t),{},Object(Li.a)({},e,n));localStorage.setItem(Hc,JSON.stringify(r))}),[t]);return Object(Pi.jsxs)("section",{children:[Object(Pi.jsx)(Lc,{label:"Implicit Pass",prop:"implicitPass",parse:function(t){return"true"===t},onChanged:function(t){return n("implicitPass",t)},children:function(t){var e=t.value,n=t.onChange;return Object(Pi.jsx)("input",{type:"checkbox",checked:e,onChange:function(t){return n(t.target.checked.toString())}})}}),Object(Pi.jsx)(Lc,{label:"Generate Count",prop:"generateCount",parse:parseInt,onChanged:function(t){return n("generateCount",t)}})]})},$c=n(165),Wc=n(166),Gc=n(143),Kc=Rn.f((function(t){var e=Object(c.a)(t,2);return e[0]+e[1]}),(function(t){return[t.charAt(0),t.charAt(1)]})),Uc=Object(o.pipe)(Object(Gc.sequenceT)(u.o.Apply)(U,J),u.o.map(Kc.get)),Vc=Object(o.flow)(u.m.map((function(t){return Object(o.pipe)(t,rc,u.m.map((function(t){var e=t.outerKey,n=t.innerKey,r=t.value;return["".concat(e).concat(n),r]})),u.p.fromFoldable(u.t.first(),u.m.Foldable))})),Wc.a),Qc=function(t){return function(e){return Object(o.pipe)(Uc,u.o.groupBy((function(t){return t})),u.p.map((function(e){return t(e)})),(function(t){return e.rollup(t)}),(function(t){return t.object()}),u.p.toReadonlyArray,u.m.map(u.r.mapFst(Kc.reverseGet)),u.o.fromReadonlyArray,u.i.fold((function(){return{}}),Object(o.flow)(u.o.groupBy((function(t){var e=Object(c.a)(t,2),n=Object(c.a)(e[0],2),r=(n[0],n[1]);e[1];return r})),u.p.map(Object(o.flow)(u.o.groupBy((function(t){var e=Object(c.a)(t,2),n=Object(c.a)(e[0],2),r=n[0];n[1],e[1];return r})),u.p.map(Object(o.flow)(u.o.head,(function(t){var e=Object(c.a)(t,2);e[0];return e[1]}))))))))}},zc=Qc(Wc.b.mean),Jc=Qc(Wc.b.stdev),Zc=n(68),Xc=Zc.a.span(jr||(jr=Object(Un.a)(['\n  &.S::after { content: "\u2660"; color: #0000FF; }\n  &.H::after { content: "\u2665"; color: #FF0000; }\n  &.D::after { content: "\u2666"; color: #FFA500; }\n  &.C::after { content: "\u2663"; color: #32CD32; }\n  &.N::after { content: "NT" }\n']))),Yc=function(t){return Object(Pi.jsxs)(Pi.Fragment,{children:[Object(Pi.jsx)("span",{children:t.level}),Object(Pi.jsx)(Xc,{className:t.strain})]})},ta=function(t){var e=t.bid;return Object(Pi.jsx)("span",{children:e})},ea=function(t){var e=t.path;return Object(Pi.jsx)(Pi.Fragment,{children:e.map((function(t){return t.bid})).map((function(t,e){return Object(Pi.jsxs)(s.Fragment,{children:["\xa0","string"===typeof t?Object(Pi.jsx)(ta,{bid:t}):Object(Pi.jsx)(Yc,Object(y.a)({},t))]},e)}))})},na=Zc.a.ol(Or||(Or=Object(Un.a)(["\n  padding-left: 0;\n"]))),ra=Zc.a.li(vr||(vr=Object(Un.a)(["\n  list-style-type: none;\n  display: inline;\n  float: left;\n"]))),ia=function(t){var e=t.rank;return Object(Pi.jsx)(ra,{children:B[e-2]})},ca=Zc.a.ol(yr||(yr=Object(Un.a)(["\n  white-space: nowrap;\n  width: 15em;\n  margin: 0;\n  padding-left: 0;\n  list-style: decimal url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) inside;\n"]))),aa=Zc.a.li(gr||(gr=Object(Un.a)(["\n  display: inline;\n  &::before {\n    display: inline;\n    float: left;\n    margin-left: 5px;\n  }\n  ","\n"])),'\n  &.S::before { content: "\u2660"; color: #0000FF }\n  &.H::before { content: "\u2665"; color: #FF0000 }\n  &.D::before { content: "\u2666"; color: #FFA500 }\n  &.C::before { content: "\u2663"; color: #32CD32 }\n'),ua=function(t){var e=t.suit,n=t.ranks;return Object(Pi.jsx)(aa,{className:e,children:Object(Pi.jsxs)(na,{children:[n.map((function(t,e){return Object(Pi.jsx)(ia,{rank:t},e)})),0===n.length&&Object(Pi.jsx)(ra,{children:"-"})]})})},oa=function(t){var e=t.hand,n=G(e);return Object(Pi.jsx)(ca,{children:Object(o.pipe)(n,u.p.mapWithIndex((function(t,e){return Object(Pi.jsx)(ua,{suit:t,ranks:e},t)})),u.p.toReadonlyArray,u.m.sort($()),u.m.map(u.r.snd))})},sa=Zc.a.span(Sr||(Sr=Object(Un.a)(["\n  ",'\n  &.N::before { content: "NT"; color: #000000; font-size: 12px; }\n'])),'\n  &.S::before { content: "\u2660"; color: #0000FF }\n  &.H::before { content: "\u2665"; color: #FF0000 }\n  &.D::before { content: "\u2666"; color: #FFA500 }\n  &.C::before { content: "\u2663"; color: #32CD32 }\n'),la=function(t){var e=t.table;return Object(Pi.jsxs)("table",{children:[Object(Pi.jsx)("thead",{children:Object(Pi.jsxs)("tr",{children:[Object(Pi.jsx)("th",{}),J.map((function(t,e){return Object(Pi.jsx)("th",{style:{fontWeight:"normal",verticalAlign:"middle"},children:Object(Pi.jsx)(sa,{className:t})},e)}))]})}),Object(Pi.jsx)("tbody",{children:U.map((function(t,n){return Object(Pi.jsxs)("tr",{children:[Object(Pi.jsx)("td",{children:t}),J.map((function(n,r){return Object(Pi.jsx)("td",{children:Math.round(100*e[n][t])/100},r)}))]},n)}))})]})},pa=function(t){var e=t.result;return Object(Pi.jsxs)("table",{children:[Object(Pi.jsx)("thead",{children:Object(Pi.jsxs)("tr",{children:[Object(Pi.jsx)("th",{}),J.map((function(t,e){return Object(Pi.jsx)("th",{style:{fontWeight:"normal",verticalAlign:"middle"},children:Object(Pi.jsx)(sa,{className:t})},e)}))]})}),Object(Pi.jsx)("tbody",{children:U.map((function(t,n){return Object(Pi.jsxs)("tr",{children:[Object(Pi.jsx)("td",{children:t}),J.map((function(n,r){return Object(Pi.jsx)("td",{children:e.results[n][t]},r)})),Object(Pi.jsx)("td",{children:Object(Pi.jsx)(oa,{hand:Dn.reverseGet(e.board.deal)[t]})})]},n)}))})]})},fa=function(t){var e=t.result,n=f(),r=h((function(t){return Object(o.pipe)(e.path,u.o.map((function(t){return t.bid})),$n.get,(function(e){return _c({state:t.generator,path:e})}))})),i=r&&Vc(Object(o.pipe)(r,u.o.map((function(t){return t.results})))),c=i&&zc(i),a=i&&Jc(i);return Object(Pi.jsxs)(Pi.Fragment,{children:[Object(Pi.jsx)(ea,{path:e.path}),": \xa0",Object(Pi.jsx)("span",{children:e.count.toString()}),null!==c&&Object(Pi.jsxs)("section",{children:[Object(Pi.jsx)("h4",{children:"Average"}),null!==c&&Object(Pi.jsx)(la,{table:c})]}),null!==a&&Object(Pi.jsxs)("section",{children:[Object(Pi.jsx)("h4",{children:"Std. Dev."}),Object(Pi.jsx)(la,{table:a})]}),null===r&&Object(Pi.jsx)("button",{onClick:function(t){return n(yc({path:e.path,deals:e.deals}))},children:"DDS"})]})},ha=function(){var t=h(Dc);return Object(Pi.jsx)(Pi.Fragment,{children:null!==t&&Object(Pi.jsxs)("div",{children:[Object(Pi.jsx)("h3",{children:"Results"}),Object(Pi.jsx)("ul",{children:t.map((function(t,e){return Object(Pi.jsx)("li",{children:Object(Pi.jsx)(fa,{result:t})},e)}))})]})})},da=function(){var t=h((function(t){return Cc(t.generator)}));return Object(Pi.jsxs)("div",{children:[Object(Pi.jsxs)("p",{children:["Deals: ",t.deals," remaining"]}),Object(Pi.jsxs)("p",{children:["Results: ",t.results," remaining"]})]})},ma=function(){var t=h((function(t){return Object(o.pipe)(t.generator.working)})),e=h((function(t){return t.settings.generateCount})),n=f(),r=h((function(t){return Ai({state:t.system,options:t.settings})})),i=h((function(t){return xi(t.system)})),c=h((function(t){return Ri({state:t.system,options:t.settings})})),a=null!==r&&r.length>0&&0===i.length&&u.d.isRight(c);return Object(Pi.jsxs)("section",{children:[Object(Pi.jsx)("h3",{children:"Stats"}),!a&&Object(Pi.jsxs)("div",{children:[Object(Pi.jsx)("p",{children:"Select the system and/or fix errors"}),null===r&&Object(Pi.jsx)("p",{children:"No complete rules found or system not selected"}),u.d.isLeft(c)&&Object(Pi.jsx)("p",{children:"System is not valid"}),i.length>0&&Object(Pi.jsxs)("div",{children:[Object(Pi.jsx)("h4",{children:"Errors"}),Object(Pi.jsx)("ul",{children:i.map((function(t,e){return Object(Pi.jsx)("li",{children:Object(Pi.jsx)("pre",{children:Object($c.draw)(t)})},e)}))})]})]}),a&&Object(Pi.jsxs)("div",{children:[Object(Pi.jsx)("button",{type:"button",onClick:function(){return n(vc(e))},children:"Generate deals"}),t?Object(Pi.jsx)("span",{children:"Generating..."}):Object(Pi.jsx)("span",{children:"Ready!"}),t&&Object(Pi.jsx)(da,{}),!t&&Object(Pi.jsx)(ha,{})]})]})},ba=function(t){var e=t.value,n=t.children,r=t.onNone;return Object(o.pipe)(e,u.i.fold((function(){return r?r():Object(Pi.jsx)(Pi.Fragment,{})}),n))},ja=function(){var t=f();return Object(Pi.jsx)("button",{type:"button",onClick:function(){return t(ei())},children:"Random"})},Oa=function(t){var e=t.bidPaths,n=f(),r=Object(s.useState)(11),i=Object(c.a)(r,2),a=i[0],u=i[1];return Object(Pi.jsx)(Pi.Fragment,{children:e&&Object(Pi.jsxs)("span",{children:[Object(Pi.jsx)("button",{type:"button",onClick:function(){return n(ri(e,a))},children:"Zero"}),"Min HCP",Object(Pi.jsx)("input",{type:"number",style:{width:50},value:a,onChange:function(t){return u(parseInt(t.target.value))}})]})})},va=function(t){var e=t.bidPaths,n=f();return Object(Pi.jsx)(Pi.Fragment,{children:e&&Object(Pi.jsx)("span",{children:Object(Pi.jsx)("button",{type:"button",onClick:function(){return n(ii(e))},children:"One"})})})},ya=function(t){var e=t.bidPaths,n=f();return Object(Pi.jsx)(Pi.Fragment,{children:e&&Object(Pi.jsx)("span",{children:Object(Pi.jsx)("button",{type:"button",onClick:function(){return n(ci(e))},children:"Many"})})})},ga=function(){var t=h((function(t){return t.selection.selectedBlockKey})),e=h((function(e){return Object(o.pipe)(t,u.i.chain((function(t){return Ci({state:e.system,key:t})})),u.i.toNullable)})),n=f();return Object(Pi.jsx)(Pi.Fragment,{children:e&&Object(Pi.jsx)("button",{type:"button",onClick:function(){return n(ni(e))},children:"Selected"})})},Sa=function(){var t=h((function(t){return Object(o.pipe)(Ai({state:t.system,options:t.settings}),u.o.fromReadonlyArray,u.i.toNullable)}));return Object(Pi.jsxs)("section",{children:[Object(Pi.jsx)("h4",{children:"Generate Hands"}),Object(Pi.jsx)(ja,{}),Object(Pi.jsx)(ga,{}),Object(Pi.jsx)(Oa,{bidPaths:t}),Object(Pi.jsx)(va,{bidPaths:t}),Object(Pi.jsx)(ya,{bidPaths:t})]})},ka=function(t){var e=t.type,n=f(),r=Object(s.useState)(""),i=Object(c.a)(r,2),a=i[0],l=i[1],p="hand.".concat(e),d=h((function(t){return Object(o.pipe)(oi({state:t.selection,type:e}),u.i.map(Ar.encode),u.i.toNullable)})),m=Object(s.useCallback)((function(t){l(t),n(ti(t,e))}),[n,e]);return Object(s.useEffect)((function(){var t=localStorage.getItem(p);t&&m(t)}),[m,p,e]),Object(Pi.jsx)("input",{type:"text",placeholder:"AKQJ.T987.654.32",value:null!==d&&void 0!==d?d:a,onChange:function(t){return m(t.target.value)},onBlur:function(){return localStorage.setItem(p,a)}})},xa=Zc.a.th(kr||(kr=Object(Un.a)(["\n  width: 15em;\n"]))),wa=function(){var t=f(),e=[h((function(t){return oi({state:t.selection,type:"opener"})})),h((function(t){return oi({state:t.selection,type:"responder"})}))],n=e[0],r=e[1],i=Object(s.useCallback)((function(){return Object(o.pipe)(u.i.Do,u.i.apS("opener",n),u.i.apS("responder",r),u.i.map(Object(o.flow)(u.p.map(Pn.get),Qr,t)),o.constVoid)}),[t,n,r]),c=h((function(t){return t.selection.result}));return Object(Pi.jsxs)(Pi.Fragment,{children:[Object(Pi.jsxs)("table",{children:[Object(Pi.jsx)("thead",{children:Object(Pi.jsxs)("tr",{children:[Object(Pi.jsx)(xa,{children:"Opener"}),Object(Pi.jsx)(xa,{children:"Responder"})]})}),Object(Pi.jsxs)("tbody",{children:[Object(Pi.jsxs)("tr",{children:[Object(Pi.jsx)("td",{children:Object(Pi.jsx)(ka,{type:"opener"})}),Object(Pi.jsx)("td",{children:Object(Pi.jsx)(ka,{type:"responder"})})]}),Object(Pi.jsxs)("tr",{children:[Object(Pi.jsx)("td",{children:Object(Pi.jsx)(ba,{value:n,children:function(t){return Object(Pi.jsx)(oa,{hand:t})}})}),Object(Pi.jsx)("td",{children:Object(Pi.jsx)(ba,{value:r,children:function(t){return Object(Pi.jsx)(oa,{hand:t})}})})]})]})]}),Object(Pi.jsx)(Sa,{}),Object(Pi.jsxs)("p",{children:[Object(Pi.jsx)("button",{type:"button",onClick:i,children:"Solution"}),c&&Object(Pi.jsx)(pa,{result:c})]})]})},Ca=function(){var t=h((function(t){return Ri({state:t.system,options:t.settings})})),e=h(Mc);return Object(Pi.jsxs)("section",{children:[Object(Pi.jsx)("h3",{children:"Test Hands"}),Object(Pi.jsx)(wa,{}),u.d.isLeft(t)&&Object(Pi.jsxs)(Pi.Fragment,{children:[Object(Pi.jsx)("h4",{children:"Validation Error"}),Object(Pi.jsx)(Di.a,{data:Object(o.pipe)(t,u.d.foldW(o.identity,o.identity))})]}),null!==e&&Object(Pi.jsxs)("div",{children:[Object(Pi.jsx)("h4",{children:"Results"}),Object(Pi.jsx)("ul",{children:e.map((function(t,e){return Object(Pi.jsxs)("li",{children:[Object(Pi.jsx)(ea,{path:t.path}),": \xa0",Object(Pi.jsx)("span",{children:t.result.toString()})]},e)}))})]})]})},_a=function(){return Object(Pi.jsxs)("div",{className:"App",children:[Object(Pi.jsxs)("div",{style:{display:"inline-block",width:"50%"},children:[Object(Pi.jsx)("div",{style:{float:"left"},children:Object(Pi.jsx)(Mi,{})}),Object(Pi.jsx)("div",{style:{float:"right",width:"300px"},children:Object(Pi.jsx)(Ic,{})}),Object(Pi.jsx)("div",{style:{clear:"both"},children:Object(Pi.jsx)(ma,{})})]}),Object(Pi.jsxs)("div",{style:{display:"inline-block",width:"50%",float:"right"},children:[Object(Pi.jsxs)("div",{style:{display:"inline-block",float:"right"},children:[Object(Pi.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/kdblocher/bridge#documentation",children:"Documentation"}),"\xa0|\xa0",Object(Pi.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/kdblocher/bridge/discussions",children:"Share ideas"}),"\xa0|\xa0",Object(Pi.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/kdblocher/bridge/issues/new",children:"Report issue"})]}),Object(Pi.jsx)(Ca,{}),Object(Pi.jsx)(Tc,{})]})]})},Aa=n(118),Ra=n.n(Aa),Ba=n(605),Pa=Object(Ba.a)(),Ea=Object(v.a)({reducer:Ec,middleware:function(t){return[].concat(Object(d.a)(t()),[Pa])}});Pa.run(Fc),Ra.a.render(Object(Pi.jsx)(l.a.StrictMode,{children:Object(Pi.jsx)(p.a,{store:Ea,children:Object(Pi.jsx)(_a,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[597,1,2]]]);
//# sourceMappingURL=main.462782cd.chunk.js.map