{"version":3,"sources":["reducers/worker/worker.ts","webpack:///./src/reducers/worker/worker.ts?9f96","serviceWorker.ts","parse/bid.peg.g.ts","model/deck.ts","parse/hand.peg.g.ts","model/bridge.ts","parse/bid.ts","parse/hand.ts","parse/index.ts","reducers/system.ts","lib/index.ts","model/constraints.ts","model/serialization.ts","reducers/selection.ts","app/hooks.ts","components/Editor.tsx","reducers/worker/index.ts","reducers/generator.ts","reducers/index.ts","components/SelectionDetails.tsx","components/core/BidPath.tsx","components/Stats.tsx","components/core/Monad.tsx","components/HandEditor.tsx","components/TestHands.tsx","components/index.tsx","app/store.ts","index.tsx"],"names":["inst","wrap","Worker","module","exports","f","this","Boolean","window","location","hostname","match","ASTKinds","Digit","literal","kind","value","parseInt","Number","Parser","input","pos","negating","memoSafe","$scope$Constraint$memo","Map","overallPos","line","offset","length","clear","$$dpth","$$cr","run","$scope$bid","$$res","matchBid","match$EOF","Start","bid","$scope$level","$scope$constraints","matchDigit","matchBidSpecifier","regexAccept","String","raw","matchConstraintList","Bid","level","constraints","choice","matchBidSpecifier_1","matchBidSpecifier_2","matchWildcard","matchSuitSpecifier","$scope$v","Wildcard","v","matchSuitSpecifier_1","matchSuitSpecifier_2","matchSuitSpecifier_3","matchMajor","matchMinor","matchStrain","Major","Minor","matchStrain_1","matchStrain_2","matchSuit","matchNotrump","matchSuit_1","matchSuit_2","matchSuit_3","matchSuit_4","matchClub","matchDiamond","matchHeart","matchSpade","Club","Diamond","Heart","Spade","Notrump","loop","matchConstraintListItem","$scope$constraint","matchConstraint","ConstraintListItem","constraint","$scope$pos","mark","memo","get","undefined","reset","$scope$oldMemoSafe","set","lastRes","lastPos","res","matchConstraint_1","matchConstraint_2","matchConstraint_3","matchConstraint_4","matchConstraint_5","matchConstraint_6","matchConstraint_7","matchConstraint_8","matchConstraint_9","matchConstraint_10","matchConstraint_11","matchConstraint_12","end","matchConst","matchOr","matchAnd","matchNot","matchDistribution","matchResponse","matchSuitRange","matchSuitComparison","matchSuitBound","matchSuitRank","matchPointRange","matchPointBound","matchConst_1","matchConst_2","matchTrue","matchFalse","True","False","$scope$left","$scope$right","Or","left","right","And","matchNot_$0","Not","matchNot_$0_1","matchNot_$0_2","$scope$lower","$scope$upper","matchNumber","PointRange","lower","upper","$scope$value","$scope$qualifier","matchBoundQualifier","PointBound","qualifier","$scope$suit","matchSuitRangeSpecifier","SuitRange","suit","SuitBound","matchSuitRangeSpecifier_1","matchSuitRangeSpecifier_2","matchSuitRangeSpecifier_3","OtherMajor","OtherMinor","$scope$op","matchSuitComparisonOperator","SuitComparison","op","matchSuitComparisonOperator_1","matchSuitComparisonOperator_2","matchSuitComparisonOperator_3","matchSuitComparisonOperator_4","matchSuitComparisonOperator_5","SuitComparisonOperator_1","SuitComparisonOperator_2","SuitComparisonOperator_3","SuitComparisonOperator_4","SuitComparisonOperator_5","matchBoundQualifier_1","matchBoundQualifier_2","matchBoundQualifier_3","matchPlus","matchMinus","matchEquals","Plus","Minus","Equals","matchDistribution_1","matchDistribution_2","matchDistribution_3","matchDistribution_4","matchDistribution_5","matchBalanced","matchSemiBalanced","matchUnbalanced","matchAnyShape","matchSpecificShape","Balanced","SemiBalanced","Unbalanced","AnyShape","$scope$S","$scope$H","$scope$D","$scope$C","SpecificShape","S","H","D","C","matchSuitRank_1","matchSuitRank_2","matchPrimary","matchSecondary","Primary","Secondary","matchResponse_1","matchResponse_2","matchResponse_3","matchResponse_4","matchForceOneRound","matchForceGame","matchForceSlam","matchRelay","ForceOneRound","ForceGame","ForceSlam","$scope$strain","Relay","strain","$scope$literal","mrk","ans","matchStart","ast","errs","rec","ErrorTracker","clearMemos","err","getErr","func","star","t","push","fn","fns","dpth","cr","reg","RegExp","lastIndex","tryConsume","record","substring","negated","exec","lineJmp","lind","i","oneg","rule","$scope$memoRes","$scope$result","et","finished","$EOF","nextRandom","SyntaxErr","expmatches","map","x","mxpos","regexset","Set","pmatches","result","att","has","add","basicShuffle","Math","random","cards","array","r","floor","suits","eqSuit","eq","eqStrict","ordSuit","pipe","number","Ord","ord","reverse","contramap","indexOf","ranks","RankB","RankC","is","validate","eqRank","ordRank","eqCard","struct","rank","ordCard","getMonoid","concat","c","RNEA","makeBy","decode","getOrdGroupedHand","zeroGroupedHand","groupHandBySuits","hand","readonlySet","toReadonlyArray","fromReadonlyArray","option","fold","flow","groupBy","readonlyRecord","union","readonlyArray","getUnionMonoid","directions","strains","d","zeroShape","apply","sequenceS","Apply","sortShape","s","sort","makeShape","counts","eqShape","getEq","Eq","zeroSpecificShape","getHandSpecificShape","readonlyNonEmptyArray","first","getHandShape","readonlyTuple","snd","suitCounts","mapWithIndex","idx","_","lookup","getOrElse","constConstraintTrue","constant","type","constConstraintFalse","getConnectiveItems","items","constraintFromAST","either","fromPredicate","connectiveFromAST","zero","eitherT","Functor","identity","suitFromAST","AST","strainFromAST","suitSpecifierFromAST","bindValueFromASTQualifier","of","filter","flatten","head","slice","min","max","string","split","parseBid","parse","Card","$scope$hand","matchHand","Hand","$scope$cards","matchCard","Suit","$scope$c","handFromAST","card","HandE","encode","reduce","cur","intersperse","foldMap","Monoid","parseHand","convertErrors","foldMapWithIndex","FS","DE","toString","parseResultToEither","fromNullable","getDecoder","parser","mapLeft","decodeBid","decodeHand","getRoot","tree","make","blockKey","text","O","none","initialState","system","pathsWithoutRoot","K","tail","getAllLeafPaths","node","paths","getSemigroup","RA","prepend","getPath","some","findFirstMap","a","append","createSlice","name","reducers","setSystem","state","action","root","parents","forEach","item","curr","depth","forest","key","buildTree","payload","castDraft","actions","getBidsFromNodes","n","compact","selectAllCompleteBidPaths","traverse","Applicative","chain","fromEitherK","sequence","selectErrors","separate","separated","assertUnreachable","Error","JSON","stringify","contextualConstraintTypes","elem","isContextualConstraint","anyP","P","getMonoidAny","allP","getMonoidAll","constraintFalse","constFalse","exists","constTrue","forall","getHcp","MonoidSum","isPointRange","range","between","isSuitRange","getSuitsToCheck","shape","suitCompare","lt","leq","equals","geq","gt","getComparator","isShape","handShape","isBalanced","isSemiBalanced","zeroContext","path","force","primarySuit","secondarySuit","contextL","Lens","fromProp","pathL","forceL","primarySuitL","secondarySuitL","contextO","Optional","fromOptionProp","quantifierT","quantifier","satisfies","traverseArray","existsT","forallT","satisfiesBasic","or","not","satisfiesContextual","recur","context","modify","splitAt","bimap","higher","gets","optionT","Do","apS","difference","otherSuit","getOrElseW","satisfiesS","ap","evaluate","alternate","opener","responder","unfold","g","val","next","done","Gen","satisfiesPath","bids","zip","boolean","MonoidAll","serializedHandL","iso","decodedSerializedHandL","reverseGet","selectedBlockKey","getHandByDirection","dir","setSelectedBlockKey","setHand","reducer","meta","prepare","genHands","deck","chunksOf","RT","fst","RS","selectHand","fromEither","useAppDispatch","useDispatch","useAppSelector","useSelector","Editor","useState","EditorState","createEmpty","editorState","setEditorState","dispatch","onChange","useCallback","localStorage","setItem","convertToRaw","getCurrentContent","getBlockMap","toArray","getKey","getText","getDepth","getItemsFromBlocks","getSelection","getFocusKey","useEffect","savedEditorState","getItem","createWithContent","convertFromRaw","RichUtils","toggleBlockType","keyBindingFn","e","keyCode","newEditorState","onTab","getDefaultKeyBinding","makeGenDealsTask","count","genDeals","maxProcessors","navigator","hardwareConcurrency","createAsyncThunk","handsPerWorker","remainder","task","sequenceArray","deals","generating","extraReducers","builder","addCase","pending","fulfilled","deal","rejected","selection","generator","selectHandsSatisfySelectedPath","o","selectBidsByKey","toNullable","selectPathsSatisfyHands","ordStats","selectSatisfyStats","selectAllDeals","ra","p","b","SelectionDetails","selected","selectPathByKey","last","selectNodeByKey","join","SuitSpan","styled","span","BidPath","className","Stats","rules","errors","showGenerate","stats","setCount","draw","onClick","target","Option","onSuccess","children","onNone","HandInput","setValue","storageKey","encodedHand","onSetHand","savedHand","placeholder","onBlur","RankList","ol","RankListItem","li","Rank","Deck","HandCol","th","SuitList","SuitListItem","groupedHand","HandEditor","TestHands","results","App","style","display","width","float","rel","href","store","configureStore","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.eb94872d.chunk.js","sourcesContent":["var wrap = require('comlink').wrap,Worker = require(\"!worker-loader?{}!/home/runner/work/bridge/bridge/node_modules/comlink-loader/dist/comlink-worker-loader.js!/home/runner/work/bridge/bridge/node_modules/react-scripts/node_modules/babel-loader/lib/index.js??ref--5-oneOf-2!/home/runner/work/bridge/bridge/src/reducers/worker/worker.ts\"),inst;module.exports = function f() {if (this instanceof f) return wrap(Worker());return inst || (inst = wrap(Worker()));};","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"ef1402ed1780512cf415.worker.js\");\n};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","/* AutoGenerated Code, changes may be overwritten\n* INPUT GRAMMAR:\n* Start := bid=Bid $\n* Bid := level=Digit bid=BidSpecifier ': ' constraints=ConstraintList\n* BidSpecifier := Wildcard | SuitSpecifier\n* Wildcard := v='x'\n* SuitSpecifier := Major | Minor | Strain\n* Major := v='M'\n* Minor := v='m'\n* Strain := Suit | Notrump\n* Suit := Club | Diamond | Heart | Spade\n* Club := v='[Cc]'\n* Diamond := v='[Dd]'\n* Heart := v='[Hh]'\n* Spade := v='[Ss]'\n* Notrump := v='[Nn]' '[Tt]'?\n* ConstraintList := ConstraintListItem+\n* ConstraintListItem := constraint=Constraint ' '?\n* Constraint :=\n*     Const\n*   | Or\n*   | And\n*   | Not\n*   | Distribution\n*   | Response\n*   | SuitRange\n*   | SuitComparison\n*   | SuitBound\n*   | SuitRank\n*   | PointRange\n*   | PointBound\n* Const := True | False\n* True := v='true'\n* False := v='false'\n* Or := left=Constraint ' or ' right=Constraint\n* And := '\\(' constraints=ConstraintList '\\)'\n* Not := {'not' | '!'} ' '? constraint=Constraint\n* PointRange := lower=Number '-' upper=Number\n* PointBound := value=Number qualifier=BoundQualifier\n* SuitRange := lower=Digit '-' upper=Digit suit=SuitRangeSpecifier\n* SuitBound := value=Number qualifier=BoundQualifier suit=SuitRangeSpecifier\n* SuitRangeSpecifier := Major | Minor | Suit //| OtherMajor | OtherMinor\n* OtherMajor := v='oM'\n* OtherMinor := v='om'\n* SuitComparison := left=Suit op=SuitComparisonOperator right=Suit\n* SuitComparisonOperator := v='<' | v='<=' | v='=' | v='>=' | v='>'\n* BoundQualifier := Plus | Minus | Equals\n* Plus := v='\\+'\n* Minus := v='\\-'\n* Equals := v='='\n* Distribution := Balanced | SemiBalanced | Unbalanced | AnyShape | SpecificShape\n* Balanced := v='BAL'\n* SemiBalanced := v='semiBAL'\n* Unbalanced := v='unBAL'\n* AnyShape := v='[0-9]{4}' '\\*'\n* SpecificShape := S=Digit H=Digit D=Digit C=Digit\n* SuitRank := Primary | Secondary\n* Primary := suit=Suit '1'\n* Secondary := suit=Suit '2'\n* Response := ForceOneRound | ForceGame | ForceSlam | Relay\n* ForceOneRound := v='F1'\n* ForceGame := v='FG'\n* ForceSlam := v='FS'\n* Relay := '->' level=Number strain=Strain\n* Digit := literal='[0-9]'\n*   .value = number { return parseInt(literal) }\n* Number := literal='[0-9]+'\n*   .value = number { return parseInt(literal) }\n*/\ntype Nullable<T> = T | null;\ntype $$RuleType<T> = () => Nullable<T>;\ninterface ASTNodeIntf {\n    kind: ASTKinds;\n}\nexport enum ASTKinds {\n    Start = \"Start\",\n    Bid = \"Bid\",\n    BidSpecifier_1 = \"BidSpecifier_1\",\n    BidSpecifier_2 = \"BidSpecifier_2\",\n    Wildcard = \"Wildcard\",\n    SuitSpecifier_1 = \"SuitSpecifier_1\",\n    SuitSpecifier_2 = \"SuitSpecifier_2\",\n    SuitSpecifier_3 = \"SuitSpecifier_3\",\n    Major = \"Major\",\n    Minor = \"Minor\",\n    Strain_1 = \"Strain_1\",\n    Strain_2 = \"Strain_2\",\n    Suit_1 = \"Suit_1\",\n    Suit_2 = \"Suit_2\",\n    Suit_3 = \"Suit_3\",\n    Suit_4 = \"Suit_4\",\n    Club = \"Club\",\n    Diamond = \"Diamond\",\n    Heart = \"Heart\",\n    Spade = \"Spade\",\n    Notrump = \"Notrump\",\n    ConstraintList = \"ConstraintList\",\n    ConstraintListItem = \"ConstraintListItem\",\n    Constraint_1 = \"Constraint_1\",\n    Constraint_2 = \"Constraint_2\",\n    Constraint_3 = \"Constraint_3\",\n    Constraint_4 = \"Constraint_4\",\n    Constraint_5 = \"Constraint_5\",\n    Constraint_6 = \"Constraint_6\",\n    Constraint_7 = \"Constraint_7\",\n    Constraint_8 = \"Constraint_8\",\n    Constraint_9 = \"Constraint_9\",\n    Constraint_10 = \"Constraint_10\",\n    Constraint_11 = \"Constraint_11\",\n    Constraint_12 = \"Constraint_12\",\n    Const_1 = \"Const_1\",\n    Const_2 = \"Const_2\",\n    True = \"True\",\n    False = \"False\",\n    Or = \"Or\",\n    And = \"And\",\n    Not = \"Not\",\n    Not_$0_1 = \"Not_$0_1\",\n    Not_$0_2 = \"Not_$0_2\",\n    PointRange = \"PointRange\",\n    PointBound = \"PointBound\",\n    SuitRange = \"SuitRange\",\n    SuitBound = \"SuitBound\",\n    SuitRangeSpecifier_1 = \"SuitRangeSpecifier_1\",\n    SuitRangeSpecifier_2 = \"SuitRangeSpecifier_2\",\n    SuitRangeSpecifier_3 = \"SuitRangeSpecifier_3\",\n    OtherMajor = \"OtherMajor\",\n    OtherMinor = \"OtherMinor\",\n    SuitComparison = \"SuitComparison\",\n    SuitComparisonOperator_1 = \"SuitComparisonOperator_1\",\n    SuitComparisonOperator_2 = \"SuitComparisonOperator_2\",\n    SuitComparisonOperator_3 = \"SuitComparisonOperator_3\",\n    SuitComparisonOperator_4 = \"SuitComparisonOperator_4\",\n    SuitComparisonOperator_5 = \"SuitComparisonOperator_5\",\n    BoundQualifier_1 = \"BoundQualifier_1\",\n    BoundQualifier_2 = \"BoundQualifier_2\",\n    BoundQualifier_3 = \"BoundQualifier_3\",\n    Plus = \"Plus\",\n    Minus = \"Minus\",\n    Equals = \"Equals\",\n    Distribution_1 = \"Distribution_1\",\n    Distribution_2 = \"Distribution_2\",\n    Distribution_3 = \"Distribution_3\",\n    Distribution_4 = \"Distribution_4\",\n    Distribution_5 = \"Distribution_5\",\n    Balanced = \"Balanced\",\n    SemiBalanced = \"SemiBalanced\",\n    Unbalanced = \"Unbalanced\",\n    AnyShape = \"AnyShape\",\n    SpecificShape = \"SpecificShape\",\n    SuitRank_1 = \"SuitRank_1\",\n    SuitRank_2 = \"SuitRank_2\",\n    Primary = \"Primary\",\n    Secondary = \"Secondary\",\n    Response_1 = \"Response_1\",\n    Response_2 = \"Response_2\",\n    Response_3 = \"Response_3\",\n    Response_4 = \"Response_4\",\n    ForceOneRound = \"ForceOneRound\",\n    ForceGame = \"ForceGame\",\n    ForceSlam = \"ForceSlam\",\n    Relay = \"Relay\",\n    Digit = \"Digit\",\n    Number = \"Number\",\n    $EOF = \"$EOF\",\n}\nexport interface Start {\n    kind: ASTKinds.Start;\n    bid: Bid;\n}\nexport interface Bid {\n    kind: ASTKinds.Bid;\n    level: Digit;\n    bid: BidSpecifier;\n    constraints: ConstraintList;\n}\nexport type BidSpecifier = BidSpecifier_1 | BidSpecifier_2;\nexport type BidSpecifier_1 = Wildcard;\nexport type BidSpecifier_2 = SuitSpecifier;\nexport interface Wildcard {\n    kind: ASTKinds.Wildcard;\n    v: string;\n}\nexport type SuitSpecifier = SuitSpecifier_1 | SuitSpecifier_2 | SuitSpecifier_3;\nexport type SuitSpecifier_1 = Major;\nexport type SuitSpecifier_2 = Minor;\nexport type SuitSpecifier_3 = Strain;\nexport interface Major {\n    kind: ASTKinds.Major;\n    v: string;\n}\nexport interface Minor {\n    kind: ASTKinds.Minor;\n    v: string;\n}\nexport type Strain = Strain_1 | Strain_2;\nexport type Strain_1 = Suit;\nexport type Strain_2 = Notrump;\nexport type Suit = Suit_1 | Suit_2 | Suit_3 | Suit_4;\nexport type Suit_1 = Club;\nexport type Suit_2 = Diamond;\nexport type Suit_3 = Heart;\nexport type Suit_4 = Spade;\nexport interface Club {\n    kind: ASTKinds.Club;\n    v: string;\n}\nexport interface Diamond {\n    kind: ASTKinds.Diamond;\n    v: string;\n}\nexport interface Heart {\n    kind: ASTKinds.Heart;\n    v: string;\n}\nexport interface Spade {\n    kind: ASTKinds.Spade;\n    v: string;\n}\nexport interface Notrump {\n    kind: ASTKinds.Notrump;\n    v: string;\n}\nexport type ConstraintList = ConstraintListItem[];\nexport interface ConstraintListItem {\n    kind: ASTKinds.ConstraintListItem;\n    constraint: Constraint;\n}\nexport type Constraint = Constraint_1 | Constraint_2 | Constraint_3 | Constraint_4 | Constraint_5 | Constraint_6 | Constraint_7 | Constraint_8 | Constraint_9 | Constraint_10 | Constraint_11 | Constraint_12;\nexport type Constraint_1 = Const;\nexport type Constraint_2 = Or;\nexport type Constraint_3 = And;\nexport type Constraint_4 = Not;\nexport type Constraint_5 = Distribution;\nexport type Constraint_6 = Response;\nexport type Constraint_7 = SuitRange;\nexport type Constraint_8 = SuitComparison;\nexport type Constraint_9 = SuitBound;\nexport type Constraint_10 = SuitRank;\nexport type Constraint_11 = PointRange;\nexport type Constraint_12 = PointBound;\nexport type Const = Const_1 | Const_2;\nexport type Const_1 = True;\nexport type Const_2 = False;\nexport interface True {\n    kind: ASTKinds.True;\n    v: string;\n}\nexport interface False {\n    kind: ASTKinds.False;\n    v: string;\n}\nexport interface Or {\n    kind: ASTKinds.Or;\n    left: Constraint;\n    right: Constraint;\n}\nexport interface And {\n    kind: ASTKinds.And;\n    constraints: ConstraintList;\n}\nexport interface Not {\n    kind: ASTKinds.Not;\n    constraint: Constraint;\n}\nexport type Not_$0 = Not_$0_1 | Not_$0_2;\nexport type Not_$0_1 = string;\nexport type Not_$0_2 = string;\nexport interface PointRange {\n    kind: ASTKinds.PointRange;\n    lower: Number;\n    upper: Number;\n}\nexport interface PointBound {\n    kind: ASTKinds.PointBound;\n    value: Number;\n    qualifier: BoundQualifier;\n}\nexport interface SuitRange {\n    kind: ASTKinds.SuitRange;\n    lower: Digit;\n    upper: Digit;\n    suit: SuitRangeSpecifier;\n}\nexport interface SuitBound {\n    kind: ASTKinds.SuitBound;\n    value: Number;\n    qualifier: BoundQualifier;\n    suit: SuitRangeSpecifier;\n}\nexport type SuitRangeSpecifier = SuitRangeSpecifier_1 | SuitRangeSpecifier_2 | SuitRangeSpecifier_3;\nexport type SuitRangeSpecifier_1 = Major;\nexport type SuitRangeSpecifier_2 = Minor;\nexport type SuitRangeSpecifier_3 = Suit;\nexport interface OtherMajor {\n    kind: ASTKinds.OtherMajor;\n    v: string;\n}\nexport interface OtherMinor {\n    kind: ASTKinds.OtherMinor;\n    v: string;\n}\nexport interface SuitComparison {\n    kind: ASTKinds.SuitComparison;\n    left: Suit;\n    op: SuitComparisonOperator;\n    right: Suit;\n}\nexport type SuitComparisonOperator = SuitComparisonOperator_1 | SuitComparisonOperator_2 | SuitComparisonOperator_3 | SuitComparisonOperator_4 | SuitComparisonOperator_5;\nexport interface SuitComparisonOperator_1 {\n    kind: ASTKinds.SuitComparisonOperator_1;\n    v: string;\n}\nexport interface SuitComparisonOperator_2 {\n    kind: ASTKinds.SuitComparisonOperator_2;\n    v: string;\n}\nexport interface SuitComparisonOperator_3 {\n    kind: ASTKinds.SuitComparisonOperator_3;\n    v: string;\n}\nexport interface SuitComparisonOperator_4 {\n    kind: ASTKinds.SuitComparisonOperator_4;\n    v: string;\n}\nexport interface SuitComparisonOperator_5 {\n    kind: ASTKinds.SuitComparisonOperator_5;\n    v: string;\n}\nexport type BoundQualifier = BoundQualifier_1 | BoundQualifier_2 | BoundQualifier_3;\nexport type BoundQualifier_1 = Plus;\nexport type BoundQualifier_2 = Minus;\nexport type BoundQualifier_3 = Equals;\nexport interface Plus {\n    kind: ASTKinds.Plus;\n    v: string;\n}\nexport interface Minus {\n    kind: ASTKinds.Minus;\n    v: string;\n}\nexport interface Equals {\n    kind: ASTKinds.Equals;\n    v: string;\n}\nexport type Distribution = Distribution_1 | Distribution_2 | Distribution_3 | Distribution_4 | Distribution_5;\nexport type Distribution_1 = Balanced;\nexport type Distribution_2 = SemiBalanced;\nexport type Distribution_3 = Unbalanced;\nexport type Distribution_4 = AnyShape;\nexport type Distribution_5 = SpecificShape;\nexport interface Balanced {\n    kind: ASTKinds.Balanced;\n    v: string;\n}\nexport interface SemiBalanced {\n    kind: ASTKinds.SemiBalanced;\n    v: string;\n}\nexport interface Unbalanced {\n    kind: ASTKinds.Unbalanced;\n    v: string;\n}\nexport interface AnyShape {\n    kind: ASTKinds.AnyShape;\n    v: string;\n}\nexport interface SpecificShape {\n    kind: ASTKinds.SpecificShape;\n    S: Digit;\n    H: Digit;\n    D: Digit;\n    C: Digit;\n}\nexport type SuitRank = SuitRank_1 | SuitRank_2;\nexport type SuitRank_1 = Primary;\nexport type SuitRank_2 = Secondary;\nexport interface Primary {\n    kind: ASTKinds.Primary;\n    suit: Suit;\n}\nexport interface Secondary {\n    kind: ASTKinds.Secondary;\n    suit: Suit;\n}\nexport type Response = Response_1 | Response_2 | Response_3 | Response_4;\nexport type Response_1 = ForceOneRound;\nexport type Response_2 = ForceGame;\nexport type Response_3 = ForceSlam;\nexport type Response_4 = Relay;\nexport interface ForceOneRound {\n    kind: ASTKinds.ForceOneRound;\n    v: string;\n}\nexport interface ForceGame {\n    kind: ASTKinds.ForceGame;\n    v: string;\n}\nexport interface ForceSlam {\n    kind: ASTKinds.ForceSlam;\n    v: string;\n}\nexport interface Relay {\n    kind: ASTKinds.Relay;\n    level: Number;\n    strain: Strain;\n}\nexport class Digit {\n    public kind: ASTKinds.Digit = ASTKinds.Digit;\n    public literal: string;\n    public value: number;\n    constructor(literal: string){\n        this.literal = literal;\n        this.value = ((): number => {\n        return parseInt(literal)\n        })();\n    }\n}\nexport class Number {\n    public kind: ASTKinds.Number = ASTKinds.Number;\n    public literal: string;\n    public value: number;\n    constructor(literal: string){\n        this.literal = literal;\n        this.value = ((): number => {\n        return parseInt(literal)\n        })();\n    }\n}\nexport class Parser {\n    private readonly input: string;\n    private pos: PosInfo;\n    private negating: boolean = false;\n    private memoSafe: boolean = true;\n    constructor(input: string) {\n        this.pos = {overallPos: 0, line: 1, offset: 0};\n        this.input = input;\n    }\n    public reset(pos: PosInfo) {\n        this.pos = pos;\n    }\n    public finished(): boolean {\n        return this.pos.overallPos === this.input.length;\n    }\n    public clearMemos(): void {\n        this.$scope$Constraint$memo.clear();\n    }\n    protected $scope$Constraint$memo: Map<number, [Nullable<Constraint>, PosInfo]> = new Map();\n    public matchStart($$dpth: number, $$cr?: ErrorTracker): Nullable<Start> {\n        return this.run<Start>($$dpth,\n            () => {\n                let $scope$bid: Nullable<Bid>;\n                let $$res: Nullable<Start> = null;\n                if (true\n                    && ($scope$bid = this.matchBid($$dpth + 1, $$cr)) !== null\n                    && this.match$EOF($$cr) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Start, bid: $scope$bid};\n                }\n                return $$res;\n            });\n    }\n    public matchBid($$dpth: number, $$cr?: ErrorTracker): Nullable<Bid> {\n        return this.run<Bid>($$dpth,\n            () => {\n                let $scope$level: Nullable<Digit>;\n                let $scope$bid: Nullable<BidSpecifier>;\n                let $scope$constraints: Nullable<ConstraintList>;\n                let $$res: Nullable<Bid> = null;\n                if (true\n                    && ($scope$level = this.matchDigit($$dpth + 1, $$cr)) !== null\n                    && ($scope$bid = this.matchBidSpecifier($$dpth + 1, $$cr)) !== null\n                    && this.regexAccept(String.raw`(?:: )`, $$dpth + 1, $$cr) !== null\n                    && ($scope$constraints = this.matchConstraintList($$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Bid, level: $scope$level, bid: $scope$bid, constraints: $scope$constraints};\n                }\n                return $$res;\n            });\n    }\n    public matchBidSpecifier($$dpth: number, $$cr?: ErrorTracker): Nullable<BidSpecifier> {\n        return this.choice<BidSpecifier>([\n            () => this.matchBidSpecifier_1($$dpth + 1, $$cr),\n            () => this.matchBidSpecifier_2($$dpth + 1, $$cr),\n        ]);\n    }\n    public matchBidSpecifier_1($$dpth: number, $$cr?: ErrorTracker): Nullable<BidSpecifier_1> {\n        return this.matchWildcard($$dpth + 1, $$cr);\n    }\n    public matchBidSpecifier_2($$dpth: number, $$cr?: ErrorTracker): Nullable<BidSpecifier_2> {\n        return this.matchSuitSpecifier($$dpth + 1, $$cr);\n    }\n    public matchWildcard($$dpth: number, $$cr?: ErrorTracker): Nullable<Wildcard> {\n        return this.run<Wildcard>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Wildcard> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:x)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Wildcard, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchSuitSpecifier($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitSpecifier> {\n        return this.choice<SuitSpecifier>([\n            () => this.matchSuitSpecifier_1($$dpth + 1, $$cr),\n            () => this.matchSuitSpecifier_2($$dpth + 1, $$cr),\n            () => this.matchSuitSpecifier_3($$dpth + 1, $$cr),\n        ]);\n    }\n    public matchSuitSpecifier_1($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitSpecifier_1> {\n        return this.matchMajor($$dpth + 1, $$cr);\n    }\n    public matchSuitSpecifier_2($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitSpecifier_2> {\n        return this.matchMinor($$dpth + 1, $$cr);\n    }\n    public matchSuitSpecifier_3($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitSpecifier_3> {\n        return this.matchStrain($$dpth + 1, $$cr);\n    }\n    public matchMajor($$dpth: number, $$cr?: ErrorTracker): Nullable<Major> {\n        return this.run<Major>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Major> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:M)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Major, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchMinor($$dpth: number, $$cr?: ErrorTracker): Nullable<Minor> {\n        return this.run<Minor>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Minor> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:m)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Minor, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchStrain($$dpth: number, $$cr?: ErrorTracker): Nullable<Strain> {\n        return this.choice<Strain>([\n            () => this.matchStrain_1($$dpth + 1, $$cr),\n            () => this.matchStrain_2($$dpth + 1, $$cr),\n        ]);\n    }\n    public matchStrain_1($$dpth: number, $$cr?: ErrorTracker): Nullable<Strain_1> {\n        return this.matchSuit($$dpth + 1, $$cr);\n    }\n    public matchStrain_2($$dpth: number, $$cr?: ErrorTracker): Nullable<Strain_2> {\n        return this.matchNotrump($$dpth + 1, $$cr);\n    }\n    public matchSuit($$dpth: number, $$cr?: ErrorTracker): Nullable<Suit> {\n        return this.choice<Suit>([\n            () => this.matchSuit_1($$dpth + 1, $$cr),\n            () => this.matchSuit_2($$dpth + 1, $$cr),\n            () => this.matchSuit_3($$dpth + 1, $$cr),\n            () => this.matchSuit_4($$dpth + 1, $$cr),\n        ]);\n    }\n    public matchSuit_1($$dpth: number, $$cr?: ErrorTracker): Nullable<Suit_1> {\n        return this.matchClub($$dpth + 1, $$cr);\n    }\n    public matchSuit_2($$dpth: number, $$cr?: ErrorTracker): Nullable<Suit_2> {\n        return this.matchDiamond($$dpth + 1, $$cr);\n    }\n    public matchSuit_3($$dpth: number, $$cr?: ErrorTracker): Nullable<Suit_3> {\n        return this.matchHeart($$dpth + 1, $$cr);\n    }\n    public matchSuit_4($$dpth: number, $$cr?: ErrorTracker): Nullable<Suit_4> {\n        return this.matchSpade($$dpth + 1, $$cr);\n    }\n    public matchClub($$dpth: number, $$cr?: ErrorTracker): Nullable<Club> {\n        return this.run<Club>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Club> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:[Cc])`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Club, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchDiamond($$dpth: number, $$cr?: ErrorTracker): Nullable<Diamond> {\n        return this.run<Diamond>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Diamond> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:[Dd])`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Diamond, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchHeart($$dpth: number, $$cr?: ErrorTracker): Nullable<Heart> {\n        return this.run<Heart>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Heart> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:[Hh])`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Heart, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchSpade($$dpth: number, $$cr?: ErrorTracker): Nullable<Spade> {\n        return this.run<Spade>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Spade> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:[Ss])`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Spade, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchNotrump($$dpth: number, $$cr?: ErrorTracker): Nullable<Notrump> {\n        return this.run<Notrump>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Notrump> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:[Nn])`, $$dpth + 1, $$cr)) !== null\n                    && ((this.regexAccept(String.raw`(?:[Tt])`, $$dpth + 1, $$cr)) || true)\n                ) {\n                    $$res = {kind: ASTKinds.Notrump, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchConstraintList($$dpth: number, $$cr?: ErrorTracker): Nullable<ConstraintList> {\n        return this.loop<ConstraintListItem>(() => this.matchConstraintListItem($$dpth + 1, $$cr), false);\n    }\n    public matchConstraintListItem($$dpth: number, $$cr?: ErrorTracker): Nullable<ConstraintListItem> {\n        return this.run<ConstraintListItem>($$dpth,\n            () => {\n                let $scope$constraint: Nullable<Constraint>;\n                let $$res: Nullable<ConstraintListItem> = null;\n                if (true\n                    && ($scope$constraint = this.matchConstraint($$dpth + 1, $$cr)) !== null\n                    && ((this.regexAccept(String.raw`(?: )`, $$dpth + 1, $$cr)) || true)\n                ) {\n                    $$res = {kind: ASTKinds.ConstraintListItem, constraint: $scope$constraint};\n                }\n                return $$res;\n            });\n    }\n    public matchConstraint($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint> {\n        const fn = () => {\n            return this.choice<Constraint>([\n                () => this.matchConstraint_1($$dpth + 1, $$cr),\n                () => this.matchConstraint_2($$dpth + 1, $$cr),\n                () => this.matchConstraint_3($$dpth + 1, $$cr),\n                () => this.matchConstraint_4($$dpth + 1, $$cr),\n                () => this.matchConstraint_5($$dpth + 1, $$cr),\n                () => this.matchConstraint_6($$dpth + 1, $$cr),\n                () => this.matchConstraint_7($$dpth + 1, $$cr),\n                () => this.matchConstraint_8($$dpth + 1, $$cr),\n                () => this.matchConstraint_9($$dpth + 1, $$cr),\n                () => this.matchConstraint_10($$dpth + 1, $$cr),\n                () => this.matchConstraint_11($$dpth + 1, $$cr),\n                () => this.matchConstraint_12($$dpth + 1, $$cr),\n            ]);\n        };\n        const $scope$pos = this.mark();\n        const memo = this.$scope$Constraint$memo.get($scope$pos.overallPos);\n        if(memo !== undefined) {\n            this.reset(memo[1]);\n            return memo[0];\n        }\n        const $scope$oldMemoSafe = this.memoSafe;\n        this.memoSafe = false;\n        this.$scope$Constraint$memo.set($scope$pos.overallPos, [null, $scope$pos]);\n        let lastRes: Nullable<Constraint> = null;\n        let lastPos: PosInfo = $scope$pos;\n        for(;;) {\n            this.reset($scope$pos);\n            const res = fn();\n            const end = this.mark();\n            if(end.overallPos <= lastPos.overallPos)\n                break;\n            lastRes = res;\n            lastPos = end;\n            this.$scope$Constraint$memo.set($scope$pos.overallPos, [lastRes, lastPos]);\n        }\n        this.reset(lastPos);\n        this.memoSafe = $scope$oldMemoSafe;\n        return lastRes;\n    }\n    public matchConstraint_1($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint_1> {\n        return this.matchConst($$dpth + 1, $$cr);\n    }\n    public matchConstraint_2($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint_2> {\n        return this.matchOr($$dpth + 1, $$cr);\n    }\n    public matchConstraint_3($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint_3> {\n        return this.matchAnd($$dpth + 1, $$cr);\n    }\n    public matchConstraint_4($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint_4> {\n        return this.matchNot($$dpth + 1, $$cr);\n    }\n    public matchConstraint_5($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint_5> {\n        return this.matchDistribution($$dpth + 1, $$cr);\n    }\n    public matchConstraint_6($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint_6> {\n        return this.matchResponse($$dpth + 1, $$cr);\n    }\n    public matchConstraint_7($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint_7> {\n        return this.matchSuitRange($$dpth + 1, $$cr);\n    }\n    public matchConstraint_8($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint_8> {\n        return this.matchSuitComparison($$dpth + 1, $$cr);\n    }\n    public matchConstraint_9($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint_9> {\n        return this.matchSuitBound($$dpth + 1, $$cr);\n    }\n    public matchConstraint_10($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint_10> {\n        return this.matchSuitRank($$dpth + 1, $$cr);\n    }\n    public matchConstraint_11($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint_11> {\n        return this.matchPointRange($$dpth + 1, $$cr);\n    }\n    public matchConstraint_12($$dpth: number, $$cr?: ErrorTracker): Nullable<Constraint_12> {\n        return this.matchPointBound($$dpth + 1, $$cr);\n    }\n    public matchConst($$dpth: number, $$cr?: ErrorTracker): Nullable<Const> {\n        return this.choice<Const>([\n            () => this.matchConst_1($$dpth + 1, $$cr),\n            () => this.matchConst_2($$dpth + 1, $$cr),\n        ]);\n    }\n    public matchConst_1($$dpth: number, $$cr?: ErrorTracker): Nullable<Const_1> {\n        return this.matchTrue($$dpth + 1, $$cr);\n    }\n    public matchConst_2($$dpth: number, $$cr?: ErrorTracker): Nullable<Const_2> {\n        return this.matchFalse($$dpth + 1, $$cr);\n    }\n    public matchTrue($$dpth: number, $$cr?: ErrorTracker): Nullable<True> {\n        return this.run<True>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<True> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:true)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.True, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchFalse($$dpth: number, $$cr?: ErrorTracker): Nullable<False> {\n        return this.run<False>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<False> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:false)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.False, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchOr($$dpth: number, $$cr?: ErrorTracker): Nullable<Or> {\n        return this.run<Or>($$dpth,\n            () => {\n                let $scope$left: Nullable<Constraint>;\n                let $scope$right: Nullable<Constraint>;\n                let $$res: Nullable<Or> = null;\n                if (true\n                    && ($scope$left = this.matchConstraint($$dpth + 1, $$cr)) !== null\n                    && this.regexAccept(String.raw`(?: or )`, $$dpth + 1, $$cr) !== null\n                    && ($scope$right = this.matchConstraint($$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Or, left: $scope$left, right: $scope$right};\n                }\n                return $$res;\n            });\n    }\n    public matchAnd($$dpth: number, $$cr?: ErrorTracker): Nullable<And> {\n        return this.run<And>($$dpth,\n            () => {\n                let $scope$constraints: Nullable<ConstraintList>;\n                let $$res: Nullable<And> = null;\n                if (true\n                    && this.regexAccept(String.raw`(?:\\()`, $$dpth + 1, $$cr) !== null\n                    && ($scope$constraints = this.matchConstraintList($$dpth + 1, $$cr)) !== null\n                    && this.regexAccept(String.raw`(?:\\))`, $$dpth + 1, $$cr) !== null\n                ) {\n                    $$res = {kind: ASTKinds.And, constraints: $scope$constraints};\n                }\n                return $$res;\n            });\n    }\n    public matchNot($$dpth: number, $$cr?: ErrorTracker): Nullable<Not> {\n        return this.run<Not>($$dpth,\n            () => {\n                let $scope$constraint: Nullable<Constraint>;\n                let $$res: Nullable<Not> = null;\n                if (true\n                    && this.matchNot_$0($$dpth + 1, $$cr) !== null\n                    && ((this.regexAccept(String.raw`(?: )`, $$dpth + 1, $$cr)) || true)\n                    && ($scope$constraint = this.matchConstraint($$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Not, constraint: $scope$constraint};\n                }\n                return $$res;\n            });\n    }\n    public matchNot_$0($$dpth: number, $$cr?: ErrorTracker): Nullable<Not_$0> {\n        return this.choice<Not_$0>([\n            () => this.matchNot_$0_1($$dpth + 1, $$cr),\n            () => this.matchNot_$0_2($$dpth + 1, $$cr),\n        ]);\n    }\n    public matchNot_$0_1($$dpth: number, $$cr?: ErrorTracker): Nullable<Not_$0_1> {\n        return this.regexAccept(String.raw`(?:not)`, $$dpth + 1, $$cr);\n    }\n    public matchNot_$0_2($$dpth: number, $$cr?: ErrorTracker): Nullable<Not_$0_2> {\n        return this.regexAccept(String.raw`(?:!)`, $$dpth + 1, $$cr);\n    }\n    public matchPointRange($$dpth: number, $$cr?: ErrorTracker): Nullable<PointRange> {\n        return this.run<PointRange>($$dpth,\n            () => {\n                let $scope$lower: Nullable<Number>;\n                let $scope$upper: Nullable<Number>;\n                let $$res: Nullable<PointRange> = null;\n                if (true\n                    && ($scope$lower = this.matchNumber($$dpth + 1, $$cr)) !== null\n                    && this.regexAccept(String.raw`(?:-)`, $$dpth + 1, $$cr) !== null\n                    && ($scope$upper = this.matchNumber($$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.PointRange, lower: $scope$lower, upper: $scope$upper};\n                }\n                return $$res;\n            });\n    }\n    public matchPointBound($$dpth: number, $$cr?: ErrorTracker): Nullable<PointBound> {\n        return this.run<PointBound>($$dpth,\n            () => {\n                let $scope$value: Nullable<Number>;\n                let $scope$qualifier: Nullable<BoundQualifier>;\n                let $$res: Nullable<PointBound> = null;\n                if (true\n                    && ($scope$value = this.matchNumber($$dpth + 1, $$cr)) !== null\n                    && ($scope$qualifier = this.matchBoundQualifier($$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.PointBound, value: $scope$value, qualifier: $scope$qualifier};\n                }\n                return $$res;\n            });\n    }\n    public matchSuitRange($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitRange> {\n        return this.run<SuitRange>($$dpth,\n            () => {\n                let $scope$lower: Nullable<Digit>;\n                let $scope$upper: Nullable<Digit>;\n                let $scope$suit: Nullable<SuitRangeSpecifier>;\n                let $$res: Nullable<SuitRange> = null;\n                if (true\n                    && ($scope$lower = this.matchDigit($$dpth + 1, $$cr)) !== null\n                    && this.regexAccept(String.raw`(?:-)`, $$dpth + 1, $$cr) !== null\n                    && ($scope$upper = this.matchDigit($$dpth + 1, $$cr)) !== null\n                    && ($scope$suit = this.matchSuitRangeSpecifier($$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.SuitRange, lower: $scope$lower, upper: $scope$upper, suit: $scope$suit};\n                }\n                return $$res;\n            });\n    }\n    public matchSuitBound($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitBound> {\n        return this.run<SuitBound>($$dpth,\n            () => {\n                let $scope$value: Nullable<Number>;\n                let $scope$qualifier: Nullable<BoundQualifier>;\n                let $scope$suit: Nullable<SuitRangeSpecifier>;\n                let $$res: Nullable<SuitBound> = null;\n                if (true\n                    && ($scope$value = this.matchNumber($$dpth + 1, $$cr)) !== null\n                    && ($scope$qualifier = this.matchBoundQualifier($$dpth + 1, $$cr)) !== null\n                    && ($scope$suit = this.matchSuitRangeSpecifier($$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.SuitBound, value: $scope$value, qualifier: $scope$qualifier, suit: $scope$suit};\n                }\n                return $$res;\n            });\n    }\n    public matchSuitRangeSpecifier($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitRangeSpecifier> {\n        return this.choice<SuitRangeSpecifier>([\n            () => this.matchSuitRangeSpecifier_1($$dpth + 1, $$cr),\n            () => this.matchSuitRangeSpecifier_2($$dpth + 1, $$cr),\n            () => this.matchSuitRangeSpecifier_3($$dpth + 1, $$cr),\n        ]);\n    }\n    public matchSuitRangeSpecifier_1($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitRangeSpecifier_1> {\n        return this.matchMajor($$dpth + 1, $$cr);\n    }\n    public matchSuitRangeSpecifier_2($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitRangeSpecifier_2> {\n        return this.matchMinor($$dpth + 1, $$cr);\n    }\n    public matchSuitRangeSpecifier_3($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitRangeSpecifier_3> {\n        return this.matchSuit($$dpth + 1, $$cr);\n    }\n    public matchOtherMajor($$dpth: number, $$cr?: ErrorTracker): Nullable<OtherMajor> {\n        return this.run<OtherMajor>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<OtherMajor> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:oM)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.OtherMajor, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchOtherMinor($$dpth: number, $$cr?: ErrorTracker): Nullable<OtherMinor> {\n        return this.run<OtherMinor>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<OtherMinor> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:om)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.OtherMinor, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchSuitComparison($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitComparison> {\n        return this.run<SuitComparison>($$dpth,\n            () => {\n                let $scope$left: Nullable<Suit>;\n                let $scope$op: Nullable<SuitComparisonOperator>;\n                let $scope$right: Nullable<Suit>;\n                let $$res: Nullable<SuitComparison> = null;\n                if (true\n                    && ($scope$left = this.matchSuit($$dpth + 1, $$cr)) !== null\n                    && ($scope$op = this.matchSuitComparisonOperator($$dpth + 1, $$cr)) !== null\n                    && ($scope$right = this.matchSuit($$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.SuitComparison, left: $scope$left, op: $scope$op, right: $scope$right};\n                }\n                return $$res;\n            });\n    }\n    public matchSuitComparisonOperator($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitComparisonOperator> {\n        return this.choice<SuitComparisonOperator>([\n            () => this.matchSuitComparisonOperator_1($$dpth + 1, $$cr),\n            () => this.matchSuitComparisonOperator_2($$dpth + 1, $$cr),\n            () => this.matchSuitComparisonOperator_3($$dpth + 1, $$cr),\n            () => this.matchSuitComparisonOperator_4($$dpth + 1, $$cr),\n            () => this.matchSuitComparisonOperator_5($$dpth + 1, $$cr),\n        ]);\n    }\n    public matchSuitComparisonOperator_1($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitComparisonOperator_1> {\n        return this.run<SuitComparisonOperator_1>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<SuitComparisonOperator_1> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:<)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.SuitComparisonOperator_1, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchSuitComparisonOperator_2($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitComparisonOperator_2> {\n        return this.run<SuitComparisonOperator_2>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<SuitComparisonOperator_2> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:<=)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.SuitComparisonOperator_2, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchSuitComparisonOperator_3($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitComparisonOperator_3> {\n        return this.run<SuitComparisonOperator_3>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<SuitComparisonOperator_3> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:=)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.SuitComparisonOperator_3, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchSuitComparisonOperator_4($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitComparisonOperator_4> {\n        return this.run<SuitComparisonOperator_4>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<SuitComparisonOperator_4> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:>=)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.SuitComparisonOperator_4, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchSuitComparisonOperator_5($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitComparisonOperator_5> {\n        return this.run<SuitComparisonOperator_5>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<SuitComparisonOperator_5> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:>)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.SuitComparisonOperator_5, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchBoundQualifier($$dpth: number, $$cr?: ErrorTracker): Nullable<BoundQualifier> {\n        return this.choice<BoundQualifier>([\n            () => this.matchBoundQualifier_1($$dpth + 1, $$cr),\n            () => this.matchBoundQualifier_2($$dpth + 1, $$cr),\n            () => this.matchBoundQualifier_3($$dpth + 1, $$cr),\n        ]);\n    }\n    public matchBoundQualifier_1($$dpth: number, $$cr?: ErrorTracker): Nullable<BoundQualifier_1> {\n        return this.matchPlus($$dpth + 1, $$cr);\n    }\n    public matchBoundQualifier_2($$dpth: number, $$cr?: ErrorTracker): Nullable<BoundQualifier_2> {\n        return this.matchMinus($$dpth + 1, $$cr);\n    }\n    public matchBoundQualifier_3($$dpth: number, $$cr?: ErrorTracker): Nullable<BoundQualifier_3> {\n        return this.matchEquals($$dpth + 1, $$cr);\n    }\n    public matchPlus($$dpth: number, $$cr?: ErrorTracker): Nullable<Plus> {\n        return this.run<Plus>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Plus> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:\\+)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Plus, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchMinus($$dpth: number, $$cr?: ErrorTracker): Nullable<Minus> {\n        return this.run<Minus>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Minus> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:\\-)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Minus, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchEquals($$dpth: number, $$cr?: ErrorTracker): Nullable<Equals> {\n        return this.run<Equals>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Equals> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:=)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Equals, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchDistribution($$dpth: number, $$cr?: ErrorTracker): Nullable<Distribution> {\n        return this.choice<Distribution>([\n            () => this.matchDistribution_1($$dpth + 1, $$cr),\n            () => this.matchDistribution_2($$dpth + 1, $$cr),\n            () => this.matchDistribution_3($$dpth + 1, $$cr),\n            () => this.matchDistribution_4($$dpth + 1, $$cr),\n            () => this.matchDistribution_5($$dpth + 1, $$cr),\n        ]);\n    }\n    public matchDistribution_1($$dpth: number, $$cr?: ErrorTracker): Nullable<Distribution_1> {\n        return this.matchBalanced($$dpth + 1, $$cr);\n    }\n    public matchDistribution_2($$dpth: number, $$cr?: ErrorTracker): Nullable<Distribution_2> {\n        return this.matchSemiBalanced($$dpth + 1, $$cr);\n    }\n    public matchDistribution_3($$dpth: number, $$cr?: ErrorTracker): Nullable<Distribution_3> {\n        return this.matchUnbalanced($$dpth + 1, $$cr);\n    }\n    public matchDistribution_4($$dpth: number, $$cr?: ErrorTracker): Nullable<Distribution_4> {\n        return this.matchAnyShape($$dpth + 1, $$cr);\n    }\n    public matchDistribution_5($$dpth: number, $$cr?: ErrorTracker): Nullable<Distribution_5> {\n        return this.matchSpecificShape($$dpth + 1, $$cr);\n    }\n    public matchBalanced($$dpth: number, $$cr?: ErrorTracker): Nullable<Balanced> {\n        return this.run<Balanced>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Balanced> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:BAL)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Balanced, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchSemiBalanced($$dpth: number, $$cr?: ErrorTracker): Nullable<SemiBalanced> {\n        return this.run<SemiBalanced>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<SemiBalanced> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:semiBAL)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.SemiBalanced, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchUnbalanced($$dpth: number, $$cr?: ErrorTracker): Nullable<Unbalanced> {\n        return this.run<Unbalanced>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<Unbalanced> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:unBAL)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Unbalanced, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchAnyShape($$dpth: number, $$cr?: ErrorTracker): Nullable<AnyShape> {\n        return this.run<AnyShape>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<AnyShape> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:[0-9]{4})`, $$dpth + 1, $$cr)) !== null\n                    && this.regexAccept(String.raw`(?:\\*)`, $$dpth + 1, $$cr) !== null\n                ) {\n                    $$res = {kind: ASTKinds.AnyShape, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchSpecificShape($$dpth: number, $$cr?: ErrorTracker): Nullable<SpecificShape> {\n        return this.run<SpecificShape>($$dpth,\n            () => {\n                let $scope$S: Nullable<Digit>;\n                let $scope$H: Nullable<Digit>;\n                let $scope$D: Nullable<Digit>;\n                let $scope$C: Nullable<Digit>;\n                let $$res: Nullable<SpecificShape> = null;\n                if (true\n                    && ($scope$S = this.matchDigit($$dpth + 1, $$cr)) !== null\n                    && ($scope$H = this.matchDigit($$dpth + 1, $$cr)) !== null\n                    && ($scope$D = this.matchDigit($$dpth + 1, $$cr)) !== null\n                    && ($scope$C = this.matchDigit($$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.SpecificShape, S: $scope$S, H: $scope$H, D: $scope$D, C: $scope$C};\n                }\n                return $$res;\n            });\n    }\n    public matchSuitRank($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitRank> {\n        return this.choice<SuitRank>([\n            () => this.matchSuitRank_1($$dpth + 1, $$cr),\n            () => this.matchSuitRank_2($$dpth + 1, $$cr),\n        ]);\n    }\n    public matchSuitRank_1($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitRank_1> {\n        return this.matchPrimary($$dpth + 1, $$cr);\n    }\n    public matchSuitRank_2($$dpth: number, $$cr?: ErrorTracker): Nullable<SuitRank_2> {\n        return this.matchSecondary($$dpth + 1, $$cr);\n    }\n    public matchPrimary($$dpth: number, $$cr?: ErrorTracker): Nullable<Primary> {\n        return this.run<Primary>($$dpth,\n            () => {\n                let $scope$suit: Nullable<Suit>;\n                let $$res: Nullable<Primary> = null;\n                if (true\n                    && ($scope$suit = this.matchSuit($$dpth + 1, $$cr)) !== null\n                    && this.regexAccept(String.raw`(?:1)`, $$dpth + 1, $$cr) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Primary, suit: $scope$suit};\n                }\n                return $$res;\n            });\n    }\n    public matchSecondary($$dpth: number, $$cr?: ErrorTracker): Nullable<Secondary> {\n        return this.run<Secondary>($$dpth,\n            () => {\n                let $scope$suit: Nullable<Suit>;\n                let $$res: Nullable<Secondary> = null;\n                if (true\n                    && ($scope$suit = this.matchSuit($$dpth + 1, $$cr)) !== null\n                    && this.regexAccept(String.raw`(?:2)`, $$dpth + 1, $$cr) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Secondary, suit: $scope$suit};\n                }\n                return $$res;\n            });\n    }\n    public matchResponse($$dpth: number, $$cr?: ErrorTracker): Nullable<Response> {\n        return this.choice<Response>([\n            () => this.matchResponse_1($$dpth + 1, $$cr),\n            () => this.matchResponse_2($$dpth + 1, $$cr),\n            () => this.matchResponse_3($$dpth + 1, $$cr),\n            () => this.matchResponse_4($$dpth + 1, $$cr),\n        ]);\n    }\n    public matchResponse_1($$dpth: number, $$cr?: ErrorTracker): Nullable<Response_1> {\n        return this.matchForceOneRound($$dpth + 1, $$cr);\n    }\n    public matchResponse_2($$dpth: number, $$cr?: ErrorTracker): Nullable<Response_2> {\n        return this.matchForceGame($$dpth + 1, $$cr);\n    }\n    public matchResponse_3($$dpth: number, $$cr?: ErrorTracker): Nullable<Response_3> {\n        return this.matchForceSlam($$dpth + 1, $$cr);\n    }\n    public matchResponse_4($$dpth: number, $$cr?: ErrorTracker): Nullable<Response_4> {\n        return this.matchRelay($$dpth + 1, $$cr);\n    }\n    public matchForceOneRound($$dpth: number, $$cr?: ErrorTracker): Nullable<ForceOneRound> {\n        return this.run<ForceOneRound>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<ForceOneRound> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:F1)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.ForceOneRound, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchForceGame($$dpth: number, $$cr?: ErrorTracker): Nullable<ForceGame> {\n        return this.run<ForceGame>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<ForceGame> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:FG)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.ForceGame, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchForceSlam($$dpth: number, $$cr?: ErrorTracker): Nullable<ForceSlam> {\n        return this.run<ForceSlam>($$dpth,\n            () => {\n                let $scope$v: Nullable<string>;\n                let $$res: Nullable<ForceSlam> = null;\n                if (true\n                    && ($scope$v = this.regexAccept(String.raw`(?:FS)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.ForceSlam, v: $scope$v};\n                }\n                return $$res;\n            });\n    }\n    public matchRelay($$dpth: number, $$cr?: ErrorTracker): Nullable<Relay> {\n        return this.run<Relay>($$dpth,\n            () => {\n                let $scope$level: Nullable<Number>;\n                let $scope$strain: Nullable<Strain>;\n                let $$res: Nullable<Relay> = null;\n                if (true\n                    && this.regexAccept(String.raw`(?:->)`, $$dpth + 1, $$cr) !== null\n                    && ($scope$level = this.matchNumber($$dpth + 1, $$cr)) !== null\n                    && ($scope$strain = this.matchStrain($$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Relay, level: $scope$level, strain: $scope$strain};\n                }\n                return $$res;\n            });\n    }\n    public matchDigit($$dpth: number, $$cr?: ErrorTracker): Nullable<Digit> {\n        return this.run<Digit>($$dpth,\n            () => {\n                let $scope$literal: Nullable<string>;\n                let $$res: Nullable<Digit> = null;\n                if (true\n                    && ($scope$literal = this.regexAccept(String.raw`(?:[0-9])`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = new Digit($scope$literal);\n                }\n                return $$res;\n            });\n    }\n    public matchNumber($$dpth: number, $$cr?: ErrorTracker): Nullable<Number> {\n        return this.run<Number>($$dpth,\n            () => {\n                let $scope$literal: Nullable<string>;\n                let $$res: Nullable<Number> = null;\n                if (true\n                    && ($scope$literal = this.regexAccept(String.raw`(?:[0-9]+)`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = new Number($scope$literal);\n                }\n                return $$res;\n            });\n    }\n    public test(): boolean {\n        const mrk = this.mark();\n        const res = this.matchStart(0);\n        const ans = res !== null;\n        this.reset(mrk);\n        return ans;\n    }\n    public parse(): ParseResult {\n        const mrk = this.mark();\n        const res = this.matchStart(0);\n        if (res)\n            return {ast: res, errs: []};\n        this.reset(mrk);\n        const rec = new ErrorTracker();\n        this.clearMemos();\n        this.matchStart(0, rec);\n        const err = rec.getErr()\n        return {ast: res, errs: err !== null ? [err] : []}\n    }\n    public mark(): PosInfo {\n        return this.pos;\n    }\n    private loop<T>(func: $$RuleType<T>, star: boolean = false): Nullable<T[]> {\n        const mrk = this.mark();\n        const res: T[] = [];\n        for (;;) {\n            const t = func();\n            if (t === null) {\n                break;\n            }\n            res.push(t);\n        }\n        if (star || res.length > 0) {\n            return res;\n        }\n        this.reset(mrk);\n        return null;\n    }\n    private run<T>($$dpth: number, fn: $$RuleType<T>): Nullable<T> {\n        const mrk = this.mark();\n        const res = fn()\n        if (res !== null)\n            return res;\n        this.reset(mrk);\n        return null;\n    }\n    private choice<T>(fns: Array<$$RuleType<T>>): Nullable<T> {\n        for (const f of fns) {\n            const res = f();\n            if (res !== null) {\n                return res;\n            }\n        }\n        return null;\n    }\n    private regexAccept(match: string, dpth: number, cr?: ErrorTracker): Nullable<string> {\n        return this.run<string>(dpth,\n            () => {\n                const reg = new RegExp(match, \"y\");\n                const mrk = this.mark();\n                reg.lastIndex = mrk.overallPos;\n                const res = this.tryConsume(reg);\n                if(cr) {\n                    cr.record(mrk, res, {\n                        kind: \"RegexMatch\",\n                        // We substring from 3 to len - 1 to strip off the\n                        // non-capture group syntax added as a WebKit workaround\n                        literal: match.substring(3, match.length - 1),\n                        negated: this.negating,\n                    });\n                }\n                return res;\n            });\n    }\n    private tryConsume(reg: RegExp): Nullable<string> {\n        const res = reg.exec(this.input);\n        if (res) {\n            let lineJmp = 0;\n            let lind = -1;\n            for (let i = 0; i < res[0].length; ++i) {\n                if (res[0][i] === \"\\n\") {\n                    ++lineJmp;\n                    lind = i;\n                }\n            }\n            this.pos = {\n                overallPos: reg.lastIndex,\n                line: this.pos.line + lineJmp,\n                offset: lind === -1 ? this.pos.offset + res[0].length : (res[0].length - lind - 1)\n            };\n            return res[0];\n        }\n        return null;\n    }\n    private noConsume<T>(fn: $$RuleType<T>): Nullable<T> {\n        const mrk = this.mark();\n        const res = fn();\n        this.reset(mrk);\n        return res;\n    }\n    private negate<T>(fn: $$RuleType<T>): Nullable<boolean> {\n        const mrk = this.mark();\n        const oneg = this.negating;\n        this.negating = !oneg;\n        const res = fn();\n        this.negating = oneg;\n        this.reset(mrk);\n        return res === null ? true : null;\n    }\n    private memoise<K>(rule: $$RuleType<K>, memo: Map<number, [Nullable<K>, PosInfo]>): Nullable<K> {\n        const $scope$pos = this.mark();\n        const $scope$memoRes = memo.get($scope$pos.overallPos);\n        if(this.memoSafe && $scope$memoRes !== undefined) {\n        this.reset($scope$memoRes[1]);\n        return $scope$memoRes[0];\n        }\n        const $scope$result = rule();\n        if(this.memoSafe)\n        memo.set($scope$pos.overallPos, [$scope$result, this.mark()]);\n        return $scope$result;\n    }\n    private match$EOF(et?: ErrorTracker): Nullable<{kind: ASTKinds.$EOF}> {\n        const res: {kind: ASTKinds.$EOF} | null = this.finished() ? { kind: ASTKinds.$EOF } : null;\n        if(et)\n            et.record(this.mark(), res, { kind: \"EOF\", negated: this.negating });\n        return res;\n    }\n}\nexport function parse(s: string): ParseResult {\n    const p = new Parser(s);\n    return p.parse();\n}\nexport interface ParseResult {\n    ast: Nullable<Start>;\n    errs: SyntaxErr[];\n}\nexport interface PosInfo {\n    readonly overallPos: number;\n    readonly line: number;\n    readonly offset: number;\n}\nexport interface RegexMatch {\n    readonly kind: \"RegexMatch\";\n    readonly negated: boolean;\n    readonly literal: string;\n}\nexport type EOFMatch = { kind: \"EOF\"; negated: boolean };\nexport type MatchAttempt = RegexMatch | EOFMatch;\nexport class SyntaxErr {\n    public pos: PosInfo;\n    public expmatches: MatchAttempt[];\n    constructor(pos: PosInfo, expmatches: MatchAttempt[]) {\n        this.pos = pos;\n        this.expmatches = [...expmatches];\n    }\n    public toString(): string {\n        return `Syntax Error at line ${this.pos.line}:${this.pos.offset}. Expected one of ${this.expmatches.map(x => x.kind === \"EOF\" ? \" EOF\" : ` ${x.negated ? 'not ': ''}'${x.literal}'`)}`;\n    }\n}\nclass ErrorTracker {\n    private mxpos: PosInfo = {overallPos: -1, line: -1, offset: -1};\n    private regexset: Set<string> = new Set();\n    private pmatches: MatchAttempt[] = [];\n    public record(pos: PosInfo, result: any, att: MatchAttempt) {\n        if ((result === null) === att.negated)\n            return;\n        if (pos.overallPos > this.mxpos.overallPos) {\n            this.mxpos = pos;\n            this.pmatches = [];\n            this.regexset.clear()\n        }\n        if (this.mxpos.overallPos === pos.overallPos) {\n            if(att.kind === \"RegexMatch\") {\n                if(!this.regexset.has(att.literal))\n                    this.pmatches.push(att);\n                this.regexset.add(att.literal);\n            } else {\n                this.pmatches.push(att);\n            }\n        }\n    }\n    public getErr(): SyntaxErr | null {\n        if (this.mxpos.overallPos !== -1)\n            return new SyntaxErr(this.mxpos, this.pmatches);\n        return null;\n    }\n}","import * as t from 'io-ts';\n\nimport { nonEmptyArray as NEA, readonlyNonEmptyArray as RNEA, either, eq, number, option, ord, readonlyArray, readonlyRecord, readonlySet } from 'fp-ts';\nimport { flow, pipe } from 'fp-ts/lib/function';\n\nexport const shuffle = (nextRandom: () => number) => <T>(cards: RNEA.ReadonlyNonEmptyArray<T>): RNEA.ReadonlyNonEmptyArray<T> => {\n  const array = [...cards] as NEA.NonEmptyArray<T>\n  for (let i = 0; i < array.length; i++) {\n    const r = i + Math.floor(nextRandom() * (array.length - i));\n    [array[i], array[r]] = [array[r], array[i]]\n  }\n  return array;\n}\n\nexport const basicShuffle = shuffle(Math.random)\n\nexport const suits = ['C', 'D', 'H', 'S'] as const\nexport type Suit = typeof suits[number]\nexport const eqSuit : eq.Eq<Suit> = eq.eqStrict\nexport const ordSuit : ord.Ord<Suit> = pipe(number.Ord, ord.reverse, ord.contramap(x => suits.indexOf(x)))\n\nexport const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', 'Q', 'K', 'A'] as const\nconst RankB = t.brand(t.number, (i) : i is t.Branded<number, { readonly Rank: unique symbol }> => i >= 2 && i <= 14, 'Rank')\nexport const RankC = new t.Type('Rank', RankB.is, RankB.validate, r => ranks[r - 2])\nexport type Rank = t.TypeOf<typeof RankC>\nexport const eqRank : eq.Eq<Rank> = eq.eqStrict\nexport const ordRank : ord.Ord<Rank> = pipe(number.Ord, ord.reverse)\n\nexport interface Card {\n  suit: Suit\n  rank: Rank\n}\nexport const cardToString = (c: Card) =>\n  `${c.suit}${RankC.encode(c.rank)}`\nexport const eqCard : eq.Eq<Card> = eq.struct({\n  suit: eqSuit,\n  rank: eqRank\n})\nexport const ordCard : ord.Ord<Card> = ord.getMonoid<Card>().concat(\n  pipe(ordSuit, ord.contramap(c => c.suit)),\n  pipe(ordRank, ord.contramap(c => c.rank))\n)\n\nexport const cards: RNEA.ReadonlyNonEmptyArray<Card> =\n  pipe(52, RNEA.makeBy(i => ({\n    suit: suits[Math.floor(i / 13)],\n    rank: (RankC.decode((i % 13) + 2) as either.Right<Rank>).right\n  })))\n\nexport type Hand = ReadonlySet<Card>\nexport type GroupedHand = readonlyRecord.ReadonlyRecord<Suit, ReadonlyArray<Rank>>\nexport const getOrdGroupedHand = <T>() =>\n  ord.contramap(([suit, _]: readonly [Suit, T]) => suit)(ordSuit)\nexport const zeroGroupedHand : GroupedHand = ({\n  S: [],\n  H: [],\n  D: [],\n  C: [],\n})\n\nexport const groupHandBySuits = (hand: Hand) : GroupedHand =>\n  pipe(hand,\n    readonlySet.toReadonlyArray(ordCard),\n    RNEA.fromReadonlyArray,\n    option.fold(() => zeroGroupedHand, flow(\n      RNEA.groupBy(c => c.suit),\n      readonlyRecord.map(RNEA.map(c => c.rank)),\n      readonlyRecord.union(readonlyArray.getUnionMonoid(eqRank))(zeroGroupedHand)\n    )))\n\nexport type Deck = RNEA.ReadonlyNonEmptyArray<Card>\n\nexport const newDeck = () : Deck =>\n  basicShuffle(cards)\n","/* AutoGenerated Code, changes may be overwritten\n* INPUT GRAMMAR:\n* Start := hand=Hand $\n* Hand := S=Suit '\\.' H=Suit '\\.' D=Suit '\\.' C=Suit\n* Suit := cards=Card*\n* Card := c='[AKQJT2-9]'\n*   .rank = number {\n*     const rankStrings = ['2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', 'Q', 'K', 'A']\n*     return rankStrings.indexOf(c) + 2\n*   }\n* // ValidChar := '[AKQJT2-9.]{16}' // 13 + 3 dots\n*/\ntype Nullable<T> = T | null;\ntype $$RuleType<T> = () => Nullable<T>;\ninterface ASTNodeIntf {\n    kind: ASTKinds;\n}\nexport enum ASTKinds {\n    Start = \"Start\",\n    Hand = \"Hand\",\n    Suit = \"Suit\",\n    Card = \"Card\",\n    $EOF = \"$EOF\",\n}\nexport interface Start {\n    kind: ASTKinds.Start;\n    hand: Hand;\n}\nexport interface Hand {\n    kind: ASTKinds.Hand;\n    S: Suit;\n    H: Suit;\n    D: Suit;\n    C: Suit;\n}\nexport interface Suit {\n    kind: ASTKinds.Suit;\n    cards: Card[];\n}\nexport class Card {\n    public kind: ASTKinds.Card = ASTKinds.Card;\n    public c: string;\n    public rank: number;\n    constructor(c: string){\n        this.c = c;\n        this.rank = ((): number => {\n        const rankStrings = ['2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', 'Q', 'K', 'A']\n    return rankStrings.indexOf(c) + 2\n        })();\n    }\n}\nexport class Parser {\n    private readonly input: string;\n    private pos: PosInfo;\n    private negating: boolean = false;\n    private memoSafe: boolean = true;\n    constructor(input: string) {\n        this.pos = {overallPos: 0, line: 1, offset: 0};\n        this.input = input;\n    }\n    public reset(pos: PosInfo) {\n        this.pos = pos;\n    }\n    public finished(): boolean {\n        return this.pos.overallPos === this.input.length;\n    }\n    public clearMemos(): void {\n    }\n    public matchStart($$dpth: number, $$cr?: ErrorTracker): Nullable<Start> {\n        return this.run<Start>($$dpth,\n            () => {\n                let $scope$hand: Nullable<Hand>;\n                let $$res: Nullable<Start> = null;\n                if (true\n                    && ($scope$hand = this.matchHand($$dpth + 1, $$cr)) !== null\n                    && this.match$EOF($$cr) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Start, hand: $scope$hand};\n                }\n                return $$res;\n            });\n    }\n    public matchHand($$dpth: number, $$cr?: ErrorTracker): Nullable<Hand> {\n        return this.run<Hand>($$dpth,\n            () => {\n                let $scope$S: Nullable<Suit>;\n                let $scope$H: Nullable<Suit>;\n                let $scope$D: Nullable<Suit>;\n                let $scope$C: Nullable<Suit>;\n                let $$res: Nullable<Hand> = null;\n                if (true\n                    && ($scope$S = this.matchSuit($$dpth + 1, $$cr)) !== null\n                    && this.regexAccept(String.raw`(?:\\.)`, $$dpth + 1, $$cr) !== null\n                    && ($scope$H = this.matchSuit($$dpth + 1, $$cr)) !== null\n                    && this.regexAccept(String.raw`(?:\\.)`, $$dpth + 1, $$cr) !== null\n                    && ($scope$D = this.matchSuit($$dpth + 1, $$cr)) !== null\n                    && this.regexAccept(String.raw`(?:\\.)`, $$dpth + 1, $$cr) !== null\n                    && ($scope$C = this.matchSuit($$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Hand, S: $scope$S, H: $scope$H, D: $scope$D, C: $scope$C};\n                }\n                return $$res;\n            });\n    }\n    public matchSuit($$dpth: number, $$cr?: ErrorTracker): Nullable<Suit> {\n        return this.run<Suit>($$dpth,\n            () => {\n                let $scope$cards: Nullable<Card[]>;\n                let $$res: Nullable<Suit> = null;\n                if (true\n                    && ($scope$cards = this.loop<Card>(() => this.matchCard($$dpth + 1, $$cr), true)) !== null\n                ) {\n                    $$res = {kind: ASTKinds.Suit, cards: $scope$cards};\n                }\n                return $$res;\n            });\n    }\n    public matchCard($$dpth: number, $$cr?: ErrorTracker): Nullable<Card> {\n        return this.run<Card>($$dpth,\n            () => {\n                let $scope$c: Nullable<string>;\n                let $$res: Nullable<Card> = null;\n                if (true\n                    && ($scope$c = this.regexAccept(String.raw`(?:[AKQJT2-9])`, $$dpth + 1, $$cr)) !== null\n                ) {\n                    $$res = new Card($scope$c);\n                }\n                return $$res;\n            });\n    }\n    public test(): boolean {\n        const mrk = this.mark();\n        const res = this.matchStart(0);\n        const ans = res !== null;\n        this.reset(mrk);\n        return ans;\n    }\n    public parse(): ParseResult {\n        const mrk = this.mark();\n        const res = this.matchStart(0);\n        if (res)\n            return {ast: res, errs: []};\n        this.reset(mrk);\n        const rec = new ErrorTracker();\n        this.clearMemos();\n        this.matchStart(0, rec);\n        const err = rec.getErr()\n        return {ast: res, errs: err !== null ? [err] : []}\n    }\n    public mark(): PosInfo {\n        return this.pos;\n    }\n    private loop<T>(func: $$RuleType<T>, star: boolean = false): Nullable<T[]> {\n        const mrk = this.mark();\n        const res: T[] = [];\n        for (;;) {\n            const t = func();\n            if (t === null) {\n                break;\n            }\n            res.push(t);\n        }\n        if (star || res.length > 0) {\n            return res;\n        }\n        this.reset(mrk);\n        return null;\n    }\n    private run<T>($$dpth: number, fn: $$RuleType<T>): Nullable<T> {\n        const mrk = this.mark();\n        const res = fn()\n        if (res !== null)\n            return res;\n        this.reset(mrk);\n        return null;\n    }\n    private choice<T>(fns: Array<$$RuleType<T>>): Nullable<T> {\n        for (const f of fns) {\n            const res = f();\n            if (res !== null) {\n                return res;\n            }\n        }\n        return null;\n    }\n    private regexAccept(match: string, dpth: number, cr?: ErrorTracker): Nullable<string> {\n        return this.run<string>(dpth,\n            () => {\n                const reg = new RegExp(match, \"y\");\n                const mrk = this.mark();\n                reg.lastIndex = mrk.overallPos;\n                const res = this.tryConsume(reg);\n                if(cr) {\n                    cr.record(mrk, res, {\n                        kind: \"RegexMatch\",\n                        // We substring from 3 to len - 1 to strip off the\n                        // non-capture group syntax added as a WebKit workaround\n                        literal: match.substring(3, match.length - 1),\n                        negated: this.negating,\n                    });\n                }\n                return res;\n            });\n    }\n    private tryConsume(reg: RegExp): Nullable<string> {\n        const res = reg.exec(this.input);\n        if (res) {\n            let lineJmp = 0;\n            let lind = -1;\n            for (let i = 0; i < res[0].length; ++i) {\n                if (res[0][i] === \"\\n\") {\n                    ++lineJmp;\n                    lind = i;\n                }\n            }\n            this.pos = {\n                overallPos: reg.lastIndex,\n                line: this.pos.line + lineJmp,\n                offset: lind === -1 ? this.pos.offset + res[0].length : (res[0].length - lind - 1)\n            };\n            return res[0];\n        }\n        return null;\n    }\n    private noConsume<T>(fn: $$RuleType<T>): Nullable<T> {\n        const mrk = this.mark();\n        const res = fn();\n        this.reset(mrk);\n        return res;\n    }\n    private negate<T>(fn: $$RuleType<T>): Nullable<boolean> {\n        const mrk = this.mark();\n        const oneg = this.negating;\n        this.negating = !oneg;\n        const res = fn();\n        this.negating = oneg;\n        this.reset(mrk);\n        return res === null ? true : null;\n    }\n    private memoise<K>(rule: $$RuleType<K>, memo: Map<number, [Nullable<K>, PosInfo]>): Nullable<K> {\n        const $scope$pos = this.mark();\n        const $scope$memoRes = memo.get($scope$pos.overallPos);\n        if(this.memoSafe && $scope$memoRes !== undefined) {\n        this.reset($scope$memoRes[1]);\n        return $scope$memoRes[0];\n        }\n        const $scope$result = rule();\n        if(this.memoSafe)\n        memo.set($scope$pos.overallPos, [$scope$result, this.mark()]);\n        return $scope$result;\n    }\n    private match$EOF(et?: ErrorTracker): Nullable<{kind: ASTKinds.$EOF}> {\n        const res: {kind: ASTKinds.$EOF} | null = this.finished() ? { kind: ASTKinds.$EOF } : null;\n        if(et)\n            et.record(this.mark(), res, { kind: \"EOF\", negated: this.negating });\n        return res;\n    }\n}\nexport function parse(s: string): ParseResult {\n    const p = new Parser(s);\n    return p.parse();\n}\nexport interface ParseResult {\n    ast: Nullable<Start>;\n    errs: SyntaxErr[];\n}\nexport interface PosInfo {\n    readonly overallPos: number;\n    readonly line: number;\n    readonly offset: number;\n}\nexport interface RegexMatch {\n    readonly kind: \"RegexMatch\";\n    readonly negated: boolean;\n    readonly literal: string;\n}\nexport type EOFMatch = { kind: \"EOF\"; negated: boolean };\nexport type MatchAttempt = RegexMatch | EOFMatch;\nexport class SyntaxErr {\n    public pos: PosInfo;\n    public expmatches: MatchAttempt[];\n    constructor(pos: PosInfo, expmatches: MatchAttempt[]) {\n        this.pos = pos;\n        this.expmatches = [...expmatches];\n    }\n    public toString(): string {\n        return `Syntax Error at line ${this.pos.line}:${this.pos.offset}. Expected one of ${this.expmatches.map(x => x.kind === \"EOF\" ? \" EOF\" : ` ${x.negated ? 'not ': ''}'${x.literal}'`)}`;\n    }\n}\nclass ErrorTracker {\n    private mxpos: PosInfo = {overallPos: -1, line: -1, offset: -1};\n    private regexset: Set<string> = new Set();\n    private pmatches: MatchAttempt[] = [];\n    public record(pos: PosInfo, result: any, att: MatchAttempt) {\n        if ((result === null) === att.negated)\n            return;\n        if (pos.overallPos > this.mxpos.overallPos) {\n            this.mxpos = pos;\n            this.pmatches = [];\n            this.regexset.clear()\n        }\n        if (this.mxpos.overallPos === pos.overallPos) {\n            if(att.kind === \"RegexMatch\") {\n                if(!this.regexset.has(att.literal))\n                    this.pmatches.push(att);\n                this.regexset.add(att.literal);\n            } else {\n                this.pmatches.push(att);\n            }\n        }\n    }\n    public getErr(): SyntaxErr | null {\n        if (this.mxpos.overallPos !== -1)\n            return new SyntaxErr(this.mxpos, this.pmatches);\n        return null;\n    }\n}","import { apply, eq, number, option, ord, readonlyArray, readonlyNonEmptyArray, readonlyNonEmptyArray as RNEA, readonlyRecord, readonlySet, readonlySet as RS, readonlyTuple, readonlyTuple as RT } from \"fp-ts\"\nimport { flow, pipe } from \"fp-ts/lib/function\"\nimport { first } from 'fp-ts/lib/Semigroup'\nimport { Deck, eqCard, Hand, ordCard, Suit, suits } from \"./deck\"\n\nexport const directions = ['N', 'E', 'S', 'W'] as const\nexport type Direction = typeof directions[number]\nexport const ordDirection : ord.Ord<Direction> = pipe(number.Ord, ord.contramap(d => directions.indexOf(d)))\n\nexport type Deal = readonlyRecord.ReadonlyRecord<Direction, Hand>\nexport type Player = {\n  direction: Direction\n  hand: Hand\n}\n\nexport const deal = (deck: Deck) : Deal =>\n  pipe(directions,\n    RNEA.zip(RNEA.chunksOf(13)(deck)),\n    readonlyNonEmptyArray.groupBy(RT.fst),\n    readonlyRecord.map(flow(RNEA.head, RT.snd, RS.fromReadonlyArray(eqCard))),\n    (x: readonlyRecord.ReadonlyRecord<Direction, Hand>) => x)\n\nexport const vulnerabilities = [\"Neither\", \"NorthSouth\", \"EastWest\", \"Both\"] as const\nexport type Vulnerability = typeof vulnerabilities[number]\n\n\nexport const strains = [...suits, 'N'] as const\nexport type Strain = typeof strains[number]\nexport interface Board {\n  number: number\n  dealer: Direction\n  deal: Deal\n  vulnerability: Vulnerability\n}\n\nconst boneChart = (boardNumber: number) : Vulnerability => {\n  switch ((boardNumber % 16) + 1) {\n    case 1: case 8: case 11: case 14: return \"Neither\"\n    case 2: case 5: case 12: case 15: return \"NorthSouth\"\n    case 3: case 6: case 9:  case 16: return \"EastWest\"\n    case 4: case 7: case 10: case 13: return \"Both\"\n    default: throw Error(\"Not possible\")\n  }\n}\n\nexport const makeBoard = (number: number) => (deal: Deal) : Board => ({\n  number,\n  dealer: directions[(number - 1) % directions.length],\n  deal,\n  vulnerability: boneChart(number)\n})\n\nexport interface Contract {\n  level: number\n  strain: Strain\n}\nexport const contracts : ReadonlyArray<Contract> =\n  apply.sequenceS(readonlyArray.Apply)(({\n    level: readonlyArray.makeBy(7, level => level + 1),\n    strain: strains\n  }))\n\nexport type NonContractBid = \"Pass\" | \"Double\" | \"Redouble\"\nexport type ContractBid = Contract\nexport type Bid = NonContractBid | ContractBid\n\nexport type Auction = RNEA.ReadonlyNonEmptyArray<Bid>\nexport type NonPassAuction = Auction & [...Auction, \"Pass\", \"Pass\", \"Pass\"]\nexport type PassAuction = Auction & [\"Pass\", \"Pass\", \"Pass\", \"Pass\"]\nexport type CompletedAuction = NonPassAuction | PassAuction\n\nexport interface BoardWithAuction extends Board {\n  auction: Auction \n}\nexport interface BoardWithCompletedAuction extends BoardWithAuction {\n  auction: CompletedAuction\n}\n\nexport type Shape = readonly [number, number, number, number]\nexport const zeroShape: Shape = [0, 0, 0, 0]\nexport const sortShape = (s: Shape) => pipe(s, readonlyArray.sort(ord.reverse(number.Ord))) as Shape\nexport const makeShape = (...counts: Shape) =>\n  pipe(counts, sortShape)\nexport const eqShape : eq.Eq<Shape> =\n  eq.contramap(sortShape)(readonlyArray.getEq(number.Eq))\n\nexport type SpecificShape = Record<Suit, number>\nexport const makeSpecificShape = (s: number, h: number, d: number, c: number) : SpecificShape => ({\n  S: s,\n  H: h,\n  D: d,\n  C: c\n})\nexport const zeroSpecificShape = makeSpecificShape(0, 0, 0, 0)\n\nexport const getHandSpecificShape = (hand: Hand) : SpecificShape =>\n  pipe(hand,\n    readonlySet.toReadonlyArray(ordCard),\n    readonlyNonEmptyArray.fromReadonlyArray,\n    option.fold(() => zeroSpecificShape, flow(\n      readonlyNonEmptyArray.groupBy(c => c.suit),\n      readonlyRecord.map(x => x.length),\n      readonlyRecord.union(first<number>())(zeroSpecificShape),\n      (suits: readonlyRecord.ReadonlyRecord<Suit, number>) => suits)))\n\nexport const getHandShape = (hand: Hand) : Shape =>\n  pipe(hand,\n    getHandSpecificShape,\n    readonlyRecord.toReadonlyArray,\n    readonlyArray.map(readonlyTuple.snd),\n    suitCounts => readonlyArray.mapWithIndex((idx, _) =>\n      pipe(suitCounts, readonlyArray.lookup(idx), option.getOrElse(() => 0)))(zeroShape)) as Shape","import * as AST from '../parse/bid.peg.g'\n\nimport { ConstrainedBid, Constraint, SuitComparisonOperator, SuitRangeSpecifier } from '../model/constraints'\nimport { Strain, zeroSpecificShape } from '../model/bridge'\nimport { constant, identity, pipe } from 'fp-ts/lib/function'\nimport { either, eitherT, option, readonlyArray, readonlyNonEmptyArray, readonlyRecord, string } from 'fp-ts'\n\nimport { Suit } from '../model/deck'\nimport { flow } from 'fp-ts/lib/function'\n\nconst constConstraintTrue  = constant<Constraint>({ type: \"Constant\", value: true })\nconst constConstraintFalse = constant<Constraint>({ type: \"Constant\", value: false })\n\nconst getConnectiveItems = (items: ReadonlyArray<AST.Constraint>) =>\n  pipe(items,\n    readonlyNonEmptyArray.fromReadonlyArray,\n    option.map(flow(\n      readonlyNonEmptyArray.map(constraintFromAST),\n      either.fromPredicate(i => i.length >= 1, i => i[0]))))\n\nconst connectiveFromAST = (type: \"Conjunction\" | \"Disjunction\", zero: () => Constraint) =>\n  flow(getConnectiveItems,\n    eitherT.match(option.Functor)(identity, constraints => ({\n      type,\n      constraints\n    }) as const),\n    option.getOrElse(zero))\n\nconst suitFromAST = (s: AST.Suit) : Suit =>\n  s.kind === AST.ASTKinds.Club    ? 'C' :\n  s.kind === AST.ASTKinds.Diamond ? 'D' :\n  s.kind === AST.ASTKinds.Heart   ? 'H' :\n                                    'S'\n\nconst strainFromAST = (s: AST.Strain) : Strain =>\n  s.kind === AST.ASTKinds.Notrump ? 'N' :\n  suitFromAST(s)\n\nconst suitSpecifierFromAST = (s: AST.SuitRangeSpecifier) : SuitRangeSpecifier =>\n  s.kind === AST.ASTKinds.Major ? \"Major\" :\n  s.kind === AST.ASTKinds.Minor ? \"Minor\" :\n  suitFromAST(s)\n\nconst bindValueFromASTQualifier = (s: AST.BoundQualifier, value: number) => (type: 'min' | 'max') =>\n  pipe(value,\n    option.of,\n    option.filter(_ =>\n      s.kind === AST.ASTKinds.Equals\n      || (type === 'min' && s.kind === AST.ASTKinds.Plus)\n      || (type === 'max' && s.kind === AST.ASTKinds.Minus)))\n\nexport const constraintFromAST = (c: AST.Constraint) : Constraint => {\n  switch (c.kind) {\n\n    case AST.ASTKinds.True:\n      return constConstraintTrue()\n\n    case AST.ASTKinds.False:\n      return constConstraintFalse()\n\n    case AST.ASTKinds.And:\n      return pipe(\n        c.constraints,\n        readonlyArray.map(c => c.constraint),\n        connectiveFromAST(\"Conjunction\", constConstraintTrue))\n\n    case AST.ASTKinds.Or:\n      const flatten = (head: AST.Constraint, ...items: ReadonlyArray<AST.Constraint>) : readonlyNonEmptyArray.ReadonlyNonEmptyArray<AST.Constraint> =>\n        head.kind === AST.ASTKinds.Or\n        ? flatten(head.left, head.right, ...items)\n        : pipe(items,\n            readonlyNonEmptyArray.fromReadonlyArray,\n            option.fold(\n              () => [head],\n              items => [head, ...flatten(items[0], ...items.slice(1))]))\n      return pipe(\n        flatten(c.left, c.right),\n        connectiveFromAST(\"Disjunction\", constConstraintFalse))\n\n    case AST.ASTKinds.Not:\n      return {\n        type: \"Negation\",\n        constraint: constraintFromAST(c.constraint)\n      }\n\n    case AST.ASTKinds.PointRange:\n      return {\n        type: \"PointRange\",\n        min: c.lower.value,\n        max: c.upper.value\n      }\n\n    case AST.ASTKinds.PointBound:\n      return {\n        type: \"PointRange\",\n        min: pipe(bindValueFromASTQualifier(c.qualifier, c.value.value)('min'), option.getOrElse(constant(0))),\n        max: pipe(bindValueFromASTQualifier(c.qualifier, c.value.value)('max'), option.getOrElse(constant(37))),\n      }\n\n    case AST.ASTKinds.SuitRange:\n      return {\n        type: \"SuitRange\",\n        min: c.lower.value,\n        max: c.upper.value,\n        suit: suitSpecifierFromAST(c.suit)\n      }\n\n    case AST.ASTKinds.SuitComparison:\n      return {\n        type: \"SuitComparison\",\n        op: c.op.v as SuitComparisonOperator,\n        left: suitFromAST(c.left),\n        right: suitFromAST(c.right)\n      }\n\n    case AST.ASTKinds.Primary:\n    case AST.ASTKinds.Secondary:\n      return {\n        type: `Suit${c.kind}`,\n        suit: suitFromAST(c.suit)\n      }\n\n    case AST.ASTKinds.SuitBound:\n      return {\n        type: \"SuitRange\",\n        min: pipe(bindValueFromASTQualifier(c.qualifier, c.value.value)('min'), option.getOrElse(constant(0))),\n        max: pipe(bindValueFromASTQualifier(c.qualifier, c.value.value)('max'), option.getOrElse(constant(13))),\n        suit: suitSpecifierFromAST(c.suit)\n      }\n\n    case AST.ASTKinds.AnyShape:\n      return {\n        type: \"AnyShape\",\n        counts: pipe(c.v, string.split(''), readonlyArray.map(parseInt)) as [number, number, number, number]\n      }\n\n    case AST.ASTKinds.SpecificShape:\n      return {\n        type: \"SpecificShape\",\n        suits: pipe(zeroSpecificShape, readonlyRecord.mapWithIndex((s, _) => c[s].value))\n      }\n\n    case AST.ASTKinds.Relay:\n      return {\n        type: \"Relay\",\n        bid: {\n          level: c.level.value,\n          strain: strainFromAST(c.strain)\n        }\n      }\n    \n    default:\n      return { type: c.kind }\n  }\n}\n\nexport const bidFromAST = (bid: AST.Bid) : ConstrainedBid => ({\n  bid: {\n    level: bid.level.value,\n    strain: strainFromAST(bid.bid as AST.Strain),\n  },\n  constraint: pipe(\n    bid.constraints,\n    readonlyArray.map(c => c.constraint),\n    connectiveFromAST(\"Conjunction\", constConstraintFalse))\n})\n\nexport const parseBid = AST.parse\n","import { readonlyArray, readonlyRecord, readonlySet, readonlyTuple, string } from \"fp-ts\"\nimport { Right } from \"fp-ts/lib/Either\"\nimport { flow, identity, pipe } from \"fp-ts/lib/function\"\nimport * as e from 'io-ts/Encoder'\nimport { Card, eqCard, getOrdGroupedHand, groupHandBySuits, Hand, ordRank, Rank, RankC, ranks, Suit, suits } from \"../model/deck\"\nimport * as AST from '../parse/hand.peg.g'\n\n\n\nconst suitFromAST = (hand: AST.Hand) => (suit: Suit) : ReadonlyArray<Card> =>\n  pipe(hand[suit].cards,\n    readonlyArray.map(card => ({ suit, rank: (RankC.decode(card.rank) as Right<Rank>).right })))\n\nexport const handFromAST = (hand: AST.Hand) : Hand =>\n  pipe(suits,\n    readonlyArray.map(suitFromAST(hand)),\n    readonlyArray.flatten,\n    readonlySet.fromReadonlyArray(eqCard))\n\nexport const HandE : e.Encoder<string, Hand> = {\n  encode: flow(\n    groupHandBySuits,\n    readonlyRecord.toReadonlyArray,\n    readonlyArray.sort(getOrdGroupedHand<ReadonlyArray<Rank>>()),\n    readonlyArray.map(flow(\n      readonlyTuple.snd,\n      readonlyArray.sort(ordRank),\n      readonlyArray.reduce(\"\", (cur, rank) => cur + ranks[rank - 2]))),\n    readonlyArray.intersperse(\".\"),\n    readonlyArray.foldMap(string.Monoid)(identity))\n}\n\nexport const parseHand = AST.parse","import * as DE from 'io-ts/lib/DecodeError'\nimport * as FS from 'io-ts/lib/FreeSemigroup'\nimport * as d from 'io-ts/Decoder'\n\nimport { bidFromAST, parseBid } from './bid';\nimport { constant, flow, pipe } from \"fp-ts/lib/function\";\nimport { either, option, readonlyNonEmptyArray } from \"fp-ts\";\nimport { handFromAST, parseHand } from './hand';\n\nexport interface PosInfo {\n  readonly overallPos: number;\n  readonly line: number;\n  readonly offset: number;\n}\nexport interface RegexMatch {\n  readonly kind: \"RegexMatch\";\n  readonly negated: boolean;\n  readonly literal: string;\n}\nexport type EOFMatch = { kind: \"EOF\"; negated: boolean };\nexport type MatchAttempt = RegexMatch | EOFMatch;\ninterface SyntaxErr {\n  pos: PosInfo;\n  expmatches: MatchAttempt[];\n  toString(): string\n}\ninterface ParseResult<T> {\n  ast: T | null;\n  errs: SyntaxErr[];\n}\n// above is generalized from generated tsPEG code\n\nconst convertErrors = (errs: ReadonlyArray<SyntaxErr>): d.DecodeError =>\n  pipe(errs,\n    readonlyNonEmptyArray.fromReadonlyArray,\n    option.fold(constant(d.error(null, \"No syntax errors reported\")),\n      readonlyNonEmptyArray.foldMapWithIndex(FS.getSemigroup<DE.DecodeError<string>>())((i, err) =>\n        FS.of(DE.index(i, \"required\",\n          FS.of(DE.leaf({\n            pos: err.pos,\n            expmatches: err.expmatches\n          }, err.toString())))))))\n\nconst parseResultToEither = <T>(result: ParseResult<T>) =>\n  either.fromNullable(result.errs)(result.ast)\n\nconst getDecoder = <T>(parser: (input: string) => ParseResult<T>) : d.Decoder<string, T> =>\n  pipe(\n    d.string,\n    d.parse(flow(parser, parseResultToEither, either.mapLeft(convertErrors))))\n\nexport const decodeBid = flow(\n  getDecoder(parseBid).decode,\n  either.map(x => bidFromAST(x.bid)))\n\nexport const decodeHand = flow(\n  getDecoder(parseHand).decode,\n  either.map(x => handFromAST(x.hand)))","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\"\nimport { either, hkt, option as O, readonlyArray as RA, readonlyNonEmptyArray as RNEA, separated, tree } from 'fp-ts'\nimport { flow, pipe } from \"fp-ts/lib/function\"\nimport { Functor1 } from \"fp-ts/lib/Functor\"\nimport { castDraft } from \"immer\"\nimport { decodeBid } from \"../parse\"\n\n\nexport type DecodedBid = ReturnType<typeof decodeBid>\ninterface Node {\n  blockKey: string\n  text: string\n  bid: O.Option<DecodedBid>\n}\n\ntype State = {\n  system: tree.Tree<Node>\n}\nconst getRoot = () => tree.make<Node>({ blockKey: \"root\", text: \"root\", bid: O.none })\nconst initialState: State = {\n  system: getRoot()\n}\n\nconst pathsWithoutRoot = <F extends hkt.URIS>(K: Functor1<F>) => <A, B>(f: (a: A, bs: ReadonlyArray<hkt.Kind<F, RNEA.ReadonlyNonEmptyArray<B>>>) => hkt.Kind<F, RNEA.ReadonlyNonEmptyArray<B>>) =>\n  flow(tree.fold(f),\n    x => K.map(x, RNEA.tail))\n\ntype Path = RNEA.ReadonlyNonEmptyArray<Node>\ntype Paths = RNEA.ReadonlyNonEmptyArray<Path>\n\nconst getAllLeafPaths =\n  pathsWithoutRoot(RNEA.Functor)((node: Node, paths: ReadonlyArray<Paths>) =>\n    pipe(paths,\n      RNEA.fromReadonlyArray,\n      O.fold(() => [[node]] as Paths,\n        RNEA.foldMap(RNEA.getSemigroup<Path>())(RNEA.map(RA.prepend(node))))))\n\nconst getPath = (blockKey: string) =>\n  pathsWithoutRoot(O.Functor)((node: Node, paths: ReadonlyArray<O.Option<RNEA.ReadonlyNonEmptyArray<Node>>>) => {\n    if (node.blockKey === blockKey) {\n      return O.some([node])\n    } else {\n      return pipe(paths, RA.findFirstMap(O.map(RA.prepend(node))))\n    }\n  })\n\n\nconst flatten =\n  tree.reduce<Node, readonly Node[]>([], (items, a) =>\n    pipe(items, RA.append(a)))\n\nexport interface BlockItem {\n  key: string\n  text: string\n  depth: number\n}\n\nconst buildTree = (items: ReadonlyArray<BlockItem>) => {\n  const root = getRoot()\n  var parents = [root]\n  items.forEach(item => {\n    const curr = parents[item.depth + 1] = {\n      forest: [],\n      value: {\n        blockKey: item.key,\n        text: item.text,\n        bid: O.some(decodeBid(item.text))\n      }\n    }\n    parents[item.depth].forest.push(curr)\n  })\n  return root\n}\n\nconst name = 'system'\nconst slice = createSlice({\n  name,\n  initialState,\n  reducers: {\n    setSystem: (state, action: PayloadAction<ReadonlyArray<BlockItem>>) => {\n      state.system = pipe(buildTree(action.payload), castDraft)\n    }\n  }\n})\n\nexport const { setSystem } = slice.actions\n\nconst getBidsFromNodes =\n  flow(\n    RA.map((n: Node) => n.bid),\n    RA.compact)\n\nexport const selectNodeByKey = (state: State, blockKey: string) =>\n  pipe(\n    state.system,\n    getPath(blockKey),\n    O.chain(RA.last),\n    O.toNullable)\n\nexport const selectPathByKey = (state: State, blockKey: string) =>\n  pipe(\n    state.system,\n    getPath(blockKey),\n    O.toNullable)\n\nexport const selectAllCompleteBidPaths = (state: State) =>\n  pipe(\n    state.system,\n    getAllLeafPaths,\n    RNEA.map(flow(\n      RA.traverse(O.Applicative)((n: Node) => n.bid),\n      O.chain(O.fromEitherK(RA.sequence(either.Applicative))),\n      O.chain(RNEA.fromReadonlyArray))),\n    RA.compact)\n\nexport const selectBidsByKey = (state: State, blockKey: string) =>\n  pipe(\n    getPath(blockKey)(state.system),\n    O.getOrElse(() => [] as readonly Node[]),\n    getBidsFromNodes,\n    RA.sequence(either.Applicative))\n\nexport const selectRules = (state: State) =>\n  pipe(\n    state.system,\n    flatten,\n    RA.map(n => n.bid),\n    RA.compact,\n  )\n\nexport const selectErrors =\n  flow(\n    selectRules,\n    RA.separate,\n    separated.left)\n\nexport default slice.reducer","export const assertUnreachable = (x: never) => {\n  throw new Error (`shouldn't get here with ${JSON.stringify(x)}`)\n}","import { Shape as AnyShape, Bid, ContractBid, SpecificShape, eqShape, getHandShape, getHandSpecificShape, makeShape } from './bridge'\nimport { Card, Hand, Suit, eqSuit, ordCard, suits } from './deck'\nimport { Lens, Optional } from 'monocle-ts'\nimport { option as O, predicate as P, readonlyArray as RA, readonlyNonEmptyArray as RNEA, state as S, boolean, either, eq, hkt, identity as id, number, optionT, ord, readonlySet, readonlyTuple, record, string } from 'fp-ts'\nimport { constFalse, constTrue, constant, flow, identity, pipe } from 'fp-ts/lib/function'\n\nimport { assertUnreachable } from '../lib'\nimport { eqStrict } from 'fp-ts/lib/Eq'\n\nexport interface ConstraintPointRange {\n  type: \"PointRange\"\n  min: number\n  max: number\n}\n\nexport type SuitRangeSpecifier = \"Major\" | \"Minor\" | Suit // | \"OtherMajor\" | \"OtherMinor\"\nexport interface ConstraintSuitRange {\n  type: \"SuitRange\"\n  suit: SuitRangeSpecifier\n  min: number\n  max: number\n}\n\nexport type SuitComparisonOperator = \"<\" | \"<=\" | \"=\" | \">=\" | \">\"\nexport interface ConstraintSuitComparison {\n  type: \"SuitComparison\",\n  left: Suit,\n  right: Suit,\n  op: SuitComparisonOperator\n}\n\nexport interface ConstraintSuitPrimary {\n  type: \"SuitPrimary\",\n  suit: Suit\n}\nexport interface ConstraintSuitSecondary {\n  type: \"SuitSecondary\",\n  suit: Suit\n}\nexport type CosntraintSuitRank = ConstraintSuitPrimary | ConstraintSuitSecondary\n\nexport interface ConstraintConst {\n  type: \"Constant\",\n  value: boolean\n}\nexport interface ConstraintConjunction {\n  type: \"Conjunction\"\n  constraints: RNEA.ReadonlyNonEmptyArray<Constraint>\n}\nexport interface ConstraintDisjunction {\n  type: \"Disjunction\"\n  constraints: RNEA.ReadonlyNonEmptyArray<Constraint>\n}\nexport interface ConstraintNegation {\n  type: \"Negation\"\n  constraint: Constraint\n}\n\ninterface ConstraintAnyShape {\n  type: \"AnyShape\"\n  counts: AnyShape\n}\n\nexport interface ConstraintSpecificShape {\n  type: \"SpecificShape\",\n  suits: SpecificShape\n}\n\n\nexport interface ConstraintDistribution {\n  type: \"Balanced\" | \"SemiBalanced\" | \"Unbalanced\"\n}\n\nexport interface ConstraintResponse {\n  type: \"ForceOneRound\" | \"ForceGame\" | \"ForceSlam\"\n}\n\nexport interface ConstraintRelayResponse {\n  type: \"Relay\",\n  bid: ContractBid\n}\n\nexport type ConstraintForce =\n    ConstraintResponse\n  | ConstraintRelayResponse\n\nexport type Constraint =\n  | ConstraintConst\n  | ConstraintConjunction\n  | ConstraintDisjunction\n  | ConstraintNegation\n  | ConstraintPointRange\n  | ConstraintSuitRange\n  | ConstraintSuitComparison\n  | CosntraintSuitRank\n  | ConstraintDistribution\n  | ConstraintAnyShape\n  | ConstraintSpecificShape\n  | ConstraintForce\n\nconst contextualConstraintTypes = [\n  \"Conjunction\",\n  \"Disjunction\",\n  \"Negation\",\n  \"ForceOneRound\",\n  \"ForceGame\",\n  \"ForceSlam\",\n  \"Relay\",\n  \"SuitPrimary\",\n  \"SuitSecondary\",\n] as const\n\ntype ContextualConstraintType = typeof contextualConstraintTypes[number]\ntype BasicConstraint = Exclude<Constraint, { type: ContextualConstraintType }>\ntype ContextualConstraint = Extract<Constraint, { type: ContextualConstraintType }>\n\nconst isContextualConstraint = (c: Constraint) : c is ContextualConstraint =>\n  RA.elem(string.Eq as eq.Eq<Constraint[\"type\"]>)(c.type)(contextualConstraintTypes)\n\nconst separate = (c: Constraint) : either.Either<ContextualConstraint, BasicConstraint> =>\n  isContextualConstraint(c) ? either.left(c) : either.right(c as BasicConstraint)\n\nexport interface ConstrainedBid {\n  bid: Bid\n  constraint: Constraint\n}\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nconst anyP = P.getMonoidAny<Hand>()\nconst allP = P.getMonoidAll<Hand>()\nconst constraintFalse : P.Predicate<Hand> = constFalse\nconst constraintTrue : P.Predicate<Hand> = constTrue\nconst exists = pipe(anyP, RA.foldMap)\nconst forall = pipe(allP, RA.foldMap)\n/* eslint-enable @typescript-eslint/no-unused-vars */\n\nexport const getCardHcp = (card: Card) =>\n  Math.max(0, card.rank - 10)\n\nexport const getHcp =\n  flow(\n    readonlySet.toReadonlyArray(ordCard),\n    RA.foldMap(number.MonoidSum)(getCardHcp))\n\nconst rangeCheck = (range: { min: number, max: number }) => ord.between(number.Ord)(range.min, range.max)\n\nexport const isPointRange =\n  flow(rangeCheck, P.contramap(getHcp))\n\nexport const isSpecificShape = (shape: SpecificShape) =>\n  flow(getHandSpecificShape, suits => record.getEq(eqStrict).equals(suits, shape))\n\nexport const isSuitRange = (range: ConstraintSuitRange) => {\n  const getSuitsToCheck: readonly Suit[] =\n    range.suit === \"Major\" ? [\"S\", \"H\"] :\n    range.suit === \"Minor\" ? [\"D\", \"C\"] :\n    [range.suit]\n  return flow(getHandSpecificShape, shape =>\n    pipe(getSuitsToCheck, RA.exists(s => ord.between(number.Ord)(range.min, range.max)(shape[s]))))\n}\n\nconst getComparator = (op: SuitComparisonOperator) => {\n  switch (op) {\n    case \"<\" : return ord.lt(number.Ord)\n    case \"<=\": return ord.leq(number.Ord)\n    case \"=\" : return number.Eq.equals\n    case \">=\": return ord.geq(number.Ord)\n    case \">\" : return ord.gt(number.Ord)\n    default  : return assertUnreachable(op)\n  }\n}\n\nexport const suitCompare = (op: SuitComparisonOperator) => (left: Suit, right: Suit) =>\n  flow(getHandSpecificShape,\n    shape => getComparator(op)(shape[left], shape[right]))\n\nexport const suitPrimary = (suit: Suit) =>\n  pipe(suits,\n    RA.splitAt(suits.indexOf(suit)),\n    readonlyTuple.bimap(\n      flow(RA.tail,\n        O.fold(() => [],\n          RA.map(higher => suitCompare(\"<\")(higher, suit)))),\n      RA.map(lower => suitCompare(\"<=\")(lower, suit))),\n    RA.flatten,\n    RA.prepend(isSuitRange({ type: \"SuitRange\", suit, min: 5, max: 13 })),\n    forall(identity))\n\nexport const suitSecondary = (secondarySuit: Suit) => (primarySuit: Suit) =>\n  pipe(RA.Do,\n    RA.apS('suit', [secondarySuit, primarySuit]),\n    RA.apS('otherSuit', pipe(suits, RA.difference(eqSuit)([secondarySuit, primarySuit]))),\n    RA.filter(({ suit, otherSuit }) => !eqSuit.equals(suit, otherSuit)),\n    RA.map(({ suit, otherSuit }) => {\n      return suitCompare(\">\")(suit, otherSuit)\n    }),\n    RA.concat([\n      isSuitRange({ type: \"SuitRange\", suit: secondarySuit, min: 4, max: 13 }),\n      suitCompare(\">=\")(primarySuit, secondarySuit)\n    ]),\n    forall(identity))\n\nexport const isShape = (shape: AnyShape) =>\n  flow(getHandShape, handShape =>\n    eqShape.equals(shape, handShape))\n\nexport const isBalanced =\n  pipe([\n    makeShape(4, 3, 3, 3),\n    makeShape(5, 3, 3, 2),\n    makeShape(4, 4, 3, 2),\n    makeShape(5, 5, 3, 2),\n  ], exists(isShape))\n\nexport const isSemiBalanced =\n  pipe([\n    makeShape(5, 4, 2, 2),\n    makeShape(6, 3, 2, 2)\n  ], exists(isShape))\n\nexport interface BidContext {\n  path: ReadonlyArray<ConstrainedBid>\n  force: O.Option<ConstraintForce>\n  primarySuit: O.Option<Suit>\n  secondarySuit: O.Option<Suit>\n}\nexport const zeroContext : BidContext = {\n  path: [],\n  force: O.none,\n  primarySuit: O.none,\n  secondarySuit: O.none\n}\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nconst contextL = Lens.fromProp<BidContext>()\nconst pathL = contextL('path')\nconst forceL = contextL('force')\nconst primarySuitL = contextL('primarySuit')\nconst secondarySuitL = contextL('secondarySuit')\nconst contextO = Optional.fromOptionProp<BidContext>()\nconst forceO = contextO('force')\nconst primarySuitO = contextO('primarySuit')\nconst secondarySuitO = contextO('secondarySuit')\n/* eslint-enable @typescript-eslint/no-unused-vars */\n\n// const notBoth = <F extends hkt.URIS>(Z: zero.Zero1<F>) => <T>(x: hkt.Kind<F, T>, y: hkt.Kind<F, T>) : O.Option<hkt.Kind<F, T>> =>\n//   x === Z.zero() ? O.some(y) :\n//   y === Z.zero() ? O.some(x) :\n//   O.none\n\n// const maybeConcat = (x: BidContext) => (y: BidContext) : O.Option<BidContext> =>\n//   pipe(O.Do,\n//     O.apS('path', O.some(y.path)),\n//     O.apS('force', notBoth(O.Zero)(y.force, x.force)),\n//     O.apS('primarySuit', notBoth(O.Zero)(y.primarySuit, x.primarySuit)),\n//     O.apS('secondarySuit', notBoth(O.Zero)(y.secondarySuit, x.secondarySuit)))\n\n// const semigroupContextTraversal : Semigroup<O.Option<BidContext>> = ({\n//   concat: (a, b) => pipe(O.of(maybeConcat), O.ap(a), O.ap(b), O.flatten)\n// })\n\ntype X = BidContext\ntype C = Constraint\ntype A = P.Predicate<Hand>\n\nconst quantifierT = (quantifier: (c: ReadonlyArray<A>) => A) => (satisfies: (c: S.State<X, C>) => S.State<X, A>) =>\n  flow(\n    S.traverseArray(satisfies),\n    S.map(quantifier))\nconst existsT = quantifierT(exists(identity))\nconst forallT = quantifierT(forall(identity))\n\ntype SatisfiesShape<R, C, A> = (recur: (c: R) => A) => (constraint: C) => A\ntype SatisfiesT1<F extends hkt.URIS , C extends Constraint> = SatisfiesShape<hkt.Kind  <F,    Constraint>, hkt.Kind <F,    C>, hkt.Kind <F,    A>>\ntype SatisfiesT2<F extends hkt.URIS2, C extends Constraint> = SatisfiesShape<hkt.Kind2 <F, X, Constraint>, hkt.Kind2<F, X, C>, hkt.Kind2<F, X, A>>\n\nconst satisfiesBasic : ReturnType<SatisfiesT1<id.URI, BasicConstraint>> = c => {\n  switch (c.type) {\n    case \"Constant\":\n      return constant(c.value)\n    case \"PointRange\":\n      return isPointRange(c)\n    case \"SuitRange\":\n      return isSuitRange(c)\n    case \"SuitComparison\":\n      return suitCompare(c.op)(c.left, c.right)\n    case \"Balanced\":\n      return isBalanced\n    case \"SemiBalanced\":\n      return P.or(isBalanced)(isSemiBalanced)\n    case \"Unbalanced\":\n      return P.not(P.or(isBalanced)(isSemiBalanced))\n    case \"AnyShape\":\n      return isShape(c.counts)\n    case \"SpecificShape\":\n      return isSpecificShape(c.suits)\n    default:\n      return assertUnreachable(c)\n  }\n}\n\nconst satisfiesContextual : SatisfiesT2<S.URI, ContextualConstraint> = recur =>\n  S.chain(c => {\n    switch (c.type) {\n      case \"Conjunction\":\n        return pipe(c.constraints, RNEA.map(c => context => [c, context]), forallT(recur))\n      case \"Disjunction\":\n        return pipe(c.constraints, RNEA.map(c => context => [c, context]), existsT(recur))\n      case \"Negation\": \n        return pipe(c.constraint, S.of, recur, S.map(P.not))\n      case \"ForceOneRound\":\n      case \"ForceGame\":\n      case \"ForceSlam\":\n      case \"Relay\":\n        return pipe(\n          S.modify<BidContext>(forceL.set(O.some(c))),\n          S.map(() => constTrue))\n      case \"SuitPrimary\":\n        return pipe(\n          S.modify<BidContext>(primarySuitL.set(O.some(c.suit))),\n          S.map(() => suitPrimary(c.suit)))\n      case \"SuitSecondary\":\n        return pipe(\n          S.modify<BidContext>(secondarySuitL.set(O.some(c.suit))),\n          S.chain(() => S.gets(context => context.primarySuit)),\n          optionT.map(S.Functor)(suitSecondary(c.suit)),\n          S.map(O.getOrElseW(() => constraintFalse)))\n      default:\n        return assertUnreachable(c)\n    }\n  })\n\nconst satisfiesS : ReturnType<SatisfiesT2<S.URI, Constraint>> = s =>\n  pipe(s,\n    S.map(separate),\n    S.chain(either.fold(\n      flow(S.of, satisfiesContextual(satisfiesS)),\n      right => pipe(S.of<X, typeof satisfiesBasic>(satisfiesBasic), S.ap(S.of(right))))))\n\nexport const satisfiesWithContext = (x: Constraint) =>\n  pipe(x, S.of, satisfiesS)\n  \nexport const satisfies =\n  flow(satisfiesWithContext, S.evaluate(zeroContext))\n\nmodule Gen {\n  export function* alternate(opener: Hand, responder: Hand) {\n    while (true) { yield opener; yield responder }\n  }\n\n  export const unfold = (length: number) => <T>(g: Generator<T>) : readonly T[] => {\n    const val = g.next()\n    return val.done || length === 0 ? [] : [val.value, ...unfold(length - 1)(g)]\n  }\n}\n\nexport const satisfiesPath = (opener: Hand, responder: Hand) => (bids: ReadonlyArray<ConstrainedBid>) =>\n  pipe(\n    Gen.alternate(opener, responder),\n    Gen.unfold(bids.length),\n    RA.zip(bids),\n    S.traverseArray(([hand, bid]) =>\n      pipe(\n        S.of(bid.constraint),\n        satisfiesS,\n        S.ap(S.of(hand)),\n        S.chain(s => pipe(\n          S.modify<BidContext>(pathL.modify(RA.prepend(bid))),\n          // S.chainFirst(() => context => { console.log(JSON.stringify(context)); return [0, context] }),\n          S.map(() => s))))),\n    S.map(RA.foldMap(boolean.MonoidAll)(identity)),\n    S.evaluate(zeroContext))","import { either, readonlyRecord, readonlySet } from \"fp-ts\"\nimport { Either } from 'fp-ts/lib/Either'\nimport * as D from 'io-ts/Decoder'\nimport * as iso from \"monocle-ts/Iso\"\nimport { O } from 'ts-toolbelt'\nimport { decodeHand } from '../parse'\nimport { Deal } from \"./bridge\"\nimport { Card, eqCard, Hand, ordCard } from \"./deck\"\n\nexport type DecodedHand = ReturnType<typeof decodeHand>\nexport type SerializedHand = ReadonlyArray<Card>\nexport type DecodedSerializedHand = DecodedHand extends Either<infer L, unknown> ? either.Either<L, SerializedHand> : never\n\nexport const serializedHandL : iso.Iso<Hand, SerializedHand> = iso.iso(\n  readonlySet.toReadonlyArray(ordCard),\n  readonlySet.fromReadonlyArray(eqCard)\n)\nexport type SerializedDeal = O.Update<Deal, keyof Deal, SerializedHand>\nexport const serializedDealL = iso.iso<Deal, SerializedDeal>(\n  readonlyRecord.map(serializedHandL.get),\n  readonlyRecord.map(serializedHandL.reverseGet),\n)\n\nconst liftEither = <E>() => <A, B>(i: iso.Iso<A, B>) => iso.iso<Either<E, A>, Either<E, B>>(either.map(i.get), either.map(i.reverseGet))\nexport const decodedSerializedHandL = liftEither<D.DecodeError>()(serializedHandL)","import * as D from 'io-ts/Decoder'\n\nimport { Constraint, satisfies } from '../model/constraints'\nimport { Deal, Direction, deal } from \"../model/bridge\"\nimport { DecodedHand, DecodedSerializedHand, decodedSerializedHandL } from \"../model/serialization\"\nimport { Hand, newDeck } from \"../model/deck\"\nimport { O, U } from 'ts-toolbelt'\nimport { PayloadAction, createSlice } from \"@reduxjs/toolkit\"\nimport { either, option } from \"fp-ts\"\nimport { flow, pipe } from \"fp-ts/lib/function\"\n\nimport { castDraft } from \"immer\"\nimport { decodeHand } from '../parse'\n\nconst name = 'selection'\n\ninterface State {\n  selectedBlockKey: option.Option<string>\n  opener?: DecodedSerializedHand\n  responder?: DecodedSerializedHand\n}\nexport type AuctionPositionType = O.SelectKeys<State, U.Nullable<DecodedHand>>\n\nconst initialState : State = {\n  selectedBlockKey: option.none\n}\n\nconst getHandByDirection = (dir: Direction) => (d: Deal) =>\n  pipe(d[dir], either.right, decodedSerializedHandL.get, castDraft)\n\nconst slice = createSlice({\n  name,\n  initialState,\n  reducers: {\n    setSelectedBlockKey: (state, action: PayloadAction<option.Option<string>>) => {\n      state.selectedBlockKey = action.payload\n    },\n    setHand: {\n      reducer: (state, action: PayloadAction<string, string, AuctionPositionType>) => {\n        state[action.meta] = pipe(action.payload, decodeHand, decodedSerializedHandL.get, castDraft)\n      },\n      prepare: (payload, meta) => ({ payload, meta })\n    },\n    genHands: (state) => {\n      const d = deal(newDeck())\n      state['opener'] = getHandByDirection(\"N\")(d)\n      state['responder'] = getHandByDirection(\"S\")(d)\n    }\n  }\n})\n\nexport const { setSelectedBlockKey, setHand, genHands } = slice.actions\n\nexport default slice.reducer\n\nexport const selectTestConstraint = (state: State, constraint: Constraint) : boolean =>\n  pipe(state.opener,\n    either.fromNullable(D.error(undefined, \"No hand defined yet\")),\n    either.flatten,\n    decodedSerializedHandL.reverseGet,\n    either.exists(satisfies(constraint)))\n\nexport const selectHand = (state: State, type: AuctionPositionType) : option.Option<Hand> =>\n  pipe(state[type],\n    option.fromNullable,\n    option.chain(flow(decodedSerializedHandL.reverseGet, option.fromEither)))\n  ","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport type { RootState, AppDispatch } from './store';\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import 'draft-js/dist/Draft.css';\n\nimport { BlockItem, setSystem } from '../reducers/system';\nimport { Editor as DraftJsEditor, EditorState, RichUtils, convertFromRaw, convertToRaw, getDefaultKeyBinding } from 'draft-js';\nimport { useCallback, useEffect, useState } from 'react';\n\nimport { option } from 'fp-ts';\nimport { setSelectedBlockKey } from '../reducers/selection';\nimport { useAppDispatch } from '../app/hooks';\n\nconst getItemsFromBlocks = (editorState: EditorState) =>\n  editorState.getCurrentContent().getBlockMap().toArray().map<BlockItem>(x => ({\n    key: x.getKey(),\n    text: x.getText(),\n    depth: x.getDepth()\n  }))\n\nconst Editor = () => {\n  const [editorState, setEditorState] = useState(() => EditorState.createEmpty());\n  const dispatch = useAppDispatch()\n\n  const onChange = useCallback((editorState: EditorState) => {\n    setEditorState(editorState)\n    localStorage.setItem(\"editor\", JSON.stringify(convertToRaw(editorState.getCurrentContent())))\n    dispatch(setSystem(getItemsFromBlocks(editorState)))\n    dispatch(setSelectedBlockKey(option.some(editorState.getSelection().getFocusKey())))\n  }, [dispatch])\n\n  useEffect(() => {\n    const savedEditorState = localStorage.getItem(\"editor\")\n    if (savedEditorState) {\n      setEditorState(() => EditorState.createWithContent(convertFromRaw(JSON.parse(savedEditorState))))\n    } else {\n      setEditorState(() => RichUtils.toggleBlockType(editorState, 'unordered-list-item'))\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n  \n  return (\n    <DraftJsEditor\n      editorState={editorState}\n      onChange={onChange}\n      // https://github.com/facebook/draft-js/blob/master/examples/draft-0-10-0/rich/rich.html#L61\n      keyBindingFn={e => {\n        if (e.keyCode === 9 /* TAB */) {\n          const newEditorState = RichUtils.onTab(e, editorState, 10, /* maxDepth */);\n          if (newEditorState !== editorState) {\n            onChange(newEditorState)\n          }\n          return null;\n        }\n        return getDefaultKeyBinding(e);\n      }}\n    />\n  )\n}\n\nexport default Editor","/* eslint-disable import/no-webpack-loader-syntax */\n\nimport Worker from 'comlink-loader!./worker'; // inline loader\n\nconst makeGenDealsTask = (count: number) => () => new Worker().genDeals(count)\nexport default makeGenDealsTask;","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\"\nimport { readonlyArray, readonlyTuple, task } from \"fp-ts\"\nimport { constant, pipe } from \"fp-ts/lib/function\"\nimport { castDraft } from \"immer\"\nimport { SerializedHand, serializedHandL } from \"../model/serialization\"\nimport makeGenDealsTask from \"./worker\"\n\nconst name = 'generator'\n\ninterface State {\n  deals: ReadonlyArray<[SerializedHand, SerializedHand]>\n  generating: boolean\n}\nconst initialState: State = {\n  deals: [],\n  generating: false\n}\n\nconst maxProcessors = window.navigator.hardwareConcurrency\n\nconst genDeals = createAsyncThunk(`${name}/genDeals`, async (count: number) => {\n  const handsPerWorker = Math.floor(count / maxProcessors)\n  const remainder = Math.floor(count % maxProcessors)\n  // return new Worker().genDeals(count)\n  return pipe(readonlyArray.makeBy(maxProcessors - 1, constant(makeGenDealsTask(handsPerWorker))),\n    readonlyArray.prepend(makeGenDealsTask(handsPerWorker + remainder)),\n    task.sequenceArray,\n    task.map(readonlyArray.flatten),\n    task => task())\n})\n\nconst slice = createSlice({\n  name,\n  initialState,\n  reducers: {},\n  extraReducers: builder => builder\n  .addCase(genDeals.pending, (state) => {\n    state.generating = true\n  })\n  .addCase(genDeals.fulfilled, (state, action) => {\n    state.deals = pipe(\n      action.payload,\n      readonlyArray.map(deal =>\n        pipe([\"N\", \"S\"] as const,\n          readonlyTuple.bimap(dir => deal[dir], dir => deal[dir]))),\n      castDraft)\n    state.generating = false\n  })\n  .addCase(genDeals.rejected, (state) => {\n    state.generating = false\n  })\n})\n\nexport { genDeals }\nexport default slice.reducer\n\nexport const selectAllDeals = (state: State) =>\n  pipe(state.deals,\n    readonlyArray.map(readonlyTuple.bimap(serializedHandL.reverseGet, serializedHandL.reverseGet)))","import { ConstrainedBid, satisfiesPath } from '../model/constraints'\nimport { either, number, option, ord, readonlyArray, readonlyNonEmptyArray, readonlyRecord, readonlyTuple, string } from 'fp-ts'\nimport { flow, pipe } from 'fp-ts/lib/function'\nimport generator, { selectAllDeals } from './generator'\nimport selection, { selectHand } from './selection'\nimport system, { selectAllCompleteBidPaths, selectBidsByKey } from './system'\n\nimport { ContractBid } from '../model/bridge'\nimport { ReadonlyNonEmptyArray } from 'fp-ts/lib/ReadonlyNonEmptyArray'\nimport { RootState } from '../app/store'\n\nconst reducers = {\n  system,\n  selection,\n  generator\n}\nexport default reducers\n\nexport const selectHandsSatisfySelectedPath = (state: RootState) =>\n  pipe(option.Do,\n    option.apS('blockKey', state.selection.selectedBlockKey),\n    option.apS('opener', selectHand(state.selection, 'opener')),\n    option.apS('responder', selectHand(state.selection, 'responder')),\n    option.chain(o => pipe(either.Do,\n      either.apS('bids', selectBidsByKey(state.system, o.blockKey)),\n      either.map(e => satisfiesPath(o.opener, o.responder)(e.bids)),\n      option.fromEither)),\n    option.toNullable)\n\ninterface BidResult {\n  path: ReadonlyNonEmptyArray<ConstrainedBid>\n  result: boolean\n}\nexport const selectPathsSatisfyHands = (state: RootState) =>\n  pipe(option.Do,\n    option.apS('opener', selectHand(state.selection, 'opener')),\n    option.apS('responder', selectHand(state.selection, 'responder')),\n    option.map(o => pipe(\n      selectAllCompleteBidPaths(state.system),\n      readonlyArray.map<ReadonlyNonEmptyArray<ConstrainedBid>, BidResult>(path => ({\n        path,\n        result: satisfiesPath(o.opener, o.responder)(path)\n      })))),\n    option.toNullable)\n\ninterface BidCountResult {\n  path: ReadonlyNonEmptyArray<ConstrainedBid>\n  count: number\n}\nconst ordStats = pipe(\n  number.Ord,\n  ord.reverse,\n  ord.contramap<number, BidCountResult>(r => r.count))\n\nexport const selectSatisfyStats = (state: RootState) : ReadonlyArray<BidCountResult> | null =>\n  pipe(readonlyArray.Do,\n    readonlyArray.apS('deal', selectAllDeals(state.generator)),\n    readonlyArray.apS('path', selectAllCompleteBidPaths(state.system)),\n    readonlyArray.map(ra => ({\n      path: ra.path,\n      result: satisfiesPath(ra.deal[0], ra.deal[1])(ra.path)\n    })),\n    readonlyNonEmptyArray.fromReadonlyArray,\n    option.map(\n      flow(\n        readonlyNonEmptyArray.groupBy(x =>\n          pipe(x.path,\n            readonlyArray.map(p => p.bid as ContractBid),\n            readonlyArray.foldMap(string.Monoid)(b => `${b.level}${b.strain}`))),\n        readonlyRecord.map(r => ({\n          path: r[0].path,\n          count: pipe(r, readonlyArray.filter(a => a.result)).length\n        })),\n        readonlyRecord.toReadonlyArray,\n        readonlyArray.map(readonlyTuple.snd),\n        readonlyArray.sort(ordStats))),\n    option.toNullable)","import { selectNodeByKey, selectPathByKey } from \"../reducers/system\"\n\nimport { option } from \"fp-ts\"\nimport { pipe } from \"fp-ts/lib/function\"\nimport { selectHandsSatisfySelectedPath } from \"../reducers\"\nimport { useAppSelector } from \"../app/hooks\"\n\nconst SelectionDetails = () => {\n  const selected = useAppSelector(state => state.selection.selectedBlockKey)\n\n  const path = useAppSelector(state => pipe(selected, option.map(s => selectPathByKey(state.system, s)), option.toNullable))\n  const bid = useAppSelector(state => pipe(selected,\n    option.chain(s => pipe(selectNodeByKey(state.system, s), option.fromNullable)),\n    option.chain(n => n.bid),\n    option.chain(option.fromEither),\n    option.toNullable))\n  const satisfies = useAppSelector(selectHandsSatisfySelectedPath)\n\n  return (\n    <section>\n      <h3>Selection</h3>\n\n      {path && <div>\n        <h4>Selected Path</h4>\n        {path.map(x => x.text).join(\" > \")}\n      </div>}\n\n      {bid && <div>\n        <h4>Selected Bid</h4>\n        {pipe(bid, option.fromNullable, option.map(JSON.stringify), option.toNullable)}\n        {satisfies !== null && <div>\n        <h4>Satisfies</h4>\n        {satisfies.toString()}\n      </div>}\n      </div>}\n    </section>\n  )\n}\n\nexport default SelectionDetails","import styled from \"styled-components\";\nimport { ContractBid } from \"../../model/bridge\";\nimport { ConstrainedBid } from \"../../model/constraints\";\n\nconst SuitSpan = styled.span `\n  &.S::after { content: \"\"; color: #0000FF; }\n  &.H::after { content: \"\"; color: #FF0000; }\n  &.D::after { content: \"\"; color: #FFA500; }\n  &.C::after { content: \"\"; color: #32CD32; }\n  &.N::after { content: \"NT\" }\n`\n\ninterface Props {\n  path: ReadonlyArray<ConstrainedBid>\n}\nconst BidPath = ({ path }: Props) =>\n  <>{path.map(b => b.bid as ContractBid).map(bid =>\n    <>\n      &nbsp;\n      <span>{bid.level}</span>\n      <SuitSpan className={bid.strain}></SuitSpan>\n    </>)\n  }</>\n\nexport default BidPath","import { selectAllCompleteBidPaths, selectErrors } from \"../reducers/system\"\nimport { useAppDispatch, useAppSelector } from \"../app/hooks\"\n\nimport BidPath from \"./core/BidPath\"\nimport { draw } from \"io-ts/lib/Decoder\"\nimport { genDeals } from \"../reducers/generator\"\nimport { selectSatisfyStats } from \"../reducers\"\nimport { useState } from \"react\"\n\nconst Stats = () => {\n  const generating = useAppSelector(state => state.generator.generating)\n  const dispatch = useAppDispatch()\n  const rules = useAppSelector(state => selectAllCompleteBidPaths(state.system))\n  const errors = useAppSelector(state => selectErrors(state.system))\n  const showGenerate = rules !== null && rules.length > 0 && errors.length === 0\n  const stats = useAppSelector(selectSatisfyStats)\n  const [count, setCount] = useState<number>(10000)\n  return (\n    <section>\n      <h3>Stats</h3>\n      {!showGenerate && <div>\n        <p>Select the system and/or fix errors</p>\n        {errors.length > 0 && <div>\n          <h4>Errors</h4>\n          <ul>{errors.map((e, i) => <li key={i}>{draw(e)}</li>)}</ul>\n        </div>}\n      </div>}\n      {showGenerate && <div>\n        <button type=\"button\" onClick={() => dispatch(genDeals(count))}>Generate deals</button>\n        <input type=\"number\" value={count} onChange={e => setCount(parseInt(e.target.value))} />\n        {generating && <span>Generating...</span>}\n        {stats !== null && <div>\n          <h3>Results</h3>\n          <ul>\n            {stats.map((r, i) => <li key={i}>\n              <BidPath path={r.path} />\n              : &nbsp;\n              <span>{r.count.toString()}</span>\n            </li>)}\n          </ul>\n        </div>}\n      </div>}\n    </section>\n  )\n}\n\nexport default Stats","import { either, option } from \"fp-ts\"\n\nimport { DecodeError } from \"io-ts/Decoder\"\nimport { draw } from \"io-ts/lib/Decoder\"\nimport { pipe } from \"fp-ts/lib/function\"\n\ninterface OptionProps<T> {\n  value: option.Option<T>\n  children: (value: T) => JSX.Element\n  onNone?: () => JSX.Element\n}\nexport const Option = <T extends {}>({value, children: onSuccess, onNone }: OptionProps<T>) => \n  pipe(value, option.fold(\n    () => onNone ? onNone() : <></>,\n    onSuccess))\n\ninterface DecodeProps<T> {\n  value: either.Either<DecodeError, T>\n  children: (value: T) => JSX.Element\n  onError?: (error: DecodeError) => JSX.Element\n}\nexport const Decode = <T extends {}>({value, children: onSuccess, onError }: DecodeProps<T>) => \n  pipe(value, either.fold(\n    e => onError ? onError(e) : <span>{draw(e)}</span>,\n    onSuccess))","import { option, readonlyArray, readonlyRecord, readonlyTuple } from \"fp-ts\"\nimport { pipe } from \"fp-ts/lib/function\"\nimport { useCallback, useEffect, useState } from \"react\"\nimport styled from \"styled-components\"\nimport { useAppDispatch, useAppSelector } from \"../app/hooks\"\nimport * as Deck from \"../model/deck\"\nimport { HandE } from \"../parse/hand\"\nimport { AuctionPositionType, genHands, selectHand, setHand } from \"../reducers/selection\"\nimport { Option } from \"./core/Monad\"\n\n\n\ninterface HandProps {\n  type: AuctionPositionType\n}\nconst HandInput = ({ type }: HandProps) => {\n  const dispatch = useAppDispatch()\n  const [value, setValue] = useState<string>(\"\")\n  const storageKey = `hand.${type}`\n\n  const encodedHand = useAppSelector(state => pipe(selectHand(state.selection, type), option.map(HandE.encode), option.toNullable))\n\n  const onSetHand = useCallback((hand: string) => {\n    setValue(hand)\n    dispatch(setHand(hand, type))\n  }, [dispatch, type])\n\n  useEffect(() => {\n    const savedHand = localStorage.getItem(storageKey)\n    if (savedHand) {\n      onSetHand(savedHand)\n    }\n  }, [onSetHand, storageKey, type])\n\n  return <input type=\"text\" placeholder=\"AKQJ.T987.654.32\" value={encodedHand ?? value} onChange={e => onSetHand(e.target.value)} onBlur={() => localStorage.setItem(storageKey, value)} />\n}\n\nconst RankList = styled.ol `\n  padding-left: 0;\n`\n\nconst RankListItem = styled.li `\n  list-style-type: none;\n  display: inline;\n  float: left;\n`\n\ninterface RankProps {\n  rank: Deck.Rank\n}\nconst Rank = ({ rank }: RankProps) =>\n  <RankListItem>{Deck.ranks[rank - 2]}</RankListItem>\n\ninterface SuitProps {\n  suit: Deck.Suit\n  ranks: ReadonlyArray<Deck.Rank>\n}\n\nconst HandCol = styled.th `\n  width: 15em;\n`\n\nconst SuitList = styled.ol `\n  white-space: nowrap;\n  padding-left: 0;\n  list-style: decimal url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) inside;\n`\n\nconst SuitListItem = styled.li `\n  display: inline;\n  &::before {\n    display: inline;\n    float: left;\n    margin-left: 5px;\n  }\n  &.S::before { content: \"\"; color: #0000FF; }\n  &.H::before { content: \"\"; color: #FF0000; }\n  &.D::before { content: \"\"; color: #FFA500; }\n  &.C::before { content: \"\"; color: #32CD32; }\n`\n\nconst Suit = ({ suit, ranks }: SuitProps) => {\n  return <SuitListItem className={suit}>\n    <RankList>\n      {ranks.map((r, i) => <Rank key={i} rank={r} />)}\n      {ranks.length === 0 && <RankListItem>-</RankListItem> }\n    </RankList>\n </SuitListItem>\n}\n\nconst Hand = ({ type }: HandProps) => {\n  const hand = useAppSelector(state => selectHand(state.selection, type))\n  return <>{hand &&\n    <Option value={hand}>{hand => {\n      const groupedHand = Deck.groupHandBySuits(hand)\n      return (\n        <SuitList>\n          {pipe(groupedHand,\n            readonlyRecord.mapWithIndex((suit, ranks) =>\n              <Suit key={suit} suit={suit} ranks={ranks} />),\n            readonlyRecord.toReadonlyArray,\n            readonlyArray.sort(Deck.getOrdGroupedHand<JSX.Element>()),\n            readonlyArray.map(readonlyTuple.snd))}\n        </SuitList>\n      )}}\n    </Option>\n  }</>\n}\n\nconst HandEditor = () => {\n  const dispatch = useAppDispatch()\n  return (\n    <table>\n      <thead>\n        <tr>\n          <HandCol>Opener</HandCol>\n          <HandCol>Responder</HandCol>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td><HandInput type=\"opener\" /></td>\n          <td><HandInput type=\"responder\" /></td>\n        </tr>\n        <tr>\n          <td><Hand type=\"opener\" /></td>\n          <td><Hand type=\"responder\" /></td>\n        </tr>\n        <tr>\n          <td>\n            <button type=\"button\" onClick={() => dispatch(genHands())}>Generate</button> <br/>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  )\n}\n\nexport default HandEditor","import BidPath from \"./core/BidPath\"\nimport HandEditor from \"./HandEditor\"\nimport { selectPathsSatisfyHands } from \"../reducers\"\nimport { useAppSelector } from \"../app/hooks\"\n\nconst TestHands = () => {\n  const results = useAppSelector(selectPathsSatisfyHands)\n  \n  return (\n    <section>\n      <h3>Test Hands</h3>\n      <HandEditor />\n\n      {results !== null && <div>\n        <h4>Results</h4>\n        <ul>\n          {results.map((r, i) => <li key={i}>\n            <BidPath path={r.path} />\n            : &nbsp;\n            <span>{r.result.toString()}</span>\n          </li>)}\n        </ul>\n      </div>}\n    </section>\n  )\n}\n\nexport default TestHands","import Editor from './Editor';\nimport SelectionDetails from './SelectionDetails';\nimport Stats from './Stats';\nimport TestHands from './TestHands';\n\nconst App = () => {\n  return (\n    <div className=\"App\">\n      <div style={{display: \"inline-block\", width: '50%'}}>\n        <Editor />\n        ---\n        <Stats />\n      </div>\n      <div style={{display: \"inline-block\", width: '50%', float: \"right\"}}>\n        <div style={{display: \"inline-block\", float: 'right'}}>\n          <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/kdblocher/bridge#documentation\">Documentation</a>\n          &nbsp;|&nbsp;\n          <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/kdblocher/bridge/discussions\">Share ideas</a>\n          &nbsp;|&nbsp;\n          <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/kdblocher/bridge/issues/new\">Report issue</a>\n        </div>\n        <TestHands />\n        <SelectionDetails />\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import { Action, ThunkAction, configureStore } from '@reduxjs/toolkit';\n\nimport reducer from '../reducers';\n\nexport const store = configureStore({\n  reducer: reducer\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","import './index.css';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport App from './components';\nimport { Provider } from 'react-redux';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { store } from './app/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}