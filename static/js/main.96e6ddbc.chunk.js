(this.webpackJsonpbridge=this.webpackJsonpbridge||[]).push([[0],{346:function(t,e,n){var r,i=n(157).wrap,a=n(550);t.exports=function t(){return this instanceof t?i(a()):r||(r=i(a()))}},347:function(t,e,n){var r,i=n(157).wrap,a=n(551);t.exports=function t(){return this instanceof t?i(a()):r||(r=i(a()))}},348:function(t,e,n){var r,i=n(157).wrap,a=n(552);t.exports=function t(){return this instanceof t?i(a()):r||(r=i(a()))}},349:function(t,e,n){var r,i=n(157).wrap,a=n(553);t.exports=function t(){return this instanceof t?i(a()):r||(r=i(a()))}},448:function(t,e,n){},460:function(t,e){},462:function(t,e){},472:function(t,e){},474:function(t,e){},500:function(t,e){},501:function(t,e){},506:function(t,e){},508:function(t,e){},515:function(t,e){},534:function(t,e){},550:function(t,e,n){t.exports=function(){return new Worker(n.p+"914bcd3dc772cf94f689.worker.js")}},551:function(t,e,n){t.exports=function(){return new Worker(n.p+"ff41cabfb8bba92e2f72.worker.js")}},552:function(t,e,n){t.exports=function(){return new Worker(n.p+"abf7c0d3b3e746af4876.worker.js")}},553:function(t,e,n){t.exports=function(){return new Worker(n.p+"226fbf730682b5acc887.worker.js")}},655:function(t,e,n){"use strict";n.r(e);n(448),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=n(0),i=n.n(r),a=n(111),c=n.n(a),u=n(148),o=n(146),s=n(26),l=n(14),p=n(65),f=n(1),d=n(2),j=n(50),h=n(668),b=n(13),m=n(6),O=n.n(m),v=O.a.mark(y);function y(t,e){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,t;case 3:return n.next=5,e;case 5:n.next=0;break;case 7:case"end":return n.stop()}}),v)}var g=function t(e){return function(n){var r=n.next();return r.done||0===e?[]:[r.value].concat(Object(l.a)(t(e-1)(n)))}};var S,x,k,w,C,A,_,B,q,D,E,P,R,N,M,F,I,T,L,H,z,W,U,$,K,G,J,Q,V,X,Z,Y,tt,et,nt,rt,it,at,ct,ut,ot,st,lt,pt,ft,dt,jt,ht,bt,mt,Ot,vt,yt,gt,St,xt,kt,wt,Ct=n(344),At=n(73),_t=function(t){throw new Error("shouldn't get here with ".concat(JSON.stringify(t)))},Bt=function(t){return Object(d.pipe)(f.i.Ord,f.l.contramap((function(e){return t.indexOf(e)})))},qt=Object(d.flow)(Bt,f.l.reverse),Dt=n(10),Et=n(51),Pt=n(237),Rt=["C","D","H","S"],Nt=f.g.eqStrict,Mt=qt(Rt),Ft=(Bt(Rt),["2","3","4","5","6","7","8","9","T","J","Q","K","A"]),It=Et.b(Et.c,(function(t){return t>=2&&t<=14}),"Rank"),Tt=new Et.a("Rank",It.is,It.validate,(function(t){return Ft[t-2]})),Lt=f.g.eqStrict,Ht=f.i.Ord,zt=Object(d.pipe)(Ht,f.l.reverse),Wt=Object(d.pipe)(Ft,f.n.mapWithIndex((function(t,e){return Object(d.pipe)(t+2,Tt.decode,(function(t){return t.right}))}))),Ut=Object(d.pipe)(Wt,f.n.takeRight(5)),$t=function(t){return Object(d.pipe)(Ft,f.n.findIndex((function(e){return f.x.Eq.equals(t,e)})),f.j.chain((function(t){return Object(d.pipe)(Wt,f.n.lookup(t))})))},Kt=f.g.struct({suit:Nt,rank:Lt}),Gt=f.l.getMonoid().concat(Object(d.pipe)(Mt,f.l.contramap((function(t){return t.suit}))),Object(d.pipe)(zt,f.l.contramap((function(t){return t.rank})))),Jt=Object(d.pipe)(52,f.p.makeBy((function(t){return{suit:Rt[Math.floor(t/13)],rank:Tt.decode(t%13+2).right}}))),Qt=function(){return f.l.contramap((function(t){var e=Object(b.a)(t,2),n=e[0];e[1];return n}))(Mt)},Vt={S:[],H:[],D:[],C:[]},Xt=function(t){return Object(d.pipe)(t,f.r.toReadonlyArray(Gt),f.p.fromReadonlyArray,f.j.fold((function(){return Vt}),Object(d.flow)(f.p.groupBy((function(t){return t.suit})),f.q.map(f.p.map((function(t){return t.rank}))),f.q.union(f.n.getUnionMonoid(Lt))(Vt))))},Zt={engine:Pt.a.autoSeed()},Yt=function(){return Object(Pt.b)(Zt.engine,Object(l.a)(Jt))},te=["N","E","S","W"],ee=f.x.Eq,ne=(Bt(te),f.x.Eq,Bt(["NorthSouth","EastWest"]),f.r.getEq(Kt)),re=f.q.getEq(ne),ie=[].concat(Object(l.a)(Rt),["N"]),ae=f.g.eqStrict,ce=Bt(ie),ue=["C","D"],oe=(f.g.struct({dealer:ee,deal:re}),function(t){switch(t%16+1){case 1:case 8:case 11:case 14:return"Neither";case 2:case 5:case 12:case 15:return"NorthSouth";case 3:case 6:case 9:case 16:return"EastWest";case 4:case 7:case 10:case 13:return"Both";default:throw Error("Not possible")}}),se=["Pass","Double","Redouble"],le=f.x.Eq,pe=function(t){return"string"===typeof t&&Object(d.pipe)(se,f.n.elem(f.x.Eq)(t))},fe=f.g.struct({level:f.i.Eq,strain:f.x.Eq}),de=f.l.getMonoid().concat(Object(d.pipe)(f.i.Ord,f.l.contramap((function(t){return t.level}))),Object(d.pipe)(ce,f.l.contramap((function(t){return t.strain})))),je=f.p.makeBy((function(t){return t+1}))(7),he=Object(d.pipe)(f.a.sequenceS(f.n.Apply)({level:je,strain:ie}),f.n.sort(de)),be=function(t){return!pe(t)},me=f.g.fromEquals((function(t,e){return pe(t)&&pe(e)&&le.equals(t,e)||!pe(t)&&!pe(e)&&fe.equals(t,e)})),Oe=(f.g.struct({level:f.i.Eq,strain:f.x.Eq,modifier:f.x.Eq}),f.p.getEq(me),Object(d.flow)(f.r.toReadonlyArray(Gt),f.n.foldMap(f.i.MonoidSum)((function(t){return e=t.rank,Math.max(0,e-10);var e})))),ve=[0,0,0,0],ye=function(t){return Object(d.pipe)(t,f.n.sort(f.l.reverse(f.i.Ord)))},ge=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object(d.pipe)(e,ye)},Se=f.g.contramap(ye)(f.n.getEq(f.i.Eq)),xe=(S=0,x=0,k=0,w=0,{S:S,H:x,D:k,C:w}),ke=function(t){return Object(d.pipe)(t,Xt,f.q.map((function(t){return t.length})),f.q.union(f.u.first())(xe),(function(t){return t}))},we=function(t){return Object(d.pipe)(t,ke,f.q.toReadonlyArray,f.n.map(f.s.snd),(function(t){return f.n.mapWithIndex((function(e,n){return Object(d.pipe)(t,f.n.lookup(e),f.j.getOrElse((function(){return 0})))}))(ve)}))},Ce=Object(d.constant)({type:"Constant",value:!0}),Ae=(Object(d.constant)({type:"Constant",value:!1}),d.constFalse),_e=(d.constTrue,function(t){return function(e){return f.n.foldMap(e)((function(t){return t}))(t)}}),Be=function(t){return Object(d.pipe)(t,_e,Object(d.apply)(f.m.getMonoidAny()))},qe=function(t){return Object(d.pipe)(t,_e,Object(d.apply)(f.m.getMonoidAll()))},De=function(t){return f.l.between(f.i.Ord)(t.min,t.max)},Ee=Object(d.flow)(De,f.m.contramap(Oe)),Pe=function(t){return function(e){return Object(d.flow)(ke,(function(n){return Object(d.pipe)(t,De,Object(d.apply)(n[e]))}))}},Re=function(t){return function(e,n){return Object(d.flow)(ke,(function(r){return function(t){switch(t){case"<":return f.l.lt(f.i.Ord);case"<=":return f.l.leq(f.i.Ord);case"=":return f.i.Eq.equals;case">=":return f.l.geq(f.i.Ord);case">":return f.l.gt(f.i.Ord);default:return _t(t)}}(t)(r[e],r[n])}))}},Ne=f.r.fromReadonlyArray(Lt),Me=["Conjunction","Disjunction","Negation","SuitPrimary","SuitSecondary","SetTrump"],Fe=function(t){return function(t){return f.n.elem(f.x.Eq)(t.type)(Me)}(t)?f.d.left(t):f.d.right(t)},Ie=function(t){switch(t.type){case"Constant":return Object(d.constant)(t.value);case"PointRange":return Ee(t);case"SuitRange":return Pe(t)(t.suit);case"SuitComparison":return Re(t.op)(t.left,t.right);case"SuitHonors":return r=t,Object(d.flow)(Xt,f.q.lookup(r.suit),f.j.fold(d.constFalse,(function(t){var e=Object(d.pipe)(t,Ne,f.r.intersection(Lt)(Ne(Ut))),n=Object(d.pipe)(r.honors,Ne);return Object(d.pipe)(n,f.r.isSubset(Lt)(e))})));case"SuitTop":return n=t,Object(d.flow)(Xt,f.q.lookup(n.suit),f.j.fold(d.constFalse,Object(d.flow)(f.n.filter((function(t){return Ht.compare(t,n.minRank)>=0})),(function(t){return t.length>=n.count}))));case"AnyShape":return e=t.counts,Object(d.flow)(we,(function(t){return Se.equals(e,t)}));case"SpecificShape":return function(t){return Object(d.flow)(ke,(function(e){return f.t.getEq(Ct.eqStrict).equals(e,t)}))}(t.suits);default:return _t(t)}var e,n,r},Te=f.l.fromCompare((function(t,e){return be(t)&&!be(e)?-1:be(e)&&!be(t)?1:be(t)&&be(e)?de.compare(t,e):0})),Le=f.l.contramap((function(t){return t.bid}))(Te),He=["Me","LHO","Partner","RHO"],ze=["We"],We={primarySuit:f.j.none,secondarySuit:f.j.none},Ue=At.b.fromProp(),$e=Ue("primarySuit"),Ke=Ue("secondarySuit"),Ge={trumpSuit:f.j.none},Je=At.b.fromProp(),Qe=Je("trumpSuit"),Ve=function(t){return function(e){return Object(d.pipe)(f.n.zip(Object(d.pipe)(t,f.n.rotate(1)),t),f.n.map(f.s.mapSnd((function(t){return e[t]}))),f.q.fromFoldable(f.u.first(),f.n.Foldable))}},Xe=function(t){var e=At.b.fromProp()("players"),n=At.b.fromProp()("partnerships");return Object(d.pipe)([e.modify(Object(d.flow)(Ve(He),Ve(He))),n.modify(Ve(ze))],f.p.foldMap(f.f.getSemigroup())(d.identity),Object(d.apply)(t))},Ze={bid:{},path:[],players:Object(d.pipe)(He,f.n.map((function(t){return[t,We]})),f.q.fromFoldable(f.u.first(),f.n.Foldable)),partnerships:Object(d.pipe)(ze,f.n.map((function(t){return[t,Ge]})),f.q.fromFoldable(f.u.first(),f.n.Foldable))},Ye=At.b.fromProp(),tn=Ye("bid"),en=Ye("path"),nn=Ye("players"),rn=Ye("partnerships"),an=(At.c.fromOptionProp(),new At.a((function(t){return new At.b(Object(d.flow)(nn.get,(function(e){return e[t]})),(function(e){return function(n){return Object(d.pipe)(n,nn.get,f.q.upsertAt(t,e),nn.set,Object(d.apply)(n))}}))}))),cn=new At.a((function(t){return new At.b(Object(d.flow)(rn.get,(function(e){return e[t]})),(function(e){return function(n){return Object(d.pipe)(n,rn.get,f.q.upsertAt(t,e),rn.set,Object(d.apply)(n))}}))})),un=function(t){return function(e){return Object(d.flow)(f.w.traverseArray(e),f.w.map(t))}},on=function(t){return f.w.of(t)},sn=function(t){return f.w.chain((function(e){switch(e.type){case"Conjunction":return Object(d.pipe)(e.constraints,f.p.map(on),(r=t,un(qe)(r)));case"Disjunction":return Object(d.pipe)(e.constraints,f.p.map(on),function(t){return un(Be)(t)}(t));case"Negation":return Object(d.pipe)(e.constraint,on,t,f.w.map(f.m.not));case"SuitPrimary":return Object(d.pipe)(f.w.modify(an.at("Me").composeLens($e).set(f.j.some(e.suit))),f.w.map((function(){return t=e.suit,Object(d.pipe)(Rt,f.n.splitAt(Rt.indexOf(t)),f.s.bimap(Object(d.flow)(f.n.tail,f.j.fold((function(){return[]}),f.n.map((function(e){return Re("<")(e,t)})))),f.n.map((function(e){return Re("<=")(e,t)}))),f.n.flatten,f.n.prepend(Pe({min:5,max:13})(t)),qe);var t})));case"SuitSecondary":return Object(d.pipe)(f.w.modify(an.at("Me").composeLens(Ke).set(f.j.some(e.suit))),f.w.apSecond(f.w.gets(an.at("Me").composeLens($e).get)),f.k.map(f.w.Functor)((n=e.suit,function(t){return Object(d.pipe)(f.n.Do,f.n.apS("suit",[n,t]),f.n.apS("otherSuit",Object(d.pipe)(Rt,f.n.difference(Nt)([n,t]))),f.n.filter((function(t){var e=t.suit,n=t.otherSuit;return!Nt.equals(e,n)})),f.n.map((function(t){var e=t.suit,n=t.otherSuit;return Re(">")(e,n)})),f.n.concat([Pe({min:4,max:13})(n),Re(">=")(t,n)]),qe)})),f.w.map(f.j.getOrElse((function(){return Ae}))));case"SetTrump":return Object(d.pipe)(f.w.modify(cn.at("We").composeLens(Qe).set(f.j.some(e.suit))),f.w.map((function(){return d.constTrue})));default:return _t(e)}var n,r}))},ln=function t(e){return Object(d.pipe)(e,f.w.map(Fe),f.w.chain(f.d.fold(Object(d.flow)(f.w.of,sn(t)),Object(d.flow)(f.w.flap,(function(t){return t(on(Ie))})))))},pn=(Object(d.flow)((function(t){return Object(d.pipe)(t,f.w.of,ln)}),f.w.evaluate(Ze)),function(t,e){return function(n){return Object(d.pipe)(y(t,e),g(n.length),f.n.zip(n),f.w.traverseArray((function(t){var e=Object(b.a)(t,2),n=e[0],r=e[1];return Object(d.pipe)(on(r.constraint),f.w.chainFirst((function(){return f.w.modify(tn.set(r.bid))})),ln,f.w.flap(n),f.w.apFirst(f.w.modify(Xe)),f.w.apFirst(f.w.modify(en.modify(f.n.prepend(r.bid)))))})),f.w.map(f.n.foldMap(f.c.MonoidAll)(d.identity)),f.w.evaluate(Ze))}}),fn=n(32),dn=n(40),jn=n(666),hn=n(691),bn=n(188),mn=n(17),On=n(345),vn=n.n(On),yn=n(70),gn=function(t){return function(e){return e[t]}},Sn=Et.b(Et.c,(function(t){return!0}),"Date"),xn=function(){return Object(d.pipe)((new Date).getTime(),Sn.decode,(function(t){return t.right}))},kn=(Et.e([Sn,Sn]),function(t){return t.details.progress}),wn=function(t){return f.j.some({unitsDone:0,updateDate:f.j.none,speed:f.j.none,value:t})},Cn=function(t){return function(e){return function(n){return function(r){return Object(d.pipe)(r,f.j.map((function(r){var i=xn(),a=Object(d.pipe)(r.updateDate,f.j.map((function(t){return(i-t)/e})),f.j.filter((function(t){return!isNaN(t)&&isFinite(t)})));return{unitsDone:r.unitsDone+e,updateDate:f.j.some(i),value:t.concat(r.value,n),speed:Object(d.pipe)(f.j.Do,f.j.apS("avg",r.speed),f.j.apS("next",a),f.j.map((function(t){return.9*t.avg+.1*t.next})),f.j.filter((function(t){return!isNaN(t)&&isFinite(t)})),f.j.alt((function(){return a})),f.j.alt((function(){return r.speed})))}})))}}}},An=Et.b(Et.d,(function(t){return yn.UuidTool.isUuid(t)}),"GenerationId"),_n=function(){return An.decode(yn.UuidTool.newUuid()).right},Bn=Et.b(Et.d,(function(t){return yn.UuidTool.isUuid(t)}),"AnalysisId"),qn=Et.b(Et.d,(function(t){return!0}),"PathHash"),Dn=function(t){return qn.decode(vn()(t)).right},En=function(t){switch(t){case"GenerateDeals":return wn(0);case"Satisfies":case"Solve":return wn({});default:return _t(t)}},Pn=Et.b(Et.d,(function(t){return yn.UuidTool.isUuid(t)}),"JobId"),Rn=n(15),Nn=n(346),Mn=n.n(Nn),Fn=n(347),In=n.n(Fn),Tn=n(348),Ln=n.n(Tn),Hn=n(349),zn=n.n(Hn),Wn=n(80),Un=n(667),$n=n(47),Kn=n(357),Gn=n(690),Jn=n(664),Qn=n(665),Vn=n(358),Xn=function(t,e){return function(n){var r=navigator.hardwareConcurrency?navigator.hardwareConcurrency-1:1;return new $n.a((function(i){var a=new Kn.a,c=0,u=0,o=!1,s=f.n.makeBy(r,(function(e){var n=null;return{factory:function(){var r;return null!==(r=n)&&void 0!==r?r:n=t(e)},terminate:function(){this.processing},processing:!1,index:e}})),l=Object(Gn.a)(a,n).pipe(Object(Jn.a)((function(t){var e=Object(b.a)(t,1)[0];u++,e.processing=!0})),Object(Qn.a)((function(){a.complete(),o=!0,s.forEach((function(t){return t.terminate()}))})),Object(Vn.a)((function(t){var n=Object(b.a)(t,2),r=n[0],s=n[1];return Object(d.pipe)(r.factory(),e,Object(d.apply)(s),Wn.a,Object(Qn.a)((function(){c++,r.processing=!1,o?r.terminate():a.next(r),o&&c===u&&i.complete()})))}))).subscribe(i);return s.forEach((function(t){return a.next(t)})),function(){return l.unsubscribe()}}))}},Zn=n(131),Yn=n(48),tr=Yn.f(f.r.toReadonlyArray(Gt),f.r.fromReadonlyArray(Kt)),er=(C=tr,Yn.f(f.d.map(C.get),f.d.map(C.reverseGet))),nr=(Object(d.flow)(f.d.fromPredicate(yn.UuidTool.isUuid,(function(t){return Zn.a(t,"Invalid uuid string")})),f.d.map((function(t){return new yn.Uuid(t)}))),function(t){return Object(d.pipe)(new yn.Uuid(t.id).toBytes(),f.n.takeLeft(13),f.n.chain(Object(d.flow)((function(t){return f.n.unfold([t,4],(function(t){var e=Object(b.a)(t,2),n=e[0],r=e[1];return 0===r?f.j.none:f.j.some([3&n,[n>>2,r-1]])}))}),f.n.reverse)))}),rr=Et.b(Et.f({id:Et.d}),(function(t){return Object(d.pipe)(t,nr,f.n.reduce(f.b.replicate(4,0),(function(t,e){return t[e]+=1,t})),f.n.every((function(t){return 13===t})))}),"Deal"),ir={encode:Object(d.flow)(nr,f.p.zip(Object(d.pipe)(Jt,f.p.sort(Gt))),f.p.map((function(t){var e=Object(b.a)(t,2),n=e[0],r=e[1];return[te[n],r]})),f.p.groupBy(f.s.fst),f.q.map(Object(d.flow)(f.p.map(f.s.snd),f.r.fromReadonlyArray(Kt))))},ar={encode:Object(d.flow)(f.q.foldMapWithIndex(f.l.trivial)(f.n.getMonoid())((function(t,e){return Object(d.pipe)(e,f.r.toReadonlyArray(f.l.trivial),f.n.map((function(e){return[e,te.indexOf(t)]})))})),f.n.sort(f.l.contramap((function(t){return t[0]}))(Gt)),f.n.map(f.s.snd),f.n.chunksOf(4),f.n.map(f.n.reduce(0,(function(t,e){return(t<<2)+e}))),f.n.concat(f.n.replicate(3,0)),f.n.toArray,(function(t){return rr.decode({id:new yn.Uuid(t).toString()}).right}))},cr=Yn.f(ar.encode,ir.encode),ur=Yn.f((function(t){return Object(Dt.a)(Object(Dt.a)({},t),{},{deal:cr.get(t.deal)})}),(function(t){return Object(Dt.a)(Object(Dt.a)({},t),{},{deal:cr.reverseGet(t.deal)})})),or=Yn.f((function(t){return"".concat(t.level).concat(t.strain)}),(function(t){return{level:parseInt(t.charAt(0)),strain:t.charAt(1)}})),sr=Yn.f((function(t){return pe(t)?t:or.get(t)}),(function(t){return pe(t)?t:or.reverseGet(t)})),lr=Et.b(Et.d,(function(t){return Object(d.pipe)(t,f.x.split("."),f.n.every((function(t){return 2===t.length||pe(t)})))}),"BidPath"),pr=Yn.f(Object(d.flow)(f.n.map(sr.get),f.n.intersperse("."),f.n.foldMap(f.x.Monoid)(d.identity),(function(t){return lr.decode(t).right})),Object(d.flow)(f.x.split("."),f.p.map(sr.reverseGet))),fr=n(243),dr=(f.z.tryCatch((function(){return Object(fr.a)("bridge")}),(function(){return"DeleteError"})),f.z.tryCatch((function(){return Object(fr.b)("bridge",1,{upgrade:function(t){var e=t.createObjectStore("deal");e.createIndex("batch","batchId"),e.createIndex("generation","generationId"),t.createObjectStore("satisfies").createIndex("generation","generationId")}})}),(function(){return"OpenDatabaseFailed"}))),jr=function(t){return function(e){return f.z.tryCatchK((function(n){return n.getAllFromIndex("deal",t,e)}),(function(){return"SelectError"}))}},hr=function(t){return Object(d.pipe)(dr,f.z.chain(jr("generation")(t)),f.z.map(Object(d.flow)(f.n.map((function(t){return t.batchId})),f.n.uniq(f.x.Eq))))},br=function(t){return Object(d.pipe)(dr,f.z.chain((function(t){return f.z.of(t.transaction(["deal","satisfies"],"readwrite"))})),f.z.chainFirst((function(e){return Object(d.pipe)(f.z.tryCatch((function(){return e.objectStore("deal").index("generation").getAllKeys(t)}),(function(){return"SelectError"})),f.z.chain(f.z.traverseArray(f.z.tryCatchK((function(t){return e.objectStore("deal").delete(t)}),(function(){return"DeleteError"})))))})),f.z.chainFirst((function(e){return Object(d.pipe)(f.z.tryCatch((function(){return e.objectStore("satisfies").index("generation").getAllKeys(t)}),(function(){return"SelectError"})),f.z.chain(f.z.traverseArray(f.z.tryCatchK((function(t){return e.objectStore("satisfies").delete(t)}),(function(){return"DeleteError"})))))})),f.z.chain((function(t){return f.z.tryCatch((function(){return t.done}),(function(){return"CommitRejected"}))})))},mr=function(t){return Object(d.pipe)(t,f.n.mapWithIndex((function(t,e){return Object(d.pipe)(e,cr.reverseGet,(n=t,function(t){return{number:n,dealer:te[(n-1)%te.length],deal:t,vulnerability:oe(n)}}),ur.get);var n})),Xn((function(){return new Mn.a}),(function(t){return function(e){return t.getResult(e)}})),fn.b.bimap((function(){return""}),(function(t){return Object(mn.a)({},t.board.deal.id,t)})))},Or=function(t){return Object(d.pipe)(t,Xn((function(){return new Ln.a}),(function(t){return function(){var e=Object(Rn.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d.pipe,e.next=3,t.getPathIsSound(n);case 3:return e.t1=e.sent,e.t2=f.d.fold((function(t){return t.length}),(function(){return n.length})),e.t3=function(t){return Object(d.pipe)(n,f.n.mapWithIndex((function(e){return[Object(d.pipe)(n,f.p.map(gn("bid")),f.n.takeLeft(e+1)),e<t]})))},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),fn.a.chain((function(t){return Object(Wn.a)(t)})))},vr=Object(p.d)({name:"generator",initialState:{jobs:[],completed:[]},reducers:{scheduleJob:function(t,e){var n,r,i,a,c=(n=e.payload.analysisId,r=e.payload.estimatedUnitsInitial,i=e.payload.type,a={parameter:e.payload.parameter,context:e.payload.context,progress:f.j.none},{id:Pn.decode(yn.UuidTool.newUuid()).right,analysisId:n,dependsOn:[],unitsInitial:r,startDate:f.j.none,completedDate:f.j.none,running:!1,error:f.j.none,type:i,details:a});t.jobs.push(Object(dn.a)(c))},startJob:function(t,e){var n=t.jobs.find((function(t){return t.id===e.payload.jobId}));n&&(n.details.progress=Object(d.pipe)(e.payload.type,En,dn.a),n.startDate=f.j.some(xn()),n.running=!0)},completeJob:{reducer:function(t,e){Object(d.pipe)(t.jobs,f.n.findIndex((function(t){return t.id===e.meta})),f.j.map((function(n){var r=t.jobs[n];return r.completedDate=f.j.some(xn()),r.running=!1,r.error=e.error,t.completed.push(r),t.jobs.splice(n,1),r})))},prepare:function(t,e){return{payload:Object(d.constVoid)(),meta:t,error:e}}},removeJob:function(t,e){Object(d.pipe)(t.jobs,f.n.findIndex((function(t){return t.id===e.payload})),f.j.map((function(e){return t.jobs.splice(e,1)}))),Object(d.pipe)(t.completed,f.n.findIndex((function(t){return t.id===e.payload})),f.j.map((function(e){return t.completed.splice(e,1)})))},reportDeals:function(t,e){var n,r,i=null===(n=t.jobs.find((function(t){return t.id===e.payload.jobId})))||void 0===n?void 0:n.details;i&&(i.progress=Object(d.pipe)(i.progress,(r=e.payload.value,Cn(f.i.MonoidSum)(r.length)(r.length))))},reportSatisfies:function(t,e){var n,r,i=null===(n=t.jobs.find((function(t){return t.id===e.payload.jobId})))||void 0===n?void 0:n.details;i&&(i.progress=Object(d.pipe)(i.progress,(r=e.payload.value,Cn(f.q.getUnionSemigroup(f.i.MonoidSum))(r.testedCount)(Object(mn.a)({},r.path,r.satisfiesCount)))))},reportSolutions:function(t,e){var n,r,i=null===(n=t.jobs.find((function(t){return t.id===e.payload.jobId})))||void 0===n?void 0:n.details;i&&(i.progress=Object(d.pipe)(i.progress,(r=e.payload.value,Cn(f.q.getUnionSemigroup(f.u.first()))(Object(d.pipe)(r,f.q.keys,(function(t){return t.length})))(r))))}}}),yr=vr.actions,gr=yr.scheduleJob,Sr=yr.startJob,xr=yr.completeJob,kr=yr.removeJob,wr=yr.reportDeals,Cr=yr.reportSatisfies,Ar=yr.reportSolutions,_r=vr.reducer,Br=(Object(j.a)((function(t){return Object(d.pipe)(t.state.jobs,f.n.findFirst((function(e){return e.id===t.jobId})))})),function(t,e,n){return Object(d.pipe)(function(t){return function(e){return Object(d.pipe)(f.n.replicate(e/500,500),f.n.append(e%500),Xn((function(){return new In.a}),(function(e){return function(n){return e.genDeals(n,t)}})))}}(e)(n),fn.b.map((function(e){return wr({jobId:t,value:e})})),fn.b.getOrElse((function(e){return Object(jn.a)(xr(t,f.j.some(e)))})),Object(hn.a)([xr(t,f.j.none)]))}),qr=function(t,e,n){return Object(d.pipe)(function(t){return function(e){return Object(d.pipe)(t,hr,fn.b.fromTaskEither,fn.b.chain((function(t){return fn.b.fromObservable(Object(Wn.a)(t))})),fn.b.bindTo("batchId"),fn.b.bind("path",(function(){return fn.b.fromObservable(Object(Wn.a)(e))})),Object(Un.a)(f.d.isRight),fn.a.chain((function(e){return e.key?Object(d.pipe)(e,fn.a.map((function(t){return t.right})),Xn((function(){return new zn.a}),(function(e){return function(n){var r=n.batchId,i=n.path;return Object(d.pipe)((function(){return e.satisfiesBatch(i,r,t)}),f.z.map((function(t){return Object(Dt.a)(Object(Dt.a)({},t),{},{path:Object(d.pipe)(i,f.p.map((function(t){return t.bid})),pr.get)})})))()}}))):e})))}}(e)(n),fn.b.map((function(e){return Cr({jobId:t,value:e})})),fn.b.getOrElse((function(e){return Object(jn.a)(xr(t,f.j.some(e)))})),Object(hn.a)([xr(t,f.j.none)]))},Dr=function(t){return function(e,n){return e.pipe(fn.a.filter(Sr.match),fn.a.map((function(t){return t.payload})),fn.a.filter((function(e){return e.type===t})),fn.a.map((function(t){return Object(d.pipe)(n.value.generator.jobs,f.n.findFirst((function(e){return e.id===t.jobId})),f.j.map((function(t){return t})))})))}},Er=[Object(d.flow)(Dr("GenerateDeals"),fn.c.fold((function(){return bn.a}),(function(t){return Br(t.id,t.details.context.generationId,t.details.parameter)}))),Object(d.flow)(Dr("Satisfies"),fn.c.fold((function(){return bn.a}),(function(t){return qr(t.id,t.details.context.generationId,t.details.parameter)}))),Object(d.flow)(Dr("Solve"),fn.c.fold((function(){return bn.a}),(function(t){return e=t.id,t.details.context.generationId,n=t.details.parameter,Object(d.pipe)(mr(n),fn.b.map((function(t){return Ar({jobId:e,value:t})})),fn.b.getOrElse((function(t){return Object(jn.a)(xr(e,f.j.some(t)))})),Object(hn.a)([xr(e,f.j.none)]));var e,n})))],Pr=n(201),Rr=n(142),Nr=function(t){return Object(d.pipe)(ue,f.n.elem(ae)(t))?20:30},Mr=function(t){switch(t){case"Undoubled":return 1;case"Doubled":return 2;case"Redoubled":return 4;default:return _t(t)}},Fr=function(t){return t-6},Ir=function(t,e){return Object(d.pipe)(e,Fr,f.d.fromPredicate((function(e){return e>=t.level}),(function(e){return t.level-e})))},Tr=Object(d.flow)(Ir,f.j.fromEither),Lr=function(t){return function(e){return Object(d.pipe)(Tr(e.contract,e.tricks),f.j.fold(Object(d.constant)(0),t))}},Hr=function(t){return Object(d.pipe)(t,Lr((function(){return Mr(t.contract.modifier)*(t.contract.level*Nr(t.contract.strain)+("N"===t.contract.strain?10:0))})))},zr=function(t){return 50*(t?2:1)},Wr=function(t){return"Undoubled"===t?f.j.none:f.j.some(t)},Ur=[100,200,200].concat(Object(l.a)(f.n.replicate(10,300))),$r=Object(d.flow)(Hr,(function(t){return t>0&&t<=100?50:0})),Kr={contractPoints:Hr,overtrickPoints:function(t){return Object(d.pipe)((e=t.contract,n=t.tricks,Object(d.pipe)(Ir(e,n),f.j.fromEither,f.j.map((function(t){return t-e.level})))),f.j.fold(Object(d.constant)(0),(function(e){return Object(d.pipe)((n=t.isVulnerable,r=t.contract.modifier,Object(d.pipe)(r,Wr,f.j.map(Mr),f.j.map((function(t){return t*zr(n)})))),f.j.getOrElseW((function(){return Nr(t.contract.strain)})),(function(t){return e*t}));var n,r})));var e,n},slamPoints:function(t){return Object(d.pipe)(t,Lr((function(e){return(t.isVulnerable?1.5:1)*(6===t.contract.level&&e>=6?500:7===t.contract.level&&e>=7?1e3:0)})))},modifierPoints:function(t){return Object(d.pipe)(t,Lr((function(){switch(t.contract.modifier){case"Undoubled":return 0;case"Doubled":return 50;case"Redoubled":return 100;default:return _t(t.contract.modifier)}})))},penaltyPoints:function(t){return Object(d.pipe)((e=t.contract,n=t.tricks,Object(d.pipe)(Ir(e,n),f.d.swap,f.j.fromEither)),f.j.fold(Object(d.constant)(0),(function(e){return Object(d.pipe)(t.contract.modifier,Wr,f.j.fold((function(){return e*zr(t.isVulnerable)}),Object(d.flow)(Mr,(function(n){return n/2*Object(d.pipe)(Ur,f.n.takeLeft(e+(t.isVulnerable?1:0)),f.n.foldMap(f.i.MonoidSum)(d.identity))}))),(function(t){return-t}))})));var e,n},partScorePoints:$r,gamePoints:function(t){return Object(d.pipe)(t,Hr,(function(e){return e>=100?t.isVulnerable?500:300:0}))}},Gr=Et.b(Et.c,(function(t){return"number"===typeof t}),"Score"),Jr=Gr.decode(0).right,Qr=f.i.Eq,Vr=(Object(d.pipe)(f.i.Ord,f.l.reverse),Object(d.flow)((function(t){return Object(d.pipe)(Kr,f.q.flap(t),f.q.traverseWithIndex(f.D.getApplicative(f.n.getMonoid()))((function(t,e){return Object(d.pipe)(f.D.tell([[t,e]]),f.D.map(Object(d.constant)(e)))})),f.D.map(Object(d.flow)(f.q.foldMap(f.l.trivial)(f.i.MonoidSum)(d.identity),Gr.decode,(function(t){return t.right}))),f.D.map((function(t){return[t,function(e){return[["TOTAL",t]].concat(Object(l.a)(e))}]})),f.D.pass)}),f.D.evaluate)),Xr=function(t){return Object(d.pipe)(f.n.Do,f.n.apS("inner",Object(d.pipe)(t,f.q.toReadonlyArray)),f.n.bind("outer",(function(t){var e=t.inner;return Object(d.pipe)(e[1],f.q.toReadonlyArray)})),f.n.map((function(t){var e=t.outer,n=t.inner;return{outerKey:e[0],innerKey:n[0],value:e[1]}})))},Zr=function(t){return Object(d.pipe)(t,Xr,f.p.fromReadonlyArray,f.j.fold((function(){return{}}),f.p.groupBy((function(t){return t.outerKey}))),f.q.map(Object(d.flow)(f.p.fromReadonlyArray,f.j.fold((function(){return{}}),f.p.groupBy((function(t){return t.innerKey}))),f.q.map((function(t){return t[0].value})))))},Yr=function(t,e){return!("Pass"===t||"Pass"===e)&&fe.equals(t,e)||t===e},ti=function(t){return"Pass"!==t},ei=Object(d.pipe)(he,f.n.sort(de),f.n.prepend("Pass")),ni=(qt(ei),function(t){return function(e){return Object(d.pipe)(e,f.q.mapWithIndex((function(e,n){return function(t){return function(e){return Object(d.pipe)(ei,f.n.map(f.d.fromPredicate(ti,(function(){return"Pass"}))),f.e.match(f.n.Functor)((function(t){return[t,Jr]}),(function(n){var r=t[n.strain],i=Object(d.pipe)(Ir(Object(Dt.a)(Object(Dt.a)({},n),{},{modifier:"Undoubled"}),r),f.d.fold(Object(d.constant)("Doubled"),Object(d.constant)("Undoubled")));return[n,Vr({contract:Object(Dt.a)(Object(Dt.a)({},n),{},{modifier:i}),tricks:r,isVulnerable:e})]})))}}(n)(function(t,e){return!("Neither"===e)&&("Both"===e||("N"===(n=t)||"S"===n?"NorthSouth":"EastWest")===e);var n}(e,t))})))}}),ri=Yn.f((function(t){var e=Object(b.a)(t,2);return e[0]+e[1]}),(function(t){return[t.charAt(0),t.charAt(1)]})),ii=Object(d.pipe)(Object(Rr.sequenceT)(f.p.Apply)(te,ie),f.p.map(ri.get)),ai=function(t){return function(e){return Object(d.pipe)(ii,f.p.groupBy((function(t){return t})),f.q.map((function(e){return t(e)})),(function(t){return e.rollup(t)}),(function(t){return t.object()}),f.q.toReadonlyArray,f.n.map(f.s.mapFst(ri.reverseGet)),f.p.fromReadonlyArray,f.j.fold((function(){return{}}),Object(d.flow)(f.p.groupBy((function(t){var e=Object(b.a)(t,2),n=Object(b.a)(e[0],2),r=(n[0],n[1]);e[1];return r})),f.q.map(Object(d.flow)(f.p.groupBy((function(t){var e=Object(b.a)(t,2),n=Object(b.a)(e[0],2),r=n[0];n[1],e[1];return r})),f.q.map(Object(d.flow)(f.p.head,(function(t){var e=Object(b.a)(t,2);e[0];return e[1]}))))))))}},ci=function(t){return Object(d.pipe)(t,Xr,f.n.map((function(t){var e=t.outerKey,n=t.innerKey,r=t.value;return["".concat(e).concat(n),r]})),f.q.fromFoldable(f.u.first(),f.n.Foldable))},ui=function(t){return Object(d.pipe)(t,f.p.map(Object(d.flow)(Zr,ni("Neither"))))},oi=f.l.reverse(f.l.fromCompare((function(t,e){return f.i.Ord.compare(t,e)}))),si=Object(d.pipe)(oi,f.l.contramap((function(t){var e=Object(b.a)(t,2);e[0];return e[1]}))),li=function(t){var e=Object(d.pipe)(t,f.n.sort(si),(function(t){return t}));return!e.length||e.length>1&&Qr.equals(e[0][1],e[1][1])?{tie:1}:Object(mn.a)({},e[0][0],1)},pi=f.q.getUnionSemigroup(f.i.SemigroupSum),fi=function(t){return"Pass"===t?"Pass":or.get(t)},di=function(t){return function(e){return Object(d.pipe)(t,f.p.map((function(t){return Object(d.pipe)(e,f.p.map((function(e){var n=Object(b.a)(e,2),r=n[0],i=n[1];return Object(d.pipe)(t[r],f.n.filter((function(t){var e=Object(b.a)(t,1)[0];return"Pass"===i?"Pass"===e:Yr(i,e)})),f.p.fromReadonlyArray,f.j.fold((function(){return{}}),f.p.groupBy((function(t){var e=Object(b.a)(t,1)[0];return fi(e)}))),f.q.map((function(t){return t[0]})),f.q.map((function(t){var e=Object(b.a)(t,2);e[0];return e[1]})))})),f.p.map(f.q.toReadonlyArray),f.n.chain((function(t){return t})),li)})),f.p.foldMap(pi)((function(t){return t})),(function(t){return pi.concat((n=Object(d.pipe)(e,f.p.map(Object(d.flow)(f.C.snd,fi))),Object(d.pipe)(n,f.p.map((function(t){return[t,0]})),f.q.fromEntries)),t);var n}))}},ji=function(t){return Object(d.pipe)(t,f.p.map(ci),Pr.a,(function(e){return{count:e.totalRows(),scores:Object(d.pipe)(t,ui),average:Object(d.pipe)(e,ai(Pr.b.mean)),stdev:Object(d.pipe)(e,ai(Pr.b.stdev))}}))},hi={analyses:{},selectedAnalysis:f.j.none},bi=Object(p.d)({name:"profile",initialState:hi,reducers:{addAnalysis:function(t,e){var n=Object(d.pipe)(e.payload,(function(t){var e=t.id,n=t.name;t.count;return function(t,e,n){return{id:t,name:e,paths:n,generations:[]}}(e,n,t.paths)}),dn.a);t.analyses[n.id]=n},deleteAnalysis:function(t,e){},removeAnalysis:function(t,e){delete t.analyses[e.payload]},selectAnalysis:function(t,e){t.selectedAnalysis=Object(d.pipe)(f.q.has(e.payload,t.analyses)?f.j.some(e.payload):f.j.none)},setAnalysisName:{reducer:function(t,e){t.analyses[e.meta].name=e.payload},prepare:function(t,e){return{payload:e,meta:t}}},addJobToAnalysis:function(t,e){Object(d.pipe)(t.analyses,f.q.lookup(e.payload.analysisId),f.j.map((function(t){switch(e.payload.type){case"GenerateDeals":var n=e.payload;return Object(d.pipe)(n.details.progress,f.j.map((function(e){return t.generations.push(Object(d.pipe)((r=n.details.context.generationId,i=e.value,{id:r,dealCount:i,satisfies:f.j.none,solutionStats:{}}),dn.a));var r,i})));case"Satisfies":var r=e.payload;return Object(d.pipe)(f.j.Do,f.j.apS("progress",r.details.progress),f.j.apS("generation",Object(d.pipe)(t.generations,f.n.findFirst((function(t){return t.id===r.details.context.generationId})))),f.j.map((function(t){return t.generation.satisfies=f.j.some(t.progress.value)})));case"Solve":var i=e.payload;return Object(d.pipe)(f.j.Do,f.j.apS("progress",i.details.progress),f.j.apS("generation",Object(d.pipe)(t.generations,f.n.findFirst((function(t){return t.id===i.details.context.generationId})))),f.j.map((function(t){return Object(d.pipe)(t.progress.value,f.q.toReadonlyArray,f.p.fromReadonlyArray,f.j.map(Object(d.flow)(f.p.map(Object(d.flow)(f.s.snd,gn("results"))),ji,(function(e){if(f.q.has(i.details.context.bidPath,t.generation.solutionStats))throw new Error("Combining stat result sets is not implemented");t.generation.solutionStats[i.details.context.bidPath]=Object(dn.a)(e)}))))})));default:return _t(e.payload.type)}})))}}}),mi=bi.actions,Oi=mi.addAnalysis,vi=mi.deleteAnalysis,yi=mi.selectAnalysis,gi=(mi.setAnalysisName,mi.addJobToAnalysis),Si=bi.reducer,xi=[function(t,e){return t.pipe(fn.a.filter(Oi.match),fn.a.chain(Object(d.flow)((function(t){return t.payload}),(function(t){var n=t.id,r=t.count;return Object(d.pipe)(e.value.profile.analyses,f.q.keys,f.n.filter((function(t){return t!==n})),f.n.map(vi),(function(t){return Object(Wn.a)([].concat(Object(l.a)(t),[yi(n),gr({analysisId:n,type:"GenerateDeals",context:{generationId:_n()},parameter:r,estimatedUnitsInitial:r})]))}))}))))},function(t,e){return t.pipe(fn.a.filter(gi.match),fn.a.filterMap((function(t){return Object(d.pipe)(f.j.Do,f.j.bind("job",(function(){return"GenerateDeals"===t.payload.type?f.j.some(t.payload):f.j.none})),f.j.bind("analysis",(function(t){var n=t.job;return wi({state:e.value.profile,analysisId:n.analysisId})})))})),fn.a.chain((function(t){var e=t.job,n=t.analysis;return Object(jn.a)(gr({analysisId:e.analysisId,type:"Satisfies",parameter:n.paths,context:e.details.context,estimatedUnitsInitial:n.paths.length*e.details.parameter}))})))},function(t,e){return t.pipe(fn.a.filter(xr.match),fn.a.filter((function(t){return f.j.isNone(t.error)})),fn.a.chain(Object(d.flow)((function(t){return t.meta}),(function(t){return Object(d.pipe)(e.value.generator.completed,f.n.findFirst((function(e){return e.id===t})),f.j.fold((function(){return bn.a}),(function(e){return Object(Wn.a)([gi(e),kr(t)])})))}))))},function(t,e){return e.pipe(fn.a.map((function(t){return Object(d.pipe)(t.generator.jobs,f.n.filter((function(t){return f.j.isNone(t.startDate)})))})),fn.a.filterMap(f.p.fromReadonlyArray),fn.a.chain(Object(d.flow)(f.n.map((function(t){return Sr({jobId:t.id,type:t.type})})),Wn.a)))},function(t,e){return t.pipe(fn.a.filter(vi.match),fn.a.map((function(t){return t.payload})),fn.a.chain((function(t){return Object(d.pipe)(e.value.profile.analyses,f.q.lookup(t),f.j.fold((function(){return bn.a}),(function(t){return Object(d.pipe)(t.generations,f.n.map((function(t){return t.id})),f.z.traverseArray(br),fn.a.fromTask)})),fn.b.fold((function(){return bn.a}),(function(t){return bn.a})),Object(hn.a)(Object(jn.a)(bi.actions.removeAnalysis(t))))})))}],ki=(Object(j.a)((function(t){return Object(d.pipe)(t.analyses,f.q.toReadonlyArray,f.n.map(f.s.snd))})),Object(j.a)((function(t){return Object(d.pipe)(t.selectedAnalysis,f.j.chain((function(e){return f.q.lookup(e,t.analyses)})))}))),wi=Object(j.a)((function(t){return Object(d.pipe)(t.state.analyses,f.q.lookup(t.analysisId))})),Ci=Object(j.a)((function(t){return Object(d.pipe)(wi(t),f.j.chain(Object(d.flow)(gn("generations"),f.n.findFirst((function(e){return e.id===t.generationId})))))})),Ai=n(236),_i=n(130),Bi=n(93),qi=function(t){return Object(d.pipe)(t,f.n.chain(f.B.reduce([],(function(t,e){return Object(d.pipe)(t,f.n.append(e))}))))},Di=function(t){return Object(d.pipe)(t,f.n.map(Object(d.flow)(f.B.map(f.p.of),f.B.fold((function(t,e){return f.B.make(t,Object(d.pipe)(e,f.n.map(f.B.map((function(e){return f.p.concat(e)(t)}))),f.n.toArray))})))))},Ei=function(t){return Object(d.pipe)(t,f.n.chain(f.B.fold((function(t,e){return Object(d.pipe)(e,f.p.fromReadonlyArray,f.j.fold((function(){return[[t]]}),f.p.foldMap(f.p.getSemigroup())(f.p.map(f.n.prepend(t)))))}))),f.n.filterMap(f.p.fromReadonlyArray))},Pi=function t(e){return function(n){return function(r){return f.B.make(Object(Dt.a)(Object(Dt.a)({},r.value),{},{siblings:n}),Object(d.pipe)(r.forest,f.n.map((function(n){return Object(d.pipe)(r.forest,f.n.map((function(t){return t.value})),f.n.difference(e)([n.value]),t(e))(n)})),f.n.toArray))}}},Ri=function(t){return function(e){return Object(d.pipe)(e,f.n.map((function(n){return Object(d.pipe)(e,f.n.map((function(t){return t.value})),f.n.difference(t)([n.value]),Pi(t))(n)})))}},Ni=f.n.map(f.B.fold((function(t,e){return 0===e.length||Object(d.pipe)(e,f.n.exists((function(t){return"Pass"===t.value.bid})))?f.B.make(t,e):f.B.make(t,Object(d.pipe)(e,f.n.append(f.B.make({bid:"Pass",syntax:{type:"Otherwise"}})),f.n.toArray))}))),Mi=function(t){return Object(d.pipe)(t,f.n.map(f.B.traverse(f.A.getApplicative(f.n.getMonoid()))(f.d.mapLeft(f.n.of))),f.n.sequence(f.A.getApplicative(f.n.getSemigroup())))},Fi=function(t){return function(e){return f.A.getChain(f.n.getSemigroup()).chain(e,t)}},Ii=function(t){return f.w.of(t)},Ti=function(t){return Object(d.pipe)(Rt,f.n.elem(f.x.Eq)(t))},Li=function(t){return{type:"Wrapper",constraint:t}},Hi=Object(d.constant)({type:"Constant",value:!0}),zi=Object(d.constant)({type:"Constant",value:!1}),Wi={bid:"Pass",pathReversed:[],siblings:f.n.empty,traversed:f.n.empty,labels:f.o.empty},Ui=At.b.fromProp(),$i=Ui("bid"),Ki=Ui("pathReversed"),Gi=Ui("siblings"),Ji=Ui("traversed"),Qi=Ui("labels"),Vi=Object(d.pipe)(me,f.g.contramap((function(t){return t.bid}))),Xi=Object(d.pipe)(f.w.gets($i.get),f.w.chain((function(t){return f.w.gets(Object(d.flow)(Ji.get,f.n.rights,f.n.takeLeftWhile((function(e){return!me.equals(e.bid,t)})),f.n.map((function(t){return t.constraint}))))})),f.w.map(Object(d.flow)(f.p.fromReadonlyArray,f.j.fold(Ce,(function(t){return{type:"Negation",constraint:{type:"Conjunction",constraints:t}}})),f.d.left,f.d.right))),Zi=f.p.map((function(t){return Li({type:"AnyShape",counts:t})})),Yi={type:"Disjunction",syntax:Zi([ge(4,3,3,3),ge(5,3,3,2),ge(4,4,3,2)])},ta={type:"Disjunction",syntax:Zi([ge(5,4,2,2),ge(6,3,2,2)])},ea=function(t){switch(t){case"C":case"D":case"H":case"S":return Ii(f.d.right(t));case"Wildcard":return Object(d.pipe)(f.w.gets(Object(d.flow)($i.get)),f.w.map(Object(d.flow)(f.d.fromPredicate(be,(function(t){return"WildcardWithoutBid"})),f.d.chain((function(t){return Object(d.pipe)(t.strain,f.d.fromPredicate(Ti,(function(t){return"WildcardInNTContext"})))})))));default:return Ii(f.d.left("NotImplemented"))}},na=function(t){return Object(d.pipe)(t,f.d.right,f.d.right,Ii)},ra=function t(e){switch(e.type){case"Wrapper":return Ii(f.d.right(f.d.left(e.constraint)));case"Constant":return na(Li({type:"Constant",value:e.value}));case"Conjunction":case"Disjunction":return function(t){var e=t.type,n=t.syntax;return Object(d.pipe)(n,f.p.traverse(f.w.Applicative)(ra),f.w.map(Object(d.flow)(f.n.wilt(f.d.Applicative)((function(t){return t})),f.d.map(Object(d.flow)(f.v.bimap(f.p.fromReadonlyArray,f.p.fromReadonlyArray),(function(t){return f.A.fromOptions(t.left,t.right)}),f.j.fold((function(){return f.d.left(Ce())}),f.A.match((function(t){return f.d.left(1===t.length?t[0]:{type:e,constraints:t})}),(function(t){return f.d.right(1===t.length?t[0]:{type:e,syntax:t})}),(function(t,n){return f.d.right({type:e,syntax:[Li({type:e,constraints:t}),{type:e,syntax:n}]})}))))))))}(e);case"Negation":return Object(d.pipe)(e.syntax,t,f.w.map(f.d.map(Object(d.flow)(f.d.bimap((function(t){return{type:"Negation",constraint:t}}),(function(t){return{type:"Negation",syntax:t}}))))));case"OtherBid":return n=e.bid,Object(d.pipe)(f.w.gets(Object(d.flow)(Gi.get,f.n.findFirst((function(t){return me.equals(t.bid,n)})),f.j.map((function(t){return t.syntax})))),f.k.alt(f.w.Monad)((function(){return f.w.gets(Object(d.flow)(Qi.get,f.o.lookup(f.x.Eq)(sr.get(n))))})),f.w.map(Object(d.flow)(f.d.fromOption((function(){return"OtherBidNotFound"})),f.d.map(f.d.right))));case"Otherwise":return Xi;case"LabelDef":return function(t){return Object(d.pipe)(f.w.gets(Object(d.flow)(Qi.get,f.o.lookup(f.x.Eq)(t.name))),f.w.chain(f.j.fold((function(){return Ii(t.definition)}),(function(e){return Ii({type:"Conjunction",syntax:[e,t.definition]})}))),f.w.chainFirst((function(e){return f.w.modify(Qi.modify(f.o.upsertAt(f.x.Eq)(t.name,e)))})),f.w.map(Object(d.flow)(f.d.right,f.d.right)))}(e);case"LabelRef":return function(t){return Object(d.pipe)(f.w.gets(Object(d.flow)(Qi.get,f.o.lookup(f.x.Eq)(t.name))),f.w.map(Object(d.flow)(f.d.fromOption((function(){return"LabelNotFound"})),f.d.map(f.d.right))))}(e);case"Balanced":return na(Yi);case"SemiBalanced":return na({type:"Disjunction",syntax:[Yi,ta]});case"Unbalanced":return na({type:"Negation",syntax:{type:"Disjunction",syntax:[Yi,ta]}});case"SuitRange":case"SuitHonors":case"SuitPrimary":case"SuitSecondary":case"SuitTop":case"SetTrump":return Object(d.pipe)(e.suit,ea,f.e.map(f.w.Functor)((function(t){return f.d.left(Object(Dt.a)(Object(Dt.a)({},e),{},{suit:t}))})));case"SuitComparison":return Object(d.pipe)([e.left,e.right],f.w.traverseArray(ea),f.w.map(f.d.sequenceArray),f.e.map(f.w.Functor)((function(t){return f.d.left(Object(Dt.a)(Object(Dt.a)({},e),{},{left:t[0],right:t[1]}))})));default:return _t(e)}var n},ia=function t(e){return Object(d.pipe)(e,ra,f.w.chain(Object(d.flow)(f.d.mapLeft(f.d.left),f.d.chain(f.d.mapLeft((function(t){return f.d.right(t)}))),f.d.fold(Ii,t))))},aa=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object(d.pipe)(e,f.w.traverseArray(f.w.modify),f.w.map(d.constVoid))},ca=f.B.map((function(t){var e=t.bid,n=t.syntax,r=t.siblings;return Object(d.pipe)(aa($i.set(e),Ki.modify(f.n.prepend(e)),Gi.set(r),Qi.modify(f.o.upsertAt(f.x.Eq)(sr.get(e),n))),f.w.apSecond(ia(n)),f.w.chain((function(t){return Object(d.pipe)(f.w.gets(Ki.get),f.w.map((function(e){return Object(d.pipe)(t,f.d.mapLeft((function(t){return{reason:t,path:f.n.reverse(e),syntax:n}})))})))})),f.w.map(f.d.map((function(t){return{bid:e,constraint:t}}))))})),ua=f.w.chainFirst((function(t){return aa(Ji.modify(f.n.append(t.value)),Ki.modify(Object(d.flow)(f.n.tail,f.j.getOrElseW((function(){return f.n.empty})))))})),oa=f.B.fold((function(t,e){return Object(d.pipe)(t,f.w.bindTo("result"),f.w.apS("context",f.w.get()),f.w.map((function(t){var n=t.result,r=t.context;return f.B.make(n,Object(d.pipe)(e,f.w.traverseArray(ua),f.w.evaluate(r),f.n.toArray))})))})),sa=n(22),la=n(21),pa=n(7),fa=n(4);!function(t){t.Start="Start",t.BidSpec="BidSpec",t.BidSpecConstraintList="BidSpecConstraintList",t.Bid_1="Bid_1",t.Bid_2="Bid_2",t.ContractBid="ContractBid",t.StrainSpecifier_1="StrainSpecifier_1",t.StrainSpecifier_2="StrainSpecifier_2",t.StrainSpecifier_3="StrainSpecifier_3",t.StrainSpecifier_4="StrainSpecifier_4",t.Wildcard="Wildcard",t.Major="Major",t.Minor="Minor",t.NonContractBid="NonContractBid",t.Pass="Pass",t.Strain_1="Strain_1",t.Strain_2="Strain_2",t.Suit_1="Suit_1",t.Suit_2="Suit_2",t.Suit_3="Suit_3",t.Suit_4="Suit_4",t.Club="Club",t.Diamond="Diamond",t.Heart="Heart",t.Spade="Spade",t.Notrump="Notrump",t.Honor="Honor",t.ConstraintList="ConstraintList",t.ConstraintListItem="ConstraintListItem",t.Constraint_1="Constraint_1",t.Constraint_2="Constraint_2",t.Constraint_3="Constraint_3",t.Constraint_4="Constraint_4",t.Constraint_5="Constraint_5",t.Constraint_6="Constraint_6",t.Constraint_7="Constraint_7",t.Constraint_8="Constraint_8",t.Constraint_9="Constraint_9",t.Constraint_10="Constraint_10",t.Constraint_11="Constraint_11",t.Constraint_12="Constraint_12",t.Constraint_13="Constraint_13",t.Constraint_14="Constraint_14",t.Constraint_15="Constraint_15",t.Constraint_16="Constraint_16",t.Constraint_17="Constraint_17",t.Constraint_18="Constraint_18",t.Const_1="Const_1",t.Const_2="Const_2",t.True="True",t.False="False",t.Or="Or",t.And="And",t.Not="Not",t.Not_$0_1="Not_$0_1",t.Not_$0_2="Not_$0_2",t.Otherwise="Otherwise",t.PointRange="PointRange",t.PointBound="PointBound",t.SuitRange="SuitRange",t.SuitBound="SuitBound",t.SuitSpecifier_1="SuitSpecifier_1",t.SuitSpecifier_2="SuitSpecifier_2",t.SuitSpecifier_3="SuitSpecifier_3",t.SuitSpecifier_4="SuitSpecifier_4",t.SuitSpecifier_5="SuitSpecifier_5",t.SuitSpecifier_6="SuitSpecifier_6",t.OtherMajor="OtherMajor",t.OtherMinor="OtherMinor",t.SuitComparison="SuitComparison",t.SuitComparisonOperator_1="SuitComparisonOperator_1",t.SuitComparisonOperator_2="SuitComparisonOperator_2",t.SuitComparisonOperator_3="SuitComparisonOperator_3",t.SuitComparisonOperator_4="SuitComparisonOperator_4",t.SuitComparisonOperator_5="SuitComparisonOperator_5",t.SuitHonors="SuitHonors",t.SuitTop="SuitTop",t.BoundQualifier_1="BoundQualifier_1",t.BoundQualifier_2="BoundQualifier_2",t.BoundQualifier_3="BoundQualifier_3",t.Plus="Plus",t.Minus="Minus",t.Equals="Equals",t.OtherBid="OtherBid",t.Distribution_1="Distribution_1",t.Distribution_2="Distribution_2",t.Distribution_3="Distribution_3",t.Distribution_4="Distribution_4",t.Distribution_5="Distribution_5",t.Balanced="Balanced",t.SemiBalanced="SemiBalanced",t.Unbalanced="Unbalanced",t.AnyShape="AnyShape",t.SpecificShape="SpecificShape",t.SuitRank_1="SuitRank_1",t.SuitRank_2="SuitRank_2",t.Primary="Primary",t.Secondary="Secondary",t.SetTrump="SetTrump",t.LabelDef="LabelDef",t.LabelRef="LabelRef",t.Label="Label",t.Digit="Digit",t.Number="Number",t.$EOF="$EOF"}(wt||(wt={}));var da=function t(e){Object(fa.a)(this,t),this.kind=wt.Digit,this.literal=void 0,this.value=void 0,this.literal=e,this.value=parseInt(e)},ja=function t(e){Object(fa.a)(this,t),this.kind=wt.Number,this.literal=void 0,this.value=void 0,this.literal=e,this.value=parseInt(e)},ha=function(){function t(e){Object(fa.a)(this,t),this.input=void 0,this.pos=void 0,this.negating=!1,this.memoSafe=!0,this.$scope$Constraint$memo=new Map,this.pos={overallPos:0,line:1,offset:0},this.input=e}return Object(pa.a)(t,[{key:"reset",value:function(t){this.pos=t}},{key:"finished",value:function(){return this.pos.overallPos===this.input.length}},{key:"clearMemos",value:function(){this.$scope$Constraint$memo.clear()}},{key:"matchStart",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchBidSpec(t+1,e))&&null!==n.match$EOF(e)&&(i={kind:wt.Start,spec:r}),i}))}},{key:"matchBidSpec",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchBid(t+1,e))&&(i=n.matchBidSpecConstraintList(t+1,e),1)&&(a={kind:wt.BidSpec,bid:r,constraints:i}),a}))}},{key:"matchBidSpecConstraintList",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(A||(A=Object(la.a)(["(?:: )"]))),t+1,e)&&null!==(r=n.matchConstraintList(t+1,e))&&(i={kind:wt.BidSpecConstraintList,constraints:r}),i}))}},{key:"matchBid",value:function(t,e){var n=this;return this.choice([function(){return n.matchBid_1(t+1,e)},function(){return n.matchBid_2(t+1,e)}])}},{key:"matchBid_1",value:function(t,e){return this.matchContractBid(t+1,e)}},{key:"matchBid_2",value:function(t,e){return this.matchNonContractBid(t+1,e)}},{key:"matchContractBid",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchDigit(t+1,e))&&null!==(i=n.matchStrainSpecifier(t+1,e))&&(a={kind:wt.ContractBid,level:r,specifier:i}),a}))}},{key:"matchStrainSpecifier",value:function(t,e){var n=this;return this.choice([function(){return n.matchStrainSpecifier_1(t+1,e)},function(){return n.matchStrainSpecifier_2(t+1,e)},function(){return n.matchStrainSpecifier_3(t+1,e)},function(){return n.matchStrainSpecifier_4(t+1,e)}])}},{key:"matchStrainSpecifier_1",value:function(t,e){return this.matchWildcard(t+1,e)}},{key:"matchStrainSpecifier_2",value:function(t,e){return this.matchMajor(t+1,e)}},{key:"matchStrainSpecifier_3",value:function(t,e){return this.matchMinor(t+1,e)}},{key:"matchStrainSpecifier_4",value:function(t,e){return this.matchStrain(t+1,e)}},{key:"matchWildcard",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(_||(_=Object(la.a)(["(?:X)"]))),t+1,e))&&(i={kind:wt.Wildcard,v:r}),i}))}},{key:"matchMajor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(B||(B=Object(la.a)(["(?:M)"]))),t+1,e))&&(i={kind:wt.Major,v:r}),i}))}},{key:"matchMinor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(q||(q=Object(la.a)(["(?:m)"]))),t+1,e))&&(i={kind:wt.Minor,v:r}),i}))}},{key:"matchNonContractBid",value:function(t,e){return this.matchPass(t+1,e)}},{key:"matchPass",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(D||(D=Object(la.a)(["(?:P)"]))),t+1,e))&&(i={kind:wt.Pass,v:r}),i}))}},{key:"matchStrain",value:function(t,e){var n=this;return this.choice([function(){return n.matchStrain_1(t+1,e)},function(){return n.matchStrain_2(t+1,e)}])}},{key:"matchStrain_1",value:function(t,e){return this.matchSuit(t+1,e)}},{key:"matchStrain_2",value:function(t,e){return this.matchNotrump(t+1,e)}},{key:"matchSuit",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuit_1(t+1,e)},function(){return n.matchSuit_2(t+1,e)},function(){return n.matchSuit_3(t+1,e)},function(){return n.matchSuit_4(t+1,e)}])}},{key:"matchSuit_1",value:function(t,e){return this.matchClub(t+1,e)}},{key:"matchSuit_2",value:function(t,e){return this.matchDiamond(t+1,e)}},{key:"matchSuit_3",value:function(t,e){return this.matchHeart(t+1,e)}},{key:"matchSuit_4",value:function(t,e){return this.matchSpade(t+1,e)}},{key:"matchClub",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(E||(E=Object(la.a)(["(?:C)"]))),t+1,e))&&(i={kind:wt.Club,v:r}),i}))}},{key:"matchDiamond",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(P||(P=Object(la.a)(["(?:D)"]))),t+1,e))&&(i={kind:wt.Diamond,v:r}),i}))}},{key:"matchHeart",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(R||(R=Object(la.a)(["(?:H)"]))),t+1,e))&&(i={kind:wt.Heart,v:r}),i}))}},{key:"matchSpade",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(N||(N=Object(la.a)(["(?:S)"]))),t+1,e))&&(i={kind:wt.Spade,v:r}),i}))}},{key:"matchNotrump",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(M||(M=Object(la.a)(["(?:N)"]))),t+1,e))&&(n.regexAccept(String.raw(F||(F=Object(la.a)(["(?:T)"]))),t+1,e),1)&&(i={kind:wt.Notrump,v:r}),i}))}},{key:"matchHonor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(I||(I=Object(la.a)(["(?:[AKQJT])"]))),t+1,e))&&(i={kind:wt.Honor,v:r}),i}))}},{key:"matchConstraintList",value:function(t,e){var n=this;return this.loop((function(){return n.matchConstraintListItem(t+1,e)}),!1)}},{key:"matchConstraintListItem",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchConstraint(t+1,e))&&(n.regexAccept(String.raw(T||(T=Object(la.a)(["(?: )"]))),t+1,e),1)&&(i={kind:wt.ConstraintListItem,constraint:r}),i}))}},{key:"matchConstraint",value:function(t,e){var n=this,r=this.mark(),i=this.$scope$Constraint$memo.get(r.overallPos);if(void 0!==i)return this.reset(i[1]),i[0];var a=this.memoSafe;this.memoSafe=!1,this.$scope$Constraint$memo.set(r.overallPos,[null,r]);for(var c=null,u=r;;){this.reset(r);var o=n.choice([function(){return n.matchConstraint_1(t+1,e)},function(){return n.matchConstraint_2(t+1,e)},function(){return n.matchConstraint_3(t+1,e)},function(){return n.matchConstraint_4(t+1,e)},function(){return n.matchConstraint_5(t+1,e)},function(){return n.matchConstraint_6(t+1,e)},function(){return n.matchConstraint_7(t+1,e)},function(){return n.matchConstraint_8(t+1,e)},function(){return n.matchConstraint_9(t+1,e)},function(){return n.matchConstraint_10(t+1,e)},function(){return n.matchConstraint_11(t+1,e)},function(){return n.matchConstraint_12(t+1,e)},function(){return n.matchConstraint_13(t+1,e)},function(){return n.matchConstraint_14(t+1,e)},function(){return n.matchConstraint_15(t+1,e)},function(){return n.matchConstraint_16(t+1,e)},function(){return n.matchConstraint_17(t+1,e)},function(){return n.matchConstraint_18(t+1,e)}]),s=this.mark();if(s.overallPos<=u.overallPos)break;c=o,u=s,this.$scope$Constraint$memo.set(r.overallPos,[c,u])}return this.reset(u),this.memoSafe=a,c}},{key:"matchConstraint_1",value:function(t,e){return this.matchConst(t+1,e)}},{key:"matchConstraint_2",value:function(t,e){return this.matchOr(t+1,e)}},{key:"matchConstraint_3",value:function(t,e){return this.matchAnd(t+1,e)}},{key:"matchConstraint_4",value:function(t,e){return this.matchNot(t+1,e)}},{key:"matchConstraint_5",value:function(t,e){return this.matchOtherwise(t+1,e)}},{key:"matchConstraint_6",value:function(t,e){return this.matchDistribution(t+1,e)}},{key:"matchConstraint_7",value:function(t,e){return this.matchSuitRange(t+1,e)}},{key:"matchConstraint_8",value:function(t,e){return this.matchSuitBound(t+1,e)}},{key:"matchConstraint_9",value:function(t,e){return this.matchSuitComparison(t+1,e)}},{key:"matchConstraint_10",value:function(t,e){return this.matchSuitHonors(t+1,e)}},{key:"matchConstraint_11",value:function(t,e){return this.matchSuitTop(t+1,e)}},{key:"matchConstraint_12",value:function(t,e){return this.matchSuitRank(t+1,e)}},{key:"matchConstraint_13",value:function(t,e){return this.matchSetTrump(t+1,e)}},{key:"matchConstraint_14",value:function(t,e){return this.matchPointRange(t+1,e)}},{key:"matchConstraint_15",value:function(t,e){return this.matchPointBound(t+1,e)}},{key:"matchConstraint_16",value:function(t,e){return this.matchOtherBid(t+1,e)}},{key:"matchConstraint_17",value:function(t,e){return this.matchLabelDef(t+1,e)}},{key:"matchConstraint_18",value:function(t,e){return this.matchLabelRef(t+1,e)}},{key:"matchConst",value:function(t,e){var n=this;return this.choice([function(){return n.matchConst_1(t+1,e)},function(){return n.matchConst_2(t+1,e)}])}},{key:"matchConst_1",value:function(t,e){return this.matchTrue(t+1,e)}},{key:"matchConst_2",value:function(t,e){return this.matchFalse(t+1,e)}},{key:"matchTrue",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(L||(L=Object(la.a)(["(?:true)"]))),t+1,e))&&(i={kind:wt.True,v:r}),i}))}},{key:"matchFalse",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(H||(H=Object(la.a)(["(?:false)"]))),t+1,e))&&(i={kind:wt.False,v:r}),i}))}},{key:"matchOr",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchConstraint(t+1,e))&&null!==n.regexAccept(String.raw(z||(z=Object(la.a)(["(?: or )"]))),t+1,e)&&null!==(i=n.matchConstraint(t+1,e))&&(a={kind:wt.Or,left:r,right:i}),a}))}},{key:"matchAnd",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(W||(W=Object(la.a)(["(?:()"],["(?:\\()"]))),t+1,e)&&null!==(r=n.matchConstraintList(t+1,e))&&null!==n.regexAccept(String.raw(U||(U=Object(la.a)(["(?:))"],["(?:\\))"]))),t+1,e)&&(i={kind:wt.And,constraints:r}),i}))}},{key:"matchNot",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.matchNot_$0(t+1,e)&&(n.regexAccept(String.raw($||($=Object(la.a)(["(?: )"]))),t+1,e),1)&&null!==(r=n.matchConstraint(t+1,e))&&(i={kind:wt.Not,constraint:r}),i}))}},{key:"matchNot_$0",value:function(t,e){var n=this;return this.choice([function(){return n.matchNot_$0_1(t+1,e)},function(){return n.matchNot_$0_2(t+1,e)}])}},{key:"matchNot_$0_1",value:function(t,e){return this.regexAccept(String.raw(K||(K=Object(la.a)(["(?:not)"]))),t+1,e)}},{key:"matchNot_$0_2",value:function(t,e){return this.regexAccept(String.raw(G||(G=Object(la.a)(["(?:!)"]))),t+1,e)}},{key:"matchOtherwise",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(J||(J=Object(la.a)(["(?:else)"]))),t+1,e))&&(i={kind:wt.Otherwise,v:r}),i}))}},{key:"matchPointRange",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchNumber(t+1,e))&&null!==n.regexAccept(String.raw(Q||(Q=Object(la.a)(["(?:-)"]))),t+1,e)&&null!==(i=n.matchNumber(t+1,e))&&(a={kind:wt.PointRange,lower:r,upper:i}),a}))}},{key:"matchPointBound",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchNumber(t+1,e))&&null!==(i=n.matchBoundQualifier(t+1,e))&&(a={kind:wt.PointBound,value:r,qualifier:i}),a}))}},{key:"matchSuitRange",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c=null;return null!==(r=n.matchDigit(t+1,e))&&null!==n.regexAccept(String.raw(V||(V=Object(la.a)(["(?:-)"]))),t+1,e)&&null!==(i=n.matchDigit(t+1,e))&&null!==(a=n.matchSuitSpecifier(t+1,e))&&(c={kind:wt.SuitRange,lower:r,upper:i,suit:a}),c}))}},{key:"matchSuitBound",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c=null;return null!==(r=n.matchNumber(t+1,e))&&null!==(i=n.matchBoundQualifier(t+1,e))&&null!==(a=n.matchSuitSpecifier(t+1,e))&&(c={kind:wt.SuitBound,value:r,qualifier:i,suit:a}),c}))}},{key:"matchSuitSpecifier",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuitSpecifier_1(t+1,e)},function(){return n.matchSuitSpecifier_2(t+1,e)},function(){return n.matchSuitSpecifier_3(t+1,e)},function(){return n.matchSuitSpecifier_4(t+1,e)},function(){return n.matchSuitSpecifier_5(t+1,e)},function(){return n.matchSuitSpecifier_6(t+1,e)}])}},{key:"matchSuitSpecifier_1",value:function(t,e){return this.matchWildcard(t+1,e)}},{key:"matchSuitSpecifier_2",value:function(t,e){return this.matchMajor(t+1,e)}},{key:"matchSuitSpecifier_3",value:function(t,e){return this.matchMinor(t+1,e)}},{key:"matchSuitSpecifier_4",value:function(t,e){return this.matchOtherMajor(t+1,e)}},{key:"matchSuitSpecifier_5",value:function(t,e){return this.matchOtherMinor(t+1,e)}},{key:"matchSuitSpecifier_6",value:function(t,e){return this.matchSuit(t+1,e)}},{key:"matchOtherMajor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(X||(X=Object(la.a)(["(?:oM)"]))),t+1,e))&&(i={kind:wt.OtherMajor,v:r}),i}))}},{key:"matchOtherMinor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Z||(Z=Object(la.a)(["(?:om)"]))),t+1,e))&&(i={kind:wt.OtherMinor,v:r}),i}))}},{key:"matchSuitComparison",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==(i=n.matchSuitComparisonOperator(t+1,e))&&null!==(a=n.matchSuitSpecifier(t+1,e))&&(c={kind:wt.SuitComparison,left:r,op:i,right:a}),c}))}},{key:"matchSuitComparisonOperator",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuitComparisonOperator_1(t+1,e)},function(){return n.matchSuitComparisonOperator_2(t+1,e)},function(){return n.matchSuitComparisonOperator_3(t+1,e)},function(){return n.matchSuitComparisonOperator_4(t+1,e)},function(){return n.matchSuitComparisonOperator_5(t+1,e)}])}},{key:"matchSuitComparisonOperator_1",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Y||(Y=Object(la.a)(["(?:<=)"]))),t+1,e))&&(i={kind:wt.SuitComparisonOperator_1,v:r}),i}))}},{key:"matchSuitComparisonOperator_2",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(tt||(tt=Object(la.a)(["(?:>=)"]))),t+1,e))&&(i={kind:wt.SuitComparisonOperator_2,v:r}),i}))}},{key:"matchSuitComparisonOperator_3",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(et||(et=Object(la.a)(["(?:=)"]))),t+1,e))&&(i={kind:wt.SuitComparisonOperator_3,v:r}),i}))}},{key:"matchSuitComparisonOperator_4",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(nt||(nt=Object(la.a)(["(?:<)"]))),t+1,e))&&(i={kind:wt.SuitComparisonOperator_4,v:r}),i}))}},{key:"matchSuitComparisonOperator_5",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(rt||(rt=Object(la.a)(["(?:>)"]))),t+1,e))&&(i={kind:wt.SuitComparisonOperator_5,v:r}),i}))}},{key:"matchSuitHonors",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==(i=n.loop((function(){return n.matchHonor(t+1,e)}),!1))&&(a={kind:wt.SuitHonors,suit:r,honors:i}),a}))}},{key:"matchSuitTop",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==(i=n.regexAccept(String.raw(it||(it=Object(la.a)(["(?:[0-5])"]))),t+1,e))&&null!==n.regexAccept(String.raw(at||(at=Object(la.a)(["(?:/)"]))),t+1,e)&&null!==(a=n.regexAccept(String.raw(ct||(ct=Object(la.a)(["(?:[1-5])"]))),t+1,e))&&(c={kind:wt.SuitTop,suit:r,x:i,y:a}),c}))}},{key:"matchBoundQualifier",value:function(t,e){var n=this;return this.choice([function(){return n.matchBoundQualifier_1(t+1,e)},function(){return n.matchBoundQualifier_2(t+1,e)},function(){return n.matchBoundQualifier_3(t+1,e)}])}},{key:"matchBoundQualifier_1",value:function(t,e){return this.matchPlus(t+1,e)}},{key:"matchBoundQualifier_2",value:function(t,e){return this.matchMinus(t+1,e)}},{key:"matchBoundQualifier_3",value:function(t,e){return this.matchEquals(t+1,e)}},{key:"matchPlus",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(ut||(ut=Object(la.a)(["(?:+)"],["(?:\\+)"]))),t+1,e))&&(i={kind:wt.Plus,v:r}),i}))}},{key:"matchMinus",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(ot||(ot=Object(la.a)(["(?:-)"],["(?:\\-)"]))),t+1,e))&&(i={kind:wt.Minus,v:r}),i}))}},{key:"matchEquals",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(st||(st=Object(la.a)(["(?:=)"]))),t+1,e))&&(i={kind:wt.Equals,v:r}),i}))}},{key:"matchOtherBid",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchNumber(t+1,e))&&null!==(i=n.matchStrain(t+1,e))&&(a={kind:wt.OtherBid,level:r,strain:i}),a}))}},{key:"matchDistribution",value:function(t,e){var n=this;return this.choice([function(){return n.matchDistribution_1(t+1,e)},function(){return n.matchDistribution_2(t+1,e)},function(){return n.matchDistribution_3(t+1,e)},function(){return n.matchDistribution_4(t+1,e)},function(){return n.matchDistribution_5(t+1,e)}])}},{key:"matchDistribution_1",value:function(t,e){return this.matchBalanced(t+1,e)}},{key:"matchDistribution_2",value:function(t,e){return this.matchSemiBalanced(t+1,e)}},{key:"matchDistribution_3",value:function(t,e){return this.matchUnbalanced(t+1,e)}},{key:"matchDistribution_4",value:function(t,e){return this.matchAnyShape(t+1,e)}},{key:"matchDistribution_5",value:function(t,e){return this.matchSpecificShape(t+1,e)}},{key:"matchBalanced",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(lt||(lt=Object(la.a)(["(?:BAL)"]))),t+1,e))&&(i={kind:wt.Balanced,v:r}),i}))}},{key:"matchSemiBalanced",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(pt||(pt=Object(la.a)(["(?:semiBAL)"]))),t+1,e))&&(i={kind:wt.SemiBalanced,v:r}),i}))}},{key:"matchUnbalanced",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(ft||(ft=Object(la.a)(["(?:unBAL)"]))),t+1,e))&&(i={kind:wt.Unbalanced,v:r}),i}))}},{key:"matchAnyShape",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(dt||(dt=Object(la.a)(["(?:[0-9]{4})"]))),t+1,e))&&null!==n.regexAccept(String.raw(jt||(jt=Object(la.a)(["(?:*)"],["(?:\\*)"]))),t+1,e)&&(i={kind:wt.AnyShape,v:r}),i}))}},{key:"matchSpecificShape",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c,u=null;return null!==(r=n.matchDigit(t+1,e))&&null!==(i=n.matchDigit(t+1,e))&&null!==(a=n.matchDigit(t+1,e))&&null!==(c=n.matchDigit(t+1,e))&&(u={kind:wt.SpecificShape,S:r,H:i,D:a,C:c}),u}))}},{key:"matchSuitRank",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuitRank_1(t+1,e)},function(){return n.matchSuitRank_2(t+1,e)}])}},{key:"matchSuitRank_1",value:function(t,e){return this.matchPrimary(t+1,e)}},{key:"matchSuitRank_2",value:function(t,e){return this.matchSecondary(t+1,e)}},{key:"matchPrimary",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==n.regexAccept(String.raw(ht||(ht=Object(la.a)(["(?:1)"]))),t+1,e)&&(i={kind:wt.Primary,suit:r}),i}))}},{key:"matchSecondary",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==n.regexAccept(String.raw(bt||(bt=Object(la.a)(["(?:2)"]))),t+1,e)&&(i={kind:wt.Secondary,suit:r}),i}))}},{key:"matchSetTrump",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==n.regexAccept(String.raw(mt||(mt=Object(la.a)(["(?:#)"]))),t+1,e)&&(i={kind:wt.SetTrump,suit:r}),i}))}},{key:"matchLabelDef",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==n.regexAccept(String.raw(Ot||(Ot=Object(la.a)(["(?:')"],["(?:\\')"]))),t+1,e)&&null!==(r=n.matchLabel(t+1,e))&&null!==n.regexAccept(String.raw(vt||(vt=Object(la.a)(["(?:': )"],["(?:\\': )"]))),t+1,e)&&null!==(i=n.matchConstraintList(t+1,e))&&(a={kind:wt.LabelDef,label:r,constraints:i}),a}))}},{key:"matchLabelRef",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(yt||(yt=Object(la.a)(["(?:')"],["(?:\\')"]))),t+1,e)&&null!==(r=n.matchLabel(t+1,e))&&null!==n.regexAccept(String.raw(gt||(gt=Object(la.a)(["(?:')"],["(?:\\')"]))),t+1,e)&&(i={kind:wt.LabelRef,label:r}),i}))}},{key:"matchLabel",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(St||(St=Object(la.a)(["(?:[0-9a-zA-z-_]+)"]))),t+1,e))&&(i={kind:wt.Label,v:r}),i}))}},{key:"matchDigit",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(xt||(xt=Object(la.a)(["(?:[0-9])"]))),t+1,e))&&(i=new da(r)),i}))}},{key:"matchNumber",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(kt||(kt=Object(la.a)(["(?:[0-9]+)"]))),t+1,e))&&(i=new ja(r)),i}))}},{key:"test",value:function(){var t=this.mark(),e=null!==this.matchStart(0);return this.reset(t),e}},{key:"parse",value:function(){var t=this.mark(),e=this.matchStart(0);if(e)return{ast:e,errs:[]};this.reset(t);var n=new Sa;this.clearMemos(),this.matchStart(0,n);var r=n.getErr();return{ast:e,errs:null!==r?[r]:[]}}},{key:"mark",value:function(){return this.pos}},{key:"loop",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mark(),r=[];;){var i=t();if(null===i)break;r.push(i)}return e||r.length>0?r:(this.reset(n),null)}},{key:"run",value:function(t,e){var n=this.mark(),r=e();return null!==r?r:(this.reset(n),null)}},{key:"choice",value:function(t){var e,n=Object(sa.a)(t);try{for(n.s();!(e=n.n()).done;){var r=(0,e.value)();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"regexAccept",value:function(t,e,n){var r=this;return this.run(e,(function(){var e=new RegExp(t,"y"),i=r.mark();e.lastIndex=i.overallPos;var a=r.tryConsume(e);return n&&n.record(i,a,{kind:"RegexMatch",literal:t.substring(3,t.length-1),negated:r.negating}),a}))}},{key:"tryConsume",value:function(t){var e=t.exec(this.input);if(e){for(var n=0,r=-1,i=0;i<e[0].length;++i)"\n"===e[0][i]&&(++n,r=i);return this.pos={overallPos:t.lastIndex,line:this.pos.line+n,offset:-1===r?this.pos.offset+e[0].length:e[0].length-r-1},e[0]}return null}},{key:"noConsume",value:function(t){var e=this.mark(),n=t();return this.reset(e),n}},{key:"negate",value:function(t){var e=this.mark(),n=this.negating;this.negating=!n;var r=t();return this.negating=n,this.reset(e),null===r||null}},{key:"memoise",value:function(t,e){var n=this.mark(),r=e.get(n.overallPos);if(this.memoSafe&&void 0!==r)return this.reset(r[1]),r[0];var i=t();return this.memoSafe&&e.set(n.overallPos,[i,this.mark()]),i}},{key:"match$EOF",value:function(t){var e=this.finished()?{kind:wt.$EOF}:null;return t&&t.record(this.mark(),e,{kind:"EOF",negated:this.negating}),e}}]),t}();var ba,ma,Oa,va,ya,ga=function(){function t(e,n){Object(fa.a)(this,t),this.pos=void 0,this.expmatches=void 0,this.pos=e,this.expmatches=Object(l.a)(n)}return Object(pa.a)(t,[{key:"toString",value:function(){return"Syntax Error at line ".concat(this.pos.line,":").concat(this.pos.offset,". Expected one of ").concat(this.expmatches.map((function(t){return"EOF"===t.kind?" EOF":" ".concat(t.negated?"not ":"","'").concat(t.literal,"'")})))}}]),t}(),Sa=function(){function t(){Object(fa.a)(this,t),this.mxpos={overallPos:-1,line:-1,offset:-1},this.regexset=new Set,this.pmatches=[]}return Object(pa.a)(t,[{key:"record",value:function(t,e,n){null===e!==n.negated&&(t.overallPos>this.mxpos.overallPos&&(this.mxpos=t,this.pmatches=[],this.regexset.clear()),this.mxpos.overallPos===t.overallPos&&("RegexMatch"===n.kind?(this.regexset.has(n.literal)||this.pmatches.push(n),this.regexset.add(n.literal)):this.pmatches.push(n)))}},{key:"getErr",value:function(){return-1!==this.mxpos.overallPos?new ga(this.mxpos,this.pmatches):null}}]),t}(),xa=function(t){return Object(d.pipe)(t,f.p.fromReadonlyArray,f.j.map(Object(d.flow)(f.p.map(qa),f.d.fromPredicate((function(t){return t.length>1}),(function(t){return t[0]})))))},ka=function(t){return Object(d.flow)(xa,f.e.match(f.j.Functor)(d.identity,(function(e){return{type:t,syntax:e}})),f.j.getOrElse("Conjunction"===t?Hi:zi))},wa=function(t){return t.kind===wt.Club?"C":t.kind===wt.Diamond?"D":t.kind===wt.Heart?"H":"S"},Ca=function(t){return t.kind===wt.Notrump?"N":wa(t)},Aa=function(t){return t.kind===wt.Major?"Major":t.kind===wt.Minor?"Minor":t.kind===wt.OtherMajor?"OtherMajor":t.kind===wt.OtherMinor?"OtherMinor":t.kind===wt.Wildcard?"Wildcard":wa(t)},_a=function(t,e){return function(n){return Object(d.pipe)(e,f.j.of,f.j.filter((function(e){return t.kind===wt.Equals||"min"===n&&t.kind===wt.Plus||"max"===n&&t.kind===wt.Minus})))}},Ba=function(t){return Object(d.pipe)(t,f.n.map((function(t){return t.constraint})),ka("Conjunction"))},qa=function t(e){switch(e.kind){case wt.True:return Hi();case wt.False:return zi();case wt.And:return Object(d.pipe)(e.constraints,f.n.map((function(t){return t.constraint})),ka("Conjunction"));case wt.Otherwise:return{type:"Otherwise"};case wt.Or:return Object(d.pipe)(function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.kind===wt.Or?t.apply(void 0,[e.left,e.right].concat(r)):Object(d.pipe)(r,f.p.fromReadonlyArray,f.j.fold((function(){return[e]}),(function(n){return[e].concat(Object(l.a)(t.apply(void 0,[n[0]].concat(Object(l.a)(n.slice(1))))))})))}(e.left,e.right),ka("Disjunction"));case wt.Not:return{type:"Negation",syntax:t(e.constraint)};case wt.OtherBid:return{type:"OtherBid",bid:{level:e.level.value,strain:Ca(e.strain)}};case wt.PointRange:return Li({type:"PointRange",min:e.lower.value,max:e.upper.value});case wt.PointBound:return Li({type:"PointRange",min:Object(d.pipe)(_a(e.qualifier,e.value.value)("min"),f.j.getOrElse(Object(d.constant)(0))),max:Object(d.pipe)(_a(e.qualifier,e.value.value)("max"),f.j.getOrElse(Object(d.constant)(37)))});case wt.SuitRange:return{type:"SuitRange",min:e.lower.value,max:e.upper.value,suit:Aa(e.suit)};case wt.SuitComparison:return{type:"SuitComparison",op:e.op.v,left:Aa(e.left),right:Aa(e.right)};case wt.Primary:case wt.Secondary:return{type:"Suit".concat(e.kind),suit:Aa(e.suit)};case wt.SetTrump:return{type:"SetTrump",suit:Aa(e.suit)};case wt.SuitBound:return{type:"SuitRange",min:Object(d.pipe)(_a(e.qualifier,e.value.value)("min"),f.j.getOrElse(Object(d.constant)(0))),max:Object(d.pipe)(_a(e.qualifier,e.value.value)("max"),f.j.getOrElse(Object(d.constant)(13))),suit:Aa(e.suit)};case wt.SuitHonors:return{type:"SuitHonors",suit:Aa(e.suit),honors:Object(d.pipe)(e.honors,f.n.fromArray,f.n.traverse(f.j.Applicative)(Object(d.flow)((function(t){return t.v}),$t)),f.j.getOrElseW((function(){return[]})))};case wt.SuitTop:return{type:"SuitTop",suit:Aa(e.suit),count:parseInt(e.x),minRank:Wt[Wt.length-parseInt(e.y)]};case wt.AnyShape:return Li({type:"AnyShape",counts:Object(d.pipe)(e.v,f.x.split(""),f.n.map(parseInt))});case wt.SpecificShape:return Li({type:"SpecificShape",suits:Object(d.pipe)(xe,f.q.mapWithIndex((function(t,n){return e[t].value})))});case wt.LabelDef:return{type:"LabelDef",name:e.label.v,definition:Ba(e.constraints)};case wt.LabelRef:return{type:"LabelRef",name:e.label.v};case wt.Balanced:case wt.SemiBalanced:case wt.Unbalanced:return{type:e.kind};default:return _t(e)}},Da=function(t){switch(t.kind){case wt.ContractBid:return{level:t.level.value,strain:Ca(t.specifier)};case wt.Pass:return"Pass";default:return _t(t)}},Ea=function(t){return new ha(t).parse()};!function(t){t.Start="Start",t.Hand="Hand",t.Suit="Suit",t.Card="Card",t.$EOF="$EOF"}(ya||(ya={}));var Pa=function t(e){Object(fa.a)(this,t),this.kind=ya.Card,this.c=void 0,this.rank=void 0,this.c=e,this.rank=["2","3","4","5","6","7","8","9","T","J","Q","K","A"].indexOf(e)+2},Ra=function(){function t(e){Object(fa.a)(this,t),this.input=void 0,this.pos=void 0,this.negating=!1,this.memoSafe=!0,this.pos={overallPos:0,line:1,offset:0},this.input=e}return Object(pa.a)(t,[{key:"reset",value:function(t){this.pos=t}},{key:"finished",value:function(){return this.pos.overallPos===this.input.length}},{key:"clearMemos",value:function(){}},{key:"matchStart",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchHand(t+1,e))&&null!==n.match$EOF(e)&&(i={kind:ya.Start,hand:r}),i}))}},{key:"matchHand",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c,u=null;return null!==(r=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(ba||(ba=Object(la.a)(["(?:.)"],["(?:\\.)"]))),t+1,e)&&null!==(i=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(ma||(ma=Object(la.a)(["(?:.)"],["(?:\\.)"]))),t+1,e)&&null!==(a=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(Oa||(Oa=Object(la.a)(["(?:.)"],["(?:\\.)"]))),t+1,e)&&null!==(c=n.matchSuit(t+1,e))&&(u={kind:ya.Hand,S:r,H:i,D:a,C:c}),u}))}},{key:"matchSuit",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.loop((function(){return n.matchCard(t+1,e)}),!0))&&(i={kind:ya.Suit,cards:r}),i}))}},{key:"matchCard",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(va||(va=Object(la.a)(["(?:[AKQJT2-9])"]))),t+1,e))&&(i=new Pa(r)),i}))}},{key:"test",value:function(){var t=this.mark(),e=null!==this.matchStart(0);return this.reset(t),e}},{key:"parse",value:function(){var t=this.mark(),e=this.matchStart(0);if(e)return{ast:e,errs:[]};this.reset(t);var n=new Ma;this.clearMemos(),this.matchStart(0,n);var r=n.getErr();return{ast:e,errs:null!==r?[r]:[]}}},{key:"mark",value:function(){return this.pos}},{key:"loop",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mark(),r=[];;){var i=t();if(null===i)break;r.push(i)}return e||r.length>0?r:(this.reset(n),null)}},{key:"run",value:function(t,e){var n=this.mark(),r=e();return null!==r?r:(this.reset(n),null)}},{key:"choice",value:function(t){var e,n=Object(sa.a)(t);try{for(n.s();!(e=n.n()).done;){var r=(0,e.value)();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"regexAccept",value:function(t,e,n){var r=this;return this.run(e,(function(){var e=new RegExp(t,"y"),i=r.mark();e.lastIndex=i.overallPos;var a=r.tryConsume(e);return n&&n.record(i,a,{kind:"RegexMatch",literal:t.substring(3,t.length-1),negated:r.negating}),a}))}},{key:"tryConsume",value:function(t){var e=t.exec(this.input);if(e){for(var n=0,r=-1,i=0;i<e[0].length;++i)"\n"===e[0][i]&&(++n,r=i);return this.pos={overallPos:t.lastIndex,line:this.pos.line+n,offset:-1===r?this.pos.offset+e[0].length:e[0].length-r-1},e[0]}return null}},{key:"noConsume",value:function(t){var e=this.mark(),n=t();return this.reset(e),n}},{key:"negate",value:function(t){var e=this.mark(),n=this.negating;this.negating=!n;var r=t();return this.negating=n,this.reset(e),null===r||null}},{key:"memoise",value:function(t,e){var n=this.mark(),r=e.get(n.overallPos);if(this.memoSafe&&void 0!==r)return this.reset(r[1]),r[0];var i=t();return this.memoSafe&&e.set(n.overallPos,[i,this.mark()]),i}},{key:"match$EOF",value:function(t){var e=this.finished()?{kind:ya.$EOF}:null;return t&&t.record(this.mark(),e,{kind:"EOF",negated:this.negating}),e}}]),t}();var Na=function(){function t(e,n){Object(fa.a)(this,t),this.pos=void 0,this.expmatches=void 0,this.pos=e,this.expmatches=Object(l.a)(n)}return Object(pa.a)(t,[{key:"toString",value:function(){return"Syntax Error at line ".concat(this.pos.line,":").concat(this.pos.offset,". Expected one of ").concat(this.expmatches.map((function(t){return"EOF"===t.kind?" EOF":" ".concat(t.negated?"not ":"","'").concat(t.literal,"'")})))}}]),t}(),Ma=function(){function t(){Object(fa.a)(this,t),this.mxpos={overallPos:-1,line:-1,offset:-1},this.regexset=new Set,this.pmatches=[]}return Object(pa.a)(t,[{key:"record",value:function(t,e,n){null===e!==n.negated&&(t.overallPos>this.mxpos.overallPos&&(this.mxpos=t,this.pmatches=[],this.regexset.clear()),this.mxpos.overallPos===t.overallPos&&("RegexMatch"===n.kind?(this.regexset.has(n.literal)||this.pmatches.push(n),this.regexset.add(n.literal)):this.pmatches.push(n)))}},{key:"getErr",value:function(){return-1!==this.mxpos.overallPos?new Na(this.mxpos,this.pmatches):null}}]),t}(),Fa=function(t){return Object(d.pipe)(Rt,f.n.map(function(t){return function(e){return Object(d.pipe)(t[e].cards,f.n.map((function(t){return{suit:e,rank:Tt.decode(t.rank).right}})))}}(t)),f.n.flatten,f.r.fromReadonlyArray(Kt))},Ia=function(t){return new Ra(t).parse()},Ta={encode:Object(d.flow)(Xt,f.q.toReadonlyArray,f.n.sort(Qt()),f.n.map(Object(d.flow)(f.s.snd,f.n.sort(zt),f.n.reduce("",(function(t,e){return t+Tt.encode(e)})))),f.n.intersperse("."),f.n.foldMap(f.x.Monoid)(d.identity))},La=function(t){return Object(d.pipe)(t,f.p.fromReadonlyArray,f.j.fold(Object(d.constant)(Zn.a(null,"No syntax errors reported")),f.p.foldMap(Bi.getSemigroup())((function(t){var e=Object(b.a)(t,2),n=e[0],r=e[1];return Bi.of(_i.key(n,"required",Bi.of(_i.index(r.pos.offset,"required",Object(d.pipe)(r.expmatches,f.p.fromReadonlyArray,f.j.fold(Object(d.constant)(Bi.of(_i.leaf(n,""))),f.p.foldMapWithIndex(Bi.getSemigroup())((function(t,e){return Bi.of(_i.leaf(n.substring(r.pos.offset),"EOF"===e.kind?"EOF":"".concat(e.negated?"not ":"","'").concat(e.literal,"'")))}))))))))}))))},Ha=function(t){return f.d.fromNullable(t.errs)(t.ast)},za=function(t){return Object(d.pipe)(Zn.c,Zn.b((function(e){return Object(d.pipe)(e,t,Ha,f.d.mapLeft(Object(d.flow)(f.n.map((function(t){return[e,t]})),La)))})))},Wa=Object(d.flow)(za(Ea).decode,f.d.map((function(t){return function(t){var e;return{bid:Da(t.bid),syntax:Object(d.pipe)(null===(e=t.constraints)||void 0===e?void 0:e.constraints,f.j.fromNullable,f.j.fold(zi,Ba))}}(t.spec)}))),Ua=Object(d.flow)(za(Ia).decode,f.d.map((function(t){return Fa(t.hand)}))),$a={selectedBlockKey:f.j.none},Ka=function(t){return function(e){var n=Object(b.a)(e,2),r=n[0],i=n[1];t.opener=Object(d.pipe)(r,f.d.right,er.get,dn.a),t.responder=Object(d.pipe)(i,f.d.right,er.get,dn.a)}},Ga=Object(p.b)("abc",(function(t,e){var n=t.opener,r=t.responder,i=e.rejectWithValue;return Object(d.pipe)(function(t,e){return Object(d.pipe)(Yt(),f.n.difference(Kt)(Object(d.pipe)(t,f.r.toReadonlyArray(Gt))),f.n.difference(Kt)(Object(d.pipe)(e,f.r.toReadonlyArray(Gt))),f.n.chunksOf(13),f.n.map(f.r.fromReadonlyArray(Kt)),(function(n){var r=Object(b.a)(n,2),i=r[0],a=r[1];return{dealer:"N",deal:{N:t,S:e,E:i,W:a}}}))}(tr.reverseGet(n),tr.reverseGet(r)).deal,cr.get,f.n.of,mr,fn.b.map(Object(d.flow)(f.q.toReadonlyArray,f.n.map(f.s.snd),(function(t){return t[0]}))),fn.a.map(f.d.getOrElseW(i)),fn.a.toTask)()})),Ja=function(t){return function(e){return Object(Ai.tailRec)(t,(function(t){if(Object(d.pipe)(t,f.j.fold(d.constFalse,(function(t){return 0===t}))))return f.d.right(f.j.none);var n,r=(n=Yt(),Object(d.pipe)(te,f.p.zip(f.p.chunksOf(13)(n)),f.p.groupBy(f.s.fst),f.q.map(Object(d.flow)(f.p.head,f.s.snd,f.r.fromReadonlyArray(Kt))),(function(t){return t}))),i=[r.N,r.S];return e(i)?f.d.right(f.j.some(i)):f.d.left(Object(d.pipe)(t,f.j.map((function(t){return t-1}))))}))}},Qa=function(t){return function(e){return Ja(f.j.some(1e4))((function(n){return Object(d.pipe)(e,f.n.partition(pn.apply(void 0,Object(l.a)(n))),f.v.right,(function(e){return t(e.length)}))}))}},Va=Object(p.d)({name:"selection",initialState:$a,reducers:{setSelectedBlockKey:function(t,e){t.selectedBlockKey=e.payload},setHand:{reducer:function(t,e){t[e.meta]=Object(d.pipe)(e.payload,Ua,er.get,dn.a)},prepare:function(t,e){return{payload:t,meta:e}}},genOnce:function(t){Object(d.pipe)(Ja(f.j.none)(d.constTrue),f.j.map(Ka(t)))},getHandsMatchingPath:function(t,e){Object(d.pipe)(Ja(f.j.some(1e4))((function(t){return pn.apply(void 0,Object(l.a)(t))(e.payload)})),f.j.map(Ka(t)))},genHandsNotMatchingAnyOf:{reducer:function(t,e){Object(d.pipe)(Ja(f.j.some(1e4))((function(t){return Oe(t[0])>=e.meta&&Object(d.pipe)(e.payload,f.n.every(f.m.not(pn.apply(void 0,Object(l.a)(t)))))})),f.j.map(Ka(t)))},prepare:function(t,e){return{payload:t,meta:e}}},genHandsMatchingExactlyOneOf:function(t,e){Object(d.pipe)(Qa((function(t){return 1===t}))(e.payload),f.j.map(Ka(t)))},genHandsMatchingMoreThanOneOf:function(t,e){Object(d.pipe)(Qa((function(t){return t>1}))(e.payload),f.j.map(Ka(t)))}},extraReducers:function(t){return t.addCase(Ga.fulfilled,(function(t,e){t.result=Object(d.pipe)(e.payload,dn.a)}))}}),Xa=Va.actions,Za=Xa.setSelectedBlockKey,Ya=Xa.setHand,tc=Xa.genOnce,ec=Xa.getHandsMatchingPath,nc=Xa.genHandsNotMatchingAnyOf,rc=Xa.genHandsMatchingExactlyOneOf,ic=Xa.genHandsMatchingMoreThanOneOf,ac=Va.reducer,cc=Object(j.a)((function(t){return Object(d.pipe)(t.selectedBlockKey,f.j.toNullable)})),uc=Object(j.a)((function(t){var e=t.state,n=t.type;return Object(d.pipe)(e[n],f.j.fromNullable,f.j.chain(Object(d.flow)(er.reverseGet,f.j.fromEither)))})),oc=Object(p.d)({name:"settings",initialState:{implicitPass:!1,generateCount:3e4},reducers:{setInitial:function(t,e){Object(d.pipe)(Object.keys(e.payload),f.n.map((function(n){return t[n]=e.payload[n]})))},setProperty:{reducer:function(t,e){t[e.meta]=e.payload},prepare:function(t,e){return{payload:e,meta:t}}}}}),sc=oc.actions,lc=(sc.setProperty,sc.setInitial,oc.reducer),pc=n(692),fc=n(354);var dc=Object(d.flow)(f.q.toReadonlyArray,f.n.map(f.s.snd)),jc=function(t){return Object(d.pipe)(t,f.n.zip(f.p.tail(t)),f.n.traverse(f.d.Applicative)((function(e){var n=Object(b.a)(e,2),r=n[0],i=n[1];return f.l.lt(Le)(r,i)?f.d.right(Object(d.constVoid)()):f.d.left({type:"BidsOutOfOrder",left:r,right:i,path:Object(d.pipe)(t,f.n.map((function(t){return t.bid})))})})),f.d.map(d.constVoid))},hc=function(t){return Object(d.pipe)(t,Ei,f.n.traverse(f.d.Applicative)(jc),f.d.map(d.constVoid))},bc=function(t){return Object(d.pipe)([hc],f.n.traverse(f.d.Applicative)(Object(d.apply)(t)),f.d.map(d.constVoid))},mc=f.x.Eq,Oc=Object(p.c)(),vc=Object(p.c)(),yc={system:[],decodedBids:Oc.getInitialState(),validatedPaths:vc.getInitialState()},gc=Object(p.d)({name:"system",initialState:yc,reducers:{setSystem:function(t,e){t.system=Object(d.pipe)(function(t){var e=f.B.make("ROOT"),n=[e];return t.forEach((function(t){var e=n[t.depth+1]={forest:[],value:t.key};n[t.depth].forest.push(e)})),e.forest}(e.payload),dn.a)},removeConstraintsByBlockKey:function(t,e){Oc.removeMany(t.decodedBids,e.payload),vc.removeMany(t.validatedPaths,Object(d.pipe)(t.validatedPaths.ids,f.n.filter((function(t){return Object(d.pipe)(e.payload,f.n.exists(Object(d.flow)(f.x.includes,Object(d.apply)(t))))}))))},cacheSystemConstraints:function(t,e){var n=Object(d.pipe)(e.payload,f.p.map((function(t){return{id:t.key,value:Wa(t.text)}})));Oc.setMany(t.decodedBids,n)},validateSystem:function(t){},reportValidationResult:function(t,e){Object(d.pipe)(e.payload,f.s.fst,(function(e){return qc({state:t,path:e})}),f.j.map(Object(d.flow)((function(t){return{id:t,value:Object(d.pipe)(e.payload,f.s.snd,fc.a.replete)}}),(function(e){return vc.upsertOne(t.validatedPaths,e)}))))}}}),Sc=gc.actions,xc=Sc.setSystem,kc=Sc.removeConstraintsByBlockKey,wc=Sc.cacheSystemConstraints,Cc=Sc.validateSystem,Ac=Sc.reportValidationResult,_c=Oc.getSelectors(),Bc=function(t){return function(e){return Object(d.pipe)(f.j.fromNullableK(_c.selectById)(t,e),f.j.map((function(t){return t.value})))}},qc=function(t){var e=t.state,n=t.path;return Object(d.pipe)(n,f.p.traverse(f.j.Applicative)((function(t){return Object(d.pipe)(e.decodedBids.entities,dc,f.n.filterMap(f.j.fromNullable),f.n.findFirst((function(e){return Object(d.pipe)(e.value,f.j.fromEither,f.j.map(gn("bid")),(function(e){return f.j.elem(me)(t,e)}))})),f.j.map(gn("id")))})),f.j.map(Object(d.flow)(f.p.intersperse("."),f.p.foldMap(f.x.Semigroup)(d.identity),(function(t){return t}))))},Dc=Object(j.a)((function(t){var e=t.state,n=t.key;return Object(d.pipe)(n,Bc(e.decodedBids),f.j.chain(f.j.fromEither))})),Ec=Object(j.a)((function(t){var e,n=t.state,r=t.key;return Object(d.pipe)(n.system,(e=mc,function(t){return f.n.findFirstMap(f.B.fold((function(n,r){return e.equals(n,t)?f.j.some([t]):Object(d.pipe)(r,f.n.findFirstMap(f.j.map(f.n.prepend(n))))})))})(r),f.j.getOrElse((function(){return f.n.zero()})),f.n.filterMap(Bc(n.decodedBids)),f.n.sequence(f.d.Applicative))})),Pc=Object(j.a)((function(t){return Object(d.pipe)(t.system,qi,f.n.filterMap(Bc(t.decodedBids)))})),Rc=(Object(j.a)(Object(d.flow)(Pc,f.n.lefts)),Object(j.a)((function(t){var e,n=t.state,r=t.options;return Object(d.pipe)(n.system,(e=n.decodedBids,Object(d.flow)(f.n.filterMap(f.B.traverse(f.j.Applicative)(Bc(e))),Mi)),f.A.map((null===r||void 0===r?void 0:r.implicitPass)?Ni:d.identity))}))),Nc=Object(j.a)(Object(d.flow)(Rc,f.A.mapLeft(f.n.map((function(t){return{type:"Parse",error:t}}))),Fi(Object(d.flow)((function(t){return Object(d.pipe)(t,Ri(Vi),f.n.map(Object(d.flow)(ca,oa)),f.w.traverseArray(ua),f.w.evaluate(Wi),Mi)}),f.A.mapLeft(f.n.map((function(t){return{type:"Syntax",error:t}}))))))),Mc=Object(j.a)(Object(d.flow)(Nc,Fi((function(t){return Object(d.pipe)(t,bc,f.A.bimap((function(t){return f.n.of({type:"Validation",error:t})}),(function(){return t})))})))),Fc=Object(j.a)(Object(d.flow)(Mc,f.A.map(Ei))),Ic=Object(j.a)(Object(d.flow)(Fc,f.A.getRightOnly,f.j.chain(f.p.fromReadonlyArray))),Tc=Object(j.a)(Object(d.flow)(Fc,f.A.getRight,f.j.chain(f.p.fromReadonlyArray))),Lc=Object(j.a)((function(t){return Object(d.pipe)(f.j.Do,f.j.apS("path",f.j.fromEitherK(Ec)(t)),f.j.apS("paths",Object(d.pipe)(t,Mc,f.A.getRight,f.j.map(Ei))),f.j.chain((function(t){var e=t.path,n=t.paths;return Object(d.pipe)(n,f.n.findFirst((function(t){return f.n.getEq(Object(d.pipe)(me,f.g.contramap((function(t){return t.bid})))).equals(e,t)})))})))})),Hc=Object(d.flow)(Lc,f.j.map(f.p.last)),zc=Object(d.pipe)(me,f.n.getEq),Wc=Object(j.a)((function(t){return Object(d.pipe)(t,Rc,f.A.map(Object(d.flow)(f.n.map(f.B.map((function(t){return t.bid}))),Di,f.n.toArray,(function(e){return Object(d.pipe)(t,Mc,f.A.getLeft,f.j.getOrElse((function(){return f.n.zero()})),f.n.filterMap((function(t){return"Parse"!==t.type?f.j.some(t):f.j.none})),(function(t){return Object(d.pipe)(e,f.n.map(f.B.map((function(e){return{bid:Object(d.pipe)(e,f.p.last),path:e,errors:Object(d.pipe)(t,f.n.filter((function(t){return zc.equals(t.error.path,e)})))}}))))}))}))))})),Uc=Object(j.a)((function(t){return Object(d.pipe)(f.j.Do,f.j.apS("errors",Object(d.pipe)(t,Wc,f.A.getRight)),f.j.apS("sb",Dc(t)),f.j.fold((function(){return f.n.empty}),(function(t){var e=t.sb,n=t.errors;return Object(d.pipe)(n,qi,f.n.filter((function(t){return me.equals(e.bid,t.bid)})))})))})),$c=gc.reducer,Kc=[Object(d.flow)(fn.a.filter(xc.match),Object(pc.a)(1e3),fn.a.map((function(){return Cc()}))),function(t,e){return Object(d.pipe)(t,fn.a.filter(Cc.match),fn.a.chain((function(){return Object(d.pipe)({state:e.value.system},Nc,f.A.getRight,f.j.fold((function(){return f.n.empty}),Ei),f.n.filter(Object(d.flow)(f.p.map(gn("bid")),(function(t){return qc({state:e.value.system,path:t})}),f.j.fold(d.constFalse,(function(t){return!e.value.system.validatedPaths.ids.includes(t)})))),Or)})),fn.a.map(Ac))}],Gc={system:$c,selection:ac,generator:_r,settings:lc,profile:Si},Jc=h.a.apply(void 0,Object(l.a)(Er).concat(Object(l.a)(xi),Object(l.a)(Kc))),Qc=Object(j.a)((function(t){return Object(d.pipe)(f.j.Do,f.j.apS("opener",uc({state:t.selection,type:"opener"})),f.j.apS("responder",uc({state:t.selection,type:"responder"})),f.j.apS("paths",Object(d.pipe)(Tc({state:t.system,options:t.settings}))),f.j.map((function(t){return Object(d.pipe)(t.paths,f.n.map((function(e){return{path:e,result:pn(t.opener,t.responder)(e)}})))})),f.j.toNullable)})),Vc=n(681),Xc=Object(Vc.a)(),Zc=Object(p.a)({reducer:Gc,middleware:function(t){return[].concat(Object(l.a)(t()),[Xc])}});Xc.run(Jc);var Yc,tu,eu,nu,ru,iu,au,cu,uu,ou,su,lu,pu,fu,du,ju,hu,bu,mu,Ou,vu=n(5),yu=function(){return Object(vu.jsxs)("div",{className:"App",children:[Object(vu.jsxs)("div",{children:[Object(vu.jsxs)("div",{style:{display:"inline-block",float:"left"},children:[Object(vu.jsx)(o.a,{to:"/design",children:"Design"}),"\xa0|\xa0",Object(vu.jsx)(o.a,{to:"/analyze",children:"Analyze"})]}),Object(vu.jsxs)("div",{style:{display:"inline-block",float:"right"},children:[Object(vu.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/kdblocher/bridge#documentation",children:"Documentation"}),"\xa0|\xa0",Object(vu.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/kdblocher/bridge/discussions",children:"Share ideas"}),"\xa0|\xa0",Object(vu.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/kdblocher/bridge/issues/new",children:"Report issue"})]})]}),Object(vu.jsx)("br",{}),Object(vu.jsx)(s.a,{})]})},gu=(n(555),n(94)),Su=n(44),xu=function(){return Object(u.b)()},ku=u.c,wu=Su.a.div(Yc||(Yc=Object(la.a)(["\n  font-family: Cascadia Code, Consolas, monospace;\n  font-size: 1em;\n"]))),Cu=function(t){return{key:t.getKey(),text:t.getText(),depth:t.getDepth()}},Au=f.h.concatAll(f.g.getMonoid())([Object(d.pipe)(f.x.Eq,f.g.contramap((function(t){return t.getKey()}))),Object(d.pipe)(f.x.Eq,f.g.contramap((function(t){return t.getText()})))]),_u=function(t){return Object(d.pipe)(t.getCurrentContent().getBlocksAsArray(),f.r.fromReadonlyArray(Au))},Bu=function(){var t=Object(r.useState)((function(){return gu.EditorState.createEmpty()})),e=Object(b.a)(t,2),n=e[0],i=e[1],a=Object(r.useState)((function(){return _u(n)})),c=Object(b.a)(a,2),u=c[0],o=c[1],s=xu(),l=ku((function(t){return cc(t.selection)})),p=Object(r.useCallback)((function(t){i(t),setTimeout((function(){return localStorage.setItem("editor",JSON.stringify(Object(gu.convertToRaw)(t.getCurrentContent())))}),0);var e=_u(t),n=f.r.intersection(Au)(u,e),r=f.r.difference(Au)(u,n),a=f.r.difference(Au)(e,n);o(e),f.r.isEmpty(f.h.concatAll(f.r.getUnionMonoid(Au))([r,a]))||(s(Object(d.pipe)(e,f.r.toReadonlyArray(f.l.trivial),f.n.map(Cu),xc)),Object(d.pipe)(r,f.r.toReadonlyArray(f.l.trivial),f.p.fromReadonlyArray,f.j.map(Object(d.flow)(f.p.map((function(t){return t.getKey()})),(function(t){return s(kc(t))})))),Object(d.pipe)(a,f.r.toReadonlyArray(f.l.trivial),f.p.fromReadonlyArray,f.j.map(Object(d.flow)(f.p.map(Cu),(function(t){return s(wc(t))})))));var c=t.getSelection().getFocusKey();c!==l&&s(Za(f.j.some(c)))}),[u,s,l]);return Object(r.useEffect)((function(){var t=localStorage.getItem("editor");i(t?function(){return gu.EditorState.createWithContent(Object(gu.convertFromRaw)(JSON.parse(t)))}:function(){return gu.RichUtils.toggleBlockType(n,"unordered-list-item")})}),[]),Object(vu.jsxs)("div",{children:[Object(vu.jsx)("h3",{children:"Editor"}),Object(vu.jsx)(wu,{children:Object(vu.jsx)(gu.Editor,{editorState:n,onChange:p,keyBindingFn:function(t){if(9===t.keyCode){var e=gu.RichUtils.onTab(t,n,10);return e!==n&&p(e),null}return Object(gu.getDefaultKeyBinding)(t)}})})]})},qu=n(195),Du=Su.a.span(tu||(tu=Object(la.a)(['\n  &.S::after { content: "\u2660"; color: #0000FF; }\n  &.H::after { content: "\u2665"; color: #FF0000; }\n  &.D::after { content: "\u2666"; color: #FFA500; }\n  &.C::after { content: "\u2663"; color: #32CD32; }\n  &.N::after { content: "NT" }\n']))),Eu=function(t){var e=t.bid;return Object(vu.jsxs)(vu.Fragment,{children:[Object(vu.jsx)("span",{children:e.level}),Object(vu.jsx)(Du,{className:e.strain})]})},Pu=function(t){var e=t.bid;return Object(vu.jsx)("span",{children:e})},Ru=function(t){var e=t.bid;return"string"===typeof e?Object(vu.jsx)(Pu,{bid:e}):Object(vu.jsx)(Eu,{bid:e})},Nu=function(t){var e=t.path;return Object(vu.jsx)("span",{children:e.map((function(t,e){return Object(vu.jsxs)(r.Fragment,{children:["\xa0",Object(vu.jsx)(Ru,{bid:t})]},e)}))})},Mu=Su.a.div(eu||(eu=Object(la.a)(["\n  clear: both;\n  display: inline-grid;\n  grid-template-columns: auto auto;\n  width: auto;\n"]))),Fu=function(t){var e=t.error;return Object(vu.jsxs)("span",{children:[e.syntax.type,": ",e.reason]})},Iu=function(t){var e=t.error;if("BidsOutOfOrder"===e.type)return Object(vu.jsxs)("span",{children:["Bids ",Object(vu.jsx)(Ru,{bid:e.left.bid})," and ",Object(vu.jsx)(Ru,{bid:e.right.bid})," out of order"]})},Tu=function(t){t.bid;var e=t.errors;return Object(vu.jsxs)("div",{children:[e.map((function(t,e){switch(t.type){case"Syntax":return Object(vu.jsx)(Fu,{error:t.error},e);case"Validation":return Object(vu.jsx)(Iu,{error:t.error},e);default:return _t(t)}})),0===e.length&&"none"]})},Lu=function(t){var e=t.errors;return Object(vu.jsx)(Mu,{children:e.filter((function(t){return t.errors.length>0})).map((function(t){var e=t.bid,n=t.path,i=t.errors;return Object(vu.jsxs)(r.Fragment,{children:[Object(vu.jsx)(Nu,{path:n}),Object(vu.jsx)(Tu,{bid:e,errors:i})]},pr.get(n))}))})},Hu=function(t){var e=t.forest,n=Object(r.useMemo)((function(){return Object(d.pipe)(e,f.n.chain(f.B.foldMap(f.n.getMonoid())(f.n.of)))}),[e]);return Object(vu.jsx)(Lu,{errors:n})},zu=function(){var t=ku((function(t){return Object(d.pipe)(t.system.system,f.n.isNonEmpty)})),e=ku((function(t){return Object(d.pipe)(Ic({state:t.system,options:t.settings}),f.j.isSome)})),n=ku((function(t){return Wc({state:t.system,options:t.settings})}));return Object(vu.jsx)("section",{children:!t||e?Object(vu.jsx)(vu.Fragment,{}):Object(vu.jsxs)(vu.Fragment,{children:[Object(vu.jsx)("h3",{children:"Errors"}),f.A.isLeft(n)&&Object(vu.jsxs)("div",{children:[Object(vu.jsx)("h4",{children:"Parse Errors"}),Object(vu.jsx)("ul",{children:n.left.map((function(t,e){return Object(vu.jsx)("li",{children:Object(vu.jsx)("pre",{children:Object(qu.draw)(t)})},e)}))})]}),f.A.isRight(n)&&Object(vu.jsxs)("div",{children:[Object(vu.jsx)("h4",{children:"Semantic Errors"}),Object(vu.jsx)(Hu,{forest:n.right})]})]})})},Wu=n(238),Uu=n.n(Wu),$u=function(){var t=ku((function(t){return t.selection.selectedBlockKey})),e=ku((function(e){return Object(d.pipe)(t,f.j.chain((function(t){return Dc({state:e.system,key:t})})),f.j.toNullable)})),n=ku((function(e){return Object(d.pipe)(t,f.j.chain((function(t){return Hc({state:e.system,key:t})})),f.j.toNullable)})),r=ku((function(e){return Object(d.pipe)(t,f.j.fold((function(){return f.n.empty}),(function(t){return Uc({state:e.system,key:t})})))}));return Object(vu.jsx)("section",{children:t&&Object(vu.jsxs)("div",{children:[Object(vu.jsx)("h3",{children:"Selection"}),r&&Object(vu.jsxs)("div",{children:[Object(vu.jsx)("h4",{children:"Errors"}),Object(vu.jsx)(Lu,{errors:r})]}),e&&Object(vu.jsxs)("div",{children:[Object(vu.jsx)("h4",{children:"Syntax"}),Object(vu.jsx)(Uu.a,{data:e})]}),n&&Object(vu.jsxs)("div",{children:[Object(vu.jsx)("h4",{children:"Constraint"}),Object(vu.jsx)(Uu.a,{data:n})]})]})})},Ku=n(679),Gu=Su.a.ol(nu||(nu=Object(la.a)(["\n  padding-left: 0;\n"]))),Ju=Su.a.li(ru||(ru=Object(la.a)(["\n  list-style-type: none;\n  display: inline;\n  float: left;\n"]))),Qu=function(t){var e=t.rank;return Object(vu.jsx)(Ju,{children:Ft[e-2]})},Vu=Su.a.ol(iu||(iu=Object(la.a)(["\n  white-space: nowrap;\n  width: 15em;\n  margin: 0;\n  padding-left: 0;\n  list-style: decimal url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) inside;\n"]))),Xu=Su.a.li(au||(au=Object(la.a)(["\n  display: inline;\n  &::before {\n    display: inline;\n    float: left;\n    margin-left: 5px;\n  }\n  ","\n"])),'\n  &.S::before { content: "\u2660"; color: #0000FF }\n  &.H::before { content: "\u2665"; color: #FF0000 }\n  &.D::before { content: "\u2666"; color: #FFA500 }\n  &.C::before { content: "\u2663"; color: #32CD32 }\n'),Zu=function(t){var e=t.suit,n=t.ranks;return Object(vu.jsx)(Xu,{className:e,children:Object(vu.jsxs)(Gu,{children:[n.map((function(t,e){return Object(vu.jsx)(Qu,{rank:t},e)})),0===n.length&&Object(vu.jsx)(Ju,{children:"-"})]})})},Yu=function(t){var e=t.hand,n=Xt(e);return Object(vu.jsx)(Vu,{children:Object(d.pipe)(n,f.q.mapWithIndex((function(t,e){return Object(vu.jsx)(Zu,{suit:t,ranks:e},t)})),f.q.toReadonlyArray,f.n.sort(Qt()),f.n.map(f.s.snd))})},to=Su.a.span(cu||(cu=Object(la.a)(["\n  ",'\n  &.N::before { content: "NT"; color: #000000; font-size: 12px; }\n'])),'\n  &.S::before { content: "\u2660"; color: #0000FF }\n  &.H::before { content: "\u2665"; color: #FF0000 }\n  &.D::before { content: "\u2666"; color: #FFA500 }\n  &.C::before { content: "\u2663"; color: #32CD32 }\n'),eo=function(t){var e=t.table;return Object(vu.jsxs)("table",{children:[Object(vu.jsx)("thead",{children:Object(vu.jsxs)("tr",{children:[Object(vu.jsx)("th",{}),ie.map((function(t,e){return Object(vu.jsx)("th",{style:{fontWeight:"normal",verticalAlign:"middle"},children:Object(vu.jsx)(to,{className:t})},e)}))]})}),Object(vu.jsx)("tbody",{children:te.map((function(t,n){return Object(vu.jsxs)("tr",{children:[Object(vu.jsx)("td",{children:t}),ie.map((function(n,r){return Object(vu.jsx)("td",{children:Math.round(100*e[n][t])/100},r)}))]},n)}))})]})},no=function(t){var e=t.result;return Object(vu.jsxs)("table",{children:[Object(vu.jsx)("thead",{children:Object(vu.jsxs)("tr",{children:[Object(vu.jsx)("th",{}),ie.map((function(t,e){return Object(vu.jsx)("th",{style:{fontWeight:"normal",verticalAlign:"middle"},children:Object(vu.jsx)(to,{className:t})},e)}))]})}),Object(vu.jsx)("tbody",{children:te.map((function(t,n){return Object(vu.jsxs)("tr",{children:[Object(vu.jsx)("td",{children:t}),ie.map((function(n,r){return Object(vu.jsx)("td",{children:e.results[n][t]},r)})),Object(vu.jsx)("td",{children:Object(vu.jsx)(Yu,{hand:cr.reverseGet(e.board.deal)[t]})})]},n)}))})]})},ro=function(t){var e=t.value,n=t.children,r=t.onNone;return Object(d.pipe)(e,f.j.fold((function(){return r?r():Object(vu.jsx)(vu.Fragment,{})}),n))},io=function(){var t=xu();return Object(vu.jsx)(Ku.a,{onClick:function(){return t(tc())},children:"Random"})},ao=function(t){var e=t.bidPaths,n=xu(),i=Object(r.useState)(11),a=Object(b.a)(i,2),c=a[0],u=a[1];return Object(vu.jsx)(vu.Fragment,{children:e&&Object(vu.jsxs)("span",{children:[Object(vu.jsx)(Ku.a,{onClick:function(){return n(nc(e,c))},children:"Zero"}),"Min HCP",Object(vu.jsx)("input",{type:"number",style:{width:50},value:c,onChange:function(t){return u(parseInt(t.target.value))}})]})})},co=function(t){var e=t.bidPaths,n=xu();return Object(vu.jsx)(vu.Fragment,{children:e&&Object(vu.jsx)("span",{children:Object(vu.jsx)(Ku.a,{onClick:function(){return n(rc(e))},children:"One"})})})},uo=function(t){var e=t.bidPaths,n=xu();return Object(vu.jsx)(vu.Fragment,{children:e&&Object(vu.jsx)("span",{children:Object(vu.jsx)(Ku.a,{onClick:function(){return n(ic(e))},children:"Many"})})})},oo=function(){var t=ku((function(t){return t.selection.selectedBlockKey})),e=ku((function(e){return Object(d.pipe)(t,f.j.chain((function(t){return Lc({state:e.system,key:t})})),f.j.toNullable)})),n=xu();return Object(vu.jsx)(vu.Fragment,{children:e&&Object(vu.jsx)(Ku.a,{onClick:function(){return n(ec(e))},children:"Selected"})})},so=function(){var t=ku((function(t){return Object(d.pipe)(Tc({state:t.system,options:t.settings}),f.j.toNullable)}));return Object(vu.jsxs)("section",{children:[Object(vu.jsx)("h4",{children:"Generate Hands"}),Object(vu.jsx)(io,{}),Object(vu.jsx)(oo,{}),Object(vu.jsx)(ao,{bidPaths:t}),Object(vu.jsx)(co,{bidPaths:t}),Object(vu.jsx)(uo,{bidPaths:t})]})},lo=function(t){var e=t.type,n=xu(),i=Object(r.useState)(""),a=Object(b.a)(i,2),c=a[0],u=a[1],o="hand.".concat(e),s=ku((function(t){return Object(d.pipe)(uc({state:t.selection,type:e}),f.j.map(Ta.encode),f.j.toNullable)})),l=Object(r.useCallback)((function(t){u(t),n(Ya(t,e))}),[n,e]);return Object(r.useEffect)((function(){var t=localStorage.getItem(o);t&&l(t)}),[l,o,e]),Object(vu.jsx)("input",{type:"text",placeholder:"AKQJ.T987.654.32",value:null!==s&&void 0!==s?s:c,onChange:function(t){return l(t.target.value)},onBlur:function(){return localStorage.setItem(o,c)}})},po=Su.a.th(uu||(uu=Object(la.a)(["\n  width: 15em;\n"]))),fo=function(){var t=xu(),e=[ku((function(t){return uc({state:t.selection,type:"opener"})})),ku((function(t){return uc({state:t.selection,type:"responder"})}))],n=e[0],i=e[1],a=Object(r.useCallback)((function(){return Object(d.pipe)(f.j.Do,f.j.apS("opener",n),f.j.apS("responder",i),f.j.map(Object(d.flow)(f.q.map(tr.get),Ga,t)),d.constVoid)}),[t,n,i]),c=ku((function(t){return t.selection.result}));return Object(vu.jsxs)(vu.Fragment,{children:[Object(vu.jsxs)("table",{children:[Object(vu.jsx)("thead",{children:Object(vu.jsxs)("tr",{children:[Object(vu.jsx)(po,{children:"Opener"}),Object(vu.jsx)(po,{children:"Responder"})]})}),Object(vu.jsxs)("tbody",{children:[Object(vu.jsxs)("tr",{children:[Object(vu.jsx)("td",{children:Object(vu.jsx)(lo,{type:"opener"})}),Object(vu.jsx)("td",{children:Object(vu.jsx)(lo,{type:"responder"})})]}),Object(vu.jsxs)("tr",{children:[Object(vu.jsx)("td",{children:Object(vu.jsx)(ro,{value:n,children:function(t){return Object(vu.jsx)(Yu,{hand:t})}})}),Object(vu.jsx)("td",{children:Object(vu.jsx)(ro,{value:i,children:function(t){return Object(vu.jsx)(Yu,{hand:t})}})})]})]})]}),Object(vu.jsx)(so,{}),Object(vu.jsxs)("p",{children:[Object(vu.jsx)(Ku.a,{onClick:a,children:"Solution"}),c&&Object(vu.jsx)(no,{result:c})]})]})},jo=function(){var t=ku(Qc);return Object(vu.jsxs)("section",{children:[Object(vu.jsx)("h3",{children:"Test Hands"}),Object(vu.jsx)(fo,{}),null!==t&&Object(vu.jsxs)("div",{children:[Object(vu.jsx)("h4",{children:"Results"}),Object(vu.jsx)("ul",{children:t.map((function(t,e){return Object(vu.jsxs)("li",{children:[Object(vu.jsx)(Nu,{path:t.path.map((function(t){return t.bid}))}),": \xa0",Object(vu.jsx)("span",{children:t.result.toString()})]},e)}))})]})]})},ho=function(){return Object(vu.jsxs)(vu.Fragment,{children:[Object(vu.jsxs)("div",{style:{clear:"both",display:"inline-block",width:"50%"},children:[Object(vu.jsx)("div",{style:{float:"left"},children:Object(vu.jsx)(Bu,{})}),Object(vu.jsx)("div",{style:{clear:"both"},children:Object(vu.jsx)(zu,{})})]}),Object(vu.jsxs)("div",{style:{display:"inline-block",width:"50%",float:"right"},children:[Object(vu.jsx)(jo,{}),Object(vu.jsx)($u,{})]})]})},bo=n(677),mo=n(355),Oo=n(676),vo=n(682),yo=n(680),go=n(683),So=n(684),xo=function(t){var e=t.numerator,n=t.denominator,r=t.decimalPlaces,i=Math.pow(10,null!==r&&void 0!==r?r:0);return Object(vu.jsxs)("span",{children:["1 in ",Math.floor(n/e*i)/i]})},ko=function(t){var e=t.numerator,n=t.denominator,r=t.decimalPlaces,i=Math.pow(10,null!==r&&void 0!==r?r:0);return Object(vu.jsxs)("span",{children:[Math.floor(e*(100*i)/n)/i,"%"]})},wo=function(t){var e=t.path,n=t.satisfiesCount,r=t.dealCount;return Object(vu.jsxs)(vu.Fragment,{children:[Object(vu.jsx)(Nu,{path:pr.reverseGet(e)}),Object(vu.jsxs)("span",{children:[n,r&&Object(vu.jsxs)("small",{children:["\xa0(",Object(vu.jsx)(ko,{numerator:n,denominator:r,decimalPlaces:2}),"\xa0,\xa0or\xa0",Object(vu.jsx)(xo,{numerator:n,denominator:r}),")"]})]})]})},Co=function(t){var e=t.stats;return Object(vu.jsxs)(vu.Fragment,{children:[null!==e.average&&Object(vu.jsxs)("section",{children:[Object(vu.jsx)("h4",{children:"Average"}),null!==e.average&&Object(vu.jsx)(eo,{table:e.average})]}),null!==e.stdev&&Object(vu.jsxs)("section",{children:[Object(vu.jsx)("h4",{children:"Std. Dev."}),Object(vu.jsx)(eo,{table:e.stdev})]})]})},Ao=Su.a.span(ou||(ou=Object(la.a)(["\n  ",'\n  &.N::before { content: "NT"; color: #000000; font-size: 12px; }\n'])),'\n  &.S::before { content: "\u2660"; color: #0000FF }\n  &.H::before { content: "\u2665"; color: #FF0000 }\n  &.D::before { content: "\u2666"; color: #FFA500 }\n  &.C::before { content: "\u2663"; color: #32CD32 }\n'),_o=function(t){var e=t.table,n=t.renderColHeader,r=t.renderRowHeader,i=t.renderCell;return Object(vu.jsxs)("table",{children:[Object(vu.jsx)("thead",{children:Object(vu.jsxs)("tr",{children:[Object(vu.jsx)("th",{}),ie.map((function(t,e){return n?n(t,e):Object(vu.jsx)("th",{style:{fontWeight:"normal",verticalAlign:"middle"},children:Object(vu.jsx)(Ao,{className:t})},e)}))]})}),Object(vu.jsx)("tbody",{children:e.rows.map((function(t,e){return Object(vu.jsxs)("tr",{children:[Object(vu.jsx)("td",{children:r(t,e)}),ie.map((function(n,r){return Object(vu.jsx)("td",{children:i(t[n],n,e)},r)}))]},e)}))})]})},Bo=function(t){var e=t.children,n=t.selected,r=t.setSelected;return Object(vu.jsx)(Ku.a,{style:{minWidth:"50px",width:"50px"},onClick:function(){return r(!n)},appearance:n?"primary":"secondary",children:e})},qo=function(t){var e=t.bids,n=t.setSelectedBid,r=Object(d.pipe)(je,f.n.map((function(t){return Object(d.pipe)(ie,f.n.map((function(e){return{level:t,strain:e}})),f.n.map((function(t){return[t.strain,Object(d.pipe)(e,f.n.exists((function(e){return fe.equals(t,e)})))]})),f.q.fromEntries)})));return Object(vu.jsx)(_o,{table:{rows:r},renderColHeader:function(){},renderRowHeader:function(){},renderCell:function(t,e,r){return Object(vu.jsx)(Bo,{selected:t,setSelected:function(t){return n({level:r+1,strain:e},t)},children:Object(vu.jsxs)(vu.Fragment,{children:[r+1,Object(vu.jsx)(Ao,{className:e})]})})}})},Do=Su.a.div(su||(su=Object(la.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),Eo=(Su.a.div(lu||(lu=Object(la.a)(["\n  width: 35%;\n"]))),Su.a.ul(pu||(pu=Object(la.a)(["\n  list-style-type: none;\n"])))),Po=function(t){var e=t.contractBid,n=t.scores,i=Object(r.useState)([e]),a=Object(b.a)(i,2),c=a[0],u=a[1],o=Object(r.useCallback)((function(t,n){return u(Object(d.pipe)(c,n?f.n.union(fe)([t]):f.n.filter((function(e){return!fe.equals(t,e)})),f.n.append(e),f.p.uniq(fe),f.p.sort(de)))}),[c,e]),s=Object(r.useMemo)((function(){return di(n)(Object(d.pipe)(c,f.p.map((function(t){return["N",t]}))))}),[c,n]),l=n.length;return Object(vu.jsxs)("section",{children:[Object(vu.jsx)("h4",{children:"Compare Contracts"}),Object(vu.jsxs)(Do,{children:[Object(vu.jsx)(qo,{bids:c,setSelectedBid:o}),Object(vu.jsx)(Eo,{children:l&&Object.entries(s).map((function(t,e){var n=Object(b.a)(t,2),r=n[0],i=n[1];return Object(vu.jsxs)("li",{children:["tie"===r?"(ties)":Object(vu.jsx)(Ru,{bid:sr.reverseGet(r)}),": ",i," (",Object(vu.jsx)(ko,{numerator:i,denominator:l}),")"]},e)}))})]})]})},Ro=Su.a.div(fu||(fu=Object(la.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),No=Su.a.div(du||(du=Object(la.a)(["\n  width: 35%;\n"]))),Mo=function(t){var e=t.path,n=t.generation,r=(t.onClose,Object(d.pipe)(n,f.j.fromNullable,f.j.chain(Object(d.flow)(gn("solutionStats"),f.q.lookup(e))),f.j.toNullable)),i=Object(d.pipe)(r,f.j.fromNullable,f.j.map(gn("count")),f.j.chain(f.j.fromPredicate((function(t){return t>0}))),f.j.toNullable),a=Object(d.pipe)(e,pr.reverseGet,f.p.last);return Object(vu.jsxs)("div",{children:[i&&Object(vu.jsxs)("h3",{children:[i," solutions found"]}),Object(vu.jsxs)(Ro,{children:[Object(vu.jsx)(No,{children:r&&Object(vu.jsx)(Co,{stats:r})}),Object(vu.jsx)("div",{children:(null===r||void 0===r?void 0:r.scores)&&Object(vu.jsx)(Po,{contractBid:a,scores:r.scores})})]})]})},Fo=Su.a.ul(ju||(ju=Object(la.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  list-style-type: none;\n  padding: 0px;\n  margin: 0px;\n"]))),Io=Su.a.li(hu||(hu=Object(la.a)(["\n  padding: 0px;\n  margin: 5px;\n"]))),To=function(t){var e=t.path,n=t.count,i=t.generationId,a=t.analysisId,c=t.pathHash,u=ku((function(t){return Object(d.pipe)(Ci({state:t.profile,analysisId:a,generationId:i}),f.j.toNullable)})),o=xu(),s=Object(r.useCallback)((function(){return Object(d.pipe)(function(t,e){return Object(d.pipe)(dr,f.z.chain((function(t){return f.z.of(t.transaction(["deal","satisfies"],"readonly"))})),f.z.bindTo("tran"),f.z.bind("satisfiedDeals",(function(n){var r=n.tran;return Object(d.pipe)(f.z.tryCatch((function(){return r.objectStore("satisfies").get([t,e])}),(function(){return"SelectError"})),f.z.map(Object(d.flow)(f.j.fromNullable,f.j.fold((function(){return[]}),(function(t){return t.deals})))))})),f.z.bind("deals",(function(t){var e=t.tran,n=t.satisfiedDeals;return Object(d.pipe)(n,f.z.traverseArray(f.z.tryCatchK((function(t){return e.objectStore("deal").get(t.id)}),(function(){return"SelectError"}))),f.z.map(Object(d.flow)(f.n.map(f.j.fromNullable),f.n.compact,f.n.foldMap(f.q.getUnionMonoid(f.u.first()))((function(t){return Object(mn.a)({},t.deal.id,{deal:t.deal,solution:f.j.fromNullable(t.solution)})})))))})),f.z.chainFirst((function(t){var e=t.tran;return f.z.tryCatch((function(){return e.done}),(function(){return"CommitRejected"}))})),f.z.map((function(t){return t.deals})))}(i,c),f.z.map(Object(d.flow)(f.q.filter((function(t){return f.j.isNone(t.solution)})),f.q.map((function(t){return t.deal})),f.q.toReadonlyArray,f.n.map(f.s.snd),(function(t){return o(gr({analysisId:a,type:"Solve",parameter:t,context:{generationId:i,bidPath:e},estimatedUnitsInitial:t.length}))}))))()}),[a,o,i,e,c]);return Object(vu.jsx)(vu.Fragment,{children:u&&Object(vu.jsxs)(vu.Fragment,{children:[Object(vu.jsx)(wo,{path:e,satisfiesCount:n,dealCount:u.dealCount}),Object(vu.jsx)(Lo,{path:e,generation:u,solve:s})]})})},Lo=function(t){var e=t.path,n=t.generation,i=t.solve,a=Object(r.useState)(!1),c=Object(b.a)(a,2),u=c[0],o=c[1],s=Object(r.useCallback)((function(t){t&&i(),o(t)}),[i]);return Object(vu.jsx)(vu.Fragment,{children:Object(vu.jsxs)(bo.a,{modalType:"modal",open:u,onOpenChange:function(t,e){return s(e.open)},children:[Object(vu.jsx)(mo.a,{children:Object(vu.jsx)(Ku.a,{children:"Details..."})}),Object(vu.jsx)(Oo.a,{children:Object(vu.jsxs)(vo.a,{children:[Object(vu.jsxs)(yo.a,{children:["Solution Details -"," ",Object(vu.jsx)(Nu,{path:pr.reverseGet(e)})]}),Object(vu.jsx)(Mo,{path:e,generation:n,onClose:function(){return o(!1)}}),Object(vu.jsx)(go.a,{children:Object(vu.jsx)(mo.a,{disableButtonEnhancement:!0,children:Object(vu.jsx)(Ku.a,{appearance:"secondary",children:"Close"})})})]})})]})})},Ho=Su.a.div(bu||(bu=Object(la.a)(["\n  clear: both;\n  display: inline-grid;\n  grid-column-gap: 5px;\n  grid-template-columns: auto auto auto;\n  width: auto;\n"]))),zo=function(t){var e=t.analysisId,n=t.generationId,i=ku((function(t){return Object(d.pipe)(Ci({state:t.profile,analysisId:e,generationId:n}),f.j.toNullable)})),a=Object(r.useMemo)((function(){return Object(d.pipe)(i,f.j.fromNullable,f.j.chain(gn("satisfies")),f.j.map(f.q.toReadonlyArray),f.j.toNullable)}),[i]),c=ku((function(t){return Object(d.pipe)(wi({state:t.profile,analysisId:e}),f.j.map(gn("paths")),f.j.toNullable)})),u=xu(),o=(Object(r.useCallback)((function(){return i&&c&&u(gr({analysisId:e,type:"Satisfies",parameter:c,context:{generationId:i.id},estimatedUnitsInitial:c.length*i.dealCount}))}),[e,u,i,c]),Object(r.useCallback)((function(t){return Object(d.pipe)(c,f.j.fromNullable,f.j.chain(f.n.findFirst(Object(d.flow)(f.n.map(gn("bid")),(function(e){return f.n.getEq(me).equals(e,pr.reverseGet(t))})))),f.j.map(Dn),f.j.toNullable)}),[c]));return Object(vu.jsx)(vu.Fragment,{children:i&&Object(vu.jsxs)(Io,{children:["Deal Count: ",i.dealCount," ",Object(vu.jsx)("br",{}),a&&Object(vu.jsx)(Ho,{children:a.map((function(t){var i=Object(b.a)(t,2),a=i[0],c=i[1],u=o(a);return Object(vu.jsx)(r.Fragment,{children:u&&Object(vu.jsx)(To,{path:a,pathHash:u,count:c,generationId:n,analysisId:e},a)},a)}))})]})})},Wo=function(){var t=ku((function(t){return Object(d.pipe)(ki(t.profile),f.j.toNullable)})),e=ku((function(t){return t.settings.generateCount})),n=xu(),i=Object(r.useCallback)((function(e){t&&n(gr({analysisId:t.id,type:"GenerateDeals",context:{generationId:_n()},parameter:e,estimatedUnitsInitial:e}))}),[t,n]);return Object(vu.jsx)(vu.Fragment,{children:t&&Object(vu.jsxs)("div",{children:[Object(vu.jsx)("h4",{children:t.name}),Object(vu.jsx)(Fo,{children:t.generations.map((function(e){return Object(vu.jsx)(zo,{analysisId:t.id,generationId:e.id},e.id)}))}),Object(vu.jsx)(Ku.a,{onClick:function(){return i(e)},children:"Generate Deals"})]})})},Uo=function(t){var e=t.paths,n=t.onSubmitOrClose,i=xu(),a=Object(r.useCallback)((function(t,e,r){n(),i(Oi({id:Bn.decode(yn.UuidTool.newUuid()).right,name:t,count:e,paths:r}))}),[i,n]),c=ku((function(t){return t.settings.generateCount})),u=Object(r.useState)("New analysis (".concat(e.length," paths)")),o=Object(b.a)(u,2),s=o[0],l=o[1],p=Object(r.useState)(c),f=Object(b.a)(p,2),j=f[0],h=f[1];return Object(vu.jsxs)(So.a,{children:[Object(vu.jsxs)("p",{children:["Name"," ",Object(vu.jsx)("input",{type:"text",value:s,onChange:function(t){return l(t.target.value)}}),Object(vu.jsx)("br",{}),"Hands to Generate"," ",Object(vu.jsx)("input",{type:"number",value:j,onChange:function(t){return Object(d.pipe)(t.target.value,parseInt,h)},style:{width:"100px"}})]}),Object(vu.jsxs)(go.a,{children:[Object(vu.jsx)(mo.a,{disableButtonEnhancement:!0,children:Object(vu.jsx)(Ku.a,{appearance:"secondary",children:"Close"})}),Object(vu.jsx)(Ku.a,{appearance:"primary",disabled:!e,onClick:function(){return a(s,j,e)},children:"Go"})]})]})},$o=function(){var t=Object(r.useState)(!1),e=Object(b.a)(t,2),n=e[0],i=e[1],a=ku((function(t){return Object(d.pipe)(Tc({state:t.system,options:t.settings}),f.j.toNullable)}));return Object(vu.jsxs)("section",{children:[Object(vu.jsx)("h3",{children:"Analyses"}),Object(vu.jsx)(Wo,{}),a&&Object(vu.jsx)(vu.Fragment,{children:Object(vu.jsxs)(bo.a,{modalType:"modal",open:n,onOpenChange:function(t,e){return i(e.open)},children:[Object(vu.jsx)(mo.a,{children:Object(vu.jsx)(Ku.a,{children:"Start..."})}),Object(vu.jsx)(Oo.a,{children:Object(vu.jsxs)(vo.a,{children:[Object(vu.jsx)(yo.a,{children:"New Analysis"}),Object(vu.jsx)(Uo,{paths:a,onSubmitOrClose:function(){return i(!1)}})]})})]})})]})},Ko=n(356),Go=function(t){var e=t.date,n=e?"number"===typeof e?e:"Some"===e._tag?e.value:null:null;return Object(vu.jsx)(vu.Fragment,{children:n&&Object(vu.jsx)(Ko.a,{date:new Date(n)})})},Jo=Su.a.ul(mu||(mu=Object(la.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  list-style-type: none;\n  padding: 0px;\n  margin: 0px;\n"]))),Qo=Su.a.li(Ou||(Ou=Object(la.a)(["\n  padding: 0px;\n  margin: 5px;\n"]))),Vo=function(t){var e=t.progress,n=t.unitsInitial,i=t.start,a=Object(r.useMemo)((function(){return Object(d.pipe)(e,function(t){return function(e){return Object(d.pipe)(e.speed,f.j.map((function(n){return n*(t-e.unitsDone)})))}}(n),f.j.map((function(t){return xn()+t})),f.j.chain(Object(d.flow)(Sn.decode,f.j.fromEither)),f.j.toNullable)}),[e,n]);return Object(vu.jsxs)("p",{children:["Started: ",Object(vu.jsx)(Go,{date:i}),Object(vu.jsx)("br",{}),"Last Updated: ",Object(vu.jsx)(Go,{date:e.updateDate})," ",Object(vu.jsx)("br",{}),"Progress: ",n-e.unitsDone," units remaining (",Math.floor(100*e.unitsDone/n),"%) ",Object(vu.jsx)("br",{}),"Est. Completion: ",Object(vu.jsx)(Go,{date:a})]})},Xo=function(t){var e=t.job,n=Object(d.pipe)(e,kn,f.j.toNullable),i=Object(d.pipe)(e,gn("startDate"),f.j.toNullable),a=xu(),c=Object(r.useCallback)((function(){return e&&a(kr(e.id))}),[a,e]),u=Object(r.useCallback)((function(){return e&&a(Sr({jobId:e.id,type:e.type}))}),[a,e]);return Object(vu.jsx)(vu.Fragment,{children:e&&Object(vu.jsxs)(Qo,{children:[Object(vu.jsx)("h5",{children:e.type}),!n&&Object(vu.jsxs)("p",{children:["Estimated Units: ",e.unitsInitial," ",Object(vu.jsx)("br",{}),Object(vu.jsx)(Ku.a,{onClick:u,children:"Start"}),Object(vu.jsx)(Ku.a,{onClick:c,children:"Remove"})]}),n&&i&&Object(vu.jsx)(Vo,{progress:n,unitsInitial:e.unitsInitial,start:i})]})})},Zo=function(){var t=ku((function(t){return t.generator.jobs}));return Object(vu.jsx)("section",{children:Object(vu.jsx)(Jo,{children:t.map((function(t){return Object(vu.jsx)(Xo,{job:t},t.id)}))})})},Yo=function(){return Object(vu.jsxs)(vu.Fragment,{children:[Object(vu.jsxs)("div",{style:{clear:"both",display:"inline-block",width:"50%"},children:[Object(vu.jsx)("div",{style:{float:"left"},children:Object(vu.jsx)(Bu,{})}),Object(vu.jsx)("div",{style:{clear:"both"},children:Object(vu.jsx)(Zo,{})})]}),Object(vu.jsx)("div",{style:{display:"inline-block",width:"50%",float:"right"},children:Object(vu.jsx)($o,{})})]})},ts=n(678),es=n(675),ns=Object(o.b)([{path:"/",element:Object(vu.jsx)(yu,{}),children:[{path:"/design",element:Object(vu.jsx)(ho,{})},{path:"/analyze",element:Object(vu.jsx)(Yo,{})}]}],{basename:"/bridge"});c.a.render(Object(vu.jsx)(i.a.StrictMode,{children:Object(vu.jsx)(ts.a,{theme:es.a,children:Object(vu.jsx)(u.a,{store:Zc,children:Object(vu.jsx)(s.c,{router:ns})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[655,1,2]]]);
//# sourceMappingURL=main.96e6ddbc.chunk.js.map