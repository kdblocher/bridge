(this.webpackJsonpbridge=this.webpackJsonpbridge||[]).push([[0],{306:function(t,e,n){var r,i=n(191).wrap,a=n(497);t.exports=function t(){return this instanceof t?i(a()):r||(r=i(a()))}},307:function(t,e,n){var r,i=n(191).wrap,a=n(498);t.exports=function t(){return this instanceof t?i(a()):r||(r=i(a()))}},308:function(t,e,n){var r,i=n(191).wrap,a=n(499);t.exports=function t(){return this instanceof t?i(a()):r||(r=i(a()))}},395:function(t,e,n){},407:function(t,e){},409:function(t,e){},419:function(t,e){},421:function(t,e){},447:function(t,e){},448:function(t,e){},453:function(t,e){},455:function(t,e){},462:function(t,e){},481:function(t,e){},497:function(t,e,n){t.exports=function(){return new Worker(n.p+"9b058aae1e492f6b8dd6.worker.js")}},498:function(t,e,n){t.exports=function(){return new Worker(n.p+"897882d248e7281ccaaf.worker.js")}},499:function(t,e,n){t.exports=function(){return new Worker(n.p+"c9937613b75066d6481c.worker.js")}},602:function(t,e,n){"use strict";n.r(e);n(395),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r,i,a,c,u,o,s,l,p,f,d,h,m,b,j,O,v,y,g,S,x,k,w,C,A,_,R,F,P,B,D,M,E,N,I,q,T,L,H,W,U,$,G,K,V,z,J,Q,X,Z,Y,tt,et,nt,rt,it,at,ct,ut=n(13),ot=n(17),st=n(0),lt=n(1),pt=n(11),ft=n.n(pt),dt=n(44),ht=n(124),mt=function(){return Object(ht.b)()},bt=ht.c,jt=function(t){return function(e){return e[t]}},Ot=n(9),vt=n(10),yt=function(t){throw new Error("shouldn't get here with ".concat(JSON.stringify(t)))},gt=function(t){return Object(lt.pipe)(st.h.Ord,st.k.contramap((function(e){return t.indexOf(e)})))},St=Object(lt.flow)(gt,st.k.reverse),xt=n(43),kt=n(204),wt=["C","D","H","S"],Ct=st.f.eqStrict,At=St(wt),_t=(gt(wt),["2","3","4","5","6","7","8","9","T","J","Q","K","A"]),Rt=xt.b(xt.c,(function(t){return t>=2&&t<=14}),"Rank"),Ft=new xt.a("Rank",Rt.is,Rt.validate,(function(t){return _t[t-2]})),Pt=st.f.eqStrict,Bt=st.h.Ord,Dt=Object(lt.pipe)(Bt,st.k.reverse),Mt=Object(lt.pipe)(_t,st.m.mapWithIndex((function(t,e){return Object(lt.pipe)(t+2,Ft.decode,(function(t){return t.right}))}))),Et=Object(lt.pipe)(Mt,st.m.takeRight(5)),Nt=function(t){return Object(lt.pipe)(_t,st.m.findIndex((function(e){return st.w.Eq.equals(t,e)})),st.i.chain((function(t){return Object(lt.pipe)(Mt,st.m.lookup(t))})))},It=st.f.struct({suit:Ct,rank:Pt}),qt=st.k.getMonoid().concat(Object(lt.pipe)(At,st.k.contramap((function(t){return t.suit}))),Object(lt.pipe)(Dt,st.k.contramap((function(t){return t.rank})))),Tt=Object(lt.pipe)(52,st.o.makeBy((function(t){return{suit:wt[Math.floor(t/13)],rank:Ft.decode(t%13+2).right}}))),Lt=function(){return st.k.contramap((function(t){var e=Object(ut.a)(t,2),n=e[0];e[1];return n}))(At)},Ht={S:[],H:[],D:[],C:[]},Wt=function(t){return Object(lt.pipe)(t,st.q.toReadonlyArray(qt),st.o.fromReadonlyArray,st.i.fold((function(){return Ht}),Object(lt.flow)(st.o.groupBy((function(t){return t.suit})),st.p.map(st.o.map((function(t){return t.rank}))),st.p.union(st.m.getUnionMonoid(Pt))(Ht))))},Ut={engine:kt.a.autoSeed()},$t=function(){return Object(kt.b)(Ut.engine,Object(vt.a)(Tt))},Gt=["N","E","S","W"],Kt=st.w.Eq,Vt=(gt(Gt),st.w.Eq,gt(["NorthSouth","EastWest"]),st.q.getEq(It)),zt=st.p.getEq(Vt),Jt=[].concat(Object(vt.a)(wt),["N"]),Qt=st.f.eqStrict,Xt=gt(Jt),Zt=["C","D"],Yt=(st.f.struct({dealer:Kt,deal:zt}),function(t){switch(t%16+1){case 1:case 8:case 11:case 14:return"Neither";case 2:case 5:case 12:case 15:return"NorthSouth";case 3:case 6:case 9:case 16:return"EastWest";case 4:case 7:case 10:case 13:return"Both";default:throw Error("Not possible")}}),te=["Pass","Double","Redouble"],ee=st.w.Eq,ne=function(t){return"string"===typeof t&&Object(lt.pipe)(te,st.m.elem(st.w.Eq)(t))},re=st.f.struct({level:st.h.Eq,strain:st.w.Eq}),ie=st.k.getMonoid().concat(Object(lt.pipe)(st.h.Ord,st.k.contramap((function(t){return t.level}))),Object(lt.pipe)(Xt,st.k.contramap((function(t){return t.strain})))),ae=Object(lt.pipe)(st.a.sequenceS(st.m.Apply)({level:st.m.makeBy(7,(function(t){return t+1})),strain:Jt}),st.m.sort(ie)),ce=function(t){return!ne(t)},ue=st.f.fromEquals((function(t,e){return ne(t)&&ne(e)&&ee.equals(t,e)||!ne(t)&&!ne(e)&&re.equals(t,e)})),oe=(st.f.struct({level:st.h.Eq,strain:st.w.Eq,modifier:st.w.Eq}),st.o.getEq(ue),n(20)),se=n(305),le=n.n(se),pe=n(62),fe=xt.b(xt.c,(function(t){return!0}),"Date"),de=function(){return Object(lt.pipe)((new Date).getTime(),fe.decode,(function(t){return t.right}))},he=(xt.e([fe,fe]),function(t){return t.type.progress}),me=function(t){return st.i.some({unitsDone:0,updateDate:st.i.none,speed:st.i.none,value:t})},be=function(t){return function(e){return function(n){return function(r){return Object(lt.pipe)(r,st.i.map((function(r){var i=de(),a=Object(lt.pipe)(r.updateDate,st.i.map((function(t){return(i-t)/e})),st.i.filter((function(t){return!isNaN(t)&&isFinite(t)})));return{unitsDone:r.unitsDone+e,updateDate:st.i.some(i),value:t.concat(r.value,n),speed:Object(lt.pipe)(st.i.Do,st.i.apS("avg",r.speed),st.i.apS("next",a),st.i.map((function(t){return.9*t.avg+.1*t.next})),st.i.filter((function(t){return!isNaN(t)&&isFinite(t)})),st.i.alt((function(){return a})),st.i.alt((function(){return r.speed})))}})))}}}},je=xt.b(xt.d,(function(t){return pe.UuidTool.isUuid(t)}),"GenerationId"),Oe=xt.b(xt.d,(function(t){return pe.UuidTool.isUuid(t)}),"AnalysisId"),ve=function(t){return{id:Oe.decode(pe.UuidTool.newUuid()).right,name:"New analysis (".concat(t.length," paths)"),paths:t,generations:[]}},ye=xt.b(xt.d,(function(t){return!0}),"PathHash"),ge=function(t){return ye.decode(le()(t)).right},Se=function(t){switch(t){case"GenerateDeals":return me(0);case"Satisfies":case"Solve":return me({});default:return yt(t)}},xe=xt.b(xt.d,(function(t){return pe.UuidTool.isUuid(t)}),"JobId"),ke=n(110),we=n(39),Ce=we.f(st.q.toReadonlyArray(qt),st.q.fromReadonlyArray(It)),Ae=(r=Ce,we.f(st.d.map(r.get),st.d.map(r.reverseGet))),_e=(Object(lt.flow)(st.d.fromPredicate(pe.UuidTool.isUuid,(function(t){return ke.a(t,"Invalid uuid string")})),st.d.map((function(t){return new pe.Uuid(t)}))),function(t){return Object(lt.pipe)(new pe.Uuid(t.id).toBytes(),st.m.takeLeft(13),st.m.chain(Object(lt.flow)((function(t){return st.m.unfold([t,4],(function(t){var e=Object(ut.a)(t,2),n=e[0],r=e[1];return 0===r?st.i.none:st.i.some([3&n,[n>>2,r-1]])}))}),st.m.reverse)))}),Re=xt.b(xt.f({id:xt.d}),(function(t){return Object(lt.pipe)(t,_e,st.m.reduce(st.b.replicate(4,0),(function(t,e){return t[e]+=1,t})),st.m.every((function(t){return 13===t})))}),"Deal"),Fe={encode:Object(lt.flow)(_e,st.o.zip(Object(lt.pipe)(Tt,st.o.sort(qt))),st.o.map((function(t){var e=Object(ut.a)(t,2),n=e[0],r=e[1];return[Gt[n],r]})),st.o.groupBy(st.r.fst),st.p.map(Object(lt.flow)(st.o.map(st.r.snd),st.q.fromReadonlyArray(It))))},Pe={encode:Object(lt.flow)(st.p.foldMapWithIndex(st.k.trivial)(st.m.getMonoid())((function(t,e){return Object(lt.pipe)(e,st.q.toReadonlyArray(st.k.trivial),st.m.map((function(e){return[e,Gt.indexOf(t)]})))})),st.m.sort(st.k.contramap((function(t){return t[0]}))(qt)),st.m.map(st.r.snd),st.m.chunksOf(4),st.m.map(st.m.reduce(0,(function(t,e){return(t<<2)+e}))),st.m.concat(st.m.replicate(3,0)),st.m.toArray,(function(t){return Re.decode({id:new pe.Uuid(t).toString()}).right}))},Be=we.f(Pe.encode,Fe.encode),De=we.f((function(t){return Object(Ot.a)(Object(Ot.a)({},t),{},{deal:Be.get(t.deal)})}),(function(t){return Object(Ot.a)(Object(Ot.a)({},t),{},{deal:Be.reverseGet(t.deal)})})),Me=we.f((function(t){return"".concat(t.level).concat(t.strain)}),(function(t){return{level:parseInt(t.charAt(0)),strain:t.charAt(1)}})),Ee=we.f((function(t){return ne(t)?t:Me.get(t)}),(function(t){return ne(t)?t:Me.reverseGet(t)})),Ne=xt.b(xt.d,(function(t){return Object(lt.pipe)(t,st.w.split("."),st.m.every((function(t){return 2===t.length||ne(t)})))}),"BidPath"),Ie=we.f(Object(lt.flow)(st.m.map(Ee.get),st.m.intersperse("."),st.m.foldMap(st.w.Monoid)(lt.identity),(function(t){return Ne.decode(t).right})),Object(lt.flow)(st.w.split("."),st.o.map(Ee.reverseGet))),qe=n(30),Te=n(35),Le=n(42),He=n(607),We=n(612),Ue=n(161),$e=n(60),Ge=n(306),Ke=n.n(Ge),Ve=n(307),ze=n.n(Ve),Je=n(308),Qe=n.n(Je),Xe=n(69),Ze=n(608),Ye=n(38),tn=n(314),en=n(611),nn=n(605),rn=n(606),an=n(315),cn=function(t,e){return function(n){var r=navigator.hardwareConcurrency?navigator.hardwareConcurrency-1:1;return new Ye.a((function(i){var a=new tn.a,c=0,u=0,o=!1,s=st.m.makeBy(r,(function(e){var n=null;return{factory:function(){var r;return null!==(r=n)&&void 0!==r?r:n=t(e)},terminate:function(){this.processing},processing:!1,index:e}})),l=Object(en.a)(a,n).pipe(Object(nn.a)((function(t){var e=Object(ut.a)(t,1)[0];u++,e.processing=!0})),Object(rn.a)((function(){a.complete(),o=!0,s.forEach((function(t){return t.terminate()}))})),Object(an.a)((function(t){var n=Object(ut.a)(t,2),r=n[0],s=n[1];return Object(lt.pipe)(r.factory(),e,Object(lt.apply)(s),Xe.a,Object(rn.a)((function(){c++,r.processing=!1,o?r.terminate():a.next(r),o&&c===u&&i.complete()})))}))).subscribe(i);return s.forEach((function(t){return a.next(t)})),function(){return l.unsubscribe()}}))}},un=n(206),on=st.y.tryCatch((function(){return Object(un.a)("bridge")}),(function(){return"DeleteError"})),sn=st.y.tryCatch((function(){return Object(un.b)("bridge",1,{upgrade:function(t){var e=t.createObjectStore("deal");e.createIndex("batch","batchId"),e.createIndex("generation","generationId"),t.createObjectStore("satisfies").createIndex("generation","generationId")}})}),(function(){return"OpenDatabaseFailed"})),ln=function(t){return function(e){return st.y.tryCatchK((function(n){return n.getAllFromIndex("deal",t,e)}),(function(){return"SelectError"}))}},pn=function(t){return Object(lt.pipe)(sn,st.y.chain(ln("generation")(t)),st.y.map(Object(lt.flow)(st.m.map((function(t){return t.batchId})),st.m.uniq(st.w.Eq))))},fn=function(t){return Object(lt.pipe)(sn,st.y.chain((function(t){return st.y.of(t.transaction(["deal","satisfies"],"readwrite"))})),st.y.chainFirst((function(e){return Object(lt.pipe)(st.y.tryCatch((function(){return e.objectStore("deal").index("generation").getAllKeys(t)}),(function(){return"SelectError"})),st.y.chain(st.y.traverseArray(st.y.tryCatchK((function(t){return e.objectStore("deal").delete(t)}),(function(){return"DeleteError"})))))})),st.y.chainFirst((function(e){return Object(lt.pipe)(st.y.tryCatch((function(){return e.objectStore("satisfies").index("generation").getAllKeys(t)}),(function(){return"SelectError"})),st.y.chain(st.y.traverseArray(st.y.tryCatchK((function(t){return e.objectStore("satisfies").delete(t)}),(function(){return"DeleteError"})))))})),st.y.chain((function(t){return st.y.tryCatch((function(){return t.done}),(function(){return"CommitRejected"}))})))},dn=function(t){return Object(lt.pipe)(t,st.m.mapWithIndex((function(t,e){return Object(lt.pipe)(e,Be.reverseGet,(n=t,function(t){return{number:n,dealer:Gt[(n-1)%Gt.length],deal:t,vulnerability:Yt(n)}}),De.get);var n})),cn((function(){return new Ke.a}),(function(t){return function(e){return t.getResult(e)}})),qe.b.bimap((function(){return""}),(function(t){return Object(oe.a)({},t.board.deal.id,t)})))},hn=Object($e.d)({name:"generator",initialState:{jobs:[],completed:[]},reducers:{scheduleJob:function(t,e){var n,r,i;t.jobs.push(Object(Te.a)((n=e.payload.analysisId,r=e.payload.estimatedUnitsInitial,i={type:e.payload.type,parameter:e.payload.parameter,context:e.payload.context,progress:st.i.none},{id:xe.decode(pe.UuidTool.newUuid()).right,analysisId:n,dependsOn:[],type:i,unitsInitial:r,startDate:st.i.none,completedDate:st.i.none,running:!1,error:st.i.none})))},startJob:function(t,e){var n=t.jobs.find((function(t){return t.id===e.payload.jobId}));n&&(n.type.progress=Object(lt.pipe)(e.payload.type,Se,Te.a),n.startDate=st.i.some(de()),n.running=!0)},completeJob:{reducer:function(t,e){Object(lt.pipe)(t.jobs,st.m.findIndex((function(t){return t.id===e.meta})),st.i.map((function(n){var r=t.jobs[n];return r.completedDate=st.i.some(de()),r.running=!1,r.error=e.error,t.completed.push(r),t.jobs.splice(n,1),r})))},prepare:function(t,e){return{payload:Object(lt.constVoid)(),meta:t,error:e}}},removeJob:function(t,e){Object(lt.pipe)(t.jobs,st.m.findIndex((function(t){return t.id===e.payload})),st.i.map((function(e){return t.jobs.splice(e,1)}))),Object(lt.pipe)(t.completed,st.m.findIndex((function(t){return t.id===e.payload})),st.i.map((function(e){return t.completed.splice(e,1)})))},reportDeals:function(t,e){var n,r,i=null===(n=t.jobs.find((function(t){return t.id===e.payload.jobId})))||void 0===n?void 0:n.type;i&&(i.progress=Object(lt.pipe)(i.progress,(r=e.payload.value,be(st.h.MonoidSum)(r.length)(r.length))))},reportSatisfies:function(t,e){var n,r,i=null===(n=t.jobs.find((function(t){return t.id===e.payload.jobId})))||void 0===n?void 0:n.type;i&&(i.progress=Object(lt.pipe)(i.progress,(r=e.payload.value,be(st.p.getUnionSemigroup(st.h.MonoidSum))(r.testedCount)(Object(oe.a)({},r.path,r.satisfiesCount)))))},reportSolutions:function(t,e){var n,r,i=null===(n=t.jobs.find((function(t){return t.id===e.payload.jobId})))||void 0===n?void 0:n.type;i&&(i.progress=Object(lt.pipe)(i.progress,(r=e.payload.value,be(st.p.getUnionSemigroup(st.t.first()))(Object(lt.pipe)(r,st.p.keys,(function(t){return t.length})))(r))))}}}),mn=hn.actions,bn=mn.scheduleJob,jn=mn.startJob,On=mn.completeJob,vn=mn.removeJob,yn=mn.reportDeals,gn=mn.reportSatisfies,Sn=mn.reportSolutions,xn=hn.reducer,kn=(Object(Le.a)((function(t){return Object(lt.pipe)(t.state.jobs,st.m.findFirst((function(e){return e.id===t.jobId})))})),function(t,e,n){return Object(lt.pipe)(function(t){return function(e){return Object(lt.pipe)(st.m.replicate(e/500,500),st.m.append(e%500),cn((function(){return new ze.a}),(function(e){return function(n){return e.genDeals(n,t)}})))}}(e)(n),qe.b.map((function(e){return yn({jobId:t,value:e})})),qe.b.getOrElse((function(e){return Object(He.a)(On(t,st.i.some(e)))})),Object(We.a)([On(t,st.i.none)]))}),wn=function(t,e,n){return Object(lt.pipe)(function(t){return function(e){return Object(lt.pipe)(t,pn,qe.b.fromTaskEither,qe.b.chain((function(t){return qe.b.fromObservable(Object(Xe.a)(t))})),qe.b.bindTo("batchId"),qe.b.bind("path",(function(){return qe.b.fromObservable(Object(Xe.a)(e))})),Object(Ze.a)(st.d.isRight),qe.a.chain((function(e){return e.key?Object(lt.pipe)(e,qe.a.map((function(t){return t.right})),cn((function(){return new Qe.a}),(function(e){return function(n){var r=n.batchId,i=n.path;return Object(lt.pipe)((function(){return e.satisfiesBatch(i,r,t)}),st.y.map((function(t){return Object(Ot.a)(Object(Ot.a)({},t),{},{path:Object(lt.pipe)(i,st.o.map((function(t){return t.bid})),Ie.get)})})))()}}))):e})))}}(e)(n),qe.b.map((function(e){return gn({jobId:t,value:e})})),qe.b.getOrElse((function(e){return Object(He.a)(On(t,st.i.some(e)))})),Object(We.a)([On(t,st.i.none)]))},Cn=function(t){return function(e,n){return e.pipe(qe.a.filter(jn.match),qe.a.map((function(t){return t.payload})),qe.a.filter((function(e){return e.type===t})),qe.a.map((function(t){return Object(lt.pipe)(n.value.generator.jobs,st.m.findFirst((function(e){return e.id===t.jobId})),st.i.map((function(t){return t})))})))}},An=[Object(lt.flow)(Cn("GenerateDeals"),qe.c.fold((function(){return Ue.a}),(function(t){return kn(t.id,t.type.context.generationId,t.type.parameter)}))),Object(lt.flow)(Cn("Satisfies"),qe.c.fold((function(){return Ue.a}),(function(t){return wn(t.id,t.type.context.generationId,t.type.parameter)}))),Object(lt.flow)(Cn("Solve"),qe.c.fold((function(){return Ue.a}),(function(t){return e=t.id,t.type.context.generationId,n=t.type.parameter,Object(lt.pipe)(dn(n),qe.b.map((function(t){return Sn({jobId:e,value:t})})),qe.b.getOrElse((function(t){return Object(He.a)(On(e,st.i.some(t)))})),Object(We.a)([On(e,st.i.none)]));var e,n})))],_n=n(168),Rn=n(145),Fn=function(t){return Object(lt.pipe)(Zt,st.m.elem(Qt)(t))?20:30},Pn=function(t){switch(t){case"Undoubled":return 1;case"Doubled":return 2;case"Redoubled":return 4;default:return yt(t)}},Bn=function(t){return t-6},Dn=function(t,e){return Object(lt.pipe)(e,Bn,st.d.fromPredicate((function(e){return e>=t.level}),(function(e){return t.level-e})))},Mn=Object(lt.flow)(Dn,st.i.fromEither),En=function(t){return function(e){return Object(lt.pipe)(Mn(e.contract,e.tricks),st.i.fold(Object(lt.constant)(0),t))}},Nn=function(t){return Object(lt.pipe)(t,En((function(){return Pn(t.contract.modifier)*(t.contract.level*Fn(t.contract.strain)+("N"===t.contract.strain?10:0))})))},In=function(t){return 50*(t?2:1)},qn=function(t){return"Undoubled"===t?st.i.none:st.i.some(t)},Tn=[100,200,200].concat(Object(vt.a)(st.m.replicate(10,300))),Ln=Object(lt.flow)(Nn,(function(t){return t>0&&t<=100?50:0})),Hn={contractPoints:Nn,overtrickPoints:function(t){return Object(lt.pipe)((e=t.contract,n=t.tricks,Object(lt.pipe)(Dn(e,n),st.i.fromEither,st.i.map((function(t){return t-e.level})))),st.i.fold(Object(lt.constant)(0),(function(e){return Object(lt.pipe)((n=t.isVulnerable,r=t.contract.modifier,Object(lt.pipe)(r,qn,st.i.map(Pn),st.i.map((function(t){return t*In(n)})))),st.i.getOrElseW((function(){return Fn(t.contract.strain)})),(function(t){return e*t}));var n,r})));var e,n},slamPoints:function(t){return Object(lt.pipe)(t,En((function(e){return(t.isVulnerable?1.5:1)*(6===t.contract.level&&e>=6?500:7===t.contract.level&&e>=7?1e3:0)})))},modifierPoints:function(t){return Object(lt.pipe)(t,En((function(){switch(t.contract.modifier){case"Undoubled":return 0;case"Doubled":return 50;case"Redoubled":return 100;default:return yt(t.contract.modifier)}})))},penaltyPoints:function(t){return Object(lt.pipe)((e=t.contract,n=t.tricks,Object(lt.pipe)(Dn(e,n),st.d.swap,st.i.fromEither)),st.i.fold(Object(lt.constant)(0),(function(e){return Object(lt.pipe)(t.contract.modifier,qn,st.i.fold((function(){return e*In(t.isVulnerable)}),Object(lt.flow)(Pn,(function(n){return n/2*Object(lt.pipe)(Tn,st.m.takeLeft(e+(t.isVulnerable?1:0)),st.m.foldMap(st.h.MonoidSum)(lt.identity))}))),(function(t){return-t}))})));var e,n},partScorePoints:Ln,gamePoints:function(t){return Object(lt.pipe)(t,Nn,(function(e){return e>=100?t.isVulnerable?500:300:0}))}},Wn=xt.b(xt.c,(function(t){return"number"===typeof t}),"Score"),Un=(Wn.decode(0).right,st.h.Eq,Object(lt.pipe)(st.h.Ord,st.k.reverse),Object(lt.flow)((function(t){return Object(lt.pipe)(Hn,st.p.flap(t),st.p.traverseWithIndex(st.B.getApplicative(st.m.getMonoid()))((function(t,e){return Object(lt.pipe)(st.B.tell([[t,e]]),st.B.map(Object(lt.constant)(e)))})),st.B.map(Object(lt.flow)(st.p.foldMap(st.k.trivial)(st.h.MonoidSum)(lt.identity),Wn.decode,(function(t){return t.right}))),st.B.map((function(t){return[t,function(e){return[["TOTAL",t]].concat(Object(vt.a)(e))}]})),st.B.pass)}),st.B.evaluate),function(t){return Object(lt.pipe)(st.m.Do,st.m.apS("inner",Object(lt.pipe)(t,st.p.toReadonlyArray)),st.m.bind("outer",(function(t){var e=t.inner;return Object(lt.pipe)(e[1],st.p.toReadonlyArray)})),st.m.map((function(t){var e=t.outer,n=t.inner;return{outerKey:e[0],innerKey:n[0],value:e[1]}})))}),$n=Object(lt.pipe)(ae,st.m.sort(ie),st.m.prepend("Pass")),Gn=(gt($n),St($n),we.f((function(t){var e=Object(ut.a)(t,2);return e[0]+e[1]}),(function(t){return[t.charAt(0),t.charAt(1)]}))),Kn=Object(lt.pipe)(Object(Rn.sequenceT)(st.o.Apply)(Gt,Jt),st.o.map(Gn.get)),Vn=function(t){return function(e){return Object(lt.pipe)(Kn,st.o.groupBy((function(t){return t})),st.p.map((function(e){return t(e)})),(function(t){return e.rollup(t)}),(function(t){return t.object()}),st.p.toReadonlyArray,st.m.map(st.r.mapFst(Gn.reverseGet)),st.o.fromReadonlyArray,st.i.fold((function(){return{}}),Object(lt.flow)(st.o.groupBy((function(t){var e=Object(ut.a)(t,2),n=Object(ut.a)(e[0],2),r=(n[0],n[1]);e[1];return r})),st.p.map(Object(lt.flow)(st.o.groupBy((function(t){var e=Object(ut.a)(t,2),n=Object(ut.a)(e[0],2),r=n[0];n[1],e[1];return r})),st.p.map(Object(lt.flow)(st.o.head,(function(t){var e=Object(ut.a)(t,2);e[0];return e[1]}))))))))}},zn=Object(lt.flow)(st.o.map((function(t){return Object(lt.pipe)(t,Un,st.m.map((function(t){var e=t.outerKey,n=t.innerKey,r=t.value;return["".concat(e).concat(n),r]})),st.p.fromFoldable(st.t.first(),st.m.Foldable))})),_n.a,(function(t){return{count:t.totalRows(),average:Object(lt.pipe)(t,Vn(_n.b.mean)),stdev:Object(lt.pipe)(t,Vn(_n.b.stdev))}})),Jn={analyses:{},selectedAnalysis:st.i.none},Qn=Object($e.d)({name:"profile",initialState:Jn,reducers:{addAnalysis:function(t,e){var n=Object(lt.pipe)(e.payload,ve,Te.a);t.analyses[n.id]=n},deleteAnalysis:function(t,e){},removeAnalysis:function(t,e){delete t.analyses[e.payload]},selectAnalysis:function(t,e){t.selectedAnalysis=Object(lt.pipe)(st.p.has(e.payload,t.analyses)?st.i.some(e.payload):st.i.none)},setAnalysisName:{reducer:function(t,e){t.analyses[e.meta].name=e.payload},prepare:function(t,e){return{payload:e,meta:t}}},addJobToAnalysis:function(t,e){var n=e.payload.type;Object(lt.pipe)(t.analyses,st.p.lookup(e.payload.analysisId),st.i.map((function(t){switch(n.type){case"GenerateDeals":return Object(lt.pipe)(n.progress,st.i.map((function(e){return t.generations.push(Object(lt.pipe)((r=n.context.generationId,i=e.value,{id:r,dealCount:i,satisfies:st.i.none,solutionStats:{}}),Te.a));var r,i})));case"Satisfies":return Object(lt.pipe)(st.i.Do,st.i.apS("progress",n.progress),st.i.apS("generation",Object(lt.pipe)(t.generations,st.m.findFirst((function(t){return t.id===n.context.generationId})))),st.i.map((function(t){return t.generation.satisfies=st.i.some(t.progress.value)})));case"Solve":return Object(lt.pipe)(st.i.Do,st.i.apS("progress",n.progress),st.i.apS("generation",Object(lt.pipe)(t.generations,st.m.findFirst((function(t){return t.id===n.context.generationId})))),st.i.map((function(t){return Object(lt.pipe)(t.progress.value,st.p.toReadonlyArray,st.o.fromReadonlyArray,st.i.map(Object(lt.flow)(st.o.map(Object(lt.flow)(st.r.snd,jt("results"))),zn,(function(e){if(st.p.has(n.context.bidPath,t.generation.solutionStats))throw new Error("Combining stat result sets is not implemented");t.generation.solutionStats[n.context.bidPath]=e}))))})));default:return yt(n)}})))}}}),Xn=Qn.actions,Zn=Xn.addAnalysis,Yn=Xn.deleteAnalysis,tr=Xn.selectAnalysis,er=Xn.setAnalysisName,nr=Xn.addJobToAnalysis,rr=Qn.reducer,ir=[function(t,e){return t.pipe(qe.a.filter(On.match),qe.a.filter((function(t){return st.i.isNone(t.error)})),qe.a.chain(Object(lt.flow)((function(t){return t.meta}),(function(t){return Object(lt.pipe)(e.value.generator.completed,st.m.findFirst((function(e){return e.id===t})),st.i.fold((function(){return Ue.a}),(function(e){return Object(Xe.a)([nr(e),vn(t)])})))}))))},function(t,e){return t.pipe(qe.a.filter(Yn.match),qe.a.map((function(t){return t.payload})),qe.a.chain((function(t){return Object(lt.pipe)(e.value.profile.analyses,st.p.lookup(t),st.i.fold((function(){return Ue.a}),(function(t){return Object(lt.pipe)(t.generations,st.m.map((function(t){return t.id})),st.y.traverseArray(fn),qe.a.fromTask)})),qe.b.fold((function(){return Ue.a}),(function(t){return Ue.a})),Object(We.a)(Object(He.a)(Qn.actions.removeAnalysis(t))))})))}],ar=Object(Le.a)((function(t){return Object(lt.pipe)(t.analyses,st.p.toReadonlyArray,st.m.map(st.r.snd))})),cr=Object(Le.a)((function(t){return Object(lt.pipe)(t.selectedAnalysis,st.i.chain((function(e){return st.p.lookup(e,t.analyses)})))})),ur=Object(Le.a)((function(t){return Object(lt.pipe)(t.state.analyses,st.p.lookup(t.analysisId))})),or=Object(Le.a)((function(t){return Object(lt.pipe)(ur(t),st.i.chain(Object(lt.flow)(jt("generations"),st.m.findFirst((function(e){return e.id===t.generationId})))))})),sr=function(t){return Object(lt.pipe)(t,st.m.chain(st.A.reduce([],(function(t,e){return Object(lt.pipe)(t,st.m.append(e))}))))},lr=function(t){return Object(lt.pipe)(t,st.m.map(Object(lt.flow)(st.A.map(st.o.of),st.A.fold((function(t,e){return st.A.make(t,Object(lt.pipe)(e,st.m.map(st.A.map((function(e){return st.o.concat(e)(t)}))),st.m.toArray))})))))},pr=function(t){return Object(lt.pipe)(t,st.m.chain(st.A.fold((function(t,e){return Object(lt.pipe)(e,st.o.fromReadonlyArray,st.i.fold((function(){return[[t]]}),st.o.foldMap(st.o.getSemigroup())(st.o.map(st.m.prepend(t)))))}))),st.m.filterMap(st.o.fromReadonlyArray))},fr=function t(e){return function(n){return function(r){return st.A.make(Object(Ot.a)(Object(Ot.a)({},r.value),{},{siblings:n}),Object(lt.pipe)(r.forest,st.m.map((function(n){return Object(lt.pipe)(r.forest,st.m.map((function(t){return t.value})),st.m.difference(e)([n.value]),t(e))(n)})),st.m.toArray))}}},dr=function(t){return function(e){return Object(lt.pipe)(e,st.m.map((function(n){return Object(lt.pipe)(e,st.m.map((function(t){return t.value})),st.m.difference(t)([n.value]),fr(t))(n)})))}},hr=st.m.map(st.A.fold((function(t,e){return 0===e.length||Object(lt.pipe)(e,st.m.exists((function(t){return"Pass"===t.value.bid})))?st.A.make(t,e):st.A.make(t,Object(lt.pipe)(e,st.m.append(st.A.make({bid:"Pass",syntax:{type:"Otherwise"}})),st.m.toArray))}))),mr=function(t){return Object(lt.pipe)(t,st.m.map(st.A.traverse(st.z.getApplicative(st.m.getMonoid()))(st.d.mapLeft(st.m.of))),st.m.sequence(st.z.getApplicative(st.m.getSemigroup())))},br=function(t){return function(e){return st.z.getChain(st.m.getSemigroup()).chain(e,t)}},jr=n(53),Or=Object(lt.flow)(st.q.toReadonlyArray(qt),st.m.foldMap(st.h.MonoidSum)((function(t){return e=t.rank,Math.max(0,e-10);var e}))),vr=[0,0,0,0],yr=function(t){return Object(lt.pipe)(t,st.m.sort(st.k.reverse(st.h.Ord)))},gr=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object(lt.pipe)(e,yr)},Sr=st.f.contramap(yr)(st.m.getEq(st.h.Eq)),xr={S:0,H:0,D:0,C:0},kr=function(t){return Object(lt.pipe)(t,Wt,st.p.map((function(t){return t.length})),st.p.union(st.t.first())(xr),(function(t){return t}))},wr=function(t){return Object(lt.pipe)(t,kr,st.p.toReadonlyArray,st.m.map(st.r.snd),(function(t){return st.m.mapWithIndex((function(e,n){return Object(lt.pipe)(t,st.m.lookup(e),st.i.getOrElse((function(){return 0})))}))(vr)}))},Cr=n(309),Ar=Object(lt.constant)({type:"Constant",value:!0}),_r=(Object(lt.constant)({type:"Constant",value:!1}),lt.constFalse),Rr=(lt.constTrue,function(t){return function(e){return st.m.foldMap(e)((function(t){return t}))(t)}}),Fr=function(t){return Object(lt.pipe)(t,Rr,Object(lt.apply)(st.l.getMonoidAny()))},Pr=function(t){return Object(lt.pipe)(t,Rr,Object(lt.apply)(st.l.getMonoidAll()))},Br=function(t){return st.k.between(st.h.Ord)(t.min,t.max)},Dr=Object(lt.flow)(Br,st.l.contramap(Or)),Mr=function(t){return function(e){return Object(lt.flow)(kr,(function(n){return Object(lt.pipe)(t,Br,Object(lt.apply)(n[e]))}))}},Er=function(t){return function(e,n){return Object(lt.flow)(kr,(function(r){return function(t){switch(t){case"<":return st.k.lt(st.h.Ord);case"<=":return st.k.leq(st.h.Ord);case"=":return st.h.Eq.equals;case">=":return st.k.geq(st.h.Ord);case">":return st.k.gt(st.h.Ord);default:return yt(t)}}(t)(r[e],r[n])}))}},Nr=st.q.fromReadonlyArray(Pt),Ir=["Conjunction","Disjunction","Negation","ForceOneRound","ForceGame","ForceSlam","Relay","SuitPrimary","SuitSecondary","SetTrump"],qr=function(t){return function(t){return st.m.elem(st.w.Eq)(t.type)(Ir)}(t)?st.d.left(t):st.d.right(t)},Tr=function(t){switch(t.type){case"Constant":return Object(lt.constant)(t.value);case"PointRange":return Dr(t);case"SuitRange":return Mr(t)(t.suit);case"SuitComparison":return Er(t.op)(t.left,t.right);case"SuitHonors":return r=t,Object(lt.flow)(Wt,st.p.lookup(r.suit),st.i.fold(lt.constFalse,(function(t){var e=Object(lt.pipe)(t,Nr,st.q.intersection(Pt)(Nr(Et))),n=Object(lt.pipe)(r.honors,Nr);return Object(lt.pipe)(n,st.q.isSubset(Pt)(e))})));case"SuitTop":return n=t,Object(lt.flow)(Wt,st.p.lookup(n.suit),st.i.fold(lt.constFalse,Object(lt.flow)(st.m.filter((function(t){return Bt.compare(t,n.minRank)>=0})),(function(t){return t.length>=n.count}))));case"AnyShape":return e=t.counts,Object(lt.flow)(wr,(function(t){return Sr.equals(e,t)}));case"SpecificShape":return function(t){return Object(lt.flow)(kr,(function(e){return st.s.getEq(Cr.eqStrict).equals(e,t)}))}(t.suits);default:return yt(t)}var e,n,r},Lr=st.k.fromCompare((function(t,e){return ce(t)&&!ce(e)?-1:ce(e)&&!ce(t)?1:ce(t)&&ce(e)?ie.compare(t,e):0})),Hr=st.k.contramap((function(t){return t.bid}))(Lr),Wr=["Me","Partner"],Ur=["We"],$r={primarySuit:st.i.none,secondarySuit:st.i.none},Gr=jr.b.fromProp(),Kr=Gr("primarySuit"),Vr=Gr("secondarySuit"),zr={trumpSuit:st.i.none},Jr=jr.b.fromProp()("trumpSuit"),Qr=function(t){return function(e){return Object(lt.pipe)(st.m.zip(Object(lt.pipe)(t,st.m.rotate(1)),t),st.m.map(st.r.mapSnd((function(t){return e[t]}))),st.p.fromFoldable(st.t.first(),st.m.Foldable))}},Xr={bid:{},path:[],force:st.i.none,players:Object(lt.pipe)(Wr,st.m.map((function(t){return[t,$r]})),st.p.fromFoldable(st.t.first(),st.m.Foldable)),partnerships:Object(lt.pipe)(Ur,st.m.map((function(t){return[t,zr]})),st.p.fromFoldable(st.t.first(),st.m.Foldable))},Zr=jr.b.fromProp(),Yr=Zr("bid"),ti=Zr("path"),ei=Zr("force"),ni=Zr("players"),ri=Zr("partnerships"),ii=jr.c.fromOptionProp()("force"),ai=new jr.a((function(t){return new jr.b(Object(lt.flow)(ni.get,(function(e){return e[t]})),(function(e){return function(n){return Object(lt.pipe)(n,ni.get,st.p.upsertAt(t,e),ni.set,Object(lt.apply)(n))}}))})),ci=new jr.a((function(t){return new jr.b(Object(lt.flow)(ri.get,(function(e){return e[t]})),(function(e){return function(n){return Object(lt.pipe)(n,ri.get,st.p.upsertAt(t,e),ri.set,Object(lt.apply)(n))}}))})),ui=function(t){return function(e){return Object(lt.flow)(st.v.traverseArray(e),st.v.map(t))}},oi=function(t){return st.v.of(t)},si=function(t){return st.v.chain((function(e){switch(e.type){case"Conjunction":return Object(lt.pipe)(e.constraints,st.o.map(oi),(r=t,ui(Pr)(r)));case"Disjunction":return Object(lt.pipe)(e.constraints,st.o.map(oi),function(t){return ui(Fr)(t)}(t));case"Negation":return Object(lt.pipe)(e.constraint,oi,t,st.v.map(st.l.not));case"ForceOneRound":case"ForceGame":case"ForceSlam":case"Relay":return Object(lt.pipe)(st.v.modify(ei.set(st.i.some(e))),st.v.map((function(){return lt.constTrue})));case"SuitPrimary":return Object(lt.pipe)(st.v.modify(ai.at("Me").composeLens(Kr).set(st.i.some(e.suit))),st.v.map((function(){return t=e.suit,Object(lt.pipe)(wt,st.m.splitAt(wt.indexOf(t)),st.r.bimap(Object(lt.flow)(st.m.tail,st.i.fold((function(){return[]}),st.m.map((function(e){return Er("<")(e,t)})))),st.m.map((function(e){return Er("<=")(e,t)}))),st.m.flatten,st.m.prepend(Mr({min:5,max:13})(t)),Pr);var t})));case"SuitSecondary":return Object(lt.pipe)(st.v.modify(ai.at("Me").composeLens(Vr).set(st.i.some(e.suit))),st.v.apSecond(st.v.gets(ai.at("Me").composeLens(Kr).get)),st.j.map(st.v.Functor)((n=e.suit,function(t){return Object(lt.pipe)(st.m.Do,st.m.apS("suit",[n,t]),st.m.apS("otherSuit",Object(lt.pipe)(wt,st.m.difference(Ct)([n,t]))),st.m.filter((function(t){var e=t.suit,n=t.otherSuit;return!Ct.equals(e,n)})),st.m.map((function(t){var e=t.suit,n=t.otherSuit;return Er(">")(e,n)})),st.m.concat([Mr({min:5,max:13})(n),Er(">=")(t,n)]),Pr)})),st.v.map(st.i.getOrElse((function(){return _r}))));case"SetTrump":return Object(lt.pipe)(st.v.modify(ci.at("We").composeLens(Jr).set(st.i.some(e.suit))),st.v.map((function(){return lt.constTrue})));default:return yt(e)}var n,r}))},li=function t(e){return Object(lt.pipe)(e,st.v.map(qr),st.v.chain(st.d.fold(Object(lt.flow)(st.v.of,si(t)),Object(lt.flow)(st.v.flap,(function(t){return t(oi(Tr))})))))},pi=(Object(lt.flow)((function(t){return Object(lt.pipe)(t,st.v.of,li)}),st.v.evaluate(Xr)),function(t){return st.v.of(t)}),fi=function(t){return Object(lt.pipe)(wt,st.m.elem(st.w.Eq)(t))},di=function(t){return{type:"Wrapper",constraint:t}},hi=Object(lt.constant)({type:"Constant",value:!0}),mi=Object(lt.constant)({type:"Constant",value:!1}),bi={bid:"Pass",pathReversed:[],siblings:st.m.empty,traversed:st.m.empty,labels:st.n.empty},ji=jr.b.fromProp(),Oi=ji("bid"),vi=ji("pathReversed"),yi=ji("siblings"),gi=ji("traversed"),Si=ji("labels"),xi=Object(lt.pipe)(ue,st.f.contramap((function(t){return t.bid}))),ki=Object(lt.pipe)(st.v.gets(Oi.get),st.v.chain((function(t){return st.v.gets(Object(lt.flow)(gi.get,st.m.rights,st.m.takeLeftWhile((function(e){return!ue.equals(e.bid,t)})),st.m.map((function(t){return t.constraint}))))})),st.v.map(Object(lt.flow)(st.o.fromReadonlyArray,st.i.fold(Ar,(function(t){return{type:"Negation",constraint:{type:"Conjunction",constraints:t}}})),st.d.left,st.d.right))),wi=st.o.map((function(t){return di({type:"AnyShape",counts:t})})),Ci={type:"Disjunction",syntax:wi([gr(4,3,3,3),gr(5,3,3,2),gr(4,4,3,2)])},Ai={type:"Disjunction",syntax:wi([gr(5,4,2,2),gr(6,3,2,2)])},_i=function(t){switch(t){case"C":case"D":case"H":case"S":return pi(st.d.right(t));case"Wildcard":return Object(lt.pipe)(st.v.gets(Object(lt.flow)(Oi.get)),st.v.map(Object(lt.flow)(st.d.fromPredicate(ce,(function(t){return"WildcardWithoutBid"})),st.d.chain((function(t){return Object(lt.pipe)(t.strain,st.d.fromPredicate(fi,(function(t){return"WildcardInNTContext"})))})))));default:return pi(st.d.left("NotImplemented"))}},Ri=function(t){return Object(lt.pipe)(t,st.d.right,st.d.right,pi)},Fi=function t(e){switch(e.type){case"Wrapper":return pi(st.d.right(st.d.left(e.constraint)));case"Constant":return Ri(di({type:"Constant",value:e.value}));case"Conjunction":case"Disjunction":return function(t){var e=t.type,n=t.syntax;return Object(lt.pipe)(n,st.o.traverse(st.v.Applicative)(Fi),st.v.map(Object(lt.flow)(st.m.wilt(st.d.Applicative)((function(t){return t})),st.d.map(Object(lt.flow)(st.u.bimap(st.o.fromReadonlyArray,st.o.fromReadonlyArray),(function(t){return st.z.fromOptions(t.left,t.right)}),st.i.fold((function(){return st.d.left(Ar())}),st.z.match((function(t){return st.d.left(1===t.length?t[0]:{type:e,constraints:t})}),(function(t){return st.d.right(1===t.length?t[0]:{type:e,syntax:t})}),(function(t,n){return st.d.right({type:e,syntax:[di({type:e,constraints:t}),{type:e,syntax:n}]})}))))))))}(e);case"Negation":return Object(lt.pipe)(e.syntax,t,st.v.map(st.d.map(Object(lt.flow)(st.d.bimap((function(t){return{type:"Negation",constraint:t}}),(function(t){return{type:"Negation",syntax:t}}))))));case"OtherBid":return n=e.bid,Object(lt.pipe)(st.v.gets(Object(lt.flow)(yi.get,st.m.findFirst((function(t){return ue.equals(t.bid,n)})),st.i.map((function(t){return t.syntax})))),st.j.alt(st.v.Monad)((function(){return st.v.gets(Object(lt.flow)(Si.get,st.n.lookup(st.w.Eq)(Ee.get(n))))})),st.v.map(Object(lt.flow)(st.d.fromOption((function(){return"OtherBidNotFound"})),st.d.map(st.d.right))));case"Otherwise":return ki;case"LabelDef":return function(t){return Object(lt.pipe)(st.v.gets(Object(lt.flow)(Si.get,st.n.lookup(st.w.Eq)(t.name))),st.v.chain(st.i.fold((function(){return pi(t.definition)}),(function(e){return pi({type:"Conjunction",syntax:[e,t.definition]})}))),st.v.chainFirst((function(e){return st.v.modify(Si.modify(st.n.upsertAt(st.w.Eq)(t.name,e)))})),st.v.map(Object(lt.flow)(st.d.right,st.d.right)))}(e);case"LabelRef":return function(t){return Object(lt.pipe)(st.v.gets(Object(lt.flow)(Si.get,st.n.lookup(st.w.Eq)(t.name))),st.v.map(Object(lt.flow)(st.d.fromOption((function(){return"LabelNotFound"})),st.d.map(st.d.right))))}(e);case"Balanced":return Ri(Ci);case"SemiBalanced":return Ri({type:"Disjunction",syntax:[Ci,Ai]});case"Unbalanced":return Ri({type:"Negation",syntax:{type:"Disjunction",syntax:[Ci,Ai]}});case"SuitRange":case"SuitHonors":case"SuitPrimary":case"SuitSecondary":case"SuitTop":case"SetTrump":return Object(lt.pipe)(e.suit,_i,st.e.map(st.v.Functor)((function(t){return st.d.left(Object(Ot.a)(Object(Ot.a)({},e),{},{suit:t}))})));case"SuitComparison":return Object(lt.pipe)([e.left,e.right],st.v.traverseArray(_i),st.v.map(st.d.sequenceArray),st.e.map(st.v.Functor)((function(t){return st.d.left(Object(Ot.a)(Object(Ot.a)({},e),{},{left:t[0],right:t[1]}))})));default:return yt(e)}var n},Pi=function t(e){return Object(lt.pipe)(e,Fi,st.v.chain(Object(lt.flow)(st.d.mapLeft(st.d.left),st.d.chain(Object(lt.flow)(st.d.mapLeft((function(t){return st.d.right(t)})))),st.d.fold(pi,t))))},Bi=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Object(lt.pipe)(e,st.v.traverseArray(st.v.modify),st.v.map(lt.constVoid))},Di=st.A.map((function(t){var e=t.bid,n=t.syntax,r=t.siblings;return Object(lt.pipe)(Bi(Oi.set(e),vi.modify(st.m.prepend(e)),yi.set(r),Si.modify(st.n.upsertAt(st.w.Eq)(Ee.get(e),n))),st.v.apSecond(Pi(n)),st.v.chain((function(t){return Object(lt.pipe)(st.v.gets(vi.get),st.v.map((function(e){return Object(lt.pipe)(t,st.d.mapLeft((function(t){return{reason:t,path:st.m.reverse(e),syntax:n}})))})))})),st.v.map(st.d.map((function(t){return{bid:e,constraint:t}}))))})),Mi=st.v.chainFirst((function(t){return Bi(gi.modify(st.m.append(t.value)),vi.modify(Object(lt.flow)(st.m.tail,st.i.getOrElseW((function(){return st.m.empty})))))})),Ei=st.A.fold((function(t,e){return Object(lt.pipe)(t,st.v.bindTo("result"),st.v.apS("context",st.v.get()),st.v.map((function(t){var n=t.result,r=t.context;return st.A.make(n,Object(lt.pipe)(e,st.v.traverseArray(Mi),st.v.evaluate(r),st.m.toArray))})))})),Ni=Object(Ot.a)(Object(Ot.a)({},Xr),{},{effectContext:"Open"}),Ii=function(t){return st.v.of(t)},qi=jr.b.fromProp(),Ti=qi("effectContext"),Li=qi("bid"),Hi=qi("path"),Wi=qi("force"),Ui=qi("players"),$i=qi("partnerships"),Gi=jr.c.fromOptionProp()("force"),Ki=new jr.a((function(t){return new jr.b(Object(lt.flow)(Ui.get,(function(e){return e[t]})),(function(e){return function(n){return Object(lt.pipe)(n,Ui.get,st.p.upsertAt(t,e),Ui.set,Object(lt.apply)(n))}}))})),Vi=new jr.a((function(t){return new jr.b(Object(lt.flow)($i.get,(function(e){return e[t]})),(function(e){return function(n){return Object(lt.pipe)(n,$i.get,st.p.upsertAt(t,e),$i.set,Object(lt.apply)(n))}}))})),zi=function(t){return Object(lt.pipe)(st.v.gets(Ti.get),st.v.chain((function(e){return"Open"===e?Object(lt.pipe)(st.v.modify(t),st.v.map((function(){return st.d.right(Object(lt.constVoid)())}))):st.v.of(st.d.left({type:"IllegalContextModification"}))})))},Ji=function(t){return Object(lt.pipe)(t,st.m.zip(st.o.tail(t)),st.m.traverse(st.d.Applicative)((function(e){var n=Object(ut.a)(e,2),r=n[0],i=n[1];return st.k.lt(Hr)(r,i)?st.d.right(Object(lt.constVoid)()):st.d.left({type:"BidsOutOfOrder",left:r,right:i,path:Object(lt.pipe)(t,st.m.map((function(t){return t.bid})))})})),st.d.map(lt.constVoid))},Qi=function(t){return Object(lt.pipe)(t,pr,st.m.traverse(st.d.Applicative)(Ji),st.d.map(lt.constVoid))},Xi=function(t){return function(e){return Object(lt.pipe)(st.v.gets(Ti.get),st.v.chain((function(n){return Object(lt.pipe)(st.v.modify(Ti.set(e)),st.v.map((function(){return t})),st.v.chain(st.v.traverseArray(Zi)),st.v.map(Object(lt.flow)(st.m.sequence(st.d.Applicative),st.d.map(lt.constVoid))),st.v.apFirst(st.v.modify(Ti.set(n))))})))}},Zi=function(t){switch(t.type){case"Conjunction":return Object(lt.pipe)(st.v.gets(Ti.get),st.v.chain(Xi(t.constraints)));case"Disjunction":return Xi(t.constraints)(t.type);case"Negation":return Xi(st.m.of(t.constraint))(t.type);case"ForceOneRound":case"ForceGame":case"ForceSlam":case"Relay":return zi(Wi.set(st.i.some(t)));case"SuitPrimary":return Object(lt.pipe)(st.v.gets(Ki.at("Me").composeLens(Kr).get),st.v.chain(st.i.fold((function(){return zi(Ki.at("Me").composeLens(Kr).set(st.i.some(t.suit)))}),(function(){return Ii(st.d.left({type:"PrimarySuitAlreadyDefined",constraint:t}))}))));case"SuitSecondary":return Object(lt.pipe)(zi(Ki.at("Me").composeLens(Vr).set(st.i.some(t.suit))),st.e.chain(st.v.Monad)((function(){return Object(lt.pipe)(st.v.gets(Ki.at("Me").composeLens(Kr).get),st.v.map(Object(lt.flow)(st.d.fromOption((function(){return{type:"NoPrimarySuitDefined",constraint:t}})),st.d.chainFirst(st.d.fromPredicate((function(e){return t.suit!==e}),(function(){return{type:"SamePrimaryAndSecondarySuit",constraint:t}}))),st.d.map(lt.constVoid))))})));case"SetTrump":return Object(lt.pipe)(st.v.gets(Vi.at("We").composeLens(Jr).get),st.v.chain(st.i.fold((function(){return zi(Vi.at("We").composeLens(Jr).set(st.i.some(t.suit)))}),(function(){return Ii(st.d.left({type:"TrumpSuitAlreadyDefined",constraint:t}))}))));case"PointRange":return Object(lt.pipe)(t,st.d.fromPredicate((function(t){return t.min<=t.max}),(function(){return{type:"PointRangeInvalid",constraint:t}})),st.d.map(lt.constVoid),Ii);case"SuitRange":return Object(lt.pipe)(t,st.d.fromPredicate((function(t){return t.min<=t.max}),(function(){return{type:"SuitRangeInvalid",constraint:t}})),st.d.map(lt.constVoid),Ii);case"SpecificShape":return Object(lt.pipe)(t.suits,st.p.foldMap(st.k.trivial)(st.h.MonoidSum)(lt.identity),st.d.fromPredicate((function(t){return 13===t}),(function(){return{type:"SpecificShapeInvalid",constraint:t}})),st.d.map(lt.constVoid),Ii);case"AnyShape":return Object(lt.pipe)(t.counts,st.m.foldMap(st.h.MonoidSum)(lt.identity),st.d.fromPredicate((function(t){return 13===t}),(function(){return{type:"AnyShapeInvalid",constraint:t}})),st.d.map(lt.constVoid),Ii);case"Constant":case"SuitComparison":case"SuitHonors":case"SuitTop":return Ii(st.d.right(Object(lt.constVoid)()));default:return yt(t)}},Yi=st.v.modify(Wi.set(st.i.none)),ta=st.v.of(Object(lt.constVoid)()),ea=Object(lt.pipe)((function(t){return function(e){switch(e.type){case"ForceOneRound":case"Relay":return Yi;case"ForceGame":return function(t){return ce(t)&&st.k.geq(ie)(t,{level:3,strain:"N"})}(t)?Yi:ta;case"ForceSlam":return function(t){return ce(t)&&st.k.gt(ie)(t,{level:5,strain:"N"})}(t)?Yi:ta;default:return yt(e)}}}),Ii,st.v.ap(st.v.gets(Li.get)),st.v.map(st.i.of),st.j.ap(st.v.Apply)(st.v.gets(Wi.get)),st.v.chain(st.i.sequence(st.v.Applicative)),st.v.map(lt.constVoid)),na=Object(lt.pipe)(st.v.sequenceArray([Object(lt.pipe)(st.v.gets(Ui.get),st.v.chain(Object(lt.flow)(Qr(Wr),Ui.set,st.v.modify))),Object(lt.pipe)(st.v.gets($i.get),st.v.chain(Object(lt.flow)(Qr(Ur),$i.set,st.v.modify)))]),st.v.map(lt.constVoid)),ra=Object(lt.pipe)(Ii((function(t){return function(e){return!("Pass"===t&&st.i.isSome(e))}})),st.v.ap(st.v.gets(Li.get)),st.v.ap(st.v.gets(Gi.getOption)),st.v.chain(st.c.fold(Object(lt.flow)((function(){return Ii({})}),st.v.apS("bid",st.v.gets(Li.get)),st.v.apS("path",st.v.gets(Hi.get)),st.v.map((function(t){var e=t.bid,n=t.path;return st.d.left({type:"PassWhileForcing",bid:e,path:n})}))),Object(lt.flow)(lt.constVoid,st.d.right,Ii)))),ia=Object(lt.pipe)(st.v.gets(Gi.getOption),st.v.bindTo("force"),st.v.apS("path",st.v.gets(Hi.get)),st.v.map((function(t){var e=t.force,n=t.path;return Object(lt.pipe)(e,st.d.fromPredicate(st.i.isNone,(function(){return{type:"NoBidDefinedButStillForcing",path:n}})),st.d.map(lt.constVoid))}))),aa=function(t){return Object(lt.pipe)(t,st.v.traverseArray((function(e){return Object(lt.pipe)(st.v.modify(Li.set(e.bid)),st.v.chain((function(){return ra})),st.v.chain(st.d.traverse(st.v.Applicative)((function(){return Object(lt.pipe)(Ii(e.constraint),st.v.apFirst(ea),st.v.chain(Zi),st.v.map(st.d.mapLeft((function(t){return Object(Ot.a)({bid:e.bid},t)}))))}))),st.v.apFirst(st.v.modify(Hi.modify(st.m.prepend(e.bid)))),st.v.apFirst(na),st.v.map(Object(lt.flow)(st.d.map(st.d.mapLeft((function(e){return Object(Ot.a)(Object(Ot.a)({},e),{},{path:Object(lt.pipe)(t,st.m.map((function(t){return t.bid})))})}))),st.d.flatten)))})),st.v.map(st.m.sequence(st.d.Applicative)),st.e.chain(st.v.Monad)((function(){return ia})),st.v.evaluate(Ni))},ca=function(t){return Object(lt.pipe)(t,pr,st.m.traverse(st.d.Applicative)(aa),st.d.map(lt.constVoid))},ua=function(t){return Object(lt.pipe)([Qi,ca],st.m.traverse(st.d.Applicative)(Object(lt.apply)(t)),st.d.map(lt.constVoid))},oa=n(109),sa=n(80),la=n(24),pa=n(5),fa=n(3);!function(t){t.Start="Start",t.BidSpec="BidSpec",t.BidSpecConstraintList="BidSpecConstraintList",t.Bid_1="Bid_1",t.Bid_2="Bid_2",t.ContractBid="ContractBid",t.StrainSpecifier_1="StrainSpecifier_1",t.StrainSpecifier_2="StrainSpecifier_2",t.StrainSpecifier_3="StrainSpecifier_3",t.StrainSpecifier_4="StrainSpecifier_4",t.Wildcard="Wildcard",t.Major="Major",t.Minor="Minor",t.NonContractBid="NonContractBid",t.Pass="Pass",t.Strain_1="Strain_1",t.Strain_2="Strain_2",t.Suit_1="Suit_1",t.Suit_2="Suit_2",t.Suit_3="Suit_3",t.Suit_4="Suit_4",t.Club="Club",t.Diamond="Diamond",t.Heart="Heart",t.Spade="Spade",t.Notrump="Notrump",t.Honor="Honor",t.ConstraintList="ConstraintList",t.ConstraintListItem="ConstraintListItem",t.Constraint_1="Constraint_1",t.Constraint_2="Constraint_2",t.Constraint_3="Constraint_3",t.Constraint_4="Constraint_4",t.Constraint_5="Constraint_5",t.Constraint_6="Constraint_6",t.Constraint_7="Constraint_7",t.Constraint_8="Constraint_8",t.Constraint_9="Constraint_9",t.Constraint_10="Constraint_10",t.Constraint_11="Constraint_11",t.Constraint_12="Constraint_12",t.Constraint_13="Constraint_13",t.Constraint_14="Constraint_14",t.Constraint_15="Constraint_15",t.Constraint_16="Constraint_16",t.Constraint_17="Constraint_17",t.Constraint_18="Constraint_18",t.Constraint_19="Constraint_19",t.Const_1="Const_1",t.Const_2="Const_2",t.True="True",t.False="False",t.Or="Or",t.And="And",t.Not="Not",t.Not_$0_1="Not_$0_1",t.Not_$0_2="Not_$0_2",t.Otherwise="Otherwise",t.PointRange="PointRange",t.PointBound="PointBound",t.SuitRange="SuitRange",t.SuitBound="SuitBound",t.SuitSpecifier_1="SuitSpecifier_1",t.SuitSpecifier_2="SuitSpecifier_2",t.SuitSpecifier_3="SuitSpecifier_3",t.SuitSpecifier_4="SuitSpecifier_4",t.SuitSpecifier_5="SuitSpecifier_5",t.SuitSpecifier_6="SuitSpecifier_6",t.OtherMajor="OtherMajor",t.OtherMinor="OtherMinor",t.SuitComparison="SuitComparison",t.SuitComparisonOperator_1="SuitComparisonOperator_1",t.SuitComparisonOperator_2="SuitComparisonOperator_2",t.SuitComparisonOperator_3="SuitComparisonOperator_3",t.SuitComparisonOperator_4="SuitComparisonOperator_4",t.SuitComparisonOperator_5="SuitComparisonOperator_5",t.SuitHonors="SuitHonors",t.SuitTop="SuitTop",t.BoundQualifier_1="BoundQualifier_1",t.BoundQualifier_2="BoundQualifier_2",t.BoundQualifier_3="BoundQualifier_3",t.Plus="Plus",t.Minus="Minus",t.Equals="Equals",t.OtherBid="OtherBid",t.Distribution_1="Distribution_1",t.Distribution_2="Distribution_2",t.Distribution_3="Distribution_3",t.Distribution_4="Distribution_4",t.Distribution_5="Distribution_5",t.Balanced="Balanced",t.SemiBalanced="SemiBalanced",t.Unbalanced="Unbalanced",t.AnyShape="AnyShape",t.SpecificShape="SpecificShape",t.SuitRank_1="SuitRank_1",t.SuitRank_2="SuitRank_2",t.Primary="Primary",t.Secondary="Secondary",t.SetTrump="SetTrump",t.Response_1="Response_1",t.Response_2="Response_2",t.Response_3="Response_3",t.Response_4="Response_4",t.ForceOneRound="ForceOneRound",t.ForceGame="ForceGame",t.ForceSlam="ForceSlam",t.Relay="Relay",t.LabelDef="LabelDef",t.LabelRef="LabelRef",t.Label="Label",t.Digit="Digit",t.Number="Number",t.$EOF="$EOF"}(ct||(ct={}));var da=function t(e){Object(fa.a)(this,t),this.kind=ct.Digit,this.literal=void 0,this.value=void 0,this.literal=e,this.value=parseInt(e)},ha=function t(e){Object(fa.a)(this,t),this.kind=ct.Number,this.literal=void 0,this.value=void 0,this.literal=e,this.value=parseInt(e)},ma=function(){function t(e){Object(fa.a)(this,t),this.input=void 0,this.pos=void 0,this.negating=!1,this.memoSafe=!0,this.$scope$Constraint$memo=new Map,this.pos={overallPos:0,line:1,offset:0},this.input=e}return Object(pa.a)(t,[{key:"reset",value:function(t){this.pos=t}},{key:"finished",value:function(){return this.pos.overallPos===this.input.length}},{key:"clearMemos",value:function(){this.$scope$Constraint$memo.clear()}},{key:"matchStart",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchBidSpec(t+1,e))&&null!==n.match$EOF(e)&&(i={kind:ct.Start,spec:r}),i}))}},{key:"matchBidSpec",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchBid(t+1,e))&&(i=n.matchBidSpecConstraintList(t+1,e),1)&&(a={kind:ct.BidSpec,bid:r,constraints:i}),a}))}},{key:"matchBidSpecConstraintList",value:function(t,e){var n=this;return this.run(t,(function(){var r,a=null;return null!==n.regexAccept(String.raw(i||(i=Object(ot.a)(["(?:: )"]))),t+1,e)&&null!==(r=n.matchConstraintList(t+1,e))&&(a={kind:ct.BidSpecConstraintList,constraints:r}),a}))}},{key:"matchBid",value:function(t,e){var n=this;return this.choice([function(){return n.matchBid_1(t+1,e)},function(){return n.matchBid_2(t+1,e)}])}},{key:"matchBid_1",value:function(t,e){return this.matchContractBid(t+1,e)}},{key:"matchBid_2",value:function(t,e){return this.matchNonContractBid(t+1,e)}},{key:"matchContractBid",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchDigit(t+1,e))&&null!==(i=n.matchStrainSpecifier(t+1,e))&&(a={kind:ct.ContractBid,level:r,specifier:i}),a}))}},{key:"matchStrainSpecifier",value:function(t,e){var n=this;return this.choice([function(){return n.matchStrainSpecifier_1(t+1,e)},function(){return n.matchStrainSpecifier_2(t+1,e)},function(){return n.matchStrainSpecifier_3(t+1,e)},function(){return n.matchStrainSpecifier_4(t+1,e)}])}},{key:"matchStrainSpecifier_1",value:function(t,e){return this.matchWildcard(t+1,e)}},{key:"matchStrainSpecifier_2",value:function(t,e){return this.matchMajor(t+1,e)}},{key:"matchStrainSpecifier_3",value:function(t,e){return this.matchMinor(t+1,e)}},{key:"matchStrainSpecifier_4",value:function(t,e){return this.matchStrain(t+1,e)}},{key:"matchWildcard",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(a||(a=Object(ot.a)(["(?:X)"]))),t+1,e))&&(i={kind:ct.Wildcard,v:r}),i}))}},{key:"matchMajor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(c||(c=Object(ot.a)(["(?:M)"]))),t+1,e))&&(i={kind:ct.Major,v:r}),i}))}},{key:"matchMinor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(u||(u=Object(ot.a)(["(?:m)"]))),t+1,e))&&(i={kind:ct.Minor,v:r}),i}))}},{key:"matchNonContractBid",value:function(t,e){return this.matchPass(t+1,e)}},{key:"matchPass",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(o||(o=Object(ot.a)(["(?:P)"]))),t+1,e))&&(i={kind:ct.Pass,v:r}),i}))}},{key:"matchStrain",value:function(t,e){var n=this;return this.choice([function(){return n.matchStrain_1(t+1,e)},function(){return n.matchStrain_2(t+1,e)}])}},{key:"matchStrain_1",value:function(t,e){return this.matchSuit(t+1,e)}},{key:"matchStrain_2",value:function(t,e){return this.matchNotrump(t+1,e)}},{key:"matchSuit",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuit_1(t+1,e)},function(){return n.matchSuit_2(t+1,e)},function(){return n.matchSuit_3(t+1,e)},function(){return n.matchSuit_4(t+1,e)}])}},{key:"matchSuit_1",value:function(t,e){return this.matchClub(t+1,e)}},{key:"matchSuit_2",value:function(t,e){return this.matchDiamond(t+1,e)}},{key:"matchSuit_3",value:function(t,e){return this.matchHeart(t+1,e)}},{key:"matchSuit_4",value:function(t,e){return this.matchSpade(t+1,e)}},{key:"matchClub",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(s||(s=Object(ot.a)(["(?:C)"]))),t+1,e))&&(i={kind:ct.Club,v:r}),i}))}},{key:"matchDiamond",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(l||(l=Object(ot.a)(["(?:D)"]))),t+1,e))&&(i={kind:ct.Diamond,v:r}),i}))}},{key:"matchHeart",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(p||(p=Object(ot.a)(["(?:H)"]))),t+1,e))&&(i={kind:ct.Heart,v:r}),i}))}},{key:"matchSpade",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(f||(f=Object(ot.a)(["(?:S)"]))),t+1,e))&&(i={kind:ct.Spade,v:r}),i}))}},{key:"matchNotrump",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(d||(d=Object(ot.a)(["(?:N)"]))),t+1,e))&&(n.regexAccept(String.raw(h||(h=Object(ot.a)(["(?:T)"]))),t+1,e),1)&&(i={kind:ct.Notrump,v:r}),i}))}},{key:"matchHonor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(m||(m=Object(ot.a)(["(?:[AKQJT])"]))),t+1,e))&&(i={kind:ct.Honor,v:r}),i}))}},{key:"matchConstraintList",value:function(t,e){var n=this;return this.loop((function(){return n.matchConstraintListItem(t+1,e)}),!1)}},{key:"matchConstraintListItem",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchConstraint(t+1,e))&&(n.regexAccept(String.raw(b||(b=Object(ot.a)(["(?: )"]))),t+1,e),1)&&(i={kind:ct.ConstraintListItem,constraint:r}),i}))}},{key:"matchConstraint",value:function(t,e){var n=this,r=this.mark(),i=this.$scope$Constraint$memo.get(r.overallPos);if(void 0!==i)return this.reset(i[1]),i[0];var a=this.memoSafe;this.memoSafe=!1,this.$scope$Constraint$memo.set(r.overallPos,[null,r]);for(var c=null,u=r;;){this.reset(r);var o=n.choice([function(){return n.matchConstraint_1(t+1,e)},function(){return n.matchConstraint_2(t+1,e)},function(){return n.matchConstraint_3(t+1,e)},function(){return n.matchConstraint_4(t+1,e)},function(){return n.matchConstraint_5(t+1,e)},function(){return n.matchConstraint_6(t+1,e)},function(){return n.matchConstraint_7(t+1,e)},function(){return n.matchConstraint_8(t+1,e)},function(){return n.matchConstraint_9(t+1,e)},function(){return n.matchConstraint_10(t+1,e)},function(){return n.matchConstraint_11(t+1,e)},function(){return n.matchConstraint_12(t+1,e)},function(){return n.matchConstraint_13(t+1,e)},function(){return n.matchConstraint_14(t+1,e)},function(){return n.matchConstraint_15(t+1,e)},function(){return n.matchConstraint_16(t+1,e)},function(){return n.matchConstraint_17(t+1,e)},function(){return n.matchConstraint_18(t+1,e)},function(){return n.matchConstraint_19(t+1,e)}]),s=this.mark();if(s.overallPos<=u.overallPos)break;c=o,u=s,this.$scope$Constraint$memo.set(r.overallPos,[c,u])}return this.reset(u),this.memoSafe=a,c}},{key:"matchConstraint_1",value:function(t,e){return this.matchConst(t+1,e)}},{key:"matchConstraint_2",value:function(t,e){return this.matchOr(t+1,e)}},{key:"matchConstraint_3",value:function(t,e){return this.matchAnd(t+1,e)}},{key:"matchConstraint_4",value:function(t,e){return this.matchNot(t+1,e)}},{key:"matchConstraint_5",value:function(t,e){return this.matchOtherwise(t+1,e)}},{key:"matchConstraint_6",value:function(t,e){return this.matchDistribution(t+1,e)}},{key:"matchConstraint_7",value:function(t,e){return this.matchResponse(t+1,e)}},{key:"matchConstraint_8",value:function(t,e){return this.matchSuitRange(t+1,e)}},{key:"matchConstraint_9",value:function(t,e){return this.matchSuitBound(t+1,e)}},{key:"matchConstraint_10",value:function(t,e){return this.matchSuitComparison(t+1,e)}},{key:"matchConstraint_11",value:function(t,e){return this.matchSuitHonors(t+1,e)}},{key:"matchConstraint_12",value:function(t,e){return this.matchSuitTop(t+1,e)}},{key:"matchConstraint_13",value:function(t,e){return this.matchSuitRank(t+1,e)}},{key:"matchConstraint_14",value:function(t,e){return this.matchSetTrump(t+1,e)}},{key:"matchConstraint_15",value:function(t,e){return this.matchPointRange(t+1,e)}},{key:"matchConstraint_16",value:function(t,e){return this.matchPointBound(t+1,e)}},{key:"matchConstraint_17",value:function(t,e){return this.matchOtherBid(t+1,e)}},{key:"matchConstraint_18",value:function(t,e){return this.matchLabelDef(t+1,e)}},{key:"matchConstraint_19",value:function(t,e){return this.matchLabelRef(t+1,e)}},{key:"matchConst",value:function(t,e){var n=this;return this.choice([function(){return n.matchConst_1(t+1,e)},function(){return n.matchConst_2(t+1,e)}])}},{key:"matchConst_1",value:function(t,e){return this.matchTrue(t+1,e)}},{key:"matchConst_2",value:function(t,e){return this.matchFalse(t+1,e)}},{key:"matchTrue",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(j||(j=Object(ot.a)(["(?:true)"]))),t+1,e))&&(i={kind:ct.True,v:r}),i}))}},{key:"matchFalse",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(O||(O=Object(ot.a)(["(?:false)"]))),t+1,e))&&(i={kind:ct.False,v:r}),i}))}},{key:"matchOr",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchConstraint(t+1,e))&&null!==n.regexAccept(String.raw(v||(v=Object(ot.a)(["(?: or )"]))),t+1,e)&&null!==(i=n.matchConstraint(t+1,e))&&(a={kind:ct.Or,left:r,right:i}),a}))}},{key:"matchAnd",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(y||(y=Object(ot.a)(["(?:()"],["(?:\\()"]))),t+1,e)&&null!==(r=n.matchConstraintList(t+1,e))&&null!==n.regexAccept(String.raw(g||(g=Object(ot.a)(["(?:))"],["(?:\\))"]))),t+1,e)&&(i={kind:ct.And,constraints:r}),i}))}},{key:"matchNot",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.matchNot_$0(t+1,e)&&(n.regexAccept(String.raw(S||(S=Object(ot.a)(["(?: )"]))),t+1,e),1)&&null!==(r=n.matchConstraint(t+1,e))&&(i={kind:ct.Not,constraint:r}),i}))}},{key:"matchNot_$0",value:function(t,e){var n=this;return this.choice([function(){return n.matchNot_$0_1(t+1,e)},function(){return n.matchNot_$0_2(t+1,e)}])}},{key:"matchNot_$0_1",value:function(t,e){return this.regexAccept(String.raw(x||(x=Object(ot.a)(["(?:not)"]))),t+1,e)}},{key:"matchNot_$0_2",value:function(t,e){return this.regexAccept(String.raw(k||(k=Object(ot.a)(["(?:!)"]))),t+1,e)}},{key:"matchOtherwise",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(w||(w=Object(ot.a)(["(?:else)"]))),t+1,e))&&(i={kind:ct.Otherwise,v:r}),i}))}},{key:"matchPointRange",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchNumber(t+1,e))&&null!==n.regexAccept(String.raw(C||(C=Object(ot.a)(["(?:-)"]))),t+1,e)&&null!==(i=n.matchNumber(t+1,e))&&(a={kind:ct.PointRange,lower:r,upper:i}),a}))}},{key:"matchPointBound",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchNumber(t+1,e))&&null!==(i=n.matchBoundQualifier(t+1,e))&&(a={kind:ct.PointBound,value:r,qualifier:i}),a}))}},{key:"matchSuitRange",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c=null;return null!==(r=n.matchDigit(t+1,e))&&null!==n.regexAccept(String.raw(A||(A=Object(ot.a)(["(?:-)"]))),t+1,e)&&null!==(i=n.matchDigit(t+1,e))&&null!==(a=n.matchSuitSpecifier(t+1,e))&&(c={kind:ct.SuitRange,lower:r,upper:i,suit:a}),c}))}},{key:"matchSuitBound",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c=null;return null!==(r=n.matchNumber(t+1,e))&&null!==(i=n.matchBoundQualifier(t+1,e))&&null!==(a=n.matchSuitSpecifier(t+1,e))&&(c={kind:ct.SuitBound,value:r,qualifier:i,suit:a}),c}))}},{key:"matchSuitSpecifier",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuitSpecifier_1(t+1,e)},function(){return n.matchSuitSpecifier_2(t+1,e)},function(){return n.matchSuitSpecifier_3(t+1,e)},function(){return n.matchSuitSpecifier_4(t+1,e)},function(){return n.matchSuitSpecifier_5(t+1,e)},function(){return n.matchSuitSpecifier_6(t+1,e)}])}},{key:"matchSuitSpecifier_1",value:function(t,e){return this.matchWildcard(t+1,e)}},{key:"matchSuitSpecifier_2",value:function(t,e){return this.matchMajor(t+1,e)}},{key:"matchSuitSpecifier_3",value:function(t,e){return this.matchMinor(t+1,e)}},{key:"matchSuitSpecifier_4",value:function(t,e){return this.matchOtherMajor(t+1,e)}},{key:"matchSuitSpecifier_5",value:function(t,e){return this.matchOtherMinor(t+1,e)}},{key:"matchSuitSpecifier_6",value:function(t,e){return this.matchSuit(t+1,e)}},{key:"matchOtherMajor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(_||(_=Object(ot.a)(["(?:oM)"]))),t+1,e))&&(i={kind:ct.OtherMajor,v:r}),i}))}},{key:"matchOtherMinor",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(R||(R=Object(ot.a)(["(?:om)"]))),t+1,e))&&(i={kind:ct.OtherMinor,v:r}),i}))}},{key:"matchSuitComparison",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==(i=n.matchSuitComparisonOperator(t+1,e))&&null!==(a=n.matchSuitSpecifier(t+1,e))&&(c={kind:ct.SuitComparison,left:r,op:i,right:a}),c}))}},{key:"matchSuitComparisonOperator",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuitComparisonOperator_1(t+1,e)},function(){return n.matchSuitComparisonOperator_2(t+1,e)},function(){return n.matchSuitComparisonOperator_3(t+1,e)},function(){return n.matchSuitComparisonOperator_4(t+1,e)},function(){return n.matchSuitComparisonOperator_5(t+1,e)}])}},{key:"matchSuitComparisonOperator_1",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(F||(F=Object(ot.a)(["(?:<=)"]))),t+1,e))&&(i={kind:ct.SuitComparisonOperator_1,v:r}),i}))}},{key:"matchSuitComparisonOperator_2",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(P||(P=Object(ot.a)(["(?:>=)"]))),t+1,e))&&(i={kind:ct.SuitComparisonOperator_2,v:r}),i}))}},{key:"matchSuitComparisonOperator_3",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(B||(B=Object(ot.a)(["(?:=)"]))),t+1,e))&&(i={kind:ct.SuitComparisonOperator_3,v:r}),i}))}},{key:"matchSuitComparisonOperator_4",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(D||(D=Object(ot.a)(["(?:<)"]))),t+1,e))&&(i={kind:ct.SuitComparisonOperator_4,v:r}),i}))}},{key:"matchSuitComparisonOperator_5",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(M||(M=Object(ot.a)(["(?:>)"]))),t+1,e))&&(i={kind:ct.SuitComparisonOperator_5,v:r}),i}))}},{key:"matchSuitHonors",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==(i=n.loop((function(){return n.matchHonor(t+1,e)}),!1))&&(a={kind:ct.SuitHonors,suit:r,honors:i}),a}))}},{key:"matchSuitTop",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==(i=n.regexAccept(String.raw(E||(E=Object(ot.a)(["(?:[0-5])"]))),t+1,e))&&null!==n.regexAccept(String.raw(N||(N=Object(ot.a)(["(?:/)"]))),t+1,e)&&null!==(a=n.regexAccept(String.raw(I||(I=Object(ot.a)(["(?:[1-5])"]))),t+1,e))&&(c={kind:ct.SuitTop,suit:r,x:i,y:a}),c}))}},{key:"matchBoundQualifier",value:function(t,e){var n=this;return this.choice([function(){return n.matchBoundQualifier_1(t+1,e)},function(){return n.matchBoundQualifier_2(t+1,e)},function(){return n.matchBoundQualifier_3(t+1,e)}])}},{key:"matchBoundQualifier_1",value:function(t,e){return this.matchPlus(t+1,e)}},{key:"matchBoundQualifier_2",value:function(t,e){return this.matchMinus(t+1,e)}},{key:"matchBoundQualifier_3",value:function(t,e){return this.matchEquals(t+1,e)}},{key:"matchPlus",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(q||(q=Object(ot.a)(["(?:+)"],["(?:\\+)"]))),t+1,e))&&(i={kind:ct.Plus,v:r}),i}))}},{key:"matchMinus",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(T||(T=Object(ot.a)(["(?:-)"],["(?:\\-)"]))),t+1,e))&&(i={kind:ct.Minus,v:r}),i}))}},{key:"matchEquals",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(L||(L=Object(ot.a)(["(?:=)"]))),t+1,e))&&(i={kind:ct.Equals,v:r}),i}))}},{key:"matchOtherBid",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==(r=n.matchNumber(t+1,e))&&null!==(i=n.matchStrain(t+1,e))&&(a={kind:ct.OtherBid,level:r,strain:i}),a}))}},{key:"matchDistribution",value:function(t,e){var n=this;return this.choice([function(){return n.matchDistribution_1(t+1,e)},function(){return n.matchDistribution_2(t+1,e)},function(){return n.matchDistribution_3(t+1,e)},function(){return n.matchDistribution_4(t+1,e)},function(){return n.matchDistribution_5(t+1,e)}])}},{key:"matchDistribution_1",value:function(t,e){return this.matchBalanced(t+1,e)}},{key:"matchDistribution_2",value:function(t,e){return this.matchSemiBalanced(t+1,e)}},{key:"matchDistribution_3",value:function(t,e){return this.matchUnbalanced(t+1,e)}},{key:"matchDistribution_4",value:function(t,e){return this.matchAnyShape(t+1,e)}},{key:"matchDistribution_5",value:function(t,e){return this.matchSpecificShape(t+1,e)}},{key:"matchBalanced",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(H||(H=Object(ot.a)(["(?:BAL)"]))),t+1,e))&&(i={kind:ct.Balanced,v:r}),i}))}},{key:"matchSemiBalanced",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(W||(W=Object(ot.a)(["(?:semiBAL)"]))),t+1,e))&&(i={kind:ct.SemiBalanced,v:r}),i}))}},{key:"matchUnbalanced",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(U||(U=Object(ot.a)(["(?:unBAL)"]))),t+1,e))&&(i={kind:ct.Unbalanced,v:r}),i}))}},{key:"matchAnyShape",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw($||($=Object(ot.a)(["(?:[0-9]{4})"]))),t+1,e))&&null!==n.regexAccept(String.raw(G||(G=Object(ot.a)(["(?:*)"],["(?:\\*)"]))),t+1,e)&&(i={kind:ct.AnyShape,v:r}),i}))}},{key:"matchSpecificShape",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c,u=null;return null!==(r=n.matchDigit(t+1,e))&&null!==(i=n.matchDigit(t+1,e))&&null!==(a=n.matchDigit(t+1,e))&&null!==(c=n.matchDigit(t+1,e))&&(u={kind:ct.SpecificShape,S:r,H:i,D:a,C:c}),u}))}},{key:"matchSuitRank",value:function(t,e){var n=this;return this.choice([function(){return n.matchSuitRank_1(t+1,e)},function(){return n.matchSuitRank_2(t+1,e)}])}},{key:"matchSuitRank_1",value:function(t,e){return this.matchPrimary(t+1,e)}},{key:"matchSuitRank_2",value:function(t,e){return this.matchSecondary(t+1,e)}},{key:"matchPrimary",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==n.regexAccept(String.raw(K||(K=Object(ot.a)(["(?:1)"]))),t+1,e)&&(i={kind:ct.Primary,suit:r}),i}))}},{key:"matchSecondary",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==n.regexAccept(String.raw(V||(V=Object(ot.a)(["(?:2)"]))),t+1,e)&&(i={kind:ct.Secondary,suit:r}),i}))}},{key:"matchSetTrump",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchSuitSpecifier(t+1,e))&&null!==n.regexAccept(String.raw(z||(z=Object(ot.a)(["(?:#)"]))),t+1,e)&&(i={kind:ct.SetTrump,suit:r}),i}))}},{key:"matchResponse",value:function(t,e){var n=this;return this.choice([function(){return n.matchResponse_1(t+1,e)},function(){return n.matchResponse_2(t+1,e)},function(){return n.matchResponse_3(t+1,e)},function(){return n.matchResponse_4(t+1,e)}])}},{key:"matchResponse_1",value:function(t,e){return this.matchForceOneRound(t+1,e)}},{key:"matchResponse_2",value:function(t,e){return this.matchForceGame(t+1,e)}},{key:"matchResponse_3",value:function(t,e){return this.matchForceSlam(t+1,e)}},{key:"matchResponse_4",value:function(t,e){return this.matchRelay(t+1,e)}},{key:"matchForceOneRound",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(J||(J=Object(ot.a)(["(?:F1)"]))),t+1,e))&&(i={kind:ct.ForceOneRound,v:r}),i}))}},{key:"matchForceGame",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(Q||(Q=Object(ot.a)(["(?:FG)"]))),t+1,e))&&(i={kind:ct.ForceGame,v:r}),i}))}},{key:"matchForceSlam",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(X||(X=Object(ot.a)(["(?:FS)"]))),t+1,e))&&(i={kind:ct.ForceSlam,v:r}),i}))}},{key:"matchRelay",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(Z||(Z=Object(ot.a)(["(?:->)"]))),t+1,e)&&null!==(r=n.matchOtherBid(t+1,e))&&(i={kind:ct.Relay,bid:r}),i}))}},{key:"matchLabelDef",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a=null;return null!==n.regexAccept(String.raw(Y||(Y=Object(ot.a)(["(?:')"],["(?:\\')"]))),t+1,e)&&null!==(r=n.matchLabel(t+1,e))&&null!==n.regexAccept(String.raw(tt||(tt=Object(ot.a)(["(?:': )"],["(?:\\': )"]))),t+1,e)&&null!==(i=n.matchConstraintList(t+1,e))&&(a={kind:ct.LabelDef,label:r,constraints:i}),a}))}},{key:"matchLabelRef",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==n.regexAccept(String.raw(et||(et=Object(ot.a)(["(?:')"],["(?:\\')"]))),t+1,e)&&null!==(r=n.matchLabel(t+1,e))&&null!==n.regexAccept(String.raw(nt||(nt=Object(ot.a)(["(?:')"],["(?:\\')"]))),t+1,e)&&(i={kind:ct.LabelRef,label:r}),i}))}},{key:"matchLabel",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(rt||(rt=Object(ot.a)(["(?:[0-9a-zA-z-_]+)"]))),t+1,e))&&(i={kind:ct.Label,v:r}),i}))}},{key:"matchDigit",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(it||(it=Object(ot.a)(["(?:[0-9])"]))),t+1,e))&&(i=new da(r)),i}))}},{key:"matchNumber",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(at||(at=Object(ot.a)(["(?:[0-9]+)"]))),t+1,e))&&(i=new ha(r)),i}))}},{key:"test",value:function(){var t=this.mark(),e=null!==this.matchStart(0);return this.reset(t),e}},{key:"parse",value:function(){var t=this.mark(),e=this.matchStart(0);if(e)return{ast:e,errs:[]};this.reset(t);var n=new Sa;this.clearMemos(),this.matchStart(0,n);var r=n.getErr();return{ast:e,errs:null!==r?[r]:[]}}},{key:"mark",value:function(){return this.pos}},{key:"loop",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mark(),r=[];;){var i=t();if(null===i)break;r.push(i)}return e||r.length>0?r:(this.reset(n),null)}},{key:"run",value:function(t,e){var n=this.mark(),r=e();return null!==r?r:(this.reset(n),null)}},{key:"choice",value:function(t){var e,n=Object(la.a)(t);try{for(n.s();!(e=n.n()).done;){var r=(0,e.value)();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"regexAccept",value:function(t,e,n){var r=this;return this.run(e,(function(){var e=new RegExp(t,"y"),i=r.mark();e.lastIndex=i.overallPos;var a=r.tryConsume(e);return n&&n.record(i,a,{kind:"RegexMatch",literal:t.substring(3,t.length-1),negated:r.negating}),a}))}},{key:"tryConsume",value:function(t){var e=t.exec(this.input);if(e){for(var n=0,r=-1,i=0;i<e[0].length;++i)"\n"===e[0][i]&&(++n,r=i);return this.pos={overallPos:t.lastIndex,line:this.pos.line+n,offset:-1===r?this.pos.offset+e[0].length:e[0].length-r-1},e[0]}return null}},{key:"noConsume",value:function(t){var e=this.mark(),n=t();return this.reset(e),n}},{key:"negate",value:function(t){var e=this.mark(),n=this.negating;this.negating=!n;var r=t();return this.negating=n,this.reset(e),null===r||null}},{key:"memoise",value:function(t,e){var n=this.mark(),r=e.get(n.overallPos);if(this.memoSafe&&void 0!==r)return this.reset(r[1]),r[0];var i=t();return this.memoSafe&&e.set(n.overallPos,[i,this.mark()]),i}},{key:"match$EOF",value:function(t){var e=this.finished()?{kind:ct.$EOF}:null;return t&&t.record(this.mark(),e,{kind:"EOF",negated:this.negating}),e}}]),t}();var ba,ja,Oa,va,ya,ga=function(){function t(e,n){Object(fa.a)(this,t),this.pos=void 0,this.expmatches=void 0,this.pos=e,this.expmatches=Object(vt.a)(n)}return Object(pa.a)(t,[{key:"toString",value:function(){return"Syntax Error at line ".concat(this.pos.line,":").concat(this.pos.offset,". Expected one of ").concat(this.expmatches.map((function(t){return"EOF"===t.kind?" EOF":" ".concat(t.negated?"not ":"","'").concat(t.literal,"'")})))}}]),t}(),Sa=function(){function t(){Object(fa.a)(this,t),this.mxpos={overallPos:-1,line:-1,offset:-1},this.regexset=new Set,this.pmatches=[]}return Object(pa.a)(t,[{key:"record",value:function(t,e,n){null===e!==n.negated&&(t.overallPos>this.mxpos.overallPos&&(this.mxpos=t,this.pmatches=[],this.regexset.clear()),this.mxpos.overallPos===t.overallPos&&("RegexMatch"===n.kind?(this.regexset.has(n.literal)||this.pmatches.push(n),this.regexset.add(n.literal)):this.pmatches.push(n)))}},{key:"getErr",value:function(){return-1!==this.mxpos.overallPos?new ga(this.mxpos,this.pmatches):null}}]),t}(),xa=function(t){return Object(lt.pipe)(t,st.o.fromReadonlyArray,st.i.map(Object(lt.flow)(st.o.map(Fa),st.d.fromPredicate((function(t){return t.length>1}),(function(t){return t[0]})))))},ka=function(t){return Object(lt.flow)(xa,st.e.match(st.i.Functor)(lt.identity,(function(e){return{type:t,syntax:e}})),st.i.getOrElse("Conjunction"===t?hi:mi))},wa=function(t){return t.kind===ct.Club?"C":t.kind===ct.Diamond?"D":t.kind===ct.Heart?"H":"S"},Ca=function(t){return t.kind===ct.Notrump?"N":wa(t)},Aa=function(t){return t.kind===ct.Major?"Major":t.kind===ct.Minor?"Minor":t.kind===ct.OtherMajor?"OtherMajor":t.kind===ct.OtherMinor?"OtherMinor":t.kind===ct.Wildcard?"Wildcard":wa(t)},_a=function(t,e){return function(n){return Object(lt.pipe)(e,st.i.of,st.i.filter((function(e){return t.kind===ct.Equals||"min"===n&&t.kind===ct.Plus||"max"===n&&t.kind===ct.Minus})))}},Ra=function(t){return Object(lt.pipe)(t,st.m.map((function(t){return t.constraint})),ka("Conjunction"))},Fa=function t(e){switch(e.kind){case ct.True:return hi();case ct.False:return mi();case ct.And:return Object(lt.pipe)(e.constraints,st.m.map((function(t){return t.constraint})),ka("Conjunction"));case ct.Otherwise:return{type:"Otherwise"};case ct.Or:return Object(lt.pipe)(function t(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.kind===ct.Or?t.apply(void 0,[e.left,e.right].concat(r)):Object(lt.pipe)(r,st.o.fromReadonlyArray,st.i.fold((function(){return[e]}),(function(n){return[e].concat(Object(vt.a)(t.apply(void 0,[n[0]].concat(Object(vt.a)(n.slice(1))))))})))}(e.left,e.right),ka("Disjunction"));case ct.Not:return{type:"Negation",syntax:t(e.constraint)};case ct.OtherBid:return{type:"OtherBid",bid:{level:e.level.value,strain:Ca(e.strain)}};case ct.PointRange:return di({type:"PointRange",min:e.lower.value,max:e.upper.value});case ct.PointBound:return di({type:"PointRange",min:Object(lt.pipe)(_a(e.qualifier,e.value.value)("min"),st.i.getOrElse(Object(lt.constant)(0))),max:Object(lt.pipe)(_a(e.qualifier,e.value.value)("max"),st.i.getOrElse(Object(lt.constant)(37)))});case ct.SuitRange:return{type:"SuitRange",min:e.lower.value,max:e.upper.value,suit:Aa(e.suit)};case ct.SuitComparison:return{type:"SuitComparison",op:e.op.v,left:Aa(e.left),right:Aa(e.right)};case ct.Primary:case ct.Secondary:return{type:"Suit".concat(e.kind),suit:Aa(e.suit)};case ct.SetTrump:return{type:"SetTrump",suit:Aa(e.suit)};case ct.SuitBound:return{type:"SuitRange",min:Object(lt.pipe)(_a(e.qualifier,e.value.value)("min"),st.i.getOrElse(Object(lt.constant)(0))),max:Object(lt.pipe)(_a(e.qualifier,e.value.value)("max"),st.i.getOrElse(Object(lt.constant)(13))),suit:Aa(e.suit)};case ct.SuitHonors:return{type:"SuitHonors",suit:Aa(e.suit),honors:Object(lt.pipe)(e.honors,st.m.fromArray,st.m.traverse(st.i.Applicative)(Object(lt.flow)((function(t){return t.v}),Nt)),st.i.getOrElseW((function(){return[]})))};case ct.SuitTop:return{type:"SuitTop",suit:Aa(e.suit),count:parseInt(e.x),minRank:Mt[Mt.length-parseInt(e.y)]};case ct.AnyShape:return di({type:"AnyShape",counts:Object(lt.pipe)(e.v,st.w.split(""),st.m.map(parseInt))});case ct.SpecificShape:return di({type:"SpecificShape",suits:Object(lt.pipe)(xr,st.p.mapWithIndex((function(t,n){return e[t].value})))});case ct.Relay:return di({type:"Relay",bid:{level:e.bid.level.value,strain:Ca(e.bid.strain)}});case ct.LabelDef:return{type:"LabelDef",name:e.label.v,definition:Ra(e.constraints)};case ct.LabelRef:return{type:"LabelRef",name:e.label.v};case ct.Balanced:case ct.SemiBalanced:case ct.Unbalanced:return{type:e.kind};default:return di({type:e.kind})}},Pa=function(t){switch(t.kind){case ct.ContractBid:return{level:t.level.value,strain:Ca(t.specifier)};case ct.Pass:return"Pass";default:return yt(t)}},Ba=function(t){return new ma(t).parse()};!function(t){t.Start="Start",t.Hand="Hand",t.Suit="Suit",t.Card="Card",t.$EOF="$EOF"}(ya||(ya={}));var Da=function t(e){Object(fa.a)(this,t),this.kind=ya.Card,this.c=void 0,this.rank=void 0,this.c=e,this.rank=["2","3","4","5","6","7","8","9","T","J","Q","K","A"].indexOf(e)+2},Ma=function(){function t(e){Object(fa.a)(this,t),this.input=void 0,this.pos=void 0,this.negating=!1,this.memoSafe=!0,this.pos={overallPos:0,line:1,offset:0},this.input=e}return Object(pa.a)(t,[{key:"reset",value:function(t){this.pos=t}},{key:"finished",value:function(){return this.pos.overallPos===this.input.length}},{key:"clearMemos",value:function(){}},{key:"matchStart",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.matchHand(t+1,e))&&null!==n.match$EOF(e)&&(i={kind:ya.Start,hand:r}),i}))}},{key:"matchHand",value:function(t,e){var n=this;return this.run(t,(function(){var r,i,a,c,u=null;return null!==(r=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(ba||(ba=Object(ot.a)(["(?:.)"],["(?:\\.)"]))),t+1,e)&&null!==(i=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(ja||(ja=Object(ot.a)(["(?:.)"],["(?:\\.)"]))),t+1,e)&&null!==(a=n.matchSuit(t+1,e))&&null!==n.regexAccept(String.raw(Oa||(Oa=Object(ot.a)(["(?:.)"],["(?:\\.)"]))),t+1,e)&&null!==(c=n.matchSuit(t+1,e))&&(u={kind:ya.Hand,S:r,H:i,D:a,C:c}),u}))}},{key:"matchSuit",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.loop((function(){return n.matchCard(t+1,e)}),!0))&&(i={kind:ya.Suit,cards:r}),i}))}},{key:"matchCard",value:function(t,e){var n=this;return this.run(t,(function(){var r,i=null;return null!==(r=n.regexAccept(String.raw(va||(va=Object(ot.a)(["(?:[AKQJT2-9])"]))),t+1,e))&&(i=new Da(r)),i}))}},{key:"test",value:function(){var t=this.mark(),e=null!==this.matchStart(0);return this.reset(t),e}},{key:"parse",value:function(){var t=this.mark(),e=this.matchStart(0);if(e)return{ast:e,errs:[]};this.reset(t);var n=new Ka;this.clearMemos(),this.matchStart(0,n);var r=n.getErr();return{ast:e,errs:null!==r?[r]:[]}}},{key:"mark",value:function(){return this.pos}},{key:"loop",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.mark(),r=[];;){var i=t();if(null===i)break;r.push(i)}return e||r.length>0?r:(this.reset(n),null)}},{key:"run",value:function(t,e){var n=this.mark(),r=e();return null!==r?r:(this.reset(n),null)}},{key:"choice",value:function(t){var e,n=Object(la.a)(t);try{for(n.s();!(e=n.n()).done;){var r=(0,e.value)();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"regexAccept",value:function(t,e,n){var r=this;return this.run(e,(function(){var e=new RegExp(t,"y"),i=r.mark();e.lastIndex=i.overallPos;var a=r.tryConsume(e);return n&&n.record(i,a,{kind:"RegexMatch",literal:t.substring(3,t.length-1),negated:r.negating}),a}))}},{key:"tryConsume",value:function(t){var e=t.exec(this.input);if(e){for(var n=0,r=-1,i=0;i<e[0].length;++i)"\n"===e[0][i]&&(++n,r=i);return this.pos={overallPos:t.lastIndex,line:this.pos.line+n,offset:-1===r?this.pos.offset+e[0].length:e[0].length-r-1},e[0]}return null}},{key:"noConsume",value:function(t){var e=this.mark(),n=t();return this.reset(e),n}},{key:"negate",value:function(t){var e=this.mark(),n=this.negating;this.negating=!n;var r=t();return this.negating=n,this.reset(e),null===r||null}},{key:"memoise",value:function(t,e){var n=this.mark(),r=e.get(n.overallPos);if(this.memoSafe&&void 0!==r)return this.reset(r[1]),r[0];var i=t();return this.memoSafe&&e.set(n.overallPos,[i,this.mark()]),i}},{key:"match$EOF",value:function(t){var e=this.finished()?{kind:ya.$EOF}:null;return t&&t.record(this.mark(),e,{kind:"EOF",negated:this.negating}),e}}]),t}();var Ea,Na,Ia,qa,Ta,La,Ha,Wa,Ua,$a,Ga=function(){function t(e,n){Object(fa.a)(this,t),this.pos=void 0,this.expmatches=void 0,this.pos=e,this.expmatches=Object(vt.a)(n)}return Object(pa.a)(t,[{key:"toString",value:function(){return"Syntax Error at line ".concat(this.pos.line,":").concat(this.pos.offset,". Expected one of ").concat(this.expmatches.map((function(t){return"EOF"===t.kind?" EOF":" ".concat(t.negated?"not ":"","'").concat(t.literal,"'")})))}}]),t}(),Ka=function(){function t(){Object(fa.a)(this,t),this.mxpos={overallPos:-1,line:-1,offset:-1},this.regexset=new Set,this.pmatches=[]}return Object(pa.a)(t,[{key:"record",value:function(t,e,n){null===e!==n.negated&&(t.overallPos>this.mxpos.overallPos&&(this.mxpos=t,this.pmatches=[],this.regexset.clear()),this.mxpos.overallPos===t.overallPos&&("RegexMatch"===n.kind?(this.regexset.has(n.literal)||this.pmatches.push(n),this.regexset.add(n.literal)):this.pmatches.push(n)))}},{key:"getErr",value:function(){return-1!==this.mxpos.overallPos?new Ga(this.mxpos,this.pmatches):null}}]),t}(),Va=function(t){return Object(lt.pipe)(wt,st.m.map(function(t){return function(e){return Object(lt.pipe)(t[e].cards,st.m.map((function(t){return{suit:e,rank:Ft.decode(t.rank).right}})))}}(t)),st.m.flatten,st.q.fromReadonlyArray(It))},za=function(t){return new Ma(t).parse()},Ja={encode:Object(lt.flow)(Wt,st.p.toReadonlyArray,st.m.sort(Lt()),st.m.map(Object(lt.flow)(st.r.snd,st.m.sort(Dt),st.m.reduce("",(function(t,e){return t+Ft.encode(e)})))),st.m.intersperse("."),st.m.foldMap(st.w.Monoid)(lt.identity))},Qa=function(t){return Object(lt.pipe)(t,st.o.fromReadonlyArray,st.i.fold(Object(lt.constant)(ke.a(null,"No syntax errors reported")),st.o.foldMap(sa.getSemigroup())((function(t){var e=Object(ut.a)(t,2),n=e[0],r=e[1];return sa.of(oa.key(n,"required",sa.of(oa.index(r.pos.offset,"required",Object(lt.pipe)(r.expmatches,st.o.fromReadonlyArray,st.i.fold(Object(lt.constant)(sa.of(oa.leaf(n,""))),st.o.foldMapWithIndex(sa.getSemigroup())((function(t,e){return sa.of(oa.leaf(n.substring(r.pos.offset),"EOF"===e.kind?"EOF":"".concat(e.negated?"not ":"","'").concat(e.literal,"'")))}))))))))}))))},Xa=function(t){return st.d.fromNullable(t.errs)(t.ast)},Za=function(t){return Object(lt.pipe)(ke.c,ke.b((function(e){return Object(lt.pipe)(e,t,Xa,st.d.mapLeft(Object(lt.flow)(st.m.map((function(t){return[e,t]})),Qa)))})))},Ya=Object(lt.flow)(Za(Ba).decode,st.d.map((function(t){return function(t){var e;return{bid:Pa(t.bid),syntax:Object(lt.pipe)(null===(e=t.constraints)||void 0===e?void 0:e.constraints,st.i.fromNullable,st.i.fold(mi,Ra))}}(t.spec)}))),tc=Object(lt.flow)(Za(za).decode,st.d.map((function(t){return Va(t.hand)}))),ec=st.w.Eq,nc=Object($e.c)(),rc={system:[],decodedBids:nc.getInitialState()},ic=Object($e.d)({name:"system",initialState:rc,reducers:{setSystem:function(t,e){t.system=Object(lt.pipe)(function(t){var e=st.A.make("ROOT"),n=[e];return t.forEach((function(t){var e=n[t.depth+1]={forest:[],value:t.key};n[t.depth].forest.push(e)})),e.forest}(e.payload),Te.a)},removeConstraintsByBlockKey:function(t,e){nc.removeMany(t.decodedBids,e.payload)},cacheSystemConstraints:function(t,e){nc.setMany(t.decodedBids,Object(lt.pipe)(e.payload,st.o.map((function(t){return{id:t.key,value:Ya(t.text)}}))))}}}),ac=ic.actions,cc=ac.setSystem,uc=ac.removeConstraintsByBlockKey,oc=ac.cacheSystemConstraints,sc=nc.getSelectors(),lc=function(t){return function(e){return Object(lt.pipe)(st.i.fromNullableK(sc.selectById)(t,e),st.i.map((function(t){return t.value})))}},pc=Object(Le.a)((function(t){var e=t.state,n=t.key;return Object(lt.pipe)(n,lc(e.decodedBids),st.i.chain(st.i.fromEither))})),fc=Object(Le.a)((function(t){var e,n=t.state,r=t.key;return Object(lt.pipe)(n.system,(e=ec,function(t){return st.m.findFirstMap(st.A.fold((function(n,r){return e.equals(n,t)?st.i.some([t]):Object(lt.pipe)(r,st.m.findFirstMap(st.i.map(st.m.prepend(n))))})))})(r),st.i.getOrElse((function(){return st.m.zero()})),st.m.filterMap(lc(n.decodedBids)),st.m.sequence(st.d.Applicative))})),dc=Object(Le.a)((function(t){return Object(lt.pipe)(t.system,sr,st.m.filterMap(lc(t.decodedBids)))})),hc=(Object(Le.a)(Object(lt.flow)(dc,st.m.lefts)),Object(Le.a)((function(t){var e,n=t.state,r=t.options;return Object(lt.pipe)(n.system,(e=n.decodedBids,Object(lt.flow)(st.m.filterMap(st.A.traverse(st.i.Applicative)(lc(e))),mr)),st.z.map((null===r||void 0===r?void 0:r.implicitPass)?hr:lt.identity))}))),mc=Object(Le.a)(Object(lt.flow)(hc,st.z.mapLeft(st.m.map((function(t){return{type:"Parse",error:t}}))),br(Object(lt.flow)((function(t){return Object(lt.pipe)(t,dr(xi),st.m.map(Object(lt.flow)(Di,Ei)),st.v.traverseArray(Mi),st.v.evaluate(bi),mr)}),st.z.mapLeft(st.m.map((function(t){return{type:"Syntax",error:t}}))))),br((function(t){return Object(lt.pipe)(t,ua,st.z.bimap((function(t){return st.m.of({type:"Validation",error:t})}),(function(){return t})))})))),bc=Object(Le.a)(Object(lt.flow)(mc,st.z.map(pr))),jc=Object(Le.a)(Object(lt.flow)(bc,st.z.getRightOnly,st.i.chain(st.o.fromReadonlyArray))),Oc=Object(Le.a)(Object(lt.flow)(bc,st.z.getRight,st.i.chain(st.o.fromReadonlyArray))),vc=Object(Le.a)((function(t){return Object(lt.pipe)(st.i.Do,st.i.apS("path",st.i.fromEitherK(fc)(t)),st.i.apS("paths",Object(lt.pipe)(t,mc,st.z.getRight,st.i.map(pr))),st.i.chain((function(t){var e=t.path,n=t.paths;return Object(lt.pipe)(n,st.m.findFirst((function(t){return st.m.getEq(Object(lt.pipe)(ue,st.f.contramap((function(t){return t.bid})))).equals(e,t)})))})))})),yc=Object(lt.flow)(vc,st.i.map(st.o.last)),gc=Object(lt.pipe)(ue,st.m.getEq),Sc=Object(Le.a)((function(t){return Object(lt.pipe)(t,hc,st.z.map(Object(lt.flow)(st.m.map(st.A.map((function(t){return t.bid}))),lr,st.m.toArray,(function(e){return Object(lt.pipe)(t,mc,st.z.getLeft,st.i.getOrElse((function(){return st.m.zero()})),st.m.filterMap((function(t){return"Parse"!==t.type?st.i.some(t):st.i.none})),(function(t){return Object(lt.pipe)(e,st.m.map(st.A.map((function(e){return{bid:Object(lt.pipe)(e,st.o.last),path:e,errors:Object(lt.pipe)(t,st.m.filter((function(t){return gc.equals(t.error.path,e)})))}}))))}))}))))})),xc=Object(Le.a)((function(t){return Object(lt.pipe)(st.i.Do,st.i.apS("errors",Object(lt.pipe)(t,Sc,st.z.getRight)),st.i.apS("sb",pc(t)),st.i.fold((function(){return st.m.empty}),(function(t){var e=t.sb,n=t.errors;return Object(lt.pipe)(n,sr,st.m.filter((function(t){return ue.equals(e.bid,t.bid)})))})))})),kc=ic.reducer,wc=n(4),Cc=dt.a.ol(Ea||(Ea=Object(ot.a)(["\n  padding-left: 0;\n"]))),Ac=dt.a.li(Na||(Na=Object(ot.a)(["\n  list-style-type: none;\n  display: inline;\n  float: left;\n"]))),_c=function(t){var e=t.rank;return Object(wc.jsx)(Ac,{children:_t[e-2]})},Rc=dt.a.ol(Ia||(Ia=Object(ot.a)(["\n  white-space: nowrap;\n  width: 15em;\n  margin: 0;\n  padding-left: 0;\n  list-style: decimal url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7) inside;\n"]))),Fc=dt.a.li(qa||(qa=Object(ot.a)(["\n  display: inline;\n  &::before {\n    display: inline;\n    float: left;\n    margin-left: 5px;\n  }\n  ","\n"])),'\n  &.S::before { content: "\u2660"; color: #0000FF }\n  &.H::before { content: "\u2665"; color: #FF0000 }\n  &.D::before { content: "\u2666"; color: #FFA500 }\n  &.C::before { content: "\u2663"; color: #32CD32 }\n'),Pc=function(t){var e=t.suit,n=t.ranks;return Object(wc.jsx)(Fc,{className:e,children:Object(wc.jsxs)(Cc,{children:[n.map((function(t,e){return Object(wc.jsx)(_c,{rank:t},e)})),0===n.length&&Object(wc.jsx)(Ac,{children:"-"})]})})},Bc=function(t){var e=t.hand,n=Wt(e);return Object(wc.jsx)(Rc,{children:Object(lt.pipe)(n,st.p.mapWithIndex((function(t,e){return Object(wc.jsx)(Pc,{suit:t,ranks:e},t)})),st.p.toReadonlyArray,st.m.sort(Lt()),st.m.map(st.r.snd))})},Dc=dt.a.span(Ta||(Ta=Object(ot.a)(["\n  ",'\n  &.N::before { content: "NT"; color: #000000; font-size: 12px; }\n'])),'\n  &.S::before { content: "\u2660"; color: #0000FF }\n  &.H::before { content: "\u2665"; color: #FF0000 }\n  &.D::before { content: "\u2666"; color: #FFA500 }\n  &.C::before { content: "\u2663"; color: #32CD32 }\n'),Mc=function(t){var e=t.table;return Object(wc.jsxs)("table",{children:[Object(wc.jsx)("thead",{children:Object(wc.jsxs)("tr",{children:[Object(wc.jsx)("th",{}),Jt.map((function(t,e){return Object(wc.jsx)("th",{style:{fontWeight:"normal",verticalAlign:"middle"},children:Object(wc.jsx)(Dc,{className:t})},e)}))]})}),Object(wc.jsx)("tbody",{children:Gt.map((function(t,n){return Object(wc.jsxs)("tr",{children:[Object(wc.jsx)("td",{children:t}),Jt.map((function(n,r){return Object(wc.jsx)("td",{children:Math.round(100*e[n][t])/100},r)}))]},n)}))})]})},Ec=function(t){var e=t.result;return Object(wc.jsxs)("table",{children:[Object(wc.jsx)("thead",{children:Object(wc.jsxs)("tr",{children:[Object(wc.jsx)("th",{}),Jt.map((function(t,e){return Object(wc.jsx)("th",{style:{fontWeight:"normal",verticalAlign:"middle"},children:Object(wc.jsx)(Dc,{className:t})},e)}))]})}),Object(wc.jsx)("tbody",{children:Gt.map((function(t,n){return Object(wc.jsxs)("tr",{children:[Object(wc.jsx)("td",{children:t}),Jt.map((function(n,r){return Object(wc.jsx)("td",{children:e.results[n][t]},r)})),Object(wc.jsx)("td",{children:Object(wc.jsx)(Bc,{hand:Be.reverseGet(e.board.deal)[t]})})]},n)}))})]})},Nc=function(t){var e=t.stats;return Object(wc.jsxs)("div",{children:[Object(wc.jsx)("span",{children:null!==e.count&&Object(wc.jsx)(wc.Fragment,{children:e.count.toString()})}),null!==e.average&&Object(wc.jsxs)("section",{children:[Object(wc.jsx)("h4",{children:"Average"}),null!==e.average&&Object(wc.jsx)(Mc,{table:e.average})]}),null!==e.stdev&&Object(wc.jsxs)("section",{children:[Object(wc.jsx)("h4",{children:"Std. Dev."}),Object(wc.jsx)(Mc,{table:e.stdev})]})]})},Ic=dt.a.span(La||(La=Object(ot.a)(['\n  &.S::after { content: "\u2660"; color: #0000FF; }\n  &.H::after { content: "\u2665"; color: #FF0000; }\n  &.D::after { content: "\u2666"; color: #FFA500; }\n  &.C::after { content: "\u2663"; color: #32CD32; }\n  &.N::after { content: "NT" }\n']))),qc=function(t){var e=t.bid;return Object(wc.jsxs)(wc.Fragment,{children:[Object(wc.jsx)("span",{children:e.level}),Object(wc.jsx)(Ic,{className:e.strain})]})},Tc=function(t){var e=t.bid;return Object(wc.jsx)("span",{children:e})},Lc=function(t){var e=t.bid;return"string"===typeof e?Object(wc.jsx)(Tc,{bid:e}):Object(wc.jsx)(qc,{bid:e})},Hc=function(t){var e=t.path;return Object(wc.jsx)("span",{children:e.map((function(t,e){return Object(wc.jsxs)(pt.Fragment,{children:["\xa0",Object(wc.jsx)(Lc,{bid:t})]},e)}))})},Wc=function(t){var e=t.numerator,n=t.denominator,r=t.decimalPlaces,i=Math.pow(10,null!==r&&void 0!==r?r:0);return Object(wc.jsxs)("span",{children:["1 in ",Math.floor(n/e*i)/i]})},Uc=function(t){var e=t.numerator,n=t.denominator,r=t.decimalPlaces,i=Math.pow(10,null!==r&&void 0!==r?r:0);return Object(wc.jsxs)("span",{children:[Math.floor(e*(100*i)/n)/i,"%"]})},$c=function(t){var e=t.path,n=t.satisfiesCount,r=t.dealCount;return Object(wc.jsxs)(wc.Fragment,{children:[Object(wc.jsx)(Hc,{path:Ie.reverseGet(e)}),Object(wc.jsxs)("span",{children:[n,r&&Object(wc.jsxs)("small",{children:["\xa0(",Object(wc.jsx)(Uc,{numerator:n,denominator:r,decimalPlaces:2}),"\xa0,\xa0or\xa0",Object(wc.jsx)(Wc,{numerator:n,denominator:r}),")"]})]})]})},Gc=dt.a.ul(Ha||(Ha=Object(ot.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  list-style-type: none;\n  padding: 0px;\n  margin: 0px;\n"]))),Kc=dt.a.li(Wa||(Wa=Object(ot.a)(["\n  padding: 0px;\n  margin: 5px;\n"]))),Vc=function(t){var e=t.analysisId,n=bt((function(t){return Object(lt.pipe)(ur({state:t.profile,analysisId:e}),st.i.toNullable)})),r=mt(),i=n?Object(lt.pipe)(n.generations,st.m.foldMap(st.h.MonoidSum)((function(t){return t.dealCount}))):0,a=Object(pt.useCallback)((function(){return r(Yn(e))}),[e,r]),c=Object(pt.useCallback)((function(){return r(tr(e))}),[e,r]),u=Object(pt.useCallback)((function(t){return r(er(e,t))}),[e,r]);return Object(wc.jsx)(wc.Fragment,{children:n&&Object(wc.jsxs)(Kc,{children:[Object(wc.jsx)("input",{type:"text",value:n.name,onChange:function(t){return u(t.target.value)}}),Object(wc.jsxs)("p",{children:["Paths: ",n.paths.length," ",Object(wc.jsx)("br",{}),"Deals: ",i," ",Object(wc.jsxs)("small",{children:["(",n.generations.length," generations)"]}),Object(wc.jsx)("br",{})]}),Object(wc.jsx)("button",{onClick:c,children:"Select"}),Object(wc.jsx)("button",{onClick:a,children:"Remove"})]})})},zc=function(t){var e=t.path,n=t.count,r=t.generationId,i=t.analysisId,a=t.pathHash,c=bt((function(t){return Object(lt.pipe)(or({state:t.profile,analysisId:i,generationId:r}),st.i.toNullable)})),u=Object(lt.pipe)(c,st.i.fromNullable,st.i.chain(Object(lt.flow)(jt("solutionStats"),st.p.lookup(e))),st.i.toNullable),o=Object(lt.pipe)(u,st.i.fromNullable,st.i.map(jt("count")),st.i.chain(st.i.fromPredicate((function(t){return t>0}))),st.i.toNullable),s=Object(pt.useState)(!1),l=Object(ut.a)(s,2),p=l[0],f=l[1],d=mt(),h=Object(pt.useCallback)((function(){return Object(lt.pipe)(function(t,e){return Object(lt.pipe)(sn,st.y.chain((function(t){return st.y.of(t.transaction(["deal","satisfies"],"readonly"))})),st.y.bindTo("tran"),st.y.bind("satisfiedDeals",(function(n){var r=n.tran;return Object(lt.pipe)(st.y.tryCatch((function(){return r.objectStore("satisfies").get([t,e])}),(function(){return"SelectError"})),st.y.map(Object(lt.flow)(st.i.fromNullable,st.i.fold((function(){return[]}),(function(t){return t.deals})))))})),st.y.bind("deals",(function(t){var e=t.tran,n=t.satisfiedDeals;return Object(lt.pipe)(n,st.y.traverseArray(st.y.tryCatchK((function(t){return e.objectStore("deal").get(t.id)}),(function(){return"SelectError"}))),st.y.map(Object(lt.flow)(st.m.map(st.i.fromNullable),st.m.compact,st.m.foldMap(st.p.getUnionMonoid(st.t.first()))((function(t){return Object(oe.a)({},t.deal.id,{deal:t.deal,solution:st.i.fromNullable(t.solution)})})))))})),st.y.chainFirst((function(t){var e=t.tran;return st.y.tryCatch((function(){return e.done}),(function(){return"CommitRejected"}))})),st.y.map((function(t){return t.deals})))}(r,a),st.y.map(Object(lt.flow)(st.p.filter((function(t){return st.i.isNone(t.solution)})),st.p.map((function(t){return t.deal})),st.p.toReadonlyArray,st.m.map(st.r.snd),(function(t){return d(bn({analysisId:i,type:"Solve",parameter:t,context:{generationId:r,bidPath:e},estimatedUnitsInitial:t.length}))}))))()}),[i,d,r,e,a]);return Object(wc.jsx)(wc.Fragment,{children:c&&Object(wc.jsxs)(wc.Fragment,{children:[Object(wc.jsx)($c,{path:e,satisfiesCount:n,dealCount:c.dealCount}),Object(wc.jsxs)("span",{children:[Object(wc.jsx)("button",{onClick:h,children:"Solve"}),u&&o&&Object(wc.jsxs)("span",{children:["(",o," so far)",Object(wc.jsxs)("button",{onClick:function(){return f(!p)},children:[p?"Hide":"Show"," Stats"]}),p&&Object(wc.jsx)(Nc,{stats:u})]})]})]})})},Jc=dt.a.div(Ua||(Ua=Object(ot.a)(["\n  clear: both;\n  display: inline-grid;\n  grid-column-gap: 5px;\n  grid-template-columns: auto auto auto;\n  width: auto;\n"]))),Qc=function(t){var e=t.analysisId,n=t.generationId,r=bt((function(t){return Object(lt.pipe)(or({state:t.profile,analysisId:e,generationId:n}),st.i.toNullable)})),i=Object(pt.useMemo)((function(){return Object(lt.pipe)(r,st.i.fromNullable,st.i.chain(jt("satisfies")),st.i.map(st.p.toReadonlyArray),st.i.toNullable)}),[r]),a=bt((function(t){return Object(lt.pipe)(ur({state:t.profile,analysisId:e}),st.i.map(jt("paths")),st.i.toNullable)})),c=mt(),u=Object(pt.useCallback)((function(){return r&&a&&c(bn({analysisId:e,type:"Satisfies",parameter:a,context:{generationId:r.id},estimatedUnitsInitial:a.length*r.dealCount}))}),[e,c,r,a]),o=Object(pt.useCallback)((function(t){return Object(lt.pipe)(a,st.i.fromNullable,st.i.chain(st.m.findFirst(Object(lt.flow)(st.m.map(jt("bid")),(function(e){return st.m.getEq(ue).equals(e,Ie.reverseGet(t))})))),st.i.map(ge),st.i.toNullable)}),[a]);return Object(wc.jsx)(wc.Fragment,{children:r&&Object(wc.jsxs)(Kc,{children:["Deal Count: ",r.dealCount," ",Object(wc.jsx)("br",{}),null===i&&Object(wc.jsx)("button",{onClick:u,children:"Satisfies"}),null!==i&&Object(wc.jsx)(Jc,{children:i.map((function(t){var r=Object(ut.a)(t,2),i=r[0],a=r[1],c=o(i);return Object(wc.jsx)(pt.Fragment,{children:c&&Object(wc.jsx)(zc,{path:i,pathHash:c,count:a,generationId:n,analysisId:e},i)},i)}))})]})})},Xc=function(){var t=bt((function(t){return Object(lt.pipe)(cr(t.profile),st.i.toNullable)})),e=bt((function(t){return t.settings.generateCount})),n=mt(),r=Object(pt.useCallback)((function(e){t&&n(bn({analysisId:t.id,type:"GenerateDeals",context:{generationId:je.decode(pe.UuidTool.newUuid()).right},parameter:e,estimatedUnitsInitial:e}))}),[t,n]);return Object(wc.jsx)(wc.Fragment,{children:t&&Object(wc.jsxs)("div",{children:[Object(wc.jsx)("h4",{children:t.name}),Object(wc.jsx)(Gc,{children:t.generations.map((function(e){return Object(wc.jsx)(Qc,{analysisId:t.id,generationId:e.id},e.id)}))}),Object(wc.jsx)("button",{onClick:function(){return r(e)},children:"Generate Deals"})]})})},Zc=function(){var t=bt((function(t){return ar(t.profile)})),e=mt(),n=Object(pt.useCallback)((function(t){return e(Zn(t))}),[e]),r=bt((function(t){return Object(lt.pipe)(Oc({state:t.system,options:t.settings}),st.i.toNullable)}));return Object(wc.jsxs)("section",{children:[Object(wc.jsx)("h3",{children:"Analyses"}),Object(wc.jsx)(Gc,{children:t.map((function(t){return Object(wc.jsx)(Vc,{analysisId:t.id},t.id)}))}),r&&Object(wc.jsx)("button",{onClick:function(){return n(r)},children:"Create"}),Object(wc.jsx)(Xc,{})]})},Yc=(n(502),n(81)),tu=n(203),eu=n(7),nu=n.n(eu);!function(t){var e=nu.a.mark(n);function n(t,n){return nu.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t;case 3:return e.next=5,n;case 5:e.next=0;break;case 7:case"end":return e.stop()}}),e)}t.alternate=n;var r=t.unfold=function(t){return function(e){var n=e.next();return n.done||0===t?[]:[n.value].concat(Object(vt.a)(r(t-1)(e)))}}}($a||($a={}));var ru,iu,au,cu,uu,ou=function(t){return Object(lt.pipe)(t,st.v.bindTo("constraint"),st.v.apS("force",st.v.gets(ii.getOption)),st.v.apS("bid",st.v.gets(Yr.get)),st.v.map((function(t){return Object(lt.pipe)(t.force,st.i.chain(st.i.fromPredicate((function(e){return"Constant"===t.constraint.type&&!t.constraint.value&&"Relay"===e.type&&ue.equals(e.bid,t.bid)}))),st.i.fold((function(){return t.constraint}),Ar))})))},su=Object(lt.pipe)(st.v.sequenceArray([Object(lt.pipe)(st.v.gets(ni.get),st.v.chain(Object(lt.flow)(Qr(Wr),ni.set,st.v.modify))),Object(lt.pipe)(st.v.gets(ri.get),st.v.chain(Object(lt.flow)(Qr(Ur),ri.set,st.v.modify)))]),st.v.map(lt.constVoid)),lu=function(t,e){return function(n){return Object(lt.pipe)($a.alternate(t,e),$a.unfold(n.length),st.m.zip(n),st.v.traverseArray((function(t){var e=Object(ut.a)(t,2),n=e[0],r=e[1];return Object(lt.pipe)(oi(r.constraint),st.v.chainFirst((function(){return st.v.modify(Yr.set(r.bid))})),ou,li,st.v.flap(n),st.v.apFirst(su),st.v.apFirst(st.v.modify(ti.modify(st.m.prepend(r.bid)))))})),st.v.map(st.m.foldMap(st.c.MonoidAll)(lt.identity)),st.v.evaluate(Xr))}},pu={selectedBlockKey:st.i.none},fu=function(t){return function(e){var n=Object(ut.a)(e,2),r=n[0],i=n[1];t.opener=Object(lt.pipe)(r,st.d.right,Ae.get,Te.a),t.responder=Object(lt.pipe)(i,st.d.right,Ae.get,Te.a)}},du=Object($e.b)("abc",(function(t,e){var n=t.opener,r=t.responder,i=e.rejectWithValue;return Object(lt.pipe)(function(t,e){return Object(lt.pipe)($t(),st.m.difference(It)(Object(lt.pipe)(t,st.q.toReadonlyArray(qt))),st.m.difference(It)(Object(lt.pipe)(e,st.q.toReadonlyArray(qt))),st.m.chunksOf(13),st.m.map(st.q.fromReadonlyArray(It)),(function(n){var r=Object(ut.a)(n,2),i=r[0],a=r[1];return{dealer:"N",deal:{N:t,S:e,E:i,W:a}}}))}(Ce.reverseGet(n),Ce.reverseGet(r)).deal,Be.get,st.m.of,dn,qe.b.map(Object(lt.flow)(st.p.toReadonlyArray,st.m.map(st.r.snd),(function(t){return t[0]}))),qe.a.map(st.d.getOrElseW(i)),qe.a.toTask)()})),hu=function(t){return function(e){return Object(tu.tailRec)(t,(function(t){if(Object(lt.pipe)(t,st.i.fold(lt.constFalse,(function(t){return 0===t}))))return st.d.right(st.i.none);var n,r=(n=$t(),Object(lt.pipe)(Gt,st.o.zip(st.o.chunksOf(13)(n)),st.o.groupBy(st.r.fst),st.p.map(Object(lt.flow)(st.o.head,st.r.snd,st.q.fromReadonlyArray(It))),(function(t){return t}))),i=[r.N,r.S];return e(i)?st.d.right(st.i.some(i)):st.d.left(Object(lt.pipe)(t,st.i.map((function(t){return t-1}))))}))}},mu=function(t){return function(e){return hu(st.i.some(1e4))((function(n){return Object(lt.pipe)(e,st.m.partition(lu.apply(void 0,Object(vt.a)(n))),st.u.right,(function(e){return t(e.length)}))}))}},bu=Object($e.d)({name:"selection",initialState:pu,reducers:{setSelectedBlockKey:function(t,e){t.selectedBlockKey=e.payload},setHand:{reducer:function(t,e){t[e.meta]=Object(lt.pipe)(e.payload,tc,Ae.get,Te.a)},prepare:function(t,e){return{payload:t,meta:e}}},genOnce:function(t){Object(lt.pipe)(hu(st.i.none)(lt.constTrue),st.i.map(fu(t)))},getHandsMatchingPath:function(t,e){Object(lt.pipe)(hu(st.i.some(1e4))((function(t){return lu.apply(void 0,Object(vt.a)(t))(e.payload)})),st.i.map(fu(t)))},genHandsNotMatchingAnyOf:{reducer:function(t,e){Object(lt.pipe)(hu(st.i.some(1e4))((function(t){return Or(t[0])>=e.meta&&Object(lt.pipe)(e.payload,st.m.every(st.l.not(lu.apply(void 0,Object(vt.a)(t)))))})),st.i.map(fu(t)))},prepare:function(t,e){return{payload:t,meta:e}}},genHandsMatchingExactlyOneOf:function(t,e){Object(lt.pipe)(mu((function(t){return 1===t}))(e.payload),st.i.map(fu(t)))},genHandsMatchingMoreThanOneOf:function(t,e){Object(lt.pipe)(mu((function(t){return t>1}))(e.payload),st.i.map(fu(t)))}},extraReducers:function(t){return t.addCase(du.fulfilled,(function(t,e){t.result=Object(lt.pipe)(e.payload,Te.a)}))}}),ju=bu.actions,Ou=ju.setSelectedBlockKey,vu=ju.setHand,yu=ju.genOnce,gu=ju.getHandsMatchingPath,Su=ju.genHandsNotMatchingAnyOf,xu=ju.genHandsMatchingExactlyOneOf,ku=ju.genHandsMatchingMoreThanOneOf,wu=bu.reducer,Cu=Object(Le.a)((function(t){return Object(lt.pipe)(t.selectedBlockKey,st.i.toNullable)})),Au=Object(Le.a)((function(t){var e=t.state,n=t.type;return Object(lt.pipe)(e[n],st.i.fromNullable,st.i.chain(Object(lt.flow)(Ae.reverseGet,st.i.fromEither)))})),_u=dt.a.div(ru||(ru=Object(ot.a)(["\n  font-family: Cascadia Code, Consolas, monospace;\n  font-size: 0.8em;\n"]))),Ru=function(t){return{key:t.getKey(),text:t.getText(),depth:t.getDepth()}},Fu=st.g.concatAll(st.f.getMonoid())([st.f.contramap((function(t){return t.getKey()}))(st.w.Eq),st.f.contramap((function(t){return t.getText()}))(st.w.Eq)]),Pu=function(t){return Object(lt.pipe)(t.getCurrentContent().getBlocksAsArray(),st.q.fromReadonlyArray(Fu))},Bu=function(){var t=Object(pt.useState)((function(){return Yc.EditorState.createEmpty()})),e=Object(ut.a)(t,2),n=e[0],r=e[1],i=Object(pt.useState)((function(){return Pu(n)})),a=Object(ut.a)(i,2),c=a[0],u=a[1],o=mt(),s=bt((function(t){return Cu(t.selection)})),l=Object(pt.useCallback)((function(t){r(t),setTimeout((function(){return localStorage.setItem("editor",JSON.stringify(Object(Yc.convertToRaw)(t.getCurrentContent())))}),0);var e=Pu(t),n=st.q.intersection(Fu)(c,e),i=st.q.difference(Fu)(c,n),a=st.q.difference(Fu)(e,n);u(e),st.q.isEmpty(st.g.concatAll(st.q.getUnionMonoid(Fu))([i,a]))||(o(Object(lt.pipe)(e,st.q.toReadonlyArray(st.k.trivial),st.m.map(Ru),cc)),Object(lt.pipe)(i,st.q.toReadonlyArray(st.k.trivial),st.o.fromReadonlyArray,st.i.map(Object(lt.flow)(st.o.map((function(t){return t.getKey()})),(function(t){return o(uc(t))})))),Object(lt.pipe)(a,st.q.toReadonlyArray(st.k.trivial),st.o.fromReadonlyArray,st.i.map(Object(lt.flow)(st.o.map(Ru),(function(t){return o(oc(t))})))));var l=t.getSelection().getFocusKey();l!==s&&o(Ou(st.i.some(l)))}),[c,o,s]);return Object(pt.useEffect)((function(){var t=localStorage.getItem("editor");r(t?function(){return Yc.EditorState.createWithContent(Object(Yc.convertFromRaw)(JSON.parse(t)))}:function(){return Yc.RichUtils.toggleBlockType(n,"unordered-list-item")})}),[]),Object(wc.jsx)(_u,{children:Object(wc.jsx)(Yc.Editor,{editorState:n,onChange:l,keyBindingFn:function(t){if(9===t.keyCode){var e=Yc.RichUtils.onTab(t,n,10);return e!==n&&l(e),null}return Object(Yc.getDefaultKeyBinding)(t)}})})},Du=n(167),Mu=dt.a.div(iu||(iu=Object(ot.a)(["\n  clear: both;\n  display: inline-grid;\n  grid-template-columns: auto auto;\n  width: auto;\n"]))),Eu=function(t){var e=t.error;return Object(wc.jsxs)("span",{children:[e.syntax.type,": ",e.reason]})},Nu=function(t){var e=t.error;switch(e.type){case"BidsOutOfOrder":return Object(wc.jsxs)("span",{children:["Bids ",Object(wc.jsx)(Lc,{bid:e.left.bid})," and ",Object(wc.jsx)(Lc,{bid:e.right.bid})," out of order"]});case"NoPrimarySuitDefined":return Object(wc.jsxs)("span",{children:["No primary suit defined for secondary suit ",e.constraint.suit]});case"PrimarySuitAlreadyDefined":return Object(wc.jsx)("span",{children:"Primary suit has already been defined"});case"SamePrimaryAndSecondarySuit":return Object(wc.jsx)("span",{children:"Primary and secondary suits cannot be the same"});case"TrumpSuitAlreadyDefined":return Object(wc.jsx)("span",{children:"Trump suit has already been defined"});case"NoBidDefinedButStillForcing":return Object(wc.jsx)("span",{children:"Bid is forcing, but no response is defined"});case"PassWhileForcing":return Object(wc.jsx)("span",{children:"Previous bid is forcing, but a pass was bid"});case"SuitRangeInvalid":return Object(wc.jsxs)("span",{children:["Suit ",e.constraint.suit," range ",e.constraint.min,", ",e.constraint.max," is invalid"]});case"PointRangeInvalid":return Object(wc.jsxs)("span",{children:["Point range ",e.constraint.min,", ",e.constraint.max," is invalid "]});case"SpecificShapeInvalid":return Object(wc.jsxs)("span",{children:["Specific shape ",e.constraint.suits.S,e.constraint.suits.H,e.constraint.suits.D,e.constraint.suits.C," is invalid"]});case"AnyShapeInvalid":return Object(wc.jsxs)("span",{children:["Shape ",Object(lt.pipe)(e.constraint.counts,st.m.reduce("",(function(t,e){return t+e})))," is invalid"]});case"IllegalContextModification":return Object(wc.jsx)("span",{children:"Cannot modify the context under a disjunction or negation"});default:return yt(e)}},Iu=function(t){t.bid;var e=t.errors;return Object(wc.jsxs)("div",{children:[e.map((function(t,e){switch(t.type){case"Syntax":return Object(wc.jsx)(Eu,{error:t.error},e);case"Validation":return Object(wc.jsx)(Nu,{error:t.error},e);default:return yt(t)}})),0===e.length&&"none"]})},qu=function(t){var e=t.errors;return Object(wc.jsx)(Mu,{children:e.map((function(t){var e=t.bid,n=t.path,r=t.errors;return Object(wc.jsxs)(pt.Fragment,{children:[Object(wc.jsx)(Hc,{path:n}),Object(wc.jsx)(Iu,{bid:e,errors:r})]},Ie.get(n))}))})},Tu=function(t){var e=t.forest,n=Object(pt.useMemo)((function(){return Object(lt.pipe)(e,st.m.chain(st.A.foldMap(st.m.getMonoid())(st.m.of)))}),[e]);return Object(wc.jsx)(qu,{errors:n})},Lu=function(){var t=bt((function(t){return Object(lt.pipe)(jc({state:t.system,options:t.settings}),st.i.isSome)})),e=bt((function(t){return Sc({state:t.system,options:t.settings})}));return Object(wc.jsxs)("section",{children:[Object(wc.jsx)("h3",{children:"Errors"}),t?"None":Object(wc.jsxs)(wc.Fragment,{children:[st.z.isLeft(e)&&Object(wc.jsxs)("div",{children:[Object(wc.jsx)("h4",{children:"Parse Errors"}),Object(wc.jsx)("ul",{children:e.left.map((function(t,e){return Object(wc.jsx)("li",{children:Object(wc.jsx)("pre",{children:Object(Du.draw)(t)})},e)}))})]}),st.z.isRight(e)&&Object(wc.jsxs)("div",{children:[Object(wc.jsx)("h4",{children:"Semantic Errors"}),Object(wc.jsx)(Tu,{forest:e.right})]})]})]})},Hu=n(313),Wu=function(t){var e=t.date,n=e?"number"===typeof e?e:"Some"===e._tag?e.value:null:null;return Object(wc.jsx)(wc.Fragment,{children:n&&Object(wc.jsx)(Hu.a,{date:new Date(n)})})},Uu=dt.a.ul(au||(au=Object(ot.a)(["\n  display: flex;\n  flex-flow: row wrap;\n  list-style-type: none;\n  padding: 0px;\n  margin: 0px;\n"]))),$u=dt.a.li(cu||(cu=Object(ot.a)(["\n  padding: 0px;\n  margin: 5px;\n"]))),Gu=function(t){var e=t.progress,n=t.unitsInitial,r=t.start,i=Object(pt.useMemo)((function(){return Object(lt.pipe)(e,function(t){return function(e){return Object(lt.pipe)(e.speed,st.i.map((function(n){return n*(t-e.unitsDone)})))}}(n),st.i.map((function(t){return de()+t})),st.i.chain(Object(lt.flow)(fe.decode,st.i.fromEither)),st.i.toNullable)}),[e,n]);return Object(wc.jsxs)("p",{children:["Started: ",Object(wc.jsx)(Wu,{date:r}),Object(wc.jsx)("br",{}),"Last Updated: ",Object(wc.jsx)(Wu,{date:e.updateDate})," ",Object(wc.jsx)("br",{}),"Progress: ",n-e.unitsDone," units remaining (",Math.floor(100*e.unitsDone/n),"%) ",Object(wc.jsx)("br",{}),"Est. Completion: ",Object(wc.jsx)(Wu,{date:i})]})},Ku=function(t){var e=t.job,n=Object(lt.pipe)(e,he,st.i.toNullable),r=Object(lt.pipe)(e,jt("startDate"),st.i.toNullable),i=mt(),a=Object(pt.useCallback)((function(){return e&&i(vn(e.id))}),[i,e]),c=Object(pt.useCallback)((function(){return e&&i(jn({jobId:e.id,type:e.type.type}))}),[i,e]);return Object(wc.jsx)(wc.Fragment,{children:e&&Object(wc.jsxs)($u,{children:[Object(wc.jsx)("h5",{children:e.type.type}),!n&&Object(wc.jsxs)("p",{children:["Estimated Units: ",e.unitsInitial," ",Object(wc.jsx)("br",{}),Object(wc.jsx)("button",{onClick:c,children:"Start"}),Object(wc.jsx)("button",{onClick:a,children:"Remove"})]}),n&&r&&Object(wc.jsx)(Gu,{progress:n,unitsInitial:e.unitsInitial,start:r})]})})},Vu=function(){var t=bt((function(t){return t.generator.jobs}));return Object(wc.jsxs)("section",{children:[Object(wc.jsx)("h3",{children:"Jobs"}),Object(wc.jsx)(Uu,{children:t.map((function(t){return Object(wc.jsx)(Ku,{job:t},t.id)}))})]})},zu=n(205),Ju=n.n(zu),Qu=function(){var t=bt((function(t){return t.selection.selectedBlockKey})),e=bt((function(e){return Object(lt.pipe)(t,st.i.chain((function(t){return pc({state:e.system,key:t})})),st.i.toNullable)})),n=bt((function(e){return Object(lt.pipe)(t,st.i.chain((function(t){return yc({state:e.system,key:t})})),st.i.toNullable)})),r=bt((function(e){return Object(lt.pipe)(t,st.i.fold((function(){return st.m.empty}),(function(t){return xc({state:e.system,key:t})})))}));return Object(wc.jsx)("section",{children:t&&Object(wc.jsxs)("div",{children:[Object(wc.jsx)("h3",{children:"Selection"}),r&&Object(wc.jsxs)("div",{children:[Object(wc.jsx)("h4",{children:"Errors"}),Object(wc.jsx)(qu,{errors:r})]}),e&&Object(wc.jsxs)("div",{children:[Object(wc.jsx)("h4",{children:"Syntax"}),Object(wc.jsx)(Ju.a,{data:e})]}),n&&Object(wc.jsxs)("div",{children:[Object(wc.jsx)("h4",{children:"Constraint"}),Object(wc.jsx)(Ju.a,{data:n})]})]})})},Xu=Object($e.d)({name:"settings",initialState:{implicitPass:!1,generateCount:1e4},reducers:{setInitial:function(t,e){Object(lt.pipe)(Object.keys(e.payload),st.m.map((function(n){return t[n]=e.payload[n]})))},setProperty:{reducer:function(t,e){t[e.meta]=e.payload},prepare:function(t,e){return{payload:e,meta:t}}}}}),Zu=Xu.actions,Yu=Zu.setProperty,to=Zu.setInitial,eo=Xu.reducer,no=function(t){var e=t.label,n=t.prop,r=t.parse,i=t.onChanged,a=t.children,c=bt((function(t){return t.settings[n]})),u=mt(),o=Object(pt.useCallback)((function(t){u(Yu(n,t)),i&&i(t)}),[u,i,n]);return Object(wc.jsxs)("p",{children:[Object(wc.jsx)("span",{children:null!==e&&void 0!==e?e:n}),Object(wc.jsx)("span",{children:a?a({value:c,onChange:Object(lt.flow)(r,o,lt.constVoid)}):Object(wc.jsx)("input",{type:"text",value:c.toString(),onChange:function(t){return Object(lt.pipe)(t.target.value,r,o)},style:{width:"100px"}})})]})},ro="settings",io=function(){var t=bt((function(t){return t.settings})),e=mt();Object(pt.useEffect)((function(){var t=localStorage.getItem(ro);if(null!==t){var n=JSON.parse(t);e(to(n))}}),[e]);var n=Object(pt.useCallback)((function(e,n){var r=Object(Ot.a)(Object(Ot.a)({},t),{},Object(oe.a)({},e,n));localStorage.setItem(ro,JSON.stringify(r))}),[t]),r=Object(pt.useCallback)((function(){return Object(lt.pipe)(on,st.y.map((function(){return window.location.reload()})))()}),[]);return Object(wc.jsxs)(wc.Fragment,{children:[Object(wc.jsx)("section",{children:Object(wc.jsx)("button",{onClick:r,children:"Reset Analysis DB"})}),Object(wc.jsxs)("section",{children:[Object(wc.jsx)(no,{label:"Implicit Pass",prop:"implicitPass",parse:function(t){return"true"===t},onChanged:function(t){return n("implicitPass",t)},children:function(t){var e=t.value,n=t.onChange;return Object(wc.jsx)("input",{type:"checkbox",checked:e,onChange:function(t){return n(t.target.checked.toString())}})}}),Object(wc.jsx)(no,{label:"Generate Count",prop:"generateCount",parse:parseInt,onChanged:function(t){return n("generateCount",t)}})]})]})},ao={system:kc,selection:wu,generator:xn,settings:eo,profile:rr},co=n(609).a.apply(void 0,Object(vt.a)(An).concat(Object(vt.a)(ir))),uo=Object(Le.a)((function(t){return Object(lt.pipe)(st.i.Do,st.i.apS("opener",Au({state:t.selection,type:"opener"})),st.i.apS("responder",Au({state:t.selection,type:"responder"})),st.i.apS("paths",Object(lt.pipe)(Oc({state:t.system,options:t.settings}))),st.i.map((function(t){return Object(lt.pipe)(t.paths,st.m.map((function(e){return{path:e,result:lu(t.opener,t.responder)(e)}})))})),st.i.toNullable)})),oo=function(t){var e=t.value,n=t.children,r=t.onNone;return Object(lt.pipe)(e,st.i.fold((function(){return r?r():Object(wc.jsx)(wc.Fragment,{})}),n))},so=function(){var t=mt();return Object(wc.jsx)("button",{type:"button",onClick:function(){return t(yu())},children:"Random"})},lo=function(t){var e=t.bidPaths,n=mt(),r=Object(pt.useState)(11),i=Object(ut.a)(r,2),a=i[0],c=i[1];return Object(wc.jsx)(wc.Fragment,{children:e&&Object(wc.jsxs)("span",{children:[Object(wc.jsx)("button",{type:"button",onClick:function(){return n(Su(e,a))},children:"Zero"}),"Min HCP",Object(wc.jsx)("input",{type:"number",style:{width:50},value:a,onChange:function(t){return c(parseInt(t.target.value))}})]})})},po=function(t){var e=t.bidPaths,n=mt();return Object(wc.jsx)(wc.Fragment,{children:e&&Object(wc.jsx)("span",{children:Object(wc.jsx)("button",{type:"button",onClick:function(){return n(xu(e))},children:"One"})})})},fo=function(t){var e=t.bidPaths,n=mt();return Object(wc.jsx)(wc.Fragment,{children:e&&Object(wc.jsx)("span",{children:Object(wc.jsx)("button",{type:"button",onClick:function(){return n(ku(e))},children:"Many"})})})},ho=function(){var t=bt((function(t){return t.selection.selectedBlockKey})),e=bt((function(e){return Object(lt.pipe)(t,st.i.chain((function(t){return vc({state:e.system,key:t})})),st.i.toNullable)})),n=mt();return Object(wc.jsx)(wc.Fragment,{children:e&&Object(wc.jsx)("button",{type:"button",onClick:function(){return n(gu(e))},children:"Selected"})})},mo=function(){var t=bt((function(t){return Object(lt.pipe)(Oc({state:t.system,options:t.settings}),st.i.toNullable)}));return Object(wc.jsxs)("section",{children:[Object(wc.jsx)("h4",{children:"Generate Hands"}),Object(wc.jsx)(so,{}),Object(wc.jsx)(ho,{}),Object(wc.jsx)(lo,{bidPaths:t}),Object(wc.jsx)(po,{bidPaths:t}),Object(wc.jsx)(fo,{bidPaths:t})]})},bo=function(t){var e=t.type,n=mt(),r=Object(pt.useState)(""),i=Object(ut.a)(r,2),a=i[0],c=i[1],u="hand.".concat(e),o=bt((function(t){return Object(lt.pipe)(Au({state:t.selection,type:e}),st.i.map(Ja.encode),st.i.toNullable)})),s=Object(pt.useCallback)((function(t){c(t),n(vu(t,e))}),[n,e]);return Object(pt.useEffect)((function(){var t=localStorage.getItem(u);t&&s(t)}),[s,u,e]),Object(wc.jsx)("input",{type:"text",placeholder:"AKQJ.T987.654.32",value:null!==o&&void 0!==o?o:a,onChange:function(t){return s(t.target.value)},onBlur:function(){return localStorage.setItem(u,a)}})},jo=dt.a.th(uu||(uu=Object(ot.a)(["\n  width: 15em;\n"]))),Oo=function(){var t=mt(),e=[bt((function(t){return Au({state:t.selection,type:"opener"})})),bt((function(t){return Au({state:t.selection,type:"responder"})}))],n=e[0],r=e[1],i=Object(pt.useCallback)((function(){return Object(lt.pipe)(st.i.Do,st.i.apS("opener",n),st.i.apS("responder",r),st.i.map(Object(lt.flow)(st.p.map(Ce.get),du,t)),lt.constVoid)}),[t,n,r]),a=bt((function(t){return t.selection.result}));return Object(wc.jsxs)(wc.Fragment,{children:[Object(wc.jsxs)("table",{children:[Object(wc.jsx)("thead",{children:Object(wc.jsxs)("tr",{children:[Object(wc.jsx)(jo,{children:"Opener"}),Object(wc.jsx)(jo,{children:"Responder"})]})}),Object(wc.jsxs)("tbody",{children:[Object(wc.jsxs)("tr",{children:[Object(wc.jsx)("td",{children:Object(wc.jsx)(bo,{type:"opener"})}),Object(wc.jsx)("td",{children:Object(wc.jsx)(bo,{type:"responder"})})]}),Object(wc.jsxs)("tr",{children:[Object(wc.jsx)("td",{children:Object(wc.jsx)(oo,{value:n,children:function(t){return Object(wc.jsx)(Bc,{hand:t})}})}),Object(wc.jsx)("td",{children:Object(wc.jsx)(oo,{value:r,children:function(t){return Object(wc.jsx)(Bc,{hand:t})}})})]})]})]}),Object(wc.jsx)(mo,{}),Object(wc.jsxs)("p",{children:[Object(wc.jsx)("button",{type:"button",onClick:i,children:"Solution"}),a&&Object(wc.jsx)(Ec,{result:a})]})]})},vo=function(){var t=bt(uo);return Object(wc.jsxs)("section",{children:[Object(wc.jsx)("h3",{children:"Test Hands"}),Object(wc.jsx)(Oo,{}),null!==t&&Object(wc.jsxs)("div",{children:[Object(wc.jsx)("h4",{children:"Results"}),Object(wc.jsx)("ul",{children:t.map((function(t,e){return Object(wc.jsxs)("li",{children:[Object(wc.jsx)(Hc,{path:t.path.map((function(t){return t.bid}))}),": \xa0",Object(wc.jsx)("span",{children:t.result.toString()})]},e)}))})]})]})},yo=function(){return Object(wc.jsxs)("div",{className:"App",children:[Object(wc.jsxs)("div",{style:{display:"inline-block",width:"50%"},children:[Object(wc.jsx)("div",{style:{float:"left"},children:Object(wc.jsx)(Bu,{})}),Object(wc.jsx)("div",{style:{float:"right",width:"300px"},children:Object(wc.jsx)(io,{})}),Object(wc.jsxs)("div",{style:{clear:"both"},children:[Object(wc.jsx)(Lu,{}),Object(wc.jsx)(Vu,{}),Object(wc.jsx)(Zc,{})]})]}),Object(wc.jsxs)("div",{style:{display:"inline-block",width:"50%",float:"right"},children:[Object(wc.jsxs)("div",{style:{display:"inline-block",float:"right"},children:[Object(wc.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/kdblocher/bridge#documentation",children:"Documentation"}),"\xa0|\xa0",Object(wc.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/kdblocher/bridge/discussions",children:"Share ideas"}),"\xa0|\xa0",Object(wc.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/kdblocher/bridge/issues/new",children:"Report issue"})]}),Object(wc.jsx)(vo,{}),Object(wc.jsx)(Qu,{})]})]})},go=n(120),So=n.n(go),xo=n(610),ko=Object(xo.a)(),wo=Object($e.a)({reducer:ao,middleware:function(t){return[].concat(Object(vt.a)(t()),[ko])}});ko.run(co),So.a.render(Object(wc.jsx)(ft.a.StrictMode,{children:Object(wc.jsx)(ht.a,{store:wo,children:Object(wc.jsx)(yo,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[602,1,2]]]);
//# sourceMappingURL=main.2cc06ab1.chunk.js.map